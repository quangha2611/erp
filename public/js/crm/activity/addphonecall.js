$(function(){$('#reasonId').multiselect();$('#calendar_beginDateTime, #calendar_endDateTime').each(function(){var option={format:'DD/MM/YYYY hh:mm A',startDate:moment(),endDate:moment(),showDropdowns:true,timePicker:true,timePickerIncrement:15,opens:'left',singleDatePicker:true};$(this).daterangepicker(option)});if($('#status').val()==statusFailed){$('#reasonId').closest('.form-group').addClass('hide-element');$('#result').closest('.form-group').addClass('hide-element');$('#duration').closest('.form-group').addClass('hide-element');$('#fileUpload').closest('.form-group').addClass('hide-element');}else if($('#status').val()==statusSuccess){$('#result').closest('.form-group').removeClass('hide-element');$('#duration').closest('.form-group').removeClass('hide-element');$('#fileUpload').closest('.form-group').removeClass('hide-element');switch($('#result').val()){case resultReject:$('#reasonId').closest('.form-group').removeClass('hide-element');break;case resultMeeting:case resultPhonecall:case resultEmail:case resultSuccess:case resultRequest:case resultChangeMeeting:$('#reasonId').closest('.form-group').addClass('hide-element');break;default:$('#reasonId').closest('.form-group').addClass('hide-element');break;}}
$('#createCalendar').on('change',function(){if($(this).is(':checked')){$('#groupCalendar').removeClass('hide-element');}else{$('#groupCalendar').addClass('hide-element');}});$('#status').on('change',function(){$('#reasonId').multiselect('deselectAll',false);$('#reasonId').multiselect('updateButtonText');if($(this).val()==statusFailed){$('#reasonId').closest('.form-group').addClass('hide-element');$('#result').closest('.form-group').addClass('hide-element');$('#duration').closest('.form-group').addClass('hide-element');$('#fileUpload').closest('.form-group').addClass('hide-element');}else{$('#result').closest('.form-group').removeClass('hide-element');$('#duration').closest('.form-group').removeClass('hide-element');$('#fileUpload').closest('.form-group').removeClass('hide-element');$('#result').val('');}});$('#result').on('change',function(){$('#reasonId').multiselect('deselectAll',false);$('#reasonId').multiselect('updateButtonText');$('#calendar_title').val('');switch($(this).val()){case resultReject:$('#reasonId').closest('.form-group').removeClass('hide-element');break;case resultMeeting:$('#calendar_title').val(titleMeeting);$('#reasonId').closest('.form-group').addClass('hide-element');break;case resultPhonecall:$('#calendar_title').val(titlePhonecall);$('#reasonId').closest('.form-group').addClass('hide-element');break;case resultEmail:$('#calendar_title').val(titleEmail);$('#reasonId').closest('.form-group').addClass('hide-element');break;case resultSuccess:case resultRequest:case resultChangeMeeting:$('#reasonId').closest('.form-group').addClass('hide-element');break;default:$('#reasonId').closest('.form-group').addClass('hide-element');break;}});$('#tag-input').autocomplete({source:function(request,response){$.post('/system/user/suggest',{'q':request.term,},function(rs){if(rs.code){response(rs.data);}else{response([]);}});},minLength:2,select:function(event,ui){event.preventDefault()
addUser(ui.item)},close:function(){$('#tag-input').val('');}});$('#calendar_user_input').on('click','span[data-role="remove"]',function(){$(this).parent().remove();var userIds=[];$('#calendar_user_input span.tag').each(function(){userIds.push($(this).attr('idref'));});$('#calendar_userIds').val(userIds.join(','));});$('#updateLevelCustomer').on('change',function(){if($(this).is(':checked')){$('#levelGroup').show();}else{$('#levelGroup').hide();}})});function addUser(item){if(!$('#calendar_user_input').find('span[idref="'+item.id+'"]').length){var tag=$('<span/>').addClass('tag label label-info').attr('idref',item.id).text(item.username).append($('<span>').attr('data-role','remove'));$('#tag-input').before(tag);var userIds=[];$('#calendar_user_input span.tag').each(function(){userIds.push($(this).attr('idref'));});$('#calendar_userIds').val(userIds.join(','));}
$('#tag-input').autocomplete('close');$('#tag-input').val('');}
$(function(){ActivityListController.init();});var ActivityListController={'init':function(){if(!$('#errorModal').length){$('body').append(this.errorModal);}
$('#activity-section .viewDetail').on('click',function(){$(this).closest('li').find('.well').toggle();});},};