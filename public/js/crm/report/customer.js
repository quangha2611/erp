$(function(){Department.load('#companyId','#departmentId','crm.managerCompany');$('#productId').multiselect({enableCaseInsensitiveFiltering:true,nonSelectedText:'Sản phẩm'});$("#companyId").select2({dropdownAutoWidth:true,});$("#departmentId").select2({dropdownAutoWidth:true});});google.load("visualization","1",{packages:["corechart"]});google.setOnLoadCallback(drawChart);function drawChart(){var formatter=new google.visualization.NumberFormat({pattern:'#,###'});if($('#table-location').length){var table=$('#table-location');var totalRows=table.find('tr').length;var data=new google.visualization.DataTable();data.addColumn('string','Tỉnh/TP');data.addColumn('number','Số lượng khách hàng');for(var i=1;i<totalRows-1;i++){var row=[table.find('tr:eq('+i+') td:eq(0)').text()];row.push(parseInt(table.find('tr:eq('+i+') td:eq(1)').text().replace(nfsReg,'')));data.addRow(row);}
formatter.format(data,1);var chart=new google.visualization.PieChart(document.getElementById('piechart-location'));chart.draw(data);}
if($('#table-timesign').length){var table=$('#table-timesign');var totalRows=table.find('tr').length;var data=new google.visualization.DataTable();data.addColumn('string','Thời gian');data.addColumn('number','Số lượng hợp đồng');for(var i=1;i<totalRows-1;i++){var row=[table.find('tr:eq('+i+') td:eq(0)').text()];row.push(parseInt(table.find('tr:eq('+i+') td:eq(1)').text().replace(nfsReg,'')));data.addRow(row);}
formatter.format(data,1);var chart=new google.visualization.PieChart(document.getElementById('flot-placeholder-timesigned'));chart.draw(data);}
if($('#table-valueContract').length){var table=$('#table-valueContract');var totalRows=table.find('tr').length;var data=new google.visualization.DataTable();data.addColumn('string','Khoảng Giá');data.addColumn('number','Số lượng hợp đồng');for(var i=1;i<totalRows-1;i++){var row=[table.find('tr:eq('+i+') td:eq(0)').text()];row.push(parseInt(table.find('tr:eq('+i+') td:eq(1)').text().replace(nfsReg,'')));data.addRow(row);}
formatter.format(data,1);var chart=new google.visualization.PieChart(document.getElementById('flot-placeholder-valueContract'));chart.draw(data);}
if($('#table-sizeBranch').length){var table=$('#table-sizeBranch');var totalRows=table.find('tr').length;var data=new google.visualization.DataTable();data.addColumn('string','Số chi nhánh');data.addColumn('number','Số lượng khách hàng');for(var i=1;i<totalRows-1;i++){var row=[table.find('tr:eq('+i+') td:eq(0)').text()];row.push(parseInt(table.find('tr:eq('+i+') td:eq(1)').text().replace(nfsReg,'')));data.addRow(row);}
formatter.format(data,1);var chart=new google.visualization.PieChart(document.getElementById('flot-placeholder-sizeCompany-Branchs'));chart.draw(data);}
if($('#table-numberEmployees').length){var table=$('#table-numberEmployees');var totalRows=table.find('tr').length;var data=new google.visualization.DataTable();data.addColumn('string','Số lượng nhân viên');data.addColumn('number','Số lượng khách hàng');for(var i=1;i<totalRows-1;i++){var row=[table.find('tr:eq('+i+') td:eq(0)').text()];row.push(parseInt(table.find('tr:eq('+i+') td:eq(1)').text().replace(nfsReg,'')));data.addRow(row);}
formatter.format(data,1);var chart=new google.visualization.PieChart(document.getElementById('flot-placeholder-sizeCompany-Employees'));chart.draw(data);}
if($('#table-industry').length){var table=$('#table-industry');var totalRows=table.find('tr').length;var data=new google.visualization.DataTable();data.addColumn('string','Ngành hàng');data.addColumn('number','Số lượng khách hàng');for(var i=1;i<totalRows-1;i++){var row=[table.find('tr:eq('+i+') td:eq(0)').text()];row.push(parseInt(table.find('tr:eq('+i+') td:eq(1)').text().replace(nfsReg,'')));data.addRow(row);}
formatter.format(data,1);var chart=new google.visualization.PieChart(document.getElementById('flot-placeholder-industry'));chart.draw(data);}
if($('#report-product').length){var tableproduct=$('#report-product');var totalRows=tableproduct.find('tr').length;var data=new google.visualization.DataTable();data.addColumn('string','Sản phẩm');data.addColumn('number','Giá trị');for(var i=1;i<totalRows-1;i++){var row=[tableproduct.find('tr:eq('+i+') td:eq(0)').text()];row.push(parseInt(tableproduct.find('tr:eq('+i+') td:eq(4)').text().replace(nfsReg,'')));data.addRow(row);}
formatter.format(data,1);var chart=new google.visualization.PieChart(document.getElementById('product-piechart'));chart.draw(data);}
if($('#table-status').length){var table=$('#table-status');var totalRows=table.find('tr').length;var data=new google.visualization.DataTable();data.addColumn('string','Trạng thái');data.addColumn('number','Số lượng khách hàng');for(var i=1;i<totalRows-1;i++){var row=[table.find('tr:eq('+i+') td:eq(0)').text()];row.push(parseInt(table.find('tr:eq('+i+') td:eq(1)').text().replace(nfsReg,'')));data.addRow(row);}
formatter.format(data,1);var chart=new google.visualization.PieChart(document.getElementById('status-piechart'));chart.draw(data);}
if($('#table-reason').length){var table=$('#table-reason');var totalRows=table.find('tr').length;var data=new google.visualization.DataTable();data.addColumn('string','Lý do');data.addColumn('number','Số lượng khách hàng');for(var i=1;i<totalRows-1;i++){var row=[table.find('tr:eq('+i+') td:eq(0)').text()];row.push(parseInt(table.find('tr:eq('+i+') td:eq(1)').text().replace(nfsReg,'')));data.addRow(row);}
formatter.format(data,1);var chart=new google.visualization.PieChart(document.getElementById('reason-piechart'));chart.draw(data);}}