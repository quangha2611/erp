$(function(){Department.load('#companyId','#departmentId');$('input.date-range-picker').each(function(){var option={format:'DD/MM/YYYY',ranges:{'Today':[moment(),moment()],'Yesterday':[moment().subtract(1,'days'),moment().subtract(1,'days')],'Last 7 Days':[moment().subtract(6,'days'),moment()],'Last 30 Days':[moment().subtract(29,'days'),moment()],'This Month':[moment().startOf('month'),moment().endOf('month')],'Last Month':[moment().subtract(1,'month').startOf('month'),moment().subtract(1,'month').endOf('month')]},showDropdowns:true,};if($(this).attr('timePicker')){option['timePicker']=true;}else{option['timePicker']=false;}
$(this).daterangepicker(option)});});if(typeof google!=="undefined"){google.setOnLoadCallback(drawChart);}
function drawChart(){var formatter=new google.visualization.NumberFormat({pattern:'#,###'});var amountTable=$('.amount-table');var contractTable=$('.contract-table');var totalAmountRows=amountTable.find('tr').length;var totalContractRows=contractTable.find('tr').length;var totalColums=amountTable.find('tr:eq(1) td').length;var data=new google.visualization.DataTable();data.addColumn('string','Địa điểm');data.addColumn('number','Doanh thu');for(var i=1;i<totalAmountRows-1;i++){var row=[amountTable.find('tr:eq('+i+') td:eq(0)').text()];row.push(parseInt(amountTable.find('tr:eq('+i+') td:eq(1)').text().replace(nfsReg,'')));data.addRow(row);}
var options={title:'Doanh số theo địa điểm',pieHole:0.4,};formatter.format(data,1);var circleAmountChart=new google.visualization.PieChart(document.getElementById('amount-chart'));circleAmountChart.draw(data,options);var data1=new google.visualization.DataTable();data1.addColumn('string','Địa điểm');data1.addColumn('number','Số lượng hợp đồng');for(var i=1;i<totalContractRows-1;i++){var row1=[contractTable.find('tr:eq('+i+') td:eq(0)').text()];row1.push(parseInt(contractTable.find('tr:eq('+i+') td:eq(1)').text().replace(nfsReg,'')));data1.addRow(row1);}
var options1={title:'Số lượng hợp đồng theo địa điểm',pieHole:0.4,};formatter.format(data1,1);var circleContractChart=new google.visualization.PieChart(document.getElementById('contract-chart'));circleContractChart.draw(data1,options1);}