var DepartmentController={initLoadSelectBox:function(elementSelector,companySelector,options){if(!$(elementSelector).length||!$(companySelector).length){return null;}
if(typeof options.defaultLoad!='undefined'&&options.defaultLoad){var param={'companyId':$(companySelector).val(),'page':''};if(typeof options.param!='undefined'){param=$.extend(param,options.param);}
$.ajax({url:"/company/department/load",data:param,dataType:'json',error:function(jqXHR,textStatus,errorThrown){if(typeof options.errorHandler!='undefined'){return options.errorHandler(jqXHR,textStatus,errorThrown)}else{return DepartmentController.errorHandler(jqXHR,textStatus,errorThrown);}},success:function(rs){if(typeof options.loadHandler!='undefined'){return options.loadHandler(rs);}else{return DepartmentController.loadHandler(rs,elementSelector);}}});}
$(companySelector).on('change',function(){var param={'companyId':$(companySelector).val(),'page':''};if(typeof options.param!='undefined'){param=$.extend(param,options.param);}
$.ajax({url:"/company/department/load",data:param,dataType:'json',error:function(jqXHR,textStatus,errorThrown){if(typeof options.errorHandler!='undefined'){return options.errorHandler(jqXHR,textStatus,errorThrown)}else{return DepartmentController.errorHandler(jqXHR,textStatus,errorThrown);}},success:function(rs){if(typeof options.loadHandler!='undefined'){return options.loadHandler(rs);}else{return DepartmentController.loadHandler(rs,elementSelector);}}});});},errorHandler:function(jqXHR,textStatus,errorThrown){if($('#errorModal .alert').length){$('#errorModal .alert').html('Có lỗi trong quá trình tải phòng ban.');$('#errorModal').modal('show');}else{alert('Có lỗi trong quá trình tải phòng ban.');}
return;},loadHandler:function(rs,elementSelector){var options="";if(!$(elementSelector).find('option:first').val()){options="<option value=''>"+$(elementSelector).find('option:first').text()+"</option>";}
if(rs.code=='undefined'){return this.errorHandler();}else{if(rs.code){for(var i in rs.data){var item=rs.data[i];options+="<option value='"+item.id+"'>"+item.name+"</option>";}}else{return this.errorHandler();}}
$(elementSelector).html(options);}};