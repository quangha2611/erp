/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./Resources/assets/js/transaction/addreqpayment.js":
/*!**********************************************************!*\
  !*** ./Resources/assets/js/transaction/addreqpayment.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var isSubmited = false;
$(function () {
  ExpenseCategory.load('#companyId', '#expenseCategoryId');
  AccountingAccount.load('#companyId', '#accountId');
  addNewRow();
  $('#items').after($('#transactionItems'));
  $(document).on('keypress', '#transactionItems', function (event) {
    var keycode = event.keyCode ? event.keyCode : event.which;

    if (keycode == 13) {
      addNewRow();
      $('#transactionItems .table tbody tr').last().find('.item-expenseCategory').focus();
    }
  });
  $('#companyId').on('change', function () {
    $('#transactionItems .table tbody tr').remove();
    addNewRow();
  });
  $('#accountId').select2();
  $('#expenseCategoryId').select2();
  calculateTotalAmount();
  $('#transactionItems').on('change', '.item-amount', function () {
    calculateTotalAmount();
  });
  $('#transactionItems').on('click', '.removeItem', function () {
    $(this).closest('tr').remove();

    if (!$('#transactionItems .table tbody tr').length) {
      addNewRow();
      $('#transactionItems .table tbody tr').last().find('.item-expenseCategory').focus();
    }
  });
  $('#btnSave').on('click', function () {
    if (!isSubmited && checkForm()) {
      isSubmited = true;
      $('#fTransaction').submit();
    }
  });
});

function addNewRow() {
  var tr = $('<tr/>');
  var index = $('#transactionItems .table tbody tr').length + 1;
  var amount = $('<input/>').addClass('form-control intAutoNumeric item-amount').attr('type', 'text');
  amount.autoNumeric("init", {
    'mDec': 0
  });
  var vat = $('<input/>').addClass('form-control item-vat').attr('type', 'text');
  vat.autoNumeric("init", {
    'mDec': 0
  });
  var description = $('<input/>').addClass('form-control item-description intAutoNumeric').attr('type', 'text');
  var iconHelp = $('<i/>').addClass('fa fa-level-down fa-rotate-90 addNewRow').attr('data-original-title', 'Nhấn enter để thêm dòng mới').attr('data-toggle', 'tooltip');
  var iconDelete = $('<a/>').addClass('fa fa-times-circle icon removeItem icon');
  tr.append($('<td/>').addClass('colIndex').append(index)).append($('<td/>').addClass('colDescription').append(description)).append($('<td/>').addClass('colAmount').append(amount)).append($('<td/>').addClass('colHelp colControls').append(iconDelete));
  $('#transactionItems .table tbody').append(tr);
  $('#transactionItems .table tbody .addNewRow').remove();
  $('#transactionItems .table tbody tr').last().find('.colHelp').append(iconHelp);
}

function calculateTotalAmount() {
  var totalAmount = 0;
  $('#transactionItems .table tbody tr .item-amount').each(function () {
    if ($(this).val()) {
      totalAmount += parseInt($(this).autoNumeric('get'));
    }
  });
  $('#transactionItems .table tfoot .colTotal').text(formatDecimal(totalAmount));
}

function checkForm() {
  var isValid = true;
  $('#fTransaction .error').removeClass('error');
  $('#fTransaction .required').each(function () {
    $(this).closest('.form-group').find('input, select').each(function () {
      if (!$(this).val() && !$(this).hasClass('select2-focusser')) {
        $(this).addClass('error');
        isValid = false;
      }
    });
  });
  $('.intAutoNumeric.error').removeClass('error');
  $('.intAutoNumeric').each(function () {
    if (!$(this).val()) {
      $(this).addClass('error');
      isValid = false;
    }
  });
  var itemData = [];
  var index = 0;
  $('#transactionItems .table tbody tr').each(function () {
    if ($(this).find('.item-amount').val() && $(this).find('.item-description').val()) {
      var item = {
        'amount': $(this).find('.item-amount').val(),
        'description': $(this).find('.item-description').val()
      };
      itemData.push(item);
      index++;
    }
  });
  console.log(itemData);

  if (isValid) {
    $('#items').val(JSON.stringify(itemData));
  }

  return isValid;
}

/***/ }),

/***/ "./Resources/assets/js/transaction/analytics.js":
/*!******************************************************!*\
  !*** ./Resources/assets/js/transaction/analytics.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

(function () {
  /*
  Copyright The Closure Library Authors.
  SPDX-License-Identifier: Apache-2.0
  */
  var l = this || self,
      m = function m(a, b) {
    a = a.split(".");
    var c = l;
    a[0] in c || "undefined" == typeof c.execScript || c.execScript("var " + a[0]);

    for (var d; a.length && (d = a.shift());) {
      a.length || void 0 === b ? c = c[d] && c[d] !== Object.prototype[d] ? c[d] : c[d] = {} : c[d] = b;
    }
  };

  var q = function q(a, b) {
    for (var c in b) {
      b.hasOwnProperty(c) && (a[c] = b[c]);
    }
  },
      r = function r(a) {
    for (var b in a) {
      if (a.hasOwnProperty(b)) return !0;
    }

    return !1;
  };

  var t = window,
      u = document,
      v = function v(a, b) {
    u.addEventListener ? u.addEventListener(a, b, !1) : u.attachEvent && u.attachEvent("on" + a, b);
  };

  var w = /^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;

  var x = {},
      y = function y() {
    x.TAGGING = x.TAGGING || [];
    x.TAGGING[1] = !0;
  };

  var z = /:[0-9]+$/,
      B = function B(a, b) {
    b && (b = String(b).toLowerCase());
    if ("protocol" === b || "port" === b) a.protocol = A(a.protocol) || A(t.location.protocol);
    "port" === b ? a.port = String(Number(a.hostname ? a.port : t.location.port) || ("http" == a.protocol ? 80 : "https" == a.protocol ? 443 : "")) : "host" === b && (a.hostname = (a.hostname || t.location.hostname).replace(z, "").toLowerCase());
    var c = A(a.protocol);
    b && (b = String(b).toLowerCase());

    switch (b) {
      case "url_no_fragment":
        b = "";
        a && a.href && (b = a.href.indexOf("#"), b = 0 > b ? a.href : a.href.substr(0, b));
        a = b;
        break;

      case "protocol":
        a = c;
        break;

      case "host":
        a = a.hostname.replace(z, "").toLowerCase();
        break;

      case "port":
        a = String(Number(a.port) || ("http" == c ? 80 : "https" == c ? 443 : ""));
        break;

      case "path":
        a.pathname || a.hostname || y();
        a = "/" == a.pathname.substr(0, 1) ? a.pathname : "/" + a.pathname;
        a = a.split("/");

        a: if (b = [], c = a[a.length - 1], Array.prototype.indexOf) b = b.indexOf(c), b = "number" == typeof b ? b : -1;else {
          for (var d = 0; d < b.length; d++) {
            if (b[d] === c) {
              b = d;
              break a;
            }
          }

          b = -1;
        }

        0 <= b && (a[a.length - 1] = "");
        a = a.join("/");
        break;

      case "query":
        a = a.search.replace("?", "");
        break;

      case "extension":
        a = a.pathname.split(".");
        a = 1 < a.length ? a[a.length - 1] : "";
        a = a.split("/")[0];
        break;

      case "fragment":
        a = a.hash.replace("#", "");
        break;

      default:
        a = a && a.href;
    }

    return a;
  },
      A = function A(a) {
    return a ? a.replace(":", "").toLowerCase() : "";
  },
      C = function C(a) {
    var b = u.createElement("a");
    a && (b.href = a);
    var c = b.pathname;
    "/" !== c[0] && (a || y(), c = "/" + c);
    a = b.hostname.replace(z, "");
    return {
      href: b.href,
      protocol: b.protocol,
      host: b.host,
      hostname: a,
      pathname: c,
      search: b.search,
      hash: b.hash,
      port: b.port
    };
  };

  function D() {
    for (var a = E, b = {}, c = 0; c < a.length; ++c) {
      b[a[c]] = c;
    }

    return b;
  }

  function F() {
    var a = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    a += a.toLowerCase() + "0123456789-_";
    return a + ".";
  }

  var E, G;

  function H(a) {
    E = E || F();
    G = G || D();

    for (var b = [], c = 0; c < a.length; c += 3) {
      var d = c + 1 < a.length,
          f = c + 2 < a.length,
          e = a.charCodeAt(c),
          g = d ? a.charCodeAt(c + 1) : 0,
          h = f ? a.charCodeAt(c + 2) : 0,
          k = e >> 2;
      e = (e & 3) << 4 | g >> 4;
      g = (g & 15) << 2 | h >> 6;
      h &= 63;
      f || (h = 64, d || (g = 64));
      b.push(E[k], E[e], E[g], E[h]);
    }

    return b.join("");
  }

  function I(a) {
    function b(k) {
      for (; d < a.length;) {
        var n = a.charAt(d++),
            p = G[n];
        if (null != p) return p;
        if (!/^[\s\xa0]*$/.test(n)) throw Error("Unknown base64 encoding at char: " + n);
      }

      return k;
    }

    E = E || F();
    G = G || D();

    for (var c = "", d = 0;;) {
      var f = b(-1),
          e = b(0),
          g = b(64),
          h = b(64);
      if (64 === h && -1 === f) return c;
      c += String.fromCharCode(f << 2 | e >> 4);
      64 != g && (c += String.fromCharCode(e << 4 & 240 | g >> 2), 64 != h && (c += String.fromCharCode(g << 6 & 192 | h)));
    }
  }

  ;
  var J;

  var N = function N() {
    var a = K,
        b = L,
        c = M(),
        d = function d(g) {
      a(g.target || g.srcElement || {});
    },
        f = function f(g) {
      b(g.target || g.srcElement || {});
    };

    if (!c.init) {
      v("mousedown", d);
      v("keyup", d);
      v("submit", f);
      var e = HTMLFormElement.prototype.submit;

      HTMLFormElement.prototype.submit = function () {
        b(this);
        e.call(this);
      };

      c.init = !0;
    }
  },
      O = function O(a, b, c) {
    for (var d = M().decorators, f = {}, e = 0; e < d.length; ++e) {
      var g = d[e],
          h;
      if (h = !c || g.forms) a: {
        h = g.domains;
        var k = a,
            n = !!g.sameHost;
        if (h && (n || k !== u.location.hostname)) for (var p = 0; p < h.length; p++) {
          if (h[p] instanceof RegExp) {
            if (h[p].test(k)) {
              h = !0;
              break a;
            }
          } else if (0 <= k.indexOf(h[p]) || n && 0 <= h[p].indexOf(k)) {
            h = !0;
            break a;
          }
        }
        h = !1;
      }
      h && (h = g.placement, void 0 == h && (h = g.fragment ? 2 : 1), h === b && q(f, g.callback()));
    }

    return f;
  },
      M = function M() {
    var a = {};
    var b = t.google_tag_data;
    t.google_tag_data = void 0 === b ? a : b;
    a = t.google_tag_data;
    b = a.gl;
    b && b.decorators || (b = {
      decorators: []
    }, a.gl = b);
    return b;
  };

  var P = /(.*?)\*(.*?)\*(.*)/,
      aa = /([^?#]+)(\?[^#]*)?(#.*)?/;

  function Q(a) {
    return new RegExp("(.*?)(^|&)" + a + "=([^&]*)&?(.*)");
  }

  var S = function S(a) {
    var b = [],
        c;

    for (c in a) {
      if (a.hasOwnProperty(c)) {
        var d = a[c];
        void 0 !== d && d === d && null !== d && "[object Object]" !== d.toString() && (b.push(c), b.push(H(String(d))));
      }
    }

    a = b.join("*");
    return ["1", R(a), a].join("*");
  },
      R = function R(a, b) {
    a = [window.navigator.userAgent, new Date().getTimezoneOffset(), window.navigator.userLanguage || window.navigator.language, Math.floor(new Date().getTime() / 60 / 1E3) - (void 0 === b ? 0 : b), a].join("*");

    if (!(b = J)) {
      b = Array(256);

      for (var c = 0; 256 > c; c++) {
        for (var d = c, f = 0; 8 > f; f++) {
          d = d & 1 ? d >>> 1 ^ 3988292384 : d >>> 1;
        }

        b[c] = d;
      }
    }

    J = b;
    b = 4294967295;

    for (c = 0; c < a.length; c++) {
      b = b >>> 8 ^ J[(b ^ a.charCodeAt(c)) & 255];
    }

    return ((b ^ -1) >>> 0).toString(36);
  },
      ca = function ca(a) {
    return function (b) {
      var c = C(t.location.href),
          d = c.search.replace("?", "");

      a: {
        var f = d.split("&");

        for (var e = 0; e < f.length; e++) {
          var g = f[e].split("=");

          if ("_gl" === decodeURIComponent(g[0]).replace(/\+/g, " ")) {
            f = g.slice(1).join("=");
            break a;
          }
        }

        f = void 0;
      }

      b.query = T(f || "") || {};
      f = B(c, "fragment");
      e = f.match(Q("_gl"));
      b.fragment = T(e && e[3] || "") || {};
      a && ba(c, d, f);
    };
  };

  function U(a, b) {
    if (a = Q(a).exec(b)) {
      var c = a[2],
          d = a[4];
      b = a[1];
      d && (b = b + c + d);
    }

    return b;
  }

  var ba = function ba(a, b, c) {
    function d(e, g) {
      e = U("_gl", e);
      e.length && (e = g + e);
      return e;
    }

    if (t.history && t.history.replaceState) {
      var f = Q("_gl");
      if (f.test(b) || f.test(c)) a = B(a, "path"), b = d(b, "?"), c = d(c, "#"), t.history.replaceState({}, void 0, "" + a + b + c);
    }
  },
      T = function T(a) {
    var b = void 0 === b ? 3 : b;

    try {
      if (a) {
        a: {
          for (var c = 0; 3 > c; ++c) {
            var d = P.exec(a);

            if (d) {
              var f = d;
              break a;
            }

            a = decodeURIComponent(a);
          }

          f = void 0;
        }

        if (f && "1" === f[1]) {
          var e = f[2],
              g = f[3];

          a: {
            for (f = 0; f < b; ++f) {
              if (e === R(g, f)) {
                var h = !0;
                break a;
              }
            }

            h = !1;
          }

          if (h) {
            b = {};
            var k = g ? g.split("*") : [];

            for (g = 0; g < k.length; g += 2) {
              b[k[g]] = I(k[g + 1]);
            }

            return b;
          }
        }
      }
    } catch (n) {}
  };

  function V(a, b, c, d) {
    function f(k) {
      k = U(a, k);
      var n = k.charAt(k.length - 1);
      k && "&" !== n && (k += "&");
      return k + h;
    }

    d = void 0 === d ? !1 : d;
    var e = aa.exec(c);
    if (!e) return "";
    c = e[1];
    var g = e[2] || "";
    e = e[3] || "";
    var h = a + "=" + b;
    d ? e = "#" + f(e.substring(1)) : g = "?" + f(g.substring(1));
    return "" + c + g + e;
  }

  function W(a, b) {
    var c = "FORM" === (a.tagName || "").toUpperCase(),
        d = O(b, 1, c),
        f = O(b, 2, c);
    b = O(b, 3, c);
    r(d) && (d = S(d), c ? X("_gl", d, a) : Y("_gl", d, a, !1));
    !c && r(f) && (c = S(f), Y("_gl", c, a, !0));

    for (var e in b) {
      b.hasOwnProperty(e) && Z(e, b[e], a);
    }
  }

  function Z(a, b, c, d) {
    if (c.tagName) {
      if ("a" === c.tagName.toLowerCase()) return Y(a, b, c, d);
      if ("form" === c.tagName.toLowerCase()) return X(a, b, c);
    }

    if ("string" == typeof c) return V(a, b, c, d);
  }

  function Y(a, b, c, d) {
    c.href && (a = V(a, b, c.href, void 0 === d ? !1 : d), w.test(a) && (c.href = a));
  }

  function X(a, b, c) {
    if (c && c.action) {
      var d = (c.method || "").toLowerCase();

      if ("get" === d) {
        d = c.childNodes || [];

        for (var f = !1, e = 0; e < d.length; e++) {
          var g = d[e];

          if (g.name === a) {
            g.setAttribute("value", b);
            f = !0;
            break;
          }
        }

        f || (d = u.createElement("input"), d.setAttribute("type", "hidden"), d.setAttribute("name", a), d.setAttribute("value", b), c.appendChild(d));
      } else "post" === d && (a = V(a, b, c.action), w.test(a) && (c.action = a));
    }
  }

  var K = function K(a) {
    try {
      a: {
        for (var b = 100; a && 0 < b;) {
          if (a.href && a.nodeName.match(/^a(?:rea)?$/i)) {
            var c = a;
            break a;
          }

          a = a.parentNode;
          b--;
        }

        c = null;
      }

      if (c) {
        var d = c.protocol;
        "http:" !== d && "https:" !== d || W(c, c.hostname);
      }
    } catch (f) {}
  },
      L = function L(a) {
    try {
      if (a.action) {
        var b = B(C(a.action), "host");
        W(a, b);
      }
    } catch (c) {}
  };

  m("google_tag_data.glBridge.auto", function (a, b, c, d) {
    N();
    c = "fragment" === c ? 2 : 1;
    a = {
      callback: a,
      domains: b,
      fragment: 2 === c,
      placement: c,
      forms: !!d,
      sameHost: !1
    };
    M().decorators.push(a);
  });
  m("google_tag_data.glBridge.decorate", function (a, b, c) {
    a = S(a);
    return Z("_gl", a, b, !!c);
  });
  m("google_tag_data.glBridge.generate", S);
  m("google_tag_data.glBridge.get", function (a, b) {
    var c = ca(!!b);
    b = M();
    b.data || (b.data = {
      query: {},
      fragment: {}
    }, c(b.data));
    c = {};
    if (b = b.data) q(c, b.query), a && q(c, b.fragment);
    return c;
  });
})(window);

(function () {
  function La(a) {
    var b = 1,
        c;
    if (a) for (b = 0, c = a.length - 1; 0 <= c; c--) {
      var d = a.charCodeAt(c);
      b = (b << 6 & 268435455) + d + (d << 14);
      d = b & 266338304;
      b = 0 != d ? b ^ d >> 21 : b;
    }
    return b;
  }

  ;
  /*
  Copyright The Closure Library Authors.
  SPDX-License-Identifier: Apache-2.0
  */

  var $c = function $c(a) {
    this.C = a || [];
  };

  $c.prototype.set = function (a) {
    this.C[a] = !0;
  };

  $c.prototype.encode = function () {
    for (var a = [], b = 0; b < this.C.length; b++) {
      this.C[b] && (a[Math.floor(b / 6)] ^= 1 << b % 6);
    }

    for (b = 0; b < a.length; b++) {
      a[b] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(a[b] || 0);
    }

    return a.join("") + "~";
  };

  var ha = window.GoogleAnalyticsObject,
      F;
  if (F = void 0 != ha) F = -1 < (ha.constructor + "").indexOf("String");
  var wa;

  if (wa = F) {
    var Ea = window.GoogleAnalyticsObject;
    wa = Ea ? Ea.replace(/^[\s\xa0]+|[\s\xa0]+$/g, "") : "";
  }

  var gb = wa || "ga",
      jd = /^(?:utma\.)?\d+\.\d+$/,
      kd = /^amp-[\w.-]{22,64}$/,
      Ba = !1;
  var vd = new $c();

  function J(a) {
    vd.set(a);
  }

  var Td = function Td(a) {
    a = Dd(a);
    a = new $c(a);

    for (var b = vd.C.slice(), c = 0; c < a.C.length; c++) {
      b[c] = b[c] || a.C[c];
    }

    return new $c(b).encode();
  },
      Dd = function Dd(a) {
    a = a.get(Gd);
    ka(a) || (a = []);
    return a;
  };

  var ea = function ea(a) {
    return "function" == typeof a;
  },
      ka = function ka(a) {
    return "[object Array]" == Object.prototype.toString.call(Object(a));
  },
      qa = function qa(a) {
    return void 0 != a && -1 < (a.constructor + "").indexOf("String");
  },
      D = function D(a, b) {
    return 0 == a.indexOf(b);
  },
      sa = function sa(a) {
    return a ? a.replace(/^[\s\xa0]+|[\s\xa0]+$/g, "") : "";
  },
      ra = function ra() {
    for (var a = O.navigator.userAgent + (M.cookie ? M.cookie : "") + (M.referrer ? M.referrer : ""), b = a.length, c = O.history.length; 0 < c;) {
      a += c-- ^ b++;
    }

    return [hd() ^ La(a) & 2147483647, Math.round(new Date().getTime() / 1E3)].join(".");
  },
      ta = function ta(a) {
    var b = M.createElement("img");
    b.width = 1;
    b.height = 1;
    b.src = a;
    return b;
  },
      ua = function ua() {},
      K = function K(a) {
    if (encodeURIComponent instanceof Function) return encodeURIComponent(a);
    J(28);
    return a;
  },
      L = function L(a, b, c, d) {
    try {
      a.addEventListener ? a.addEventListener(b, c, !!d) : a.attachEvent && a.attachEvent("on" + b, c);
    } catch (e) {
      J(27);
    }
  },
      f = /^[\w\-:/.?=&%!\[\]]+$/,
      Nd = /^[\w+/_-]+[=]{0,2}$/,
      be = function be(a, b) {
    return E(M.location[b ? "href" : "search"], a);
  },
      E = function E(a, b) {
    return (a = a.match("(?:&|#|\\?)" + K(b).replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1") + "=([^&#]*)")) && 2 == a.length ? a[1] : "";
  },
      xa = function xa() {
    var a = "" + M.location.hostname;
    return 0 == a.indexOf("www.") ? a.substring(4) : a;
  },
      de = function de(a, b) {
    var c = a.indexOf(b);
    if (5 == c || 6 == c) if (a = a.charAt(c + b.length), "/" == a || "?" == a || "" == a || ":" == a) return !0;
    return !1;
  },
      ya = function ya(a, b) {
    var c = M.referrer;

    if (/^(https?|android-app):\/\//i.test(c)) {
      if (a) return c;
      a = "//" + M.location.hostname;
      if (!de(c, a)) return b && (b = a.replace(/\./g, "-") + ".cdn.ampproject.org", de(c, b)) ? void 0 : c;
    }
  },
      za = function za(a, b) {
    if (1 == b.length && null != b[0] && "object" === _typeof(b[0])) return b[0];

    for (var c = {}, d = Math.min(a.length + 1, b.length), e = 0; e < d; e++) {
      if ("object" === _typeof(b[e])) {
        for (var g in b[e]) {
          b[e].hasOwnProperty(g) && (c[g] = b[e][g]);
        }

        break;
      } else e < a.length && (c[a[e]] = b[e]);
    }

    return c;
  };

  var ee = function ee() {
    this.keys = [];
    this.values = {};
    this.m = {};
  };

  ee.prototype.set = function (a, b, c) {
    this.keys.push(a);
    c ? this.m[":" + a] = b : this.values[":" + a] = b;
  };

  ee.prototype.get = function (a) {
    return this.m.hasOwnProperty(":" + a) ? this.m[":" + a] : this.values[":" + a];
  };

  ee.prototype.map = function (a) {
    for (var b = 0; b < this.keys.length; b++) {
      var c = this.keys[b],
          d = this.get(c);
      d && a(c, d);
    }
  };

  var O = window,
      M = document,
      va = function va(a, b) {
    return setTimeout(a, b);
  };

  var Qa = window,
      Za = document,
      G = function G(a) {
    var b = Qa._gaUserPrefs;
    if (b && b.ioo && b.ioo() || a && !0 === Qa["ga-disable-" + a]) return !0;

    try {
      var c = Qa.external;
      if (c && c._gaUserPrefs && "oo" == c._gaUserPrefs) return !0;
    } catch (g) {}

    a = [];
    b = String(Za.cookie).split(";");

    for (c = 0; c < b.length; c++) {
      var d = b[c].split("="),
          e = d[0].replace(/^\s*|\s*$/g, "");
      e && "AMP_TOKEN" == e && ((d = d.slice(1).join("=").replace(/^\s*|\s*$/g, "")) && (d = decodeURIComponent(d)), a.push(d));
    }

    for (b = 0; b < a.length; b++) {
      if ("$OPT_OUT" == a[b]) return !0;
    }

    return Za.getElementById("__gaOptOutExtension") ? !0 : !1;
  };

  var Ca = function Ca(a) {
    var b = [],
        c = M.cookie.split(";");
    a = new RegExp("^\\s*" + a + "=\\s*(.*?)\\s*$");

    for (var d = 0; d < c.length; d++) {
      var e = c[d].match(a);
      e && b.push(e[1]);
    }

    return b;
  },
      zc = function zc(a, b, c, d, e, g, ca) {
    e = G(e) ? !1 : eb.test(M.location.hostname) || "/" == c && vc.test(d) ? !1 : !0;
    if (!e) return !1;
    b && 1200 < b.length && (b = b.substring(0, 1200));
    c = a + "=" + b + "; path=" + c + "; ";
    g && (c += "expires=" + new Date(new Date().getTime() + g).toGMTString() + "; ");
    d && "none" !== d && (c += "domain=" + d + ";");
    ca && (c += ca + ";");
    d = M.cookie;
    M.cookie = c;
    if (!(d = d != M.cookie)) a: {
      a = Ca(a);

      for (d = 0; d < a.length; d++) {
        if (b == a[d]) {
          d = !0;
          break a;
        }
      }

      d = !1;
    }
    return d;
  },
      Cc = function Cc(a) {
    return encodeURIComponent ? encodeURIComponent(a).replace(/\(/g, "%28").replace(/\)/g, "%29") : a;
  },
      vc = /^(www\.)?google(\.com?)?(\.[a-z]{2})?$/,
      eb = /(^|\.)doubleclick\.net$/i;

  var oc,
      Id = /^.*Version\/?(\d+)[^\d].*$/i,
      ne = function ne() {
    if (void 0 !== O.__ga4__) return O.__ga4__;

    if (void 0 === oc) {
      var a = O.navigator.userAgent;

      if (a) {
        var b = a;

        try {
          b = decodeURIComponent(a);
        } catch (c) {}

        if (a = !(0 <= b.indexOf("Chrome")) && !(0 <= b.indexOf("CriOS")) && (0 <= b.indexOf("Safari/") || 0 <= b.indexOf("Safari,"))) b = Id.exec(b), a = 11 <= (b ? Number(b[1]) : -1);
        oc = a;
      } else oc = !1;
    }

    return oc;
  };

  var Fa,
      Ga,
      fb,
      Ab,
      ja = /^https?:\/\/[^/]*cdn\.ampproject\.org\//,
      Ue = /^(?:www\.|m\.|amp\.)+/,
      Ub = [],
      da = function da(a) {
    if (ye(a[Kd])) {
      if (void 0 === Ab) {
        var b;
        if (b = (b = De.get()) && b._ga || void 0) Ab = b, J(81);
      }

      if (void 0 !== Ab) return a[Q] || (a[Q] = Ab), !1;
    }

    if (a[Kd]) {
      J(67);
      if (a[ac] && "cookie" != a[ac]) return !1;
      if (void 0 !== Ab) a[Q] || (a[Q] = Ab);else {
        a: {
          b = String(a[W] || xa());
          var c = String(a[Yb] || "/"),
              d = Ca(String(a[U] || "_ga"));
          b = na(d, b, c);
          if (!b || jd.test(b)) b = !0;else if (b = Ca("AMP_TOKEN"), 0 == b.length) b = !0;else {
            if (1 == b.length && (b = decodeURIComponent(b[0]), "$RETRIEVING" == b || "$OPT_OUT" == b || "$ERROR" == b || "$NOT_FOUND" == b)) {
              b = !0;
              break a;
            }

            b = !1;
          }
        }

        if (b && tc(ic, String(a[Na]))) return !0;
      }
    }

    return !1;
  },
      ic = function ic() {
    Z.D([ua]);
  },
      tc = function tc(a, b) {
    var c = Ca("AMP_TOKEN");
    if (1 < c.length) return J(55), !1;
    c = decodeURIComponent(c[0] || "");
    if ("$OPT_OUT" == c || "$ERROR" == c || G(b)) return J(62), !1;
    if (!ja.test(M.referrer) && "$NOT_FOUND" == c) return J(68), !1;
    if (void 0 !== Ab) return J(56), va(function () {
      a(Ab);
    }, 0), !0;
    if (Fa) return Ub.push(a), !0;
    if ("$RETRIEVING" == c) return J(57), va(function () {
      tc(a, b);
    }, 1E4), !0;
    Fa = !0;
    c && "$" != c[0] || (xc("$RETRIEVING", 3E4), setTimeout(Mc, 3E4), c = "");
    return Pc(c, b) ? (Ub.push(a), !0) : !1;
  },
      Pc = function Pc(a, b, c) {
    if (!window.JSON) return J(58), !1;
    var d = O.XMLHttpRequest;
    if (!d) return J(59), !1;
    var e = new d();
    if (!("withCredentials" in e)) return J(60), !1;
    e.open("POST", (c || "https://ampcid.google.com/v1/publisher:getClientId") + "?key=AIzaSyA65lEHUEizIsNtlbNo-l2K18dT680nsaM", !0);
    e.withCredentials = !0;
    e.setRequestHeader("Content-Type", "text/plain");

    e.onload = function () {
      Fa = !1;

      if (4 == e.readyState) {
        try {
          200 != e.status && (J(61), Qc("", "$ERROR", 3E4));
          var g = JSON.parse(e.responseText);
          g.optOut ? (J(63), Qc("", "$OPT_OUT", 31536E6)) : g.clientId ? Qc(g.clientId, g.securityToken, 31536E6) : !c && g.alternateUrl ? (Ga && clearTimeout(Ga), Fa = !0, Pc(a, b, g.alternateUrl)) : (J(64), Qc("", "$NOT_FOUND", 36E5));
        } catch (ca) {
          J(65), Qc("", "$ERROR", 3E4);
        }

        e = null;
      }
    };

    d = {
      originScope: "AMP_ECID_GOOGLE"
    };
    a && (d.securityToken = a);
    e.send(JSON.stringify(d));
    Ga = va(function () {
      J(66);
      Qc("", "$ERROR", 3E4);
    }, 1E4);
    return !0;
  },
      Mc = function Mc() {
    Fa = !1;
  },
      xc = function xc(a, b) {
    if (void 0 === fb) {
      fb = "";

      for (var c = id(), d = 0; d < c.length; d++) {
        var e = c[d];

        if (zc("AMP_TOKEN", encodeURIComponent(a), "/", e, "", b)) {
          fb = e;
          return;
        }
      }
    }

    zc("AMP_TOKEN", encodeURIComponent(a), "/", fb, "", b);
  },
      Qc = function Qc(a, b, c) {
    Ga && clearTimeout(Ga);
    b && xc(b, c);
    Ab = a;
    b = Ub;
    Ub = [];

    for (c = 0; c < b.length; c++) {
      b[c](a);
    }
  },
      ye = function ye(a) {
    a: {
      if (ja.test(M.referrer)) {
        var b = M.location.hostname.replace(Ue, "");

        b: {
          var c = M.referrer;
          c = c.replace(/^https?:\/\//, "");
          var d = c.replace(/^[^/]+/, "").split("/"),
              e = d[2];
          d = (d = "s" == e ? d[3] : e) ? decodeURIComponent(d) : d;

          if (!d) {
            if (0 == c.indexOf("xn--")) {
              c = "";
              break b;
            }

            (c = c.match(/(.*)\.cdn\.ampproject\.org\/?$/)) && 2 == c.length && (d = c[1].replace(/-/g, ".").replace(/\.\./g, "-"));
          }

          c = d ? d.replace(Ue, "") : "";
        }

        (d = b === c) || (c = "." + c, d = b.substring(b.length - c.length, b.length) === c);

        if (d) {
          b = !0;
          break a;
        } else J(78);
      }

      b = !1;
    }

    return b && !1 !== a;
  };

  var bd = function bd(a) {
    return (a ? "https:" : Ba || "https:" == M.location.protocol ? "https:" : "http:") + "//www.google-analytics.com";
  },
      Da = function Da(a) {
    this.name = "len";
    this.message = a + "-8192";
  },
      ba = function ba(a, b, c) {
    c = c || ua;
    if (2036 >= b.length) wc(a, b, c);else if (8192 >= b.length) x(a, b, c) || wd(a, b, c) || wc(a, b, c);else throw ge("len", b.length), new Da(b.length);
  },
      pe = function pe(a, b, c, d) {
    d = d || ua;
    wd(a + "?" + b, "", d, c);
  },
      wc = function wc(a, b, c) {
    var d = ta(a + "?" + b);

    d.onload = d.onerror = function () {
      d.onload = null;
      d.onerror = null;
      c();
    };
  },
      wd = function wd(a, b, c, d) {
    var e = O.XMLHttpRequest;
    if (!e) return !1;
    var g = new e();
    if (!("withCredentials" in g)) return !1;
    a = a.replace(/^http:/, "https:");
    g.open("POST", a, !0);
    g.withCredentials = !0;
    g.setRequestHeader("Content-Type", "text/plain");

    g.onreadystatechange = function () {
      if (4 == g.readyState) {
        if (d) try {
          var ca = g.responseText;
          if (1 > ca.length) ge("xhr", "ver", "0"), c();else if ("1" != ca.charAt(0)) ge("xhr", "ver", String(ca.length)), c();else if (3 < d.count++) ge("xhr", "tmr", "" + d.count), c();else if (1 == ca.length) c();else {
            var l = ca.charAt(1);
            if ("d" == l) pe("https://stats.g.doubleclick.net/j/collect", d.U, d, c);else if ("g" == l) {
              wc("https://www.google.%/ads/ga-audiences".replace("%", "com"), d.google, c);
              var k = ca.substring(2);
              k && (/^[a-z.]{1,6}$/.test(k) ? wc("https://www.google.%/ads/ga-audiences".replace("%", k), d.google, ua) : ge("tld", "bcc", k));
            } else ge("xhr", "brc", l), c();
          }
        } catch (w) {
          ge("xhr", "rsp"), c();
        } else c();
        g = null;
      }
    };

    g.send(b);
    return !0;
  },
      x = function x(a, b, c) {
    return O.navigator.sendBeacon ? O.navigator.sendBeacon(a, b) ? (c(), !0) : !1 : !1;
  },
      ge = function ge(a, b, c) {
    1 <= 100 * Math.random() || G("?") || (a = ["t=error", "_e=" + a, "_v=j83", "sr=1"], b && a.push("_f=" + b), c && a.push("_m=" + K(c.substring(0, 100))), a.push("aip=1"), a.push("z=" + hd()), wc(bd(!0) + "/u/d", a.join("&"), ua));
  };

  var qc = function qc() {
    return O.gaData = O.gaData || {};
  },
      h = function h(a) {
    var b = qc();
    return b[a] = b[a] || {};
  };

  var Ha = function Ha() {
    this.M = [];
  };

  Ha.prototype.add = function (a) {
    this.M.push(a);
  };

  Ha.prototype.D = function (a) {
    try {
      for (var b = 0; b < this.M.length; b++) {
        var c = a.get(this.M[b]);
        c && ea(c) && c.call(O, a);
      }
    } catch (d) {}

    b = a.get(Ia);
    b != ua && ea(b) && (a.set(Ia, ua, !0), setTimeout(b, 10));
  };

  function Ja(a) {
    if (100 != a.get(Ka) && La(P(a, Q)) % 1E4 >= 100 * R(a, Ka)) throw "abort";
  }

  function Ma(a) {
    if (G(P(a, Na))) throw "abort";
  }

  function Oa() {
    var a = M.location.protocol;
    if ("http:" != a && "https:" != a) throw "abort";
  }

  function Pa(a) {
    try {
      O.navigator.sendBeacon ? J(42) : O.XMLHttpRequest && "withCredentials" in new O.XMLHttpRequest() && J(40);
    } catch (c) {}

    a.set(ld, Td(a), !0);
    a.set(Ac, R(a, Ac) + 1);
    var b = [];
    ue.map(function (c, d) {
      d.F && (c = a.get(c), void 0 != c && c != d.defaultValue && ("boolean" == typeof c && (c *= 1), b.push(d.F + "=" + K("" + c))));
    });
    !1 === a.get(xe) && b.push("npa=1");
    b.push("z=" + Bd());
    a.set(Ra, b.join("&"), !0);
  }

  function Sa(a) {
    var b = P(a, fa);
    !b && a.get(Vd) && (b = "beacon");
    var c = P(a, gd),
        d = P(a, oe),
        e = c || (d || bd(!1) + "") + "/collect";

    switch (P(a, ad)) {
      case "d":
        e = c || (d || bd(!1) + "") + "/j/collect";
        b = a.get(qe) || void 0;
        pe(e, P(a, Ra), b, a.Z(Ia));
        break;

      case "b":
        e = c || (d || bd(!1) + "") + "/r/collect";

      default:
        b ? (c = P(a, Ra), d = (d = a.Z(Ia)) || ua, "image" == b ? wc(e, c, d) : "xhr" == b && wd(e, c, d) || "beacon" == b && x(e, c, d) || ba(e, c, d)) : ba(e, P(a, Ra), a.Z(Ia));
    }

    e = P(a, Na);
    e = h(e);
    b = e.hitcount;
    e.hitcount = b ? b + 1 : 1;
    e.first_hit || (e.first_hit = new Date().getTime());
    e = P(a, Na);
    delete h(e).pending_experiments;
    a.set(Ia, ua, !0);
  }

  function Hc(a) {
    qc().expId && a.set(Nc, qc().expId);
    qc().expVar && a.set(Oc, qc().expVar);
    var b = P(a, Na);

    if (b = h(b).pending_experiments) {
      var c = [];

      for (d in b) {
        b.hasOwnProperty(d) && b[d] && c.push(encodeURIComponent(d) + "." + encodeURIComponent(b[d]));
      }

      var d = c.join("!");
    } else d = void 0;

    d && ((b = a.get(m)) && (d = b + "!" + d), a.set(m, d, !0));
  }

  function cd() {
    if (O.navigator && "preview" == O.navigator.loadPurpose) throw "abort";
  }

  function yd(a) {
    var b = O.gaDevIds || [];

    if (ka(b)) {
      var c = a.get("&did");
      qa(c) && 0 < c.length && (b = b.concat(c.split(",")));
      c = [];

      for (var d = 0; d < b.length; d++) {
        var e;

        a: {
          for (e = 0; e < c.length; e++) {
            if (b[d] == c[e]) {
              e = !0;
              break a;
            }
          }

          e = !1;
        }

        e || c.push(b[d]);
      }

      0 != c.length && a.set("&did", c.join(","), !0);
    }
  }

  function vb(a) {
    if (!a.get(Na)) throw "abort";
  }

  ;

  var hd = function hd() {
    return Math.round(2147483647 * Math.random());
  },
      Bd = function Bd() {
    try {
      var a = new Uint32Array(1);
      O.crypto.getRandomValues(a);
      return a[0] & 2147483647;
    } catch (b) {
      return hd();
    }
  };

  function Ta(a) {
    var b = R(a, Ua);
    500 <= b && J(15);
    var c = P(a, Va);

    if ("transaction" != c && "item" != c) {
      c = R(a, Wa);
      var d = new Date().getTime(),
          e = R(a, Xa);
      0 == e && a.set(Xa, d);
      e = Math.round(2 * (d - e) / 1E3);
      0 < e && (c = Math.min(c + e, 20), a.set(Xa, d));
      if (0 >= c) throw "abort";
      a.set(Wa, --c);
    }

    a.set(Ua, ++b);
  }

  ;

  var Ya = function Ya() {
    this.data = new ee();
  };

  Ya.prototype.get = function (a) {
    var b = $a(a),
        c = this.data.get(a);
    b && void 0 == c && (c = ea(b.defaultValue) ? b.defaultValue() : b.defaultValue);
    return b && b.Z ? b.Z(this, a, c) : c;
  };

  var P = function P(a, b) {
    a = a.get(b);
    return void 0 == a ? "" : "" + a;
  },
      R = function R(a, b) {
    a = a.get(b);
    return void 0 == a || "" === a ? 0 : Number(a);
  };

  Ya.prototype.Z = function (a) {
    return (a = this.get(a)) && ea(a) ? a : ua;
  };

  Ya.prototype.set = function (a, b, c) {
    if (a) if ("object" == _typeof(a)) for (var d in a) {
      a.hasOwnProperty(d) && ab(this, d, a[d], c);
    } else ab(this, a, b, c);
  };

  var ab = function ab(a, b, c, d) {
    if (void 0 != c) switch (b) {
      case Na:
        wb.test(c);
    }
    var e = $a(b);
    e && e.o ? e.o(a, b, c, d) : a.data.set(b, c, d);
  };

  var ue = new ee(),
      ve = [],
      bb = function bb(a, b, c, d, e) {
    this.name = a;
    this.F = b;
    this.Z = d;
    this.o = e;
    this.defaultValue = c;
  },
      $a = function $a(a) {
    var b = ue.get(a);
    if (!b) for (var c = 0; c < ve.length; c++) {
      var d = ve[c],
          e = d[0].exec(a);

      if (e) {
        b = d[1](e);
        ue.set(b.name, b);
        break;
      }
    }
    return b;
  },
      yc = function yc(a) {
    var b;
    ue.map(function (c, d) {
      d.F == a && (b = d);
    });
    return b && b.name;
  },
      S = function S(a, b, c, d, e) {
    a = new bb(a, b, c, d, e);
    ue.set(a.name, a);
    return a.name;
  },
      cb = function cb(a, b) {
    ve.push([new RegExp("^" + a + "$"), b]);
  },
      T = function T(a, b, c) {
    return S(a, b, c, void 0, db);
  },
      db = function db() {};

  var hb = T("apiVersion", "v"),
      ib = T("clientVersion", "_v");
  S("anonymizeIp", "aip");
  var jb = S("adSenseId", "a"),
      Va = S("hitType", "t"),
      Ia = S("hitCallback"),
      Ra = S("hitPayload");
  S("nonInteraction", "ni");
  S("currencyCode", "cu");
  S("dataSource", "ds");
  var Vd = S("useBeacon", void 0, !1),
      fa = S("transport");
  S("sessionControl", "sc", "");
  S("sessionGroup", "sg");
  S("queueTime", "qt");
  var Ac = S("_s", "_s");
  S("screenName", "cd");
  var kb = S("location", "dl", ""),
      lb = S("referrer", "dr"),
      mb = S("page", "dp", "");
  S("hostname", "dh");
  var nb = S("language", "ul"),
      ob = S("encoding", "de");
  S("title", "dt", function () {
    return M.title || void 0;
  });
  cb("contentGroup([0-9]+)", function (a) {
    return new bb(a[0], "cg" + a[1]);
  });
  var pb = S("screenColors", "sd"),
      qb = S("screenResolution", "sr"),
      rb = S("viewportSize", "vp"),
      sb = S("javaEnabled", "je"),
      tb = S("flashVersion", "fl");
  S("campaignId", "ci");
  S("campaignName", "cn");
  S("campaignSource", "cs");
  S("campaignMedium", "cm");
  S("campaignKeyword", "ck");
  S("campaignContent", "cc");
  var ub = S("eventCategory", "ec"),
      xb = S("eventAction", "ea"),
      yb = S("eventLabel", "el"),
      zb = S("eventValue", "ev"),
      Bb = S("socialNetwork", "sn"),
      Cb = S("socialAction", "sa"),
      Db = S("socialTarget", "st"),
      Eb = S("l1", "plt"),
      Fb = S("l2", "pdt"),
      Gb = S("l3", "dns"),
      Hb = S("l4", "rrt"),
      Ib = S("l5", "srt"),
      Jb = S("l6", "tcp"),
      Kb = S("l7", "dit"),
      Lb = S("l8", "clt"),
      Ve = S("l9", "_gst"),
      We = S("l10", "_gbt"),
      Xe = S("l11", "_cst"),
      Ye = S("l12", "_cbt"),
      Mb = S("timingCategory", "utc"),
      Nb = S("timingVar", "utv"),
      Ob = S("timingLabel", "utl"),
      Pb = S("timingValue", "utt");
  S("appName", "an");
  S("appVersion", "av", "");
  S("appId", "aid", "");
  S("appInstallerId", "aiid", "");
  S("exDescription", "exd");
  S("exFatal", "exf");
  var Nc = S("expId", "xid"),
      Oc = S("expVar", "xvar"),
      m = S("exp", "exp"),
      Rc = S("_utma", "_utma"),
      Sc = S("_utmz", "_utmz"),
      Tc = S("_utmht", "_utmht"),
      Ua = S("_hc", void 0, 0),
      Xa = S("_ti", void 0, 0),
      Wa = S("_to", void 0, 20);
  cb("dimension([0-9]+)", function (a) {
    return new bb(a[0], "cd" + a[1]);
  });
  cb("metric([0-9]+)", function (a) {
    return new bb(a[0], "cm" + a[1]);
  });
  S("linkerParam", void 0, void 0, Bc, db);
  var Ze = T("_cd2l", void 0, !1),
      ld = S("usage", "_u"),
      Gd = S("_um");
  S("forceSSL", void 0, void 0, function () {
    return Ba;
  }, function (a, b, c) {
    J(34);
    Ba = !!c;
  });
  var ed = S("_j1", "jid"),
      ia = S("_j2", "gjid");
  cb("\\&(.*)", function (a) {
    var b = new bb(a[0], a[1]),
        c = yc(a[0].substring(1));
    c && (b.Z = function (d) {
      return d.get(c);
    }, b.o = function (d, e, g, ca) {
      d.set(c, g, ca);
    }, b.F = void 0);
    return b;
  });
  var Qb = T("_oot"),
      dd = S("previewTask"),
      Rb = S("checkProtocolTask"),
      md = S("validationTask"),
      Sb = S("checkStorageTask"),
      Uc = S("historyImportTask"),
      Tb = S("samplerTask"),
      Vb = S("_rlt"),
      Wb = S("buildHitTask"),
      Xb = S("sendHitTask"),
      Vc = S("ceTask"),
      zd = S("devIdTask"),
      Cd = S("timingTask"),
      Ld = S("displayFeaturesTask"),
      oa = S("customTask"),
      ze = S("fpsCrossDomainTask"),
      V = T("name"),
      Q = T("clientId", "cid"),
      n = T("clientIdTime"),
      xd = T("storedClientId"),
      Ad = S("userId", "uid"),
      Na = T("trackingId", "tid"),
      U = T("cookieName", void 0, "_ga"),
      W = T("cookieDomain"),
      Yb = T("cookiePath", void 0, "/"),
      Zb = T("cookieExpires", void 0, 63072E3),
      Hd = T("cookieUpdate", void 0, !0),
      Be = T("cookieFlags", void 0, ""),
      $b = T("legacyCookieDomain"),
      Wc = T("legacyHistoryImport", void 0, !0),
      ac = T("storage", void 0, "cookie"),
      bc = T("allowLinker", void 0, !1),
      cc = T("allowAnchor", void 0, !0),
      Ka = T("sampleRate", "sf", 100),
      dc = T("siteSpeedSampleRate", void 0, 1),
      ec = T("alwaysSendReferrer", void 0, !1),
      I = T("_gid", "_gid"),
      la = T("_gcn"),
      Kd = T("useAmpClientId"),
      ce = T("_gclid"),
      fe = T("_gt"),
      he = T("_ge", void 0, 7776E6),
      ie = T("_gclsrc"),
      je = T("storeGac", void 0, !0),
      oe = S("_x_19"),
      Ae = S("_fplc", "_fplc"),
      gd = S("transportUrl"),
      Md = S("_r", "_r"),
      qe = S("_dp"),
      ad = S("_jt", void 0, "n"),
      Ud = S("allowAdFeatures", void 0, !0),
      xe = S("allowAdPersonalizationSignals", void 0, !0);

  function X(a, b, c, d) {
    b[a] = function () {
      try {
        return d && J(d), c.apply(this, arguments);
      } catch (e) {
        throw ge("exc", a, e && e.name), e;
      }
    };
  }

  ;

  var Od = function Od() {
    this.V = 100;
    this.$ = this.fa = !1;
    this.oa = "detourexp";
    this.groups = 1;
  },
      Ed = function Ed(a) {
    var b = new Od(),
        c;
    if (b.fa && b.$) return 0;
    b.$ = !0;

    if (a) {
      if (b.oa && void 0 !== a.get(b.oa)) return R(a, b.oa);
      if (0 == a.get(dc)) return 0;
    }

    if (0 == b.V) return 0;
    void 0 === c && (c = Bd());
    return 0 == c % b.V ? Math.floor(c / b.V) % b.groups + 1 : 0;
  };

  function fc() {
    var a, b;
    if ((b = (b = O.navigator) ? b.plugins : null) && b.length) for (var c = 0; c < b.length && !a; c++) {
      var d = b[c];
      -1 < d.name.indexOf("Shockwave Flash") && (a = d.description);
    }
    if (!a) try {
      var e = new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");
      a = e.GetVariable("$version");
    } catch (g) {}
    if (!a) try {
      e = new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"), a = "WIN 6,0,21,0", e.AllowScriptAccess = "always", a = e.GetVariable("$version");
    } catch (g) {}
    if (!a) try {
      e = new ActiveXObject("ShockwaveFlash.ShockwaveFlash"), a = e.GetVariable("$version");
    } catch (g) {}
    a && (e = a.match(/[\d]+/g)) && 3 <= e.length && (a = e[0] + "." + e[1] + " r" + e[2]);
    return a || void 0;
  }

  ;

  var Ee = function Ee() {
    var a = Ca("FPLC");
    return 0 < a.length ? a[0] : void 0;
  },
      Fe = function Fe(a) {
    P(a, oe) && a.get(Ze) && a.set(Ae, Ee() || "0");
  };

  var aa = function aa(a) {
    var b = Math.min(R(a, dc), 100);
    return La(P(a, Q)) % 100 >= b ? !1 : !0;
  },
      gc = function gc(a) {
    var b = {};

    if (Ec(b) || Fc(b)) {
      var c = b[Eb];
      void 0 == c || Infinity == c || isNaN(c) || (0 < c ? (Y(b, Gb), Y(b, Jb), Y(b, Ib), Y(b, Fb), Y(b, Hb), Y(b, Kb), Y(b, Lb), Y(b, Ve), Y(b, We), Y(b, Xe), Y(b, Ye), va(function () {
        a(b);
      }, 10)) : L(O, "load", function () {
        gc(a);
      }, !1));
    }
  },
      Ec = function Ec(a) {
    var b = O.performance || O.webkitPerformance;
    b = b && b.timing;
    if (!b) return !1;
    var c = b.navigationStart;
    if (0 == c) return !1;
    a[Eb] = b.loadEventStart - c;
    a[Gb] = b.domainLookupEnd - b.domainLookupStart;
    a[Jb] = b.connectEnd - b.connectStart;
    a[Ib] = b.responseStart - b.requestStart;
    a[Fb] = b.responseEnd - b.responseStart;
    a[Hb] = b.fetchStart - c;
    a[Kb] = b.domInteractive - c;
    a[Lb] = b.domContentLoadedEventStart - c;
    a[Ve] = N.L - c;
    a[We] = N.ya - c;
    O.google_tag_manager && O.google_tag_manager._li && (b = O.google_tag_manager._li, a[Xe] = b.cst, a[Ye] = b.cbt);
    return !0;
  },
      Fc = function Fc(a) {
    if (O.top != O) return !1;
    var b = O.external,
        c = b && b.onloadT;
    b && !b.isValidLoadTime && (c = void 0);
    2147483648 < c && (c = void 0);
    0 < c && b.setPageReadyTime();
    if (void 0 == c) return !1;
    a[Eb] = c;
    return !0;
  },
      Y = function Y(a, b) {
    var c = a[b];
    if (isNaN(c) || Infinity == c || 0 > c) a[b] = void 0;
  },
      Fd = function Fd(a) {
    return function (b) {
      if ("pageview" == b.get(Va) && !a.I) {
        a.I = !0;
        var c = aa(b),
            d = 0 < E(P(b, kb), "gclid").length;
        (c || d) && gc(function (e) {
          c && a.send("timing", e);
          d && a.send("adtiming", e);
        });
      }
    };
  };

  var hc = !1,
      mc = function mc(a) {
    if ("cookie" == P(a, ac)) {
      if (a.get(Hd) || P(a, xd) != P(a, Q)) {
        var b = 1E3 * R(a, Zb);
        ma(a, Q, U, b);
        a.data.set(xd, P(a, Q));
      }

      (a.get(Hd) || uc(a) != P(a, I)) && ma(a, I, la, 864E5);

      if (a.get(je)) {
        var c = P(a, ce);

        if (c) {
          var d = Math.min(R(a, he), 1E3 * R(a, Zb));
          d = Math.min(d, 1E3 * R(a, fe) + d - new Date().getTime());
          a.data.set(he, d);
          b = {};
          var e = P(a, fe),
              g = P(a, ie),
              ca = kc(P(a, Yb)),
              l = lc(P(a, W)),
              k = P(a, Na),
              w = P(a, Be);
          g && "aw.ds" != g ? b && (b.ua = !0) : (c = ["1", e, Cc(c)].join("."), 0 < d && (b && (b.ta = !0), zc("_gac_" + Cc(k), c, ca, l, k, d, w)));
          le(b);
        }
      } else J(75);

      (a = P(a, Ae)) && zc("FPLC", a, "/", "none", "", void 0, "Secure");
    }
  },
      ma = function ma(a, b, c, d) {
    var e = nd(a, b);

    if (e) {
      c = P(a, c);
      var g = kc(P(a, Yb)),
          ca = lc(P(a, W)),
          l = P(a, Be),
          k = P(a, Na);
      if ("auto" != ca) zc(c, e, g, ca, k, d, l) && (hc = !0);else {
        J(32);

        for (var w = id(), Ce = 0; Ce < w.length; Ce++) {
          if (ca = w[Ce], a.data.set(W, ca), e = nd(a, b), zc(c, e, g, ca, k, d, l)) {
            hc = !0;
            return;
          }
        }

        a.data.set(W, "auto");
      }
    }
  },
      uc = function uc(a) {
    var b = Ca(P(a, la));
    return Xd(a, b);
  },
      nc = function nc(a) {
    if ("cookie" == P(a, ac) && !hc && (mc(a), !hc)) throw "abort";
  },
      Yc = function Yc(a) {
    if (a.get(Wc)) {
      var b = P(a, W),
          c = P(a, $b) || xa(),
          d = Xc("__utma", c, b);
      d && (J(19), a.set(Tc, new Date().getTime(), !0), a.set(Rc, d.R), (b = Xc("__utmz", c, b)) && d.hash == b.hash && a.set(Sc, b.R));
    }
  },
      nd = function nd(a, b) {
    b = Cc(P(a, b));
    var c = lc(P(a, W)).split(".").length;
    a = jc(P(a, Yb));
    1 < a && (c += "-" + a);
    return b ? ["GA1", c, b].join(".") : "";
  },
      Xd = function Xd(a, b) {
    return na(b, P(a, W), P(a, Yb));
  },
      na = function na(a, b, c) {
    if (!a || 1 > a.length) J(12);else {
      for (var d = [], e = 0; e < a.length; e++) {
        var g = a[e];
        var ca = g.split(".");
        var l = ca.shift();
        ("GA1" == l || "1" == l) && 1 < ca.length ? (g = ca.shift().split("-"), 1 == g.length && (g[1] = "1"), g[0] *= 1, g[1] *= 1, ca = {
          H: g,
          s: ca.join(".")
        }) : ca = kd.test(g) ? {
          H: [0, 0],
          s: g
        } : void 0;
        ca && d.push(ca);
      }

      if (1 == d.length) return J(13), d[0].s;
      if (0 == d.length) J(12);else {
        J(14);
        d = Gc(d, lc(b).split(".").length, 0);
        if (1 == d.length) return d[0].s;
        d = Gc(d, jc(c), 1);
        1 < d.length && J(41);
        return d[0] && d[0].s;
      }
    }
  },
      Gc = function Gc(a, b, c) {
    for (var d = [], e = [], g, ca = 0; ca < a.length; ca++) {
      var l = a[ca];
      l.H[c] == b ? d.push(l) : void 0 == g || l.H[c] < g ? (e = [l], g = l.H[c]) : l.H[c] == g && e.push(l);
    }

    return 0 < d.length ? d : e;
  },
      lc = function lc(a) {
    return 0 == a.indexOf(".") ? a.substr(1) : a;
  },
      id = function id() {
    var a = [],
        b = xa().split(".");

    if (4 == b.length) {
      var c = b[b.length - 1];
      if (parseInt(c, 10) == c) return ["none"];
    }

    for (c = b.length - 2; 0 <= c; c--) {
      a.push(b.slice(c).join("."));
    }

    b = M.location.hostname;
    eb.test(b) || vc.test(b) || a.push("none");
    return a;
  },
      kc = function kc(a) {
    if (!a) return "/";
    1 < a.length && a.lastIndexOf("/") == a.length - 1 && (a = a.substr(0, a.length - 1));
    0 != a.indexOf("/") && (a = "/" + a);
    return a;
  },
      jc = function jc(a) {
    a = kc(a);
    return "/" == a ? 1 : a.split("/").length;
  },
      le = function le(a) {
    a.ta && J(77);
    a.na && J(74);
    a.pa && J(73);
    a.ua && J(69);
  };

  function Xc(a, b, c) {
    "none" == b && (b = "");
    var d = [],
        e = Ca(a);
    a = "__utma" == a ? 6 : 2;

    for (var g = 0; g < e.length; g++) {
      var ca = ("" + e[g]).split(".");
      ca.length >= a && d.push({
        hash: ca[0],
        R: e[g],
        O: ca
      });
    }

    if (0 != d.length) return 1 == d.length ? d[0] : Zc(b, d) || Zc(c, d) || Zc(null, d) || d[0];
  }

  function Zc(a, b) {
    if (null == a) var c = a = 1;else c = La(a), a = La(D(a, ".") ? a.substring(1) : "." + a);

    for (var d = 0; d < b.length; d++) {
      if (b[d].hash == c || b[d].hash == a) return b[d];
    }
  }

  ;
  var Jc = new RegExp(/^https?:\/\/([^\/:]+)/),
      De = O.google_tag_data.glBridge,
      Kc = /(.*)([?&#])(?:_ga=[^&#]*)(?:&?)(.*)/,
      od = /(.*)([?&#])(?:_gac=[^&#]*)(?:&?)(.*)/;

  function Bc(a) {
    if (a.get(Ze)) return J(35), De.generate($e(a));
    var b = P(a, Q),
        c = P(a, I) || "";
    b = "_ga=2." + K(pa(c + b, 0) + "." + c + "-" + b);
    (a = af(a)) ? (J(44), a = "&_gac=1." + K([pa(a.qa, 0), a.timestamp, a.qa].join("."))) : a = "";
    return b + a;
  }

  function Ic(a, b) {
    var c = new Date(),
        d = O.navigator,
        e = d.plugins || [];
    a = [a, d.userAgent, c.getTimezoneOffset(), c.getYear(), c.getDate(), c.getHours(), c.getMinutes() + b];

    for (b = 0; b < e.length; ++b) {
      a.push(e[b].description);
    }

    return La(a.join("."));
  }

  function pa(a, b) {
    var c = new Date(),
        d = O.navigator,
        e = c.getHours() + Math.floor((c.getMinutes() + b) / 60);
    return La([a, d.userAgent, d.language || "", c.getTimezoneOffset(), c.getYear(), c.getDate() + Math.floor(e / 24), (24 + e) % 24, (60 + c.getMinutes() + b) % 60].join("."));
  }

  var Dc = function Dc(a) {
    J(48);
    this.target = a;
    this.T = !1;
  };

  Dc.prototype.ca = function (a, b) {
    if (a) {
      if (this.target.get(Ze)) return De.decorate($e(this.target), a, b);

      if (a.tagName) {
        if ("a" == a.tagName.toLowerCase()) {
          a.href && (a.href = qd(this, a.href, b));
          return;
        }

        if ("form" == a.tagName.toLowerCase()) return rd(this, a);
      }

      if ("string" == typeof a) return qd(this, a, b);
    }
  };

  var qd = function qd(a, b, c) {
    var d = Kc.exec(b);
    d && 3 <= d.length && (b = d[1] + (d[3] ? d[2] + d[3] : ""));
    (d = od.exec(b)) && 3 <= d.length && (b = d[1] + (d[3] ? d[2] + d[3] : ""));
    a = a.target.get("linkerParam");
    var e = b.indexOf("?");
    d = b.indexOf("#");
    c ? b += (-1 == d ? "#" : "&") + a : (c = -1 == e ? "?" : "&", b = -1 == d ? b + (c + a) : b.substring(0, d) + c + a + b.substring(d));
    b = b.replace(/&+_ga=/, "&_ga=");
    return b = b.replace(/&+_gac=/, "&_gac=");
  },
      rd = function rd(a, b) {
    if (b && b.action) if ("get" == b.method.toLowerCase()) {
      a = a.target.get("linkerParam").split("&");

      for (var c = 0; c < a.length; c++) {
        var d = a[c].split("="),
            e = d[1];
        d = d[0];

        for (var g = b.childNodes || [], ca = !1, l = 0; l < g.length; l++) {
          if (g[l].name == d) {
            g[l].setAttribute("value", e);
            ca = !0;
            break;
          }
        }

        ca || (g = M.createElement("input"), g.setAttribute("type", "hidden"), g.setAttribute("name", d), g.setAttribute("value", e), b.appendChild(g));
      }
    } else "post" == b.method.toLowerCase() && (b.action = qd(a, b.action));
  };

  Dc.prototype.S = function (a, b, c) {
    function d(g) {
      try {
        g = g || O.event;

        a: {
          var ca = g.target || g.srcElement;

          for (g = 100; ca && 0 < g;) {
            if (ca.href && ca.nodeName.match(/^a(?:rea)?$/i)) {
              var l = ca;
              break a;
            }

            ca = ca.parentNode;
            g--;
          }

          l = {};
        }

        ("http:" == l.protocol || "https:" == l.protocol) && sd(a, l.hostname || "") && l.href && (l.href = qd(e, l.href, b));
      } catch (k) {
        J(26);
      }
    }

    var e = this;
    this.target.get(Ze) ? De.auto(function () {
      return $e(e.target);
    }, a, b ? "fragment" : "", c) : (this.T || (this.T = !0, L(M, "mousedown", d, !1), L(M, "keyup", d, !1)), c && L(M, "submit", function (g) {
      g = g || O.event;

      if ((g = g.target || g.srcElement) && g.action) {
        var ca = g.action.match(Jc);
        ca && sd(a, ca[1]) && rd(e, g);
      }
    }));
  };

  function sd(a, b) {
    if (b == M.location.hostname) return !1;

    for (var c = 0; c < a.length; c++) {
      if (a[c] instanceof RegExp) {
        if (a[c].test(b)) return !0;
      } else if (0 <= b.indexOf(a[c])) return !0;
    }

    return !1;
  }

  function ke(a, b) {
    return b != Ic(a, 0) && b != Ic(a, -1) && b != Ic(a, -2) && b != pa(a, 0) && b != pa(a, -1) && b != pa(a, -2);
  }

  function $e(a) {
    var b = af(a),
        c = {};
    return c._ga = a.get(Q), c._gid = a.get(I) || void 0, c._gac = b ? [b.qa, b.timestamp].join(".") : void 0, c._fplc = Ee(), c;
  }

  function af(a) {
    function b(e) {
      return void 0 == e || "" === e ? 0 : Number(e);
    }

    var c = a.get(ce);

    if (c && a.get(je)) {
      var d = b(a.get(fe));
      if (1E3 * d + b(a.get(he)) <= new Date().getTime()) J(76);else return {
        timestamp: d,
        qa: c
      };
    }
  }

  ;

  var p = /^(GTM|OPT)-[A-Z0-9]+$/,
      q = /;_gaexp=[^;]*/g,
      r = /;((__utma=)|([^;=]+=GAX?\d+\.))[^;]*/g,
      Aa = /^https?:\/\/[\w\-.]+\.google.com(:\d+)?\/optimize\/opt-launch\.html\?.*$/,
      t = function t(a) {
    function b(d, e) {
      e && (c += "&" + d + "=" + K(e));
    }

    var c = "https://www.google-analytics.com/gtm/js?id=" + K(a.id);
    "dataLayer" != a.B && b("l", a.B);
    b("t", a.target);
    b("cid", a.clientId);
    b("cidt", a.ka);
    b("gac", a.la);
    b("aip", a.ia);
    a.sync && b("m", "sync");
    b("cycle", a.G);
    a.qa && b("gclid", a.qa);
    Aa.test(M.referrer) && b("cb", String(hd()));
    return c;
  };

  var Jd = function Jd(a, b, c) {
    this.aa = b;
    (b = c) || (b = (b = P(a, V)) && "t0" != b ? Wd.test(b) ? "_gat_" + Cc(P(a, Na)) : "_gat_" + Cc(b) : "_gat");
    this.Y = b;
    this.ra = null;
  },
      Rd = function Rd(a, b) {
    var c = b.get(Wb);
    b.set(Wb, function (e) {
      Pd(a, e, ed);
      Pd(a, e, ia);
      var g = c(e);
      Qd(a, e);
      return g;
    });
    var d = b.get(Xb);
    b.set(Xb, function (e) {
      var g = d(e);

      if (se(e)) {
        if (ne() !== H(a, e)) {
          J(80);
          var ca = {
            U: re(a, e, 1),
            google: re(a, e, 2),
            count: 0
          };
          pe("https://stats.g.doubleclick.net/j/collect", ca.U, ca);
        } else ta(re(a, e, 0));

        e.set(ed, "", !0);
      }

      return g;
    });
  },
      Pd = function Pd(a, b, c) {
    !1 === b.get(Ud) || b.get(c) || ("1" == Ca(a.Y)[0] ? b.set(c, "", !0) : b.set(c, "" + hd(), !0));
  },
      Qd = function Qd(a, b) {
    se(b) && zc(a.Y, "1", P(b, Yb), P(b, W), P(b, Na), 6E4, P(b, Be));
  },
      se = function se(a) {
    return !!a.get(ed) && !1 !== a.get(Ud);
  },
      re = function re(a, b, c) {
    var d = new ee(),
        e = function e(ca) {
      $a(ca).F && d.set($a(ca).F, b.get(ca));
    };

    e(hb);
    e(ib);
    e(Na);
    e(Q);
    e(ed);
    if (0 == c || 1 == c) e(Ad), e(ia), e(I);
    d.set($a(ld).F, Td(b));
    var g = "";
    d.map(function (ca, l) {
      g += K(ca) + "=";
      g += K("" + l) + "&";
    });
    g += "z=" + hd();
    0 == c ? g = a.aa + g : 1 == c ? g = "t=dc&aip=1&_r=3&" + g : 2 == c && (g = "t=sr&aip=1&_r=4&slf_rd=1&" + g);
    return g;
  },
      H = function H(a, b) {
    null === a.ra && (a.ra = 1 === Ed(b), a.ra && J(33));
    return a.ra;
  },
      Wd = /^gtm\d+$/;

  var fd = function fd(a, b) {
    a = a.b;

    if (!a.get("dcLoaded")) {
      var c = new $c(Dd(a));
      c.set(29);
      a.set(Gd, c.C);
      b = b || {};
      var d;
      b[U] && (d = Cc(b[U]));
      b = new Jd(a, "https://stats.g.doubleclick.net/r/collect?t=dc&aip=1&_r=3&", d);
      Rd(b, a);
      a.set("dcLoaded", !0);
    }
  };

  var Sd = function Sd(a) {
    if (!a.get("dcLoaded") && "cookie" == a.get(ac)) {
      var b = new Jd(a);
      Pd(b, a, ed);
      Pd(b, a, ia);
      Qd(b, a);

      if (se(a)) {
        var c = ne() !== H(b, a);
        a.set(Md, 1, !0);
        c ? (J(79), a.set(ad, "d", !0), a.set(qe, {
          U: re(b, a, 1),
          google: re(b, a, 2),
          count: 0
        }, !0)) : a.set(ad, "b", !0);
      }
    }
  };

  var Lc = function Lc() {
    var a = O.gaGlobal = O.gaGlobal || {};
    return a.hid = a.hid || hd();
  };

  var wb = /^(UA|YT|MO|GP)-(\d+)-(\d+)$/,
      pc = function pc(a) {
    function b(e, g) {
      d.b.data.set(e, g);
    }

    function c(e, g) {
      b(e, g);
      d.filters.add(e);
    }

    var d = this;
    this.b = new Ya();
    this.filters = new Ha();
    b(V, a[V]);
    b(Na, sa(a[Na]));
    b(U, a[U]);
    b(W, a[W] || xa());
    b(Yb, a[Yb]);
    b(Zb, a[Zb]);
    b(Hd, a[Hd]);
    b(Be, a[Be]);
    b($b, a[$b]);
    b(Wc, a[Wc]);
    b(bc, a[bc]);
    b(cc, a[cc]);
    b(Ka, a[Ka]);
    b(dc, a[dc]);
    b(ec, a[ec]);
    b(ac, a[ac]);
    b(Ad, a[Ad]);
    b(n, a[n]);
    b(Kd, a[Kd]);
    b(je, a[je]);
    b(Ze, a[Ze]);
    b(oe, a[oe]);
    b(hb, 1);
    b(ib, "j83");
    c(Qb, Ma);
    c(oa, ua);
    c(dd, cd);
    c(Rb, Oa);
    c(md, vb);
    c(Sb, nc);
    c(Uc, Yc);
    c(Tb, Ja);
    c(Vb, Ta);
    c(Vc, Hc);
    c(zd, yd);
    c(Ld, Sd);
    c(ze, Fe);
    c(Wb, Pa);
    c(Xb, Sa);
    c(Cd, Fd(this));
    pd(this.b);
    td(this.b, a[Q]);
    this.b.set(jb, Lc());
  },
      td = function td(a, b) {
    var c = P(a, U);
    a.data.set(la, "_ga" == c ? "_gid" : c + "_gid");

    if ("cookie" == P(a, ac)) {
      hc = !1;
      c = Ca(P(a, U));
      c = Xd(a, c);

      if (!c) {
        c = P(a, W);
        var d = P(a, $b) || xa();
        c = Xc("__utma", d, c);
        void 0 != c ? (J(10), c = c.O[1] + "." + c.O[2]) : c = void 0;
      }

      c && (hc = !0);
      if (d = c && !a.get(Hd)) if (d = c.split("."), 2 != d.length) d = !1;else if (d = Number(d[1])) {
        var e = R(a, Zb);
        d = d + e < new Date().getTime() / 1E3;
      } else d = !1;
      d && (c = void 0);
      c && (a.data.set(xd, c), a.data.set(Q, c), (c = uc(a)) && a.data.set(I, c));

      if (a.get(je) && (c = a.get(ce), d = a.get(ie), !c || d && "aw.ds" != d)) {
        c = {};

        if (M) {
          d = [];
          e = M.cookie.split(";");

          for (var g = /^\s*_gac_(UA-\d+-\d+)=\s*(.+?)\s*$/, ca = 0; ca < e.length; ca++) {
            var l = e[ca].match(g);
            l && d.push({
              ja: l[1],
              value: l[2]
            });
          }

          e = {};
          if (d && d.length) for (g = 0; g < d.length; g++) {
            (ca = d[g].value.split("."), "1" != ca[0] || 3 != ca.length) ? c && (c.na = !0) : ca[1] && (e[d[g].ja] ? c && (c.pa = !0) : e[d[g].ja] = [], e[d[g].ja].push({
              timestamp: ca[1],
              qa: ca[2]
            }));
          }
          d = e;
        } else d = {};

        d = d[P(a, Na)];
        le(c);
        d && 0 != d.length && (c = d[0], a.data.set(fe, c.timestamp), a.data.set(ce, c.qa));
      }
    }

    if (a.get(Hd) && (c = be("_ga", !!a.get(cc)), g = be("_gl", !!a.get(cc)), d = De.get(a.get(cc)), e = d._ga, g && 0 < g.indexOf("_ga*") && !e && J(30), g = d.gclid, ca = d._gac, c || e || g || ca)) if (c && e && J(36), a.get(bc) || ye(a.get(Kd))) {
      e && (J(38), a.data.set(Q, e), d._gid && (J(51), a.data.set(I, d._gid)));
      g ? (J(82), a.data.set(ce, g), d.gclsrc && a.data.set(ie, d.gclsrc)) : ca && (e = ca.split(".")) && 2 === e.length && (J(37), a.data.set(ce, e[0]), a.data.set(fe, e[1]));
      if (d = d._fplc) J(83), a.data.set(Ae, d);
      if (c) b: if (d = c.indexOf("."), -1 == d) J(22);else {
        e = c.substring(0, d);
        g = c.substring(d + 1);
        d = g.indexOf(".");
        c = g.substring(0, d);
        g = g.substring(d + 1);

        if ("1" == e) {
          if (d = g, ke(d, c)) {
            J(23);
            break b;
          }
        } else if ("2" == e) {
          d = g.indexOf("-");
          e = "";
          0 < d ? (e = g.substring(0, d), d = g.substring(d + 1)) : d = g.substring(1);

          if (ke(e + d, c)) {
            J(53);
            break b;
          }

          e && (J(2), a.data.set(I, e));
        } else {
          J(22);
          break b;
        }

        J(11);
        a.data.set(Q, d);
        if (c = be("_gac", !!a.get(cc))) c = c.split("."), "1" != c[0] || 4 != c.length ? J(72) : ke(c[3], c[1]) ? J(71) : (a.data.set(ce, c[3]), a.data.set(fe, c[2]), J(70));
      }
    } else J(21);
    b && (J(9), a.data.set(Q, K(b)));
    a.get(Q) || (b = (b = O.gaGlobal) && b.from_cookie && "cookie" !== P(a, ac) ? void 0 : (b = b && b.vid) && -1 !== b.search(jd) ? b : void 0, b ? (J(17), a.data.set(Q, b)) : (J(8), a.data.set(Q, ra())));
    a.get(I) || (J(3), a.data.set(I, ra()));
    mc(a);
    b = O.gaGlobal = O.gaGlobal || {};
    c = P(a, Q);
    a = c === P(a, xd);
    if (void 0 == b.vid || a && !b.from_cookie) b.vid = c, b.from_cookie = a;
  },
      pd = function pd(a) {
    var b = O.navigator,
        c = O.screen,
        d = M.location;
    a.set(lb, ya(!!a.get(ec), !!a.get(Kd)));

    if (d) {
      var e = d.pathname || "";
      "/" != e.charAt(0) && (J(31), e = "/" + e);
      a.set(kb, d.protocol + "//" + d.hostname + e + d.search);
    }

    c && a.set(qb, c.width + "x" + c.height);
    c && a.set(pb, c.colorDepth + "-bit");
    c = M.documentElement;
    var g = (e = M.body) && e.clientWidth && e.clientHeight,
        ca = [];
    c && c.clientWidth && c.clientHeight && ("CSS1Compat" === M.compatMode || !g) ? ca = [c.clientWidth, c.clientHeight] : g && (ca = [e.clientWidth, e.clientHeight]);
    c = 0 >= ca[0] || 0 >= ca[1] ? "" : ca.join("x");
    a.set(rb, c);
    a.set(tb, fc());
    a.set(ob, M.characterSet || M.charset);
    a.set(sb, b && "function" === typeof b.javaEnabled && b.javaEnabled() || !1);
    a.set(nb, (b && (b.language || b.browserLanguage) || "").toLowerCase());
    a.data.set(ce, be("gclid", !0));
    a.data.set(ie, be("gclsrc", !0));
    a.data.set(fe, Math.round(new Date().getTime() / 1E3));

    if (d && a.get(cc) && (b = M.location.hash)) {
      b = b.split(/[?&#]+/);
      d = [];

      for (c = 0; c < b.length; ++c) {
        (D(b[c], "utm_id") || D(b[c], "utm_campaign") || D(b[c], "utm_source") || D(b[c], "utm_medium") || D(b[c], "utm_term") || D(b[c], "utm_content") || D(b[c], "gclid") || D(b[c], "dclid") || D(b[c], "gclsrc")) && d.push(b[c]);
      }

      0 < d.length && (b = "#" + d.join("&"), a.set(kb, a.get(kb) + b));
    }
  };

  pc.prototype.get = function (a) {
    return this.b.get(a);
  };

  pc.prototype.set = function (a, b) {
    this.b.set(a, b);
  };

  var me = {
    pageview: [mb],
    event: [ub, xb, yb, zb],
    social: [Bb, Cb, Db],
    timing: [Mb, Nb, Pb, Ob]
  };

  pc.prototype.send = function (a) {
    if (!(1 > arguments.length)) {
      if ("string" === typeof arguments[0]) {
        var b = arguments[0];
        var c = [].slice.call(arguments, 1);
      } else b = arguments[0] && arguments[0][Va], c = arguments;

      b && (c = za(me[b] || [], c), c[Va] = b, this.b.set(c, void 0, !0), this.filters.D(this.b), this.b.data.m = {});
    }
  };

  pc.prototype.ma = function (a, b) {
    var c = this;
    u(a, c, b) || (v(a, function () {
      u(a, c, b);
    }), y(String(c.get(V)), a, void 0, b, !0));
  };

  var rc = function rc(a) {
    if ("prerender" == M.visibilityState) return !1;
    a();
    return !0;
  },
      z = function z(a) {
    if (!rc(a)) {
      J(16);

      var b = !1,
          c = function c() {
        if (!b && rc(a)) {
          b = !0;
          var d = c,
              e = M;
          e.removeEventListener ? e.removeEventListener("visibilitychange", d, !1) : e.detachEvent && e.detachEvent("onvisibilitychange", d);
        }
      };

      L(M, "visibilitychange", c);
    }
  };

  var te = /^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/,
      sc = function sc(a) {
    if (ea(a[0])) this.u = a[0];else {
      var b = te.exec(a[0]);
      null != b && 4 == b.length && (this.c = b[1] || "t0", this.K = b[2] || "", this.methodName = b[3], this.a = [].slice.call(a, 1), this.K || (this.A = "create" == this.methodName, this.i = "require" == this.methodName, this.g = "provide" == this.methodName, this.ba = "remove" == this.methodName), this.i && (3 <= this.a.length ? (this.X = this.a[1], this.W = this.a[2]) : this.a[1] && (qa(this.a[1]) ? this.X = this.a[1] : this.W = this.a[1])));
      b = a[1];
      a = a[2];
      if (!this.methodName) throw "abort";
      if (this.i && (!qa(b) || "" == b)) throw "abort";
      if (this.g && (!qa(b) || "" == b || !ea(a))) throw "abort";
      if (ud(this.c) || ud(this.K)) throw "abort";
      if (this.g && "t0" != this.c) throw "abort";
    }
  };

  function ud(a) {
    return 0 <= a.indexOf(".") || 0 <= a.indexOf(":");
  }

  ;
  var Yd, Zd, $d, A;
  Yd = new ee();
  $d = new ee();
  A = new ee();
  Zd = {
    ec: 45,
    ecommerce: 46,
    linkid: 47
  };

  var u = function u(a, b, c) {
    b == N || b.get(V);
    var d = Yd.get(a);
    if (!ea(d)) return !1;
    b.plugins_ = b.plugins_ || new ee();
    if (b.plugins_.get(a)) return !0;
    b.plugins_.set(a, new d(b, c || {}));
    return !0;
  },
      y = function y(a, b, c, d, e) {
    if (!ea(Yd.get(b)) && !$d.get(b)) {
      Zd.hasOwnProperty(b) && J(Zd[b]);
      a = N.j(a);

      if (p.test(b)) {
        J(52);
        if (!a) return !0;
        c = d || {};
        d = {
          id: b,
          B: c.dataLayer || "dataLayer",
          ia: !!a.get("anonymizeIp"),
          sync: e,
          G: !1
        };
        a.get("&gtm") == b && (d.G = !0);
        var g = String(a.get("name"));
        "t0" != g && (d.target = g);
        G(String(a.get("trackingId"))) || (d.clientId = String(a.get(Q)), d.ka = Number(a.get(n)), c = c.palindrome ? r : q, c = (c = M.cookie.replace(/^|(; +)/g, ";").match(c)) ? c.sort().join("").substring(1) : void 0, d.la = c, d.qa = E(a.b.get(kb) || "", "gclid"));
        c = d.B;
        g = new Date().getTime();
        O[c] = O[c] || [];
        g = {
          "gtm.start": g
        };
        e || (g.event = "gtm.js");
        O[c].push(g);
        c = t(d);
      }

      !c && Zd.hasOwnProperty(b) ? (J(39), c = b + ".js") : J(43);

      if (c) {
        if (a) {
          var ca = a.get(oe);
          qa(ca) || (ca = void 0);
        }

        c && 0 <= c.indexOf("/") || (c = (ca || bd(!1)) + "/plugins/ua/" + c);
        ca = ae(c);
        a = ca.protocol;
        d = M.location.protocol;

        if (("https:" == a || a == d || ("http:" != a ? 0 : "http:" == d)) && B(ca)) {
          if (ca = ca.url) a = (a = M.querySelector && M.querySelector("script[nonce]") || null) ? a.nonce || a.getAttribute && a.getAttribute("nonce") || "" : "", e ? (e = "", a && Nd.test(a) && (e = ' nonce="' + a + '"'), f.test(ca) && M.write("<script" + e + ' src="' + ca + '">\x3c/script>')) : (e = M.createElement("script"), e.type = "text/javascript", e.async = !0, e.src = ca, a && e.setAttribute("nonce", a), ca = M.getElementsByTagName("script")[0], ca.parentNode.insertBefore(e, ca));
          $d.set(b, !0);
        }
      }
    }
  },
      v = function v(a, b) {
    var c = A.get(a) || [];
    c.push(b);
    A.set(a, c);
  },
      C = function C(a, b) {
    Yd.set(a, b);
    b = A.get(a) || [];

    for (var c = 0; c < b.length; c++) {
      b[c]();
    }

    A.set(a, []);
  },
      B = function B(a) {
    var b = ae(M.location.href);
    if (D(a.url, "https://www.google-analytics.com/gtm/js?id=")) return !0;
    if (a.query || 0 <= a.url.indexOf("?") || 0 <= a.path.indexOf("://")) return !1;
    if (a.host == b.host && a.port == b.port) return !0;
    b = "http:" == a.protocol ? 80 : 443;
    return "www.google-analytics.com" == a.host && (a.port || b) == b && D(a.path, "/plugins/") ? !0 : !1;
  },
      ae = function ae(a) {
    function b(l) {
      var k = l.hostname || "",
          w = 0 <= k.indexOf("]");
      k = k.split(w ? "]" : ":")[0].toLowerCase();
      w && (k += "]");
      w = (l.protocol || "").toLowerCase();
      w = 1 * l.port || ("http:" == w ? 80 : "https:" == w ? 443 : "");
      l = l.pathname || "";
      D(l, "/") || (l = "/" + l);
      return [k, "" + w, l];
    }

    var c = M.createElement("a");
    c.href = M.location.href;
    var d = (c.protocol || "").toLowerCase(),
        e = b(c),
        g = c.search || "",
        ca = d + "//" + e[0] + (e[1] ? ":" + e[1] : "");
    D(a, "//") ? a = d + a : D(a, "/") ? a = ca + a : !a || D(a, "?") ? a = ca + e[2] + (a || g) : 0 > a.split("/")[0].indexOf(":") && (a = ca + e[2].substring(0, e[2].lastIndexOf("/")) + "/" + a);
    c.href = a;
    d = b(c);
    return {
      protocol: (c.protocol || "").toLowerCase(),
      host: d[0],
      port: d[1],
      path: d[2],
      query: c.search || "",
      url: a || ""
    };
  };

  var Z = {
    ga: function ga() {
      Z.f = [];
    }
  };
  Z.ga();

  Z.D = function (a) {
    var b = Z.J.apply(Z, arguments);
    b = Z.f.concat(b);

    for (Z.f = []; 0 < b.length && !Z.v(b[0]) && !(b.shift(), 0 < Z.f.length);) {
      ;
    }

    Z.f = Z.f.concat(b);
  };

  Z.J = function (a) {
    for (var b = [], c = 0; c < arguments.length; c++) {
      try {
        var d = new sc(arguments[c]);
        d.g ? C(d.a[0], d.a[1]) : (d.i && (d.ha = y(d.c, d.a[0], d.X, d.W)), b.push(d));
      } catch (e) {}
    }

    return b;
  };

  Z.v = function (a) {
    try {
      if (a.u) a.u.call(O, N.j("t0"));else {
        var b = a.c == gb ? N : N.j(a.c);

        if (a.A) {
          if ("t0" == a.c && (b = N.create.apply(N, a.a), null === b)) return !0;
        } else if (a.ba) N.remove(a.c);else if (b) if (a.i) {
          if (a.ha && (a.ha = y(a.c, a.a[0], a.X, a.W)), !u(a.a[0], b, a.W)) return !0;
        } else if (a.K) {
          var c = a.methodName,
              d = a.a,
              e = b.plugins_.get(a.K);
          e[c].apply(e, d);
        } else b[a.methodName].apply(b, a.a);
      }
    } catch (g) {}
  };

  var N = function N(a) {
    J(1);
    Z.D.apply(Z, [arguments]);
  };

  N.h = {};
  N.P = [];
  N.L = 0;
  N.ya = 0;
  N.answer = 42;
  var we = [Na, W, V];

  N.create = function (a) {
    var b = za(we, [].slice.call(arguments));
    b[V] || (b[V] = "t0");
    var c = "" + b[V];
    if (N.h[c]) return N.h[c];
    if (da(b)) return null;
    b = new pc(b);
    N.h[c] = b;
    N.P.push(b);
    c = qc().tracker_created;
    if (ea(c)) try {
      c(b);
    } catch (d) {}
    return b;
  };

  N.remove = function (a) {
    for (var b = 0; b < N.P.length; b++) {
      if (N.P[b].get(V) == a) {
        N.P.splice(b, 1);
        N.h[a] = null;
        break;
      }
    }
  };

  N.j = function (a) {
    return N.h[a];
  };

  N.getAll = function () {
    return N.P.slice(0);
  };

  N.N = function () {
    "ga" != gb && J(49);
    var a = O[gb];

    if (!a || 42 != a.answer) {
      N.L = a && a.l;
      N.ya = 1 * new Date();
      N.loaded = !0;
      var b = O[gb] = N;
      X("create", b, b.create);
      X("remove", b, b.remove);
      X("getByName", b, b.j, 5);
      X("getAll", b, b.getAll, 6);
      b = pc.prototype;
      X("get", b, b.get, 7);
      X("set", b, b.set, 4);
      X("send", b, b.send);
      X("requireSync", b, b.ma);
      b = Ya.prototype;
      X("get", b, b.get);
      X("set", b, b.set);

      if ("https:" != M.location.protocol && !Ba) {
        a: {
          b = M.getElementsByTagName("script");

          for (var c = 0; c < b.length && 100 > c; c++) {
            var d = b[c].src;

            if (d && 0 == d.indexOf(bd(!0) + "/analytics")) {
              b = !0;
              break a;
            }
          }

          b = !1;
        }

        b && (Ba = !0);
      }

      (O.gaplugins = O.gaplugins || {}).Linker = Dc;
      b = Dc.prototype;
      C("linker", Dc);
      X("decorate", b, b.ca, 20);
      X("autoLink", b, b.S, 25);
      C("displayfeatures", fd);
      C("adfeatures", fd);
      a = a && a.q;
      ka(a) ? Z.D.apply(N, a) : J(50);
    }
  };

  N.da = function () {
    for (var a = N.getAll(), b = 0; b < a.length; b++) {
      a[b].get(V);
    }
  };

  var Ge = N.N,
      He = O[gb];
  He && He.r ? Ge() : z(Ge);
  z(function () {
    Z.D(["provide", "render", ua]);
  });
})(window);

/***/ }),

/***/ "./Resources/assets/js/transaction/app.js":
/*!************************************************!*\
  !*** ./Resources/assets/js/transaction/app.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! ./analytics */ "./Resources/assets/js/transaction/analytics.js");

__webpack_require__(/*! ./firebase-app */ "./Resources/assets/js/transaction/firebase-app.js");

__webpack_require__(/*! ./firebase-messaging */ "./Resources/assets/js/transaction/firebase-messaging.js");

__webpack_require__(/*! ./firebase-firestore */ "./Resources/assets/js/transaction/firebase-firestore.js");

__webpack_require__(/*! ./firebase-auth */ "./Resources/assets/js/transaction/firebase-auth.js");

__webpack_require__(/*! ./notification */ "./Resources/assets/js/transaction/notification.js");

__webpack_require__(/*! ./notification.reducer */ "./Resources/assets/js/transaction/notification.reducer.js");

__webpack_require__(/*! ./ckeditor */ "./Resources/assets/js/transaction/ckeditor.js");

__webpack_require__(/*! ./addreqpayment */ "./Resources/assets/js/transaction/addreqpayment.js");

__webpack_require__(/*! ./index */ "./Resources/assets/js/transaction/index.js");

__webpack_require__(/*! ./previewOfficeMS */ "./Resources/assets/js/transaction/previewOfficeMS.js");

__webpack_require__(/*! ./config */ "./Resources/assets/js/transaction/config.js");

__webpack_require__(/*! ./vi */ "./Resources/assets/js/transaction/vi.js");

__webpack_require__(/*! ./styles */ "./Resources/assets/js/transaction/styles.js");

__webpack_require__(/*! ./plugin */ "./Resources/assets/js/transaction/plugin.js");

__webpack_require__(/*! ./ */ "./Resources/assets/js/transaction/index.js");

/***/ }),

/***/ "./Resources/assets/js/transaction/ckeditor.js":
/*!*****************************************************!*\
  !*** ./Resources/assets/js/transaction/ckeditor.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}/*
Copyright (c) 2003-2014, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.md or http://ckeditor.com/license
*/(function(){if(window.CKEDITOR&&window.CKEDITOR.dom)return;window.CKEDITOR||(window.CKEDITOR=function(){var a=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,e={timestamp:"E7KD",version:"4.4.4",revision:"1ba5105",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:a},status:"unloaded",basePath:function(){var f=window.CKEDITOR_BASEPATH||"";if(!f)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var b=d[c].src.match(a);if(b){f=b[1];break;}}-1==f.indexOf(":/")&&"//"!=f.slice(0,2)&&(f=0===f.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+f:location.href.match(/^[^\?]*\/(?:)/)[0]+f);if(!f)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return f;}(),getUrl:function getUrl(a){-1==a.indexOf(":/")&&0!==a.indexOf("/")&&(a=this.basePath+a);this.timestamp&&"/"!=a.charAt(a.length-1)&&!/[&?]t=/.test(a)&&(a+=(0<=a.indexOf("?")?"&":"?")+"t="+this.timestamp);return a;},domReady:function(){function a(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",a,!1),d()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",a),d());}catch(c){}}function d(){for(var a;a=c.shift();){a();}}var c=[];return function(d){c.push(d);"complete"===document.readyState&&setTimeout(a,1);if(1==c.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",a);window.attachEvent("onload",a);d=!1;try{d=!window.frameElement;}catch(b){}if(document.documentElement.doScroll&&d){var e=function e(){try{document.documentElement.doScroll("left");}catch(n){setTimeout(e,1);return;}a();};e();}}};}()},b=window.CKEDITOR_GETURL;if(b){var c=e.getUrl;e.getUrl=function(a){return b.call(e,a)||c.call(e,a);};}return e;}());CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(a){var e=CKEDITOR.event.prototype,b;for(b in e){a[b]==void 0&&(a[b]=e[b]);}},CKEDITOR.event.prototype=function(){function a(a){var f=e(this);return f[a]||(f[a]=new b(a));}var e=function e(a){a=a.getPrivate&&a.getPrivate()||a._||(a._={});return a.events||(a.events={});},b=function b(a){this.name=a;this.listeners=[];};b.prototype={getListenerIndex:function getListenerIndex(a){for(var f=0,d=this.listeners;f<d.length;f++){if(d[f].fn==a)return f;}return-1;}};return{define:function define(c,f){var d=a.call(this,c);CKEDITOR.tools.extend(d,f,true);},on:function on(c,f,d,b,e){function l(a,n,t,e){a={name:c,sender:this,editor:a,data:n,listenerData:b,stop:t,cancel:e,removeListener:h};return f.call(d,a)===false?false:a.data;}function h(){t.removeListener(c,f);}var n=a.call(this,c);if(n.getListenerIndex(f)<0){n=n.listeners;d||(d=this);isNaN(e)&&(e=10);var t=this;l.fn=f;l.priority=e;for(var y=n.length-1;y>=0;y--){if(n[y].priority<=e){n.splice(y+1,0,l);return{removeListener:h};}}n.unshift(l);}return{removeListener:h};},once:function once(){var a=arguments[1];arguments[1]=function(f){f.removeListener();return a.apply(this,arguments);};return this.on.apply(this,arguments);},capture:function capture(){CKEDITOR.event.useCapture=1;var a=this.on.apply(this,arguments);CKEDITOR.event.useCapture=0;return a;},fire:function(){var a=0,f=function f(){a=1;},d=0,b=function b(){d=1;};return function(j,l,h){var n=e(this)[j],j=a,t=d;a=d=0;if(n){var y=n.listeners;if(y.length)for(var y=y.slice(0),z,o=0;o<y.length;o++){if(n.errorProof)try{z=y[o].call(this,h,l,f,b);}catch(r){}else z=y[o].call(this,h,l,f,b);z===false?d=1:typeof z!="undefined"&&(l=z);if(a||d)break;}}l=d?false:typeof l=="undefined"?true:l;a=j;d=t;return l;};}(),fireOnce:function fireOnce(a,f,d){f=this.fire(a,f,d);delete e(this)[a];return f;},removeListener:function removeListener(a,f){var d=e(this)[a];if(d){var b=d.getListenerIndex(f);b>=0&&d.listeners.splice(b,1);}},removeAllListeners:function removeAllListeners(){var a=e(this),f;for(f in a){delete a[f];}},hasListeners:function hasListeners(a){return(a=e(this)[a])&&a.listeners.length>0;}};}());CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]);CKEDITOR.event.call(this);},CKEDITOR.editor.prototype.fire=function(a,e){a in{instanceReady:1,loaded:1}&&(this[a]=true);return CKEDITOR.event.prototype.fire.call(this,a,e,this);},CKEDITOR.editor.prototype.fireOnce=function(a,e){a in{instanceReady:1,loaded:1}&&(this[a]=true);return CKEDITOR.event.prototype.fireOnce.call(this,a,e,this);},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype));CKEDITOR.env||(CKEDITOR.env=function(){var a=navigator.userAgent.toLowerCase(),e={ie:a.indexOf("trident/")>-1,webkit:a.indexOf(" applewebkit/")>-1,air:a.indexOf(" adobeair/")>-1,mac:a.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat"&&(!document.documentMode||document.documentMode<10),mobile:a.indexOf("mobile")>-1,iOS:/(ipad|iphone|ipod)/.test(a),isCustomDomain:function isCustomDomain(){if(!this.ie)return false;var a=document.domain,d=window.location.hostname;return a!=d&&a!="["+d+"]";},secure:location.protocol=="https:"};e.gecko=navigator.product=="Gecko"&&!e.webkit&&!e.ie;if(e.webkit)a.indexOf("chrome")>-1?e.chrome=true:e.safari=true;var b=0;if(e.ie){b=e.quirks||!document.documentMode?parseFloat(a.match(/msie (\d+)/)[1]):document.documentMode;e.ie9Compat=b==9;e.ie8Compat=b==8;e.ie7Compat=b==7;e.ie6Compat=b<7||e.quirks;}if(e.gecko){var c=a.match(/rv:([\d\.]+)/);if(c){c=c[1].split(".");b=c[0]*1E4+(c[1]||0)*100+(c[2]||0)*1;}}e.air&&(b=parseFloat(a.match(/ adobeair\/(\d+)/)[1]));e.webkit&&(b=parseFloat(a.match(/ applewebkit\/(\d+)/)[1]));e.version=b;e.isCompatible=e.iOS&&b>=534||!e.mobile&&(e.ie&&b>6||e.gecko&&b>=2E4||e.air&&b>=1||e.webkit&&b>=522||false);e.hidpi=window.devicePixelRatio>=2;e.needsBrFiller=e.gecko||e.webkit||e.ie&&b>10;e.needsNbspFiller=e.ie&&b<11;e.cssClass="cke_browser_"+(e.ie?"ie":e.gecko?"gecko":e.webkit?"webkit":"unknown");if(e.quirks)e.cssClass=e.cssClass+" cke_browser_quirks";if(e.ie)e.cssClass=e.cssClass+(" cke_browser_ie"+(e.quirks?"6 cke_browser_iequirks":e.version));if(e.air)e.cssClass=e.cssClass+" cke_browser_air";if(e.iOS)e.cssClass=e.cssClass+" cke_browser_ios";if(e.hidpi)e.cssClass=e.cssClass+" cke_hidpi";return e;}());"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR);CKEDITOR.loadFullCore=function(){if(CKEDITOR.status!="basic_ready")CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var a=document.createElement("script");a.type="text/javascript";a.src=CKEDITOR.basePath+"ckeditor.js";document.getElementsByTagName("head")[0].appendChild(a);}};CKEDITOR.loadFullCoreTimeout=0;CKEDITOR.add=function(a){(this._.pending||(this._.pending=[])).push(a);};(function(){CKEDITOR.domReady(function(){var a=CKEDITOR.loadFullCore,e=CKEDITOR.loadFullCoreTimeout;if(a){CKEDITOR.status="basic_ready";a&&a._load?a():e&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore();},e*1E3);}});})();CKEDITOR.status="basic_loaded";}();CKEDITOR.dom={};(function(){var a=[],e=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",b=/&/g,c=/>/g,f=/</g,d=/"/g,g=/&amp;/g,j=/&gt;/g,l=/&lt;/g,h=/&quot;/g;CKEDITOR.on("reset",function(){a=[];});CKEDITOR.tools={arrayCompare:function arrayCompare(a,f){if(!a&&!f)return true;if(!a||!f||a.length!=f.length)return false;for(var d=0;d<a.length;d++){if(a[d]!=f[d])return false;}return true;},clone:function clone(a){var f;if(a&&a instanceof Array){f=[];for(var d=0;d<a.length;d++){f[d]=CKEDITOR.tools.clone(a[d]);}return f;}if(a===null||_typeof(a)!="object"||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date||a instanceof RegExp||a.nodeType||a.window===a)return a;f=new a.constructor();for(d in a){f[d]=CKEDITOR.tools.clone(a[d]);}return f;},capitalize:function capitalize(a,f){return a.charAt(0).toUpperCase()+(f?a.slice(1):a.slice(1).toLowerCase());},extend:function extend(a){var f=arguments.length,d,b;if(typeof(d=arguments[f-1])=="boolean")f--;else if(typeof(d=arguments[f-2])=="boolean"){b=arguments[f-1];f=f-2;}for(var c=1;c<f;c++){var e=arguments[c],g;for(g in e){if(d===true||a[g]==void 0)if(!b||g in b)a[g]=e[g];}}return a;},prototypedCopy:function prototypedCopy(a){var f=function f(){};f.prototype=a;return new f();},copy:function copy(a){var f={},d;for(d in a){f[d]=a[d];}return f;},isArray:function isArray(a){return Object.prototype.toString.call(a)=="[object Array]";},isEmpty:function isEmpty(a){for(var f in a){if(a.hasOwnProperty(f))return false;}return true;},cssVendorPrefix:function cssVendorPrefix(a,f,d){if(d)return e+a+":"+f+";"+a+":"+f;d={};d[a]=f;d[e+a]=f;return d;},cssStyleToDomStyle:function(){var a=document.createElement("div").style,f=typeof a.cssFloat!="undefined"?"cssFloat":typeof a.styleFloat!="undefined"?"styleFloat":"float";return function(a){return a=="float"?f:a.replace(/-./g,function(a){return a.substr(1).toUpperCase();});};}(),buildStyleHtml:function buildStyleHtml(a){for(var a=[].concat(a),f,d=[],b=0;b<a.length;b++){if(f=a[b])/@import|[{}]/.test(f)?d.push("<style>"+f+"</style>"):d.push('<link type="text/css" rel=stylesheet href="'+f+'">');}return d.join("");},htmlEncode:function htmlEncode(a){return(""+a).replace(b,"&amp;").replace(c,"&gt;").replace(f,"&lt;");},htmlDecode:function htmlDecode(a){return a.replace(g,"&").replace(j,">").replace(l,"<");},htmlEncodeAttr:function htmlEncodeAttr(a){return a.replace(d,"&quot;").replace(f,"&lt;").replace(c,"&gt;");},htmlDecodeAttr:function htmlDecodeAttr(a){return a.replace(h,'"').replace(l,"<").replace(j,">");},getNextNumber:function(){var a=0;return function(){return++a;};}(),getNextId:function getNextId(){return"cke_"+this.getNextNumber();},override:function override(a,f){var d=f(a);d.prototype=a.prototype;return d;},setTimeout:function setTimeout(a,f,d,b,c){c||(c=window);d||(d=c);return c.setTimeout(function(){b?a.apply(d,[].concat(b)):a.apply(d);},f||0);},trim:function(){var a=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(f){return f.replace(a,"");};}(),ltrim:function(){var a=/^[ \t\n\r]+/g;return function(f){return f.replace(a,"");};}(),rtrim:function(){var a=/[ \t\n\r]+$/g;return function(f){return f.replace(a,"");};}(),indexOf:function indexOf(a,f){if(typeof f=="function")for(var d=0,b=a.length;d<b;d++){if(f(a[d]))return d;}else{if(a.indexOf)return a.indexOf(f);d=0;for(b=a.length;d<b;d++){if(a[d]===f)return d;}}return-1;},search:function search(a,f){var d=CKEDITOR.tools.indexOf(a,f);return d>=0?a[d]:null;},bind:function bind(a,f){return function(){return a.apply(f,arguments);};},createClass:function createClass(a){var f=a.$,d=a.base,b=a.privates||a._,c=a.proto,a=a.statics;!f&&(f=function f(){d&&this.base.apply(this,arguments);});if(b)var e=f,f=function f(){var a=this._||(this._={}),f;for(f in b){var d=b[f];a[f]=typeof d=="function"?CKEDITOR.tools.bind(d,this):d;}e.apply(this,arguments);};if(d){f.prototype=this.prototypedCopy(d.prototype);f.prototype.constructor=f;f.base=d;f.baseProto=d.prototype;f.prototype.base=function(){this.base=d.prototype.base;d.apply(this,arguments);this.base=arguments.callee;};}c&&this.extend(f.prototype,c,true);a&&this.extend(f,a,true);return f;},addFunction:function addFunction(f,d){return a.push(function(){return f.apply(d||this,arguments);})-1;},removeFunction:function removeFunction(f){a[f]=null;},callFunction:function callFunction(f){var d=a[f];return d&&d.apply(window,Array.prototype.slice.call(arguments,1));},cssLength:function(){var a=/^-?\d+\.?\d*px$/,f;return function(d){f=CKEDITOR.tools.trim(d+"")+"px";return a.test(f)?f:d||"";};}(),convertToPx:function(){var a;return function(f){if(!a){a=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document);CKEDITOR.document.getBody().append(a);}if(!/%$/.test(f)){a.setStyle("width",f);return a.$.clientWidth;}return f;};}(),repeat:function repeat(a,f){return Array(f+1).join(a);},tryThese:function tryThese(){for(var a,f=0,d=arguments.length;f<d;f++){var b=arguments[f];try{a=b();break;}catch(c){}}return a;},genKey:function genKey(){return Array.prototype.slice.call(arguments).join("-");},defer:function defer(a){return function(){var f=arguments,d=this;window.setTimeout(function(){a.apply(d,f);},0);};},normalizeCssText:function normalizeCssText(a,f){var d=[],b,c=CKEDITOR.tools.parseCssText(a,true,f);for(b in c){d.push(b+":"+c[b]);}d.sort();return d.length?d.join(";")+";":"";},convertRgbToHex:function convertRgbToHex(a){return a.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(a,f,d,b){a=[f,d,b];for(f=0;f<3;f++){a[f]=("0"+parseInt(a[f],10).toString(16)).slice(-2);}return"#"+a.join("");});},parseCssText:function parseCssText(a,f,d){var b={};if(d){d=new CKEDITOR.dom.element("span");d.setAttribute("style",a);a=CKEDITOR.tools.convertRgbToHex(d.getAttribute("style")||"");}if(!a||a==";")return b;a.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,d,c){if(f){d=d.toLowerCase();d=="font-family"&&(c=c.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,","));c=CKEDITOR.tools.trim(c);}b[d]=c;});return b;},writeCssText:function writeCssText(a,f){var d,b=[];for(d in a){b.push(d+":"+a[d]);}f&&b.sort();return b.join("; ");},objectCompare:function objectCompare(a,f,d){var b;if(!a&&!f)return true;if(!a||!f)return false;for(b in a){if(a[b]!=f[b])return false;}if(!d)for(b in f){if(a[b]!=f[b])return false;}return true;},objectKeys:function objectKeys(a){var f=[],d;for(d in a){f.push(d);}return f;},convertArrayToObject:function convertArrayToObject(a,f){var d={};arguments.length==1&&(f=true);for(var b=0,c=a.length;b<c;++b){d[a[b]]=f;}return d;},fixDomain:function fixDomain(){for(var a;;){try{a=window.parent.document.domain;break;}catch(f){a=a?a.replace(/.+?(?:\.|$)/,""):document.domain;if(!a)break;document.domain=a;}}return!!a;},eventsBuffer:function eventsBuffer(a,f){function d(){c=new Date().getTime();b=false;f();}var b,c=0;return{input:function input(){if(!b){var f=new Date().getTime()-c;f<a?b=setTimeout(d,a-f):d();}},reset:function reset(){b&&clearTimeout(b);b=c=0;}};},enableHtml5Elements:function enableHtml5Elements(a,f){for(var d=["abbr","article","aside","audio","bdi","canvas","data","datalist","details","figcaption","figure","footer","header","hgroup","mark","meter","nav","output","progress","section","summary","time","video"],b=d.length,c;b--;){c=a.createElement(d[b]);f&&a.appendChild(c);}},checkIfAnyArrayItemMatches:function checkIfAnyArrayItemMatches(a,f){for(var d=0,b=a.length;d<b;++d){if(a[d].match(f))return true;}return false;},checkIfAnyObjectPropertyMatches:function checkIfAnyObjectPropertyMatches(a,f){for(var d in a){if(d.match(f))return true;}return false;},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw=="};})();CKEDITOR.dtd=function(){var a=CKEDITOR.tools.extend,e=function e(a,f){for(var d=CKEDITOR.tools.clone(a),b=1;b<arguments.length;b++){var f=arguments[b],c;for(c in f){delete d[c];}}return d;},b={},c={},f={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},d={command:1,link:1,meta:1,noscript:1,script:1,style:1},g={},j={"#":1},l={center:1,dir:1,noframes:1};a(b,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},j,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1});a(c,f,b,l);e={a:e(b,{a:1,button:1}),abbr:b,address:c,area:g,article:a({style:1},c),aside:a({style:1},c),audio:a({source:1,track:1},c),b:b,base:g,bdi:b,bdo:b,blockquote:c,body:c,br:g,button:e(b,{a:1,button:1}),canvas:b,caption:c,cite:b,code:b,col:g,colgroup:{col:1},command:g,datalist:a({option:1},b),dd:c,del:b,details:a({summary:1},c),dfn:b,div:a({style:1},c),dl:{dt:1,dd:1},dt:c,em:b,embed:g,fieldset:a({legend:1},c),figcaption:c,figure:a({figcaption:1},c),footer:c,form:c,h1:b,h2:b,h3:b,h4:b,h5:b,h6:b,head:a({title:1,base:1},d),header:c,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:g,html:a({head:1,body:1},c,d),i:b,iframe:j,img:g,input:g,ins:b,kbd:b,keygen:g,label:b,legend:b,li:c,link:g,map:c,mark:b,menu:a({li:1},c),meta:g,meter:e(b,{meter:1}),nav:c,noscript:a({link:1,meta:1,style:1},b),object:a({param:1},b),ol:{li:1},optgroup:{option:1},option:j,output:b,p:b,param:g,pre:b,progress:e(b,{progress:1}),q:b,rp:b,rt:b,ruby:a({rp:1,rt:1},b),s:b,samp:b,script:j,section:a({style:1},c),select:{optgroup:1,option:1},small:b,source:g,span:b,strong:b,style:j,sub:b,summary:b,sup:b,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:c,textarea:j,tfoot:{tr:1},th:c,thead:{tr:1},time:e(b,{time:1}),title:j,tr:{th:1,td:1},track:g,u:b,ul:{li:1},"var":b,video:a({source:1,track:1},c),wbr:g,acronym:b,applet:a({param:1},c),basefont:g,big:b,center:c,dialog:g,dir:{li:1},font:b,isindex:g,noframes:c,strike:b,tt:b};a(e,{$block:a({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},f,l),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:b,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:a({body:1,head:1,html:1},e.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}});return e;}();CKEDITOR.dom.event=function(a){this.$=a;};CKEDITOR.dom.event.prototype={getKey:function getKey(){return this.$.keyCode||this.$.which;},getKeystroke:function getKeystroke(){var a=this.getKey();if(this.$.ctrlKey||this.$.metaKey)a=a+CKEDITOR.CTRL;this.$.shiftKey&&(a=a+CKEDITOR.SHIFT);this.$.altKey&&(a=a+CKEDITOR.ALT);return a;},preventDefault:function preventDefault(a){var e=this.$;e.preventDefault?e.preventDefault():e.returnValue=false;a&&this.stopPropagation();},stopPropagation:function stopPropagation(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=true;},getTarget:function getTarget(){var a=this.$.target||this.$.srcElement;return a?new CKEDITOR.dom.node(a):null;},getPhase:function getPhase(){return this.$.eventPhase||2;},getPageOffset:function getPageOffset(){var a=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(a.documentElement.scrollLeft||a.body.scrollLeft),y:this.$.pageY||this.$.clientY+(a.documentElement.scrollTop||a.body.scrollTop)};}};CKEDITOR.CTRL=1114112;CKEDITOR.SHIFT=2228224;CKEDITOR.ALT=4456448;CKEDITOR.EVENT_PHASE_CAPTURING=1;CKEDITOR.EVENT_PHASE_AT_TARGET=2;CKEDITOR.EVENT_PHASE_BUBBLING=3;CKEDITOR.dom.domObject=function(a){if(a)this.$=a;};CKEDITOR.dom.domObject.prototype=function(){var a=function a(_a,b){return function(c){typeof CKEDITOR!="undefined"&&_a.fire(b,new CKEDITOR.dom.event(c));};};return{getPrivate:function getPrivate(){var a;if(!(a=this.getCustomData("_")))this.setCustomData("_",a={});return a;},on:function on(e){var b=this.getCustomData("_cke_nativeListeners");if(!b){b={};this.setCustomData("_cke_nativeListeners",b);}if(!b[e]){b=b[e]=a(this,e);this.$.addEventListener?this.$.addEventListener(e,b,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+e,b);}return CKEDITOR.event.prototype.on.apply(this,arguments);},removeListener:function removeListener(a){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(a)){var b=this.getCustomData("_cke_nativeListeners"),c=b&&b[a];if(c){this.$.removeEventListener?this.$.removeEventListener(a,c,false):this.$.detachEvent&&this.$.detachEvent("on"+a,c);delete b[a];}}},removeAllListeners:function removeAllListeners(){var a=this.getCustomData("_cke_nativeListeners"),b;for(b in a){var c=a[b];this.$.detachEvent?this.$.detachEvent("on"+b,c):this.$.removeEventListener&&this.$.removeEventListener(b,c,false);delete a[b];}CKEDITOR.event.prototype.removeAllListeners.call(this);}};}();(function(a){var e={};CKEDITOR.on("reset",function(){e={};});a.equals=function(a){try{return a&&a.$===this.$;}catch(c){return false;}};a.setCustomData=function(a,c){var f=this.getUniqueId();(e[f]||(e[f]={}))[a]=c;return this;};a.getCustomData=function(a){var c=this.$["data-cke-expando"];return(c=c&&e[c])&&a in c?c[a]:null;};a.removeCustomData=function(a){var c=this.$["data-cke-expando"],c=c&&e[c],f,d;if(c){f=c[a];d=a in c;delete c[a];}return d?f:null;};a.clearCustomData=function(){this.removeAllListeners();var a=this.$["data-cke-expando"];a&&delete e[a];};a.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber());};CKEDITOR.event.implementOn(a);})(CKEDITOR.dom.domObject.prototype);CKEDITOR.dom.node=function(a){return a?new CKEDITOR.dom[a.nodeType==CKEDITOR.NODE_DOCUMENT?"document":a.nodeType==CKEDITOR.NODE_ELEMENT?"element":a.nodeType==CKEDITOR.NODE_TEXT?"text":a.nodeType==CKEDITOR.NODE_COMMENT?"comment":a.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](a):this;};CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject();CKEDITOR.NODE_ELEMENT=1;CKEDITOR.NODE_DOCUMENT=9;CKEDITOR.NODE_TEXT=3;CKEDITOR.NODE_COMMENT=8;CKEDITOR.NODE_DOCUMENT_FRAGMENT=11;CKEDITOR.POSITION_IDENTICAL=0;CKEDITOR.POSITION_DISCONNECTED=1;CKEDITOR.POSITION_FOLLOWING=2;CKEDITOR.POSITION_PRECEDING=4;CKEDITOR.POSITION_IS_CONTAINED=8;CKEDITOR.POSITION_CONTAINS=16;CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function appendTo(a,e){a.append(this,e);return a;},clone:function clone(a,e){var b=this.$.cloneNode(a),c=function c(f){f["data-cke-expando"]&&(f["data-cke-expando"]=false);if(f.nodeType==CKEDITOR.NODE_ELEMENT){e||f.removeAttribute("id",false);if(a)for(var f=f.childNodes,d=0;d<f.length;d++){c(f[d]);}}};c(b);return new CKEDITOR.dom.node(b);},hasPrevious:function hasPrevious(){return!!this.$.previousSibling;},hasNext:function hasNext(){return!!this.$.nextSibling;},insertAfter:function insertAfter(a){a.$.parentNode.insertBefore(this.$,a.$.nextSibling);return a;},insertBefore:function insertBefore(a){a.$.parentNode.insertBefore(this.$,a.$);return a;},insertBeforeMe:function insertBeforeMe(a){this.$.parentNode.insertBefore(a.$,this.$);return a;},getAddress:function getAddress(a){for(var e=[],b=this.getDocument().$.documentElement,c=this.$;c&&c!=b;){var f=c.parentNode;f&&e.unshift(this.getIndex.call({$:c},a));c=f;}return e;},getDocument:function getDocument(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument);},getIndex:function getIndex(a){var e=this.$,b=-1,c;if(!this.$.parentNode)return b;do{if(!a||!(e!=this.$&&e.nodeType==CKEDITOR.NODE_TEXT&&(c||!e.nodeValue))){b++;c=e.nodeType==CKEDITOR.NODE_TEXT;}}while(e=e.previousSibling);return b;},getNextSourceNode:function getNextSourceNode(a,e,b){if(b&&!b.call)var c=b,b=function b(a){return!a.equals(c);};var a=!a&&this.getFirst&&this.getFirst(),f;if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&b&&b(this,true)===false)return null;a=this.getNext();}for(;!a&&(f=(f||this).getParent());){if(b&&b(f,true)===false)return null;a=f.getNext();}return!a||b&&b(a)===false?null:e&&e!=a.type?a.getNextSourceNode(false,e,b):a;},getPreviousSourceNode:function getPreviousSourceNode(a,e,b){if(b&&!b.call)var c=b,b=function b(a){return!a.equals(c);};var a=!a&&this.getLast&&this.getLast(),f;if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&b&&b(this,true)===false)return null;a=this.getPrevious();}for(;!a&&(f=(f||this).getParent());){if(b&&b(f,true)===false)return null;a=f.getPrevious();}return!a||b&&b(a)===false?null:e&&a.type!=e?a.getPreviousSourceNode(false,e,b):a;},getPrevious:function getPrevious(a){var e=this.$,b;do{b=(e=e.previousSibling)&&e.nodeType!=10&&new CKEDITOR.dom.node(e);}while(b&&a&&!a(b));return b;},getNext:function getNext(a){var e=this.$,b;do{b=(e=e.nextSibling)&&new CKEDITOR.dom.node(e);}while(b&&a&&!a(b));return b;},getParent:function getParent(a){var e=this.$.parentNode;return e&&(e.nodeType==CKEDITOR.NODE_ELEMENT||a&&e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(e):null;},getParents:function getParents(a){var e=this,b=[];do{b[a?"push":"unshift"](e);}while(e=e.getParent());return b;},getCommonAncestor:function getCommonAncestor(a){if(a.equals(this))return this;if(a.contains&&a.contains(this))return a;var e=this.contains?this:this.getParent();do{if(e.contains(a))return e;}while(e=e.getParent());return null;},getPosition:function getPosition(a){var e=this.$,b=a.$;if(e.compareDocumentPosition)return e.compareDocumentPosition(b);if(e==b)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&a.type==CKEDITOR.NODE_ELEMENT){if(e.contains){if(e.contains(b))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(b.contains(e))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING;}if("sourceIndex"in e)return e.sourceIndex<0||b.sourceIndex<0?CKEDITOR.POSITION_DISCONNECTED:e.sourceIndex<b.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;}for(var e=this.getAddress(),a=a.getAddress(),b=Math.min(e.length,a.length),c=0;c<=b-1;c++){if(e[c]!=a[c]){if(c<b)return e[c]<a[c]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;break;}}return e.length<a.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING;},getAscendant:function getAscendant(a,e){var b=this.$,c;if(!e)b=b.parentNode;for(;b;){if(b.nodeName&&(c=b.nodeName.toLowerCase(),typeof a=="string"?c==a:c in a))return new CKEDITOR.dom.node(b);try{b=b.parentNode;}catch(f){b=null;}}return null;},hasAscendant:function hasAscendant(a,e){var b=this.$;if(!e)b=b.parentNode;for(;b;){if(b.nodeName&&b.nodeName.toLowerCase()==a)return true;b=b.parentNode;}return false;},move:function move(a,e){a.append(this.remove(),e);},remove:function remove(a){var e=this.$,b=e.parentNode;if(b){if(a)for(;a=e.firstChild;){b.insertBefore(e.removeChild(a),e);}b.removeChild(e);}return this;},replace:function replace(a){this.insertBefore(a);a.remove();},trim:function trim(){this.ltrim();this.rtrim();},ltrim:function ltrim(){for(var a;this.getFirst&&(a=this.getFirst());){if(a.type==CKEDITOR.NODE_TEXT){var e=CKEDITOR.tools.ltrim(a.getText()),b=a.getLength();if(e){if(e.length<b){a.split(b-e.length);this.$.removeChild(this.$.firstChild);}}else{a.remove();continue;}}break;}},rtrim:function rtrim(){for(var a;this.getLast&&(a=this.getLast());){if(a.type==CKEDITOR.NODE_TEXT){var e=CKEDITOR.tools.rtrim(a.getText()),b=a.getLength();if(e){if(e.length<b){a.split(e.length);this.$.lastChild.parentNode.removeChild(this.$.lastChild);}}else{a.remove();continue;}}break;}if(CKEDITOR.env.needsBrFiller)(a=this.$.lastChild)&&a.type==1&&a.nodeName.toLowerCase()=="br"&&a.parentNode.removeChild(a);},isReadOnly:function isReadOnly(){var a=this;this.type!=CKEDITOR.NODE_ELEMENT&&(a=this.getParent());if(a&&typeof a.$.isContentEditable!="undefined")return!(a.$.isContentEditable||a.data("cke-editable"));for(;a;){if(a.data("cke-editable"))break;if(a.getAttribute("contentEditable")=="false")return true;if(a.getAttribute("contentEditable")=="true")break;a=a.getParent();}return!a;}});CKEDITOR.dom.window=function(a){CKEDITOR.dom.domObject.call(this,a);};CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject();CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function focus(){this.$.focus();},getViewPaneSize:function getViewPaneSize(){var a=this.$.document,e=a.compatMode=="CSS1Compat";return{width:(e?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(e?a.documentElement.clientHeight:a.body.clientHeight)||0};},getScrollPosition:function getScrollPosition(){var a=this.$;if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};a=a.document;return{x:a.documentElement.scrollLeft||a.body.scrollLeft||0,y:a.documentElement.scrollTop||a.body.scrollTop||0};},getFrame:function getFrame(){var a=this.$.frameElement;return a?new CKEDITOR.dom.element.get(a):null;}});CKEDITOR.dom.document=function(a){CKEDITOR.dom.domObject.call(this,a);};CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject();CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function appendStyleSheet(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var e=new CKEDITOR.dom.element("link");e.setAttributes({rel:"stylesheet",type:"text/css",href:a});this.getHead().append(e);}},appendStyleText:function appendStyleText(a){if(this.$.createStyleSheet){var e=this.$.createStyleSheet("");e.cssText=a;}else{var b=new CKEDITOR.dom.element("style",this);b.append(new CKEDITOR.dom.text(a,this));this.getHead().append(b);}return e||b.$.sheet;},createElement:function createElement(a,e){var b=new CKEDITOR.dom.element(a,this);if(e){e.attributes&&b.setAttributes(e.attributes);e.styles&&b.setStyles(e.styles);}return b;},createText:function createText(a){return new CKEDITOR.dom.text(a,this);},focus:function focus(){this.getWindow().focus();},getActive:function getActive(){var a;try{a=this.$.activeElement;}catch(e){return null;}return new CKEDITOR.dom.element(a);},getById:function getById(a){return(a=this.$.getElementById(a))?new CKEDITOR.dom.element(a):null;},getByAddress:function getByAddress(a,e){for(var b=this.$.documentElement,c=0;b&&c<a.length;c++){var f=a[c];if(e)for(var d=-1,g=0;g<b.childNodes.length;g++){var j=b.childNodes[g];if(!(e===true&&j.nodeType==3&&j.previousSibling&&j.previousSibling.nodeType==3)){d++;if(d==f){b=j;break;}}}else b=b.childNodes[f];}return b?new CKEDITOR.dom.node(b):null;},getElementsByTag:function getElementsByTag(a,e){if((!CKEDITOR.env.ie||document.documentMode>8)&&e)a=e+":"+a;return new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(a));},getHead:function getHead(){var a=this.$.getElementsByTagName("head")[0];return a=a?new CKEDITOR.dom.element(a):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),true);},getBody:function getBody(){return new CKEDITOR.dom.element(this.$.body);},getDocumentElement:function getDocumentElement(){return new CKEDITOR.dom.element(this.$.documentElement);},getWindow:function getWindow(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView);},write:function write(a){this.$.open("text/html","replace");CKEDITOR.env.ie&&(a=a.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();<\/script>"));this.$.write(a);this.$.close();},find:function find(a){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(a));},findOne:function findOne(a){return(a=this.$.querySelector(a))?new CKEDITOR.dom.element(a):null;},_getHtml5ShivFrag:function _getHtml5ShivFrag(){var a=this.getCustomData("html5ShivFrag");if(!a){a=this.$.createDocumentFragment();CKEDITOR.tools.enableHtml5Elements(a,true);this.setCustomData("html5ShivFrag",a);}return a;}});CKEDITOR.dom.nodeList=function(a){this.$=a;};CKEDITOR.dom.nodeList.prototype={count:function count(){return this.$.length;},getItem:function getItem(a){if(a<0||a>=this.$.length)return null;return(a=this.$[a])?new CKEDITOR.dom.node(a):null;}};CKEDITOR.dom.element=function(a,e){typeof a=="string"&&(a=(e?e.$:document).createElement(a));CKEDITOR.dom.domObject.call(this,a);};CKEDITOR.dom.element.get=function(a){return(a=typeof a=="string"?document.getElementById(a)||document.getElementsByName(a)[0]:a)&&(a.$?a:new CKEDITOR.dom.element(a));};CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node();CKEDITOR.dom.element.createFromHtml=function(a,e){var b=new CKEDITOR.dom.element("div",e);b.setHtml(a);return b.getFirst().remove();};CKEDITOR.dom.element.setMarker=function(a,e,b,c){var f=e.getCustomData("list_marker_id")||e.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),d=e.getCustomData("list_marker_names")||e.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");a[f]=e;d[b]=1;return e.setCustomData(b,c);};CKEDITOR.dom.element.clearAllMarkers=function(a){for(var e in a){CKEDITOR.dom.element.clearMarkers(a,a[e],1);}};CKEDITOR.dom.element.clearMarkers=function(a,e,b){var c=e.getCustomData("list_marker_names"),f=e.getCustomData("list_marker_id"),d;for(d in c){e.removeCustomData(d);}e.removeCustomData("list_marker_names");if(b){e.removeCustomData("list_marker_id");delete a[f];}};(function(){function a(a){var d=true;if(!a.$.id){a.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber();d=false;}return function(){d||a.removeAttribute("id");};}function e(a,d){return"#"+a.$.id+" "+d.split(/,\s*/).join(", #"+a.$.id+" ");}function b(a){for(var d=0,b=0,e=c[a].length;b<e;b++){d=d+(parseInt(this.getComputedStyle(c[a][b])||0,10)||0);}return d;}CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:function addClass(a){var d=this.$.className;d&&(RegExp("(?:^|\\s)"+a+"(?:\\s|$)","").test(d)||(d=d+(" "+a)));this.$.className=d||a;return this;},removeClass:function removeClass(a){var d=this.getAttribute("class");if(d){a=RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","i");if(a.test(d))(d=d.replace(a,"").replace(/^\s+/,""))?this.setAttribute("class",d):this.removeAttribute("class");}return this;},hasClass:function hasClass(a){return RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","").test(this.getAttribute("class"));},append:function append(a,d){typeof a=="string"&&(a=this.getDocument().createElement(a));d?this.$.insertBefore(a.$,this.$.firstChild):this.$.appendChild(a.$);return a;},appendHtml:function appendHtml(a){if(this.$.childNodes.length){var d=new CKEDITOR.dom.element("div",this.getDocument());d.setHtml(a);d.moveChildren(this);}else this.setHtml(a);},appendText:function appendText(a){this.$.text!=void 0?this.$.text=this.$.text+a:this.append(new CKEDITOR.dom.text(a));},appendBogus:function appendBogus(a){if(a||CKEDITOR.env.needsBrFiller){for(a=this.getLast();a&&a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(a.getText());){a=a.getPrevious();}if(!a||!a.is||!a.is("br")){a=this.getDocument().createElement("br");CKEDITOR.env.gecko&&a.setAttribute("type","_moz");this.append(a);}}},breakParent:function breakParent(a){var d=new CKEDITOR.dom.range(this.getDocument());d.setStartAfter(this);d.setEndAfter(a);a=d.extractContents();d.insertNode(this.remove());a.insertAfterNode(this);},contains:CKEDITOR.env.ie||CKEDITOR.env.webkit?function(a){var d=this.$;return a.type!=CKEDITOR.NODE_ELEMENT?d.contains(a.getParent().$):d!=a.$&&d.contains(a.$);}:function(a){return!!(this.$.compareDocumentPosition(a.$)&16);},focus:function(){function a(){try{this.$.focus();}catch(f){}}return function(d){d?CKEDITOR.tools.setTimeout(a,100,this):a.call(this);};}(),getHtml:function getHtml(){var a=this.$.innerHTML;return CKEDITOR.env.ie?a.replace(/<\?[^>]*>/g,""):a;},getOuterHtml:function getOuterHtml(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var a=this.$.ownerDocument.createElement("div");a.appendChild(this.$.cloneNode(true));return a.innerHTML;},getClientRect:function getClientRect(){var a=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());!a.width&&(a.width=a.right-a.left);!a.height&&(a.height=a.bottom-a.top);return a;},setHtml:CKEDITOR.env.ie&&CKEDITOR.env.version<9?function(a){try{var d=this.$;if(this.getParent())return d.innerHTML=a;var b=this.getDocument()._getHtml5ShivFrag();b.appendChild(d);d.innerHTML=a;b.removeChild(d);return a;}catch(c){this.$.innerHTML="";d=new CKEDITOR.dom.element("body",this.getDocument());d.$.innerHTML=a;for(d=d.getChildren();d.count();){this.append(d.getItem(0));}return a;}}:function(a){return this.$.innerHTML=a;},setText:function(){var a=document.createElement("p");a.innerHTML="x";a=a.textContent;return function(d){this.$[a?"textContent":"innerText"]=d;};}(),getAttribute:function(){var a=function a(_a2){return this.$.getAttribute(_a2,2);};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){switch(a){case"class":a="className";break;case"http-equiv":a="httpEquiv";break;case"name":return this.$.name;case"tabindex":a=this.$.getAttribute(a,2);a!==0&&this.$.tabIndex===0&&(a=null);return a;case"checked":a=this.$.attributes.getNamedItem(a);return(a.specified?a.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[a];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null;}return this.$.getAttribute(a,2);}:a;}(),getChildren:function getChildren(){return new CKEDITOR.dom.nodeList(this.$.childNodes);},getComputedStyle:CKEDITOR.env.ie?function(a){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(a)];}:function(a){var d=this.getWindow().$.getComputedStyle(this.$,null);return d?d.getPropertyValue(a):"";},getDtd:function getDtd(){var a=CKEDITOR.dtd[this.getName()];this.getDtd=function(){return a;};return a;},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:CKEDITOR.env.ie?function(){var a=this.$.tabIndex;a===0&&!CKEDITOR.dtd.$tabIndex[this.getName()]&&parseInt(this.getAttribute("tabindex"),10)!==0&&(a=-1);return a;}:CKEDITOR.env.webkit?function(){var a=this.$.tabIndex;if(a==void 0){a=parseInt(this.getAttribute("tabindex"),10);isNaN(a)&&(a=-1);}return a;}:function(){return this.$.tabIndex;},getText:function getText(){return this.$.textContent||this.$.innerText||"";},getWindow:function getWindow(){return this.getDocument().getWindow();},getId:function getId(){return this.$.id||null;},getNameAtt:function getNameAtt(){return this.$.name||null;},getName:function getName(){var a=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&!(document.documentMode>8)){var d=this.$.scopeName;d!="HTML"&&(a=d.toLowerCase()+":"+a);}return(this.getName=function(){return a;})();},getValue:function getValue(){return this.$.value;},getFirst:function getFirst(a){var d=this.$.firstChild;(d=d&&new CKEDITOR.dom.node(d))&&a&&!a(d)&&(d=d.getNext(a));return d;},getLast:function getLast(a){var d=this.$.lastChild;(d=d&&new CKEDITOR.dom.node(d))&&a&&!a(d)&&(d=d.getPrevious(a));return d;},getStyle:function getStyle(a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)];},is:function is(){var a=this.getName();if(_typeof(arguments[0])=="object")return!!arguments[0][a];for(var d=0;d<arguments.length;d++){if(arguments[d]==a)return true;}return false;},isEditable:function isEditable(a){var d=this.getName();if(this.isReadOnly()||this.getComputedStyle("display")=="none"||this.getComputedStyle("visibility")=="hidden"||CKEDITOR.dtd.$nonEditable[d]||CKEDITOR.dtd.$empty[d]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount())return false;if(a!==false){a=CKEDITOR.dtd[d]||CKEDITOR.dtd.span;return!(!a||!a["#"]);}return true;},isIdentical:function isIdentical(a){var d=this.clone(0,1),a=a.clone(0,1);d.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);a.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);if(d.$.isEqualNode){d.$.style.cssText=CKEDITOR.tools.normalizeCssText(d.$.style.cssText);a.$.style.cssText=CKEDITOR.tools.normalizeCssText(a.$.style.cssText);return d.$.isEqualNode(a.$);}d=d.getOuterHtml();a=a.getOuterHtml();if(CKEDITOR.env.ie&&CKEDITOR.env.version<9&&this.is("a")){var b=this.getParent();if(b.type==CKEDITOR.NODE_ELEMENT){b=b.clone();b.setHtml(d);d=b.getHtml();b.setHtml(a);a=b.getHtml();}}return d==a;},isVisible:function isVisible(){var a=(this.$.offsetHeight||this.$.offsetWidth)&&this.getComputedStyle("visibility")!="hidden",d,b;if(a&&CKEDITOR.env.webkit){d=this.getWindow();if(!d.equals(CKEDITOR.document.getWindow())&&(b=d.$.frameElement))a=new CKEDITOR.dom.element(b).isVisible();}return!!a;},isEmptyInlineRemoveable:function isEmptyInlineRemoveable(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return false;for(var a=this.getChildren(),d=0,b=a.count();d<b;d++){var c=a.getItem(d);if(!(c.type==CKEDITOR.NODE_ELEMENT&&c.data("cke-bookmark"))&&(c.type==CKEDITOR.NODE_ELEMENT&&!c.isEmptyInlineRemoveable()||c.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(c.getText())))return false;}return true;},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var a=this.$.attributes,d=0;d<a.length;d++){var b=a[d];switch(b.nodeName){case"class":if(this.getAttribute("class"))return true;case"data-cke-expando":continue;default:if(b.specified)return true;}}return false;}:function(){var a=this.$.attributes,d=a.length,b={"data-cke-expando":1,_moz_dirty:1};return d>0&&(d>2||!b[a[0].nodeName]||d==2&&!b[a[1].nodeName]);},hasAttribute:function(){function a(d){var f=this.$.attributes.getNamedItem(d);if(this.getName()=="input")switch(d){case"class":return this.$.className.length>0;case"checked":return!!this.$.checked;case"value":d=this.getAttribute("type");return d=="checkbox"||d=="radio"?this.$.value!="on":!!this.$.value;}return!f?false:f.specified;}return CKEDITOR.env.ie?CKEDITOR.env.version<8?function(d){return d=="name"?!!this.$.name:a.call(this,d);}:a:function(a){return!!this.$.attributes.getNamedItem(a);};}(),hide:function hide(){this.setStyle("display","none");},moveChildren:function moveChildren(a,d){var b=this.$,a=a.$;if(b!=a){var c;if(d)for(;c=b.lastChild;){a.insertBefore(b.removeChild(c),a.firstChild);}else for(;c=b.firstChild;){a.appendChild(b.removeChild(c));}}},mergeSiblings:function(){function a(d,f,b){if(f&&f.type==CKEDITOR.NODE_ELEMENT){for(var c=[];f.data("cke-bookmark")||f.isEmptyInlineRemoveable();){c.push(f);f=b?f.getNext():f.getPrevious();if(!f||f.type!=CKEDITOR.NODE_ELEMENT)return;}if(d.isIdentical(f)){for(var e=b?d.getLast():d.getFirst();c.length;){c.shift().move(d,!b);}f.moveChildren(d,!b);f.remove();e&&e.type==CKEDITOR.NODE_ELEMENT&&e.mergeSiblings();}}}return function(d){if(d===false||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a")){a(this,this.getNext(),true);a(this,this.getPrevious());}};}(),show:function show(){this.setStyles({display:"",visibility:""});},setAttribute:function(){var a=function a(_a3,f){this.$.setAttribute(_a3,f);return this;};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(d,b){d=="class"?this.$.className=b:d=="style"?this.$.style.cssText=b:d=="tabindex"?this.$.tabIndex=b:d=="checked"?this.$.checked=b:d=="contenteditable"?a.call(this,"contentEditable",b):a.apply(this,arguments);return this;}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(d,b){if(d=="src"&&b.match(/^http:\/\//))try{a.apply(this,arguments);}catch(c){}else a.apply(this,arguments);return this;}:a;}(),setAttributes:function setAttributes(a){for(var d in a){this.setAttribute(d,a[d]);}return this;},setValue:function setValue(a){this.$.value=a;return this;},removeAttribute:function(){var a=function a(_a4){this.$.removeAttribute(_a4);};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){a=="class"?a="className":a=="tabindex"?a="tabIndex":a=="contenteditable"&&(a="contentEditable");this.$.removeAttribute(a);}:a;}(),removeAttributes:function removeAttributes(a){if(CKEDITOR.tools.isArray(a))for(var d=0;d<a.length;d++){this.removeAttribute(a[d]);}else for(d in a){a.hasOwnProperty(d)&&this.removeAttribute(d);}},removeStyle:function removeStyle(a){var d=this.$.style;if(!d.removeProperty&&(a=="border"||a=="margin"||a=="padding")){var b=["top","left","right","bottom"],c;a=="border"&&(c=["color","style","width"]);for(var d=[],e=0;e<b.length;e++){if(c)for(var h=0;h<c.length;h++){d.push([a,b[e],c[h]].join("-"));}else d.push([a,b[e]].join("-"));}for(a=0;a<d.length;a++){this.removeStyle(d[a]);}}else{d.removeProperty?d.removeProperty(a):d.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(a));this.$.style.cssText||this.removeAttribute("style");}},setStyle:function setStyle(a,d){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]=d;return this;},setStyles:function setStyles(a){for(var d in a){this.setStyle(d,a[d]);}return this;},setOpacity:function setOpacity(a){if(CKEDITOR.env.ie&&CKEDITOR.env.version<9){a=Math.round(a*100);this.setStyle("filter",a>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")");}else this.setStyle("opacity",a);},unselectable:function unselectable(){this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none"));if(CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var a,d=this.getElementsByTag("*"),b=0,c=d.count();b<c;b++){a=d.getItem(b);a.setAttribute("unselectable","on");}}},getPositionedAncestor:function getPositionedAncestor(){for(var a=this;a.getName()!="html";){if(a.getComputedStyle("position")!="static")return a;a=a.getParent();}return null;},getDocumentPosition:function getDocumentPosition(a){var d=0,b=0,c=this.getDocument(),e=c.getBody(),h=c.$.compatMode=="BackCompat";if(document.documentElement.getBoundingClientRect){var n=this.$.getBoundingClientRect(),t=c.$.documentElement,y=t.clientTop||e.$.clientTop||0,z=t.clientLeft||e.$.clientLeft||0,o=true;if(CKEDITOR.env.ie){o=c.getDocumentElement().contains(this);c=c.getBody().contains(this);o=h&&c||!h&&o;}if(o){d=n.left+(!h&&t.scrollLeft||e.$.scrollLeft);d=d-z;b=n.top+(!h&&t.scrollTop||e.$.scrollTop);b=b-y;}}else{e=this;for(c=null;e&&!(e.getName()=="body"||e.getName()=="html");){d=d+(e.$.offsetLeft-e.$.scrollLeft);b=b+(e.$.offsetTop-e.$.scrollTop);if(!e.equals(this)){d=d+(e.$.clientLeft||0);b=b+(e.$.clientTop||0);}for(;c&&!c.equals(e);){d=d-c.$.scrollLeft;b=b-c.$.scrollTop;c=c.getParent();}c=e;e=(n=e.$.offsetParent)?new CKEDITOR.dom.element(n):null;}}if(a){e=this.getWindow();c=a.getWindow();if(!e.equals(c)&&e.$.frameElement){a=new CKEDITOR.dom.element(e.$.frameElement).getDocumentPosition(a);d=d+a.x;b=b+a.y;}}if(!document.documentElement.getBoundingClientRect&&CKEDITOR.env.gecko&&!h){d=d+(this.$.clientLeft?1:0);b=b+(this.$.clientTop?1:0);}return{x:d,y:b};},scrollIntoView:function scrollIntoView(a){var b=this.getParent();if(b){do{(b.$.clientWidth&&b.$.clientWidth<b.$.scrollWidth||b.$.clientHeight&&b.$.clientHeight<b.$.scrollHeight)&&!b.is("body")&&this.scrollIntoParent(b,a,1);if(b.is("html")){var c=b.getWindow();try{var e=c.$.frameElement;e&&(b=new CKEDITOR.dom.element(e));}catch(l){}}}while(b=b.getParent());}},scrollIntoParent:function scrollIntoParent(a,b,c){var e,l,h,n;function t(b,d){if(/body|html/.test(a.getName()))a.getWindow().$.scrollBy(b,d);else{a.$.scrollLeft=a.$.scrollLeft+b;a.$.scrollTop=a.$.scrollTop+d;}}function y(a,b){var d={x:0,y:0};if(!a.is(o?"body":"html")){var c=a.$.getBoundingClientRect();d.x=c.left;d.y=c.top;}c=a.getWindow();if(!c.equals(b)){c=y(CKEDITOR.dom.element.get(c.$.frameElement),b);d.x=d.x+c.x;d.y=d.y+c.y;}return d;}function z(a,b){return parseInt(a.getComputedStyle("margin-"+b)||0,10)||0;}!a&&(a=this.getWindow());h=a.getDocument();var o=h.$.compatMode=="BackCompat";a instanceof CKEDITOR.dom.window&&(a=o?h.getBody():h.getDocumentElement());h=a.getWindow();l=y(this,h);var r=y(a,h),q=this.$.offsetHeight;e=this.$.offsetWidth;var x=a.$.clientHeight,i=a.$.clientWidth;h=l.x-z(this,"left")-r.x||0;n=l.y-z(this,"top")-r.y||0;e=l.x+e+z(this,"right")-(r.x+i)||0;l=l.y+q+z(this,"bottom")-(r.y+x)||0;if(n<0||l>0)t(0,b===true?n:b===false?l:n<0?n:l);if(c&&(h<0||e>0))t(h<0?h:e,0);},setState:function setState(a,b,c){b=b||"cke";switch(a){case CKEDITOR.TRISTATE_ON:this.addClass(b+"_on");this.removeClass(b+"_off");this.removeClass(b+"_disabled");c&&this.setAttribute("aria-pressed",true);c&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(b+"_disabled");this.removeClass(b+"_off");this.removeClass(b+"_on");c&&this.setAttribute("aria-disabled",true);c&&this.removeAttribute("aria-pressed");break;default:this.addClass(b+"_off");this.removeClass(b+"_on");this.removeClass(b+"_disabled");c&&this.removeAttribute("aria-pressed");c&&this.removeAttribute("aria-disabled");}},getFrameDocument:function getFrameDocument(){var a=this.$;try{a.contentWindow.document;}catch(b){a.src=a.src;}return a&&new CKEDITOR.dom.document(a.contentWindow.document);},copyAttributes:function copyAttributes(a,b){for(var c=this.$.attributes,b=b||{},e=0;e<c.length;e++){var l=c[e],h=l.nodeName.toLowerCase(),n;if(!(h in b))if(h=="checked"&&(n=this.getAttribute(h)))a.setAttribute(h,n);else if(!CKEDITOR.env.ie||this.hasAttribute(h)){n=this.getAttribute(h);if(n===null)n=l.nodeValue;a.setAttribute(h,n);}}if(this.$.style.cssText!=="")a.$.style.cssText=this.$.style.cssText;},renameNode:function renameNode(a){if(this.getName()!=a){var b=this.getDocument(),a=new CKEDITOR.dom.element(a,b);this.copyAttributes(a);this.moveChildren(a);this.getParent()&&this.$.parentNode.replaceChild(a.$,this.$);a.$["data-cke-expando"]=this.$["data-cke-expando"];this.$=a.$;delete this.getName;}},getChild:function(){function a(b,c){var f=b.childNodes;if(c>=0&&c<f.length)return f[c];}return function(b){var c=this.$;if(b.slice)for(;b.length>0&&c;){c=a(c,b.shift());}else c=a(c,b);return c?new CKEDITOR.dom.node(c):null;};}(),getChildCount:function getChildCount(){return this.$.childNodes.length;},disableContextMenu:function disableContextMenu(){this.on("contextmenu",function(a){a.data.getTarget().hasClass("cke_enable_context_menu")||a.data.preventDefault();});},getDirection:function getDirection(a){return a?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir");},data:function data(a,b){a="data-"+a;if(b===void 0)return this.getAttribute(a);b===false?this.removeAttribute(a):this.setAttribute(a,b);return null;},getEditor:function getEditor(){var a=CKEDITOR.instances,b,c;for(b in a){c=a[b];if(c.element.equals(this)&&c.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO)return c;}return null;},find:function find(b){var c=a(this),b=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(e(this,b)));c();return b;},findOne:function findOne(b){var c=a(this),b=this.$.querySelector(e(this,b));c();return b?new CKEDITOR.dom.element(b):null;},forEach:function forEach(a,b,c){if(!c&&(!b||this.type==b))var e=a(this);if(e!==false)for(var c=this.getChildren(),l=0;l<c.count();l++){e=c.getItem(l);e.type==CKEDITOR.NODE_ELEMENT?e.forEach(a,b):(!b||e.type==b)&&a(e);}}});var c={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(a,c,e){if(typeof c=="number"){if(e&&(!CKEDITOR.env.ie||!CKEDITOR.env.quirks))c=c-b.call(this,a);this.setStyle(a,c+"px");}};CKEDITOR.dom.element.prototype.getSize=function(a,c){var e=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(a)],this.$["client"+CKEDITOR.tools.capitalize(a)])||0;c&&(e=e-b.call(this,a));return e;};})();CKEDITOR.dom.documentFragment=function(a){a=a||CKEDITOR.document;this.$=a.type==CKEDITOR.NODE_DOCUMENT?a.$.createDocumentFragment():a;};CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function insertAfterNode(a){a=a.$;a.parentNode.insertBefore(this.$,a.nextSibling);}},!0,{append:1,appendBogus:1,getFirst:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});(function(){function a(a,b){var c=this.range;if(this._.end)return null;if(!this._.start){this._.start=1;if(c.collapsed){this.end();return null;}c.optimize();}var d,e=c.startContainer;d=c.endContainer;var f=c.startOffset,n=c.endOffset,i,m=this.guard,k=this.type,s=a?"getPreviousSourceNode":"getNextSourceNode";if(!a&&!this._.guardLTR){var u=d.type==CKEDITOR.NODE_ELEMENT?d:d.getParent(),p=d.type==CKEDITOR.NODE_ELEMENT?d.getChild(n):d.getNext();this._.guardLTR=function(a,b){return(!b||!u.equals(a))&&(!p||!a.equals(p))&&(a.type!=CKEDITOR.NODE_ELEMENT||!b||!a.equals(c.root));};}if(a&&!this._.guardRTL){var g=e.type==CKEDITOR.NODE_ELEMENT?e:e.getParent(),h=e.type==CKEDITOR.NODE_ELEMENT?f?e.getChild(f-1):null:e.getPrevious();this._.guardRTL=function(a,b){return(!b||!g.equals(a))&&(!h||!a.equals(h))&&(a.type!=CKEDITOR.NODE_ELEMENT||!b||!a.equals(c.root));};}var F=a?this._.guardRTL:this._.guardLTR;i=m?function(a,b){return F(a,b)===false?false:m(a,b);}:F;if(this.current)d=this.current[s](false,k,i);else{if(a)d.type==CKEDITOR.NODE_ELEMENT&&(d=n>0?d.getChild(n-1):i(d,true)===false?null:d.getPreviousSourceNode(true,k,i));else{d=e;if(d.type==CKEDITOR.NODE_ELEMENT&&!(d=d.getChild(f)))d=i(e,true)===false?null:e.getNextSourceNode(true,k,i);}d&&i(d)===false&&(d=null);}for(;d&&!this._.end;){this.current=d;if(!this.evaluator||this.evaluator(d)!==false){if(!b)return d;}else if(b&&this.evaluator)return false;d=d[s](false,k,i);}this.end();return this.current=null;}function e(b){for(var c,d=null;c=a.call(this,b);){d=c;}return d;}function b(a){if(h(a))return false;if(a.type==CKEDITOR.NODE_TEXT)return true;if(a.type==CKEDITOR.NODE_ELEMENT){if(a.is(CKEDITOR.dtd.$inline)||a.is("hr")||a.getAttribute("contenteditable")=="false")return true;var b;if(b=!CKEDITOR.env.needsBrFiller)if(b=a.is(n))a:{b=0;for(var c=a.getChildCount();b<c;++b){if(!h(a.getChild(b))){b=false;break a;}}b=true;}if(b)return true;}return false;}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function $(a){this.range=a;this._={};},proto:{end:function end(){this._.end=1;},next:function next(){return a.call(this);},previous:function previous(){return a.call(this,1);},checkForward:function checkForward(){return a.call(this,0,1)!==false;},checkBackward:function checkBackward(){return a.call(this,1,1)!==false;},lastForward:function lastForward(){return e.call(this);},lastBackward:function lastBackward(){return e.call(this,1);},reset:function reset(){delete this.current;this._={};}}});var c={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},f={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(a){return this.getComputedStyle("float")=="none"&&!(this.getComputedStyle("position")in f)&&c[this.getComputedStyle("display")]?true:!!(this.is(CKEDITOR.dtd.$block)||a&&this.is(a));};CKEDITOR.dom.walker.blockBoundary=function(a){return function(b){return!(b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary(a));};};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1});};CKEDITOR.dom.walker.bookmark=function(a,b){function c(a){return a&&a.getName&&a.getName()=="span"&&a.data("cke-bookmark");}return function(d){var e,f;e=d&&d.type!=CKEDITOR.NODE_ELEMENT&&(f=d.getParent())&&c(f);e=a?e:e||c(d);return!!(b^e);};};CKEDITOR.dom.walker.whitespaces=function(a){return function(b){var c;b&&b.type==CKEDITOR.NODE_TEXT&&(c=!CKEDITOR.tools.trim(b.getText())||CKEDITOR.env.webkit&&b.getText()=="​");return!!(a^c);};};CKEDITOR.dom.walker.invisible=function(a){var b=CKEDITOR.dom.walker.whitespaces();return function(c){if(b(c))c=1;else{c.type==CKEDITOR.NODE_TEXT&&(c=c.getParent());c=!c.$.offsetHeight;}return!!(a^c);};};CKEDITOR.dom.walker.nodeType=function(a,b){return function(c){return!!(b^c.type==a);};};CKEDITOR.dom.walker.bogus=function(a){function b(a){return!g(a)&&!j(a);}return function(c){var e=CKEDITOR.env.needsBrFiller?c.is&&c.is("br"):c.getText&&d.test(c.getText());if(e){e=c.getParent();c=c.getNext(b);e=e.isBlockBoundary()&&(!c||c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary());}return!!(a^e);};};CKEDITOR.dom.walker.temp=function(a){return function(b){b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());b=b&&b.hasAttribute("data-cke-temp");return!!(a^b);};};var d=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,g=CKEDITOR.dom.walker.whitespaces(),j=CKEDITOR.dom.walker.bookmark(),l=CKEDITOR.dom.walker.temp();CKEDITOR.dom.walker.ignored=function(a){return function(b){b=g(b)||j(b)||l(b);return!!(a^b);};};var h=CKEDITOR.dom.walker.ignored(),n=function(a){var b={},c;for(c in a){CKEDITOR.dtd[c]["#"]&&(b[c]=1);}return b;}(CKEDITOR.dtd.$block);CKEDITOR.dom.walker.editable=function(a){return function(c){return!!(a^b(c));};};CKEDITOR.dom.element.prototype.getBogus=function(){var a=this;do{a=a.getPreviousSourceNode();}while(j(a)||g(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$inline)&&!a.is(CKEDITOR.dtd.$empty));return a&&(CKEDITOR.env.needsBrFiller?a.is&&a.is("br"):a.getText&&d.test(a.getText()))?a:false;};})();CKEDITOR.dom.range=function(a){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null;this.collapsed=true;var e=a instanceof CKEDITOR.dom.document;this.document=e?a:a.getDocument();this.root=e?a.getBody():a;};(function(){function a(){var a=false,b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(true),e=CKEDITOR.dom.walker.bogus();return function(f){if(c(f)||b(f))return true;if(e(f)&&!a)return a=true;return f.type==CKEDITOR.NODE_TEXT&&(f.hasAscendant("pre")||CKEDITOR.tools.trim(f.getText()).length)||f.type==CKEDITOR.NODE_ELEMENT&&!f.is(d)?false:true;};}function e(a){var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(1);return function(d){return c(d)||b(d)?true:!a&&g(d)||d.type==CKEDITOR.NODE_ELEMENT&&d.is(CKEDITOR.dtd.$removeEmpty);};}function b(a){return function(){var b;return this[a?"getPreviousNode":"getNextNode"](function(a){!b&&h(a)&&(b=a);return l(a)&&!(g(a)&&a.equals(b));});};}var c=function c(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer.equals(a.endContainer)&&a.startOffset==a.endOffset;},f=function f(a,b,c,d){a.optimizeBookmark();var e=a.startContainer,f=a.endContainer,q=a.startOffset,g=a.endOffset,i,m;if(f.type==CKEDITOR.NODE_TEXT)f=f.split(g);else if(f.getChildCount()>0)if(g>=f.getChildCount()){f=f.append(a.document.createText(""));m=true;}else f=f.getChild(g);if(e.type==CKEDITOR.NODE_TEXT){e.split(q);e.equals(f)&&(f=e.getNext());}else if(q){if(q>=e.getChildCount()){e=e.append(a.document.createText(""));i=true;}else e=e.getChild(q).getPrevious();}else{e=e.append(a.document.createText(""),1);i=true;}var q=e.getParents(),g=f.getParents(),k,s,u;for(k=0;k<q.length;k++){s=q[k];u=g[k];if(!s.equals(u))break;}for(var p=c,h,l,F,j=k;j<q.length;j++){h=q[j];p&&!h.equals(e)&&(l=p.append(h.clone()));for(h=h.getNext();h;){if(h.equals(g[j])||h.equals(f))break;F=h.getNext();if(b==2)p.append(h.clone(true));else{h.remove();b==1&&p.append(h);}h=F;}p&&(p=l);}p=c;for(c=k;c<g.length;c++){h=g[c];b>0&&!h.equals(f)&&(l=p.append(h.clone()));if(!q[c]||h.$.parentNode!=q[c].$.parentNode)for(h=h.getPrevious();h;){if(h.equals(q[c])||h.equals(e))break;F=h.getPrevious();if(b==2)p.$.insertBefore(h.$.cloneNode(true),p.$.firstChild);else{h.remove();b==1&&p.$.insertBefore(h.$,p.$.firstChild);}h=F;}p&&(p=l);}if(b==2){s=a.startContainer;if(s.type==CKEDITOR.NODE_TEXT){s.$.data=s.$.data+s.$.nextSibling.data;s.$.parentNode.removeChild(s.$.nextSibling);}a=a.endContainer;if(a.type==CKEDITOR.NODE_TEXT&&a.$.nextSibling){a.$.data=a.$.data+a.$.nextSibling.data;a.$.parentNode.removeChild(a.$.nextSibling);}}else{if(s&&u&&(e.$.parentNode!=s.$.parentNode||f.$.parentNode!=u.$.parentNode)){b=u.getIndex();i&&u.$.parentNode==e.$.parentNode&&b--;if(d&&s.type==CKEDITOR.NODE_ELEMENT){d=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',a.document);d.insertAfter(s);s.mergeSiblings(false);a.moveToBookmark({startNode:d});}else a.setStart(u.getParent(),b);}a.collapse(true);}i&&e.remove();m&&f.$.parentNode&&f.remove();},d={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},g=CKEDITOR.dom.walker.bogus(),j=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,l=CKEDITOR.dom.walker.editable(),h=CKEDITOR.dom.walker.ignored(true);CKEDITOR.dom.range.prototype={clone:function clone(){var a=new CKEDITOR.dom.range(this.root);a.startContainer=this.startContainer;a.startOffset=this.startOffset;a.endContainer=this.endContainer;a.endOffset=this.endOffset;a.collapsed=this.collapsed;return a;},collapse:function collapse(a){if(a){this.endContainer=this.startContainer;this.endOffset=this.startOffset;}else{this.startContainer=this.endContainer;this.startOffset=this.endOffset;}this.collapsed=true;},cloneContents:function cloneContents(){var a=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||f(this,2,a);return a;},deleteContents:function deleteContents(a){this.collapsed||f(this,0,null,a);},extractContents:function extractContents(a){var b=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||f(this,1,b,a);return b;},createBookmark:function createBookmark(a){var b,c,d,e,f=this.collapsed;b=this.document.createElement("span");b.data("cke-bookmark",1);b.setStyle("display","none");b.setHtml("&nbsp;");if(a){d="cke_bm_"+CKEDITOR.tools.getNextNumber();b.setAttribute("id",d+(f?"C":"S"));}if(!f){c=b.clone();c.setHtml("&nbsp;");a&&c.setAttribute("id",d+"E");e=this.clone();e.collapse();e.insertNode(c);}e=this.clone();e.collapse(true);e.insertNode(b);if(c){this.setStartAfter(b);this.setEndBefore(c);}else this.moveToPosition(b,CKEDITOR.POSITION_AFTER_END);return{startNode:a?d+(f?"C":"S"):b,endNode:a?d+"E":c,serializable:a,collapsed:f};},createBookmark2:function(){function a(b){var c=b.container,d=b.offset,e;e=c;var f=d;e=e.type!=CKEDITOR.NODE_ELEMENT||f===0||f==e.getChildCount()?0:e.getChild(f-1).type==CKEDITOR.NODE_TEXT&&e.getChild(f).type==CKEDITOR.NODE_TEXT;if(e){c=c.getChild(d-1);d=c.getLength();}c.type==CKEDITOR.NODE_ELEMENT&&d>1&&(d=c.getChild(d-1).getIndex(true)+1);if(c.type==CKEDITOR.NODE_TEXT){e=c;for(f=0;(e=e.getPrevious())&&e.type==CKEDITOR.NODE_TEXT;){f=f+e.getLength();}d=d+f;}b.container=c;b.offset=d;}return function(b){var c=this.collapsed,d={container:this.startContainer,offset:this.startOffset},e={container:this.endContainer,offset:this.endOffset};if(b){a(d);c||a(e);}return{start:d.container.getAddress(b),end:c?null:e.container.getAddress(b),startOffset:d.offset,endOffset:e.offset,normalized:b,collapsed:c,is2:true};};}(),moveToBookmark:function moveToBookmark(a){if(a.is2){var b=this.document.getByAddress(a.start,a.normalized),c=a.startOffset,d=a.end&&this.document.getByAddress(a.end,a.normalized),a=a.endOffset;this.setStart(b,c);d?this.setEnd(d,a):this.collapse(true);}else{b=(c=a.serializable)?this.document.getById(a.startNode):a.startNode;a=c?this.document.getById(a.endNode):a.endNode;this.setStartBefore(b);b.remove();if(a){this.setEndBefore(a);a.remove();}else this.collapse(true);}},getBoundaryNodes:function getBoundaryNodes(){var a=this.startContainer,b=this.endContainer,c=this.startOffset,d=this.endOffset,e;if(a.type==CKEDITOR.NODE_ELEMENT){e=a.getChildCount();if(e>c)a=a.getChild(c);else if(e<1)a=a.getPreviousSourceNode();else{for(a=a.$;a.lastChild;){a=a.lastChild;}a=new CKEDITOR.dom.node(a);a=a.getNextSourceNode()||a;}}if(b.type==CKEDITOR.NODE_ELEMENT){e=b.getChildCount();if(e>d)b=b.getChild(d).getPreviousSourceNode(true);else if(e<1)b=b.getPreviousSourceNode();else{for(b=b.$;b.lastChild;){b=b.lastChild;}b=new CKEDITOR.dom.node(b);}}a.getPosition(b)&CKEDITOR.POSITION_FOLLOWING&&(a=b);return{startNode:a,endNode:b};},getCommonAncestor:function getCommonAncestor(a,b){var c=this.startContainer,d=this.endContainer,c=c.equals(d)?a&&c.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?c.getChild(this.startOffset):c:c.getCommonAncestor(d);return b&&!c.is?c.getParent():c;},optimize:function optimize(){var a=this.startContainer,b=this.startOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setStartAfter(a):this.setStartBefore(a));a=this.endContainer;b=this.endOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setEndAfter(a):this.setEndBefore(a));},optimizeBookmark:function optimizeBookmark(){var a=this.startContainer,b=this.endContainer;a.is&&a.is("span")&&a.data("cke-bookmark")&&this.setStartAt(a,CKEDITOR.POSITION_BEFORE_START);b&&b.is&&b.is("span")&&b.data("cke-bookmark")&&this.setEndAt(b,CKEDITOR.POSITION_AFTER_END);},trim:function trim(a,b){var c=this.startContainer,d=this.startOffset,e=this.collapsed;if((!a||e)&&c&&c.type==CKEDITOR.NODE_TEXT){if(d){if(d>=c.getLength()){d=c.getIndex()+1;c=c.getParent();}else{var f=c.split(d),d=c.getIndex()+1,c=c.getParent();if(this.startContainer.equals(this.endContainer))this.setEnd(f,this.endOffset-this.startOffset);else if(c.equals(this.endContainer))this.endOffset=this.endOffset+1;}}else{d=c.getIndex();c=c.getParent();}this.setStart(c,d);if(e){this.collapse(true);return;}}c=this.endContainer;d=this.endOffset;if(!b&&!e&&c&&c.type==CKEDITOR.NODE_TEXT){if(d){d>=c.getLength()||c.split(d);d=c.getIndex()+1;}else d=c.getIndex();c=c.getParent();this.setEnd(c,d);}},enlarge:function enlarge(a,b){function c(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("contenteditable")?null:a;}var d=RegExp(/[^\s\ufeff]/);switch(a){case CKEDITOR.ENLARGE_INLINE:var e=1;case CKEDITOR.ENLARGE_ELEMENT:if(this.collapsed)break;var f=this.getCommonAncestor(),q=this.root,g,i,m,k,s,u=false,p,h;p=this.startContainer;var l=this.startOffset;if(p.type==CKEDITOR.NODE_TEXT){if(l){p=!CKEDITOR.tools.trim(p.substring(0,l)).length&&p;u=!!p;}if(p&&!(k=p.getPrevious()))m=p.getParent();}else{l&&(k=p.getChild(l-1)||p.getLast());k||(m=p);}for(m=c(m);m||k;){if(m&&!k){!s&&m.equals(f)&&(s=true);if(e?m.isBlockBoundary():!q.contains(m))break;if(!u||m.getComputedStyle("display")!="inline"){u=false;s?g=m:this.setStartBefore(m);}k=m.getPrevious();}for(;k;){p=false;if(k.type==CKEDITOR.NODE_COMMENT)k=k.getPrevious();else{if(k.type==CKEDITOR.NODE_TEXT){h=k.getText();d.test(h)&&(k=null);p=/[\s\ufeff]$/.test(h);}else if((k.$.offsetWidth>0||b&&k.is("br"))&&!k.data("cke-bookmark"))if(u&&CKEDITOR.dtd.$removeEmpty[k.getName()]){h=k.getText();if(d.test(h))k=null;else for(var l=k.$.getElementsByTagName("*"),F=0,j;j=l[F++];){if(!CKEDITOR.dtd.$removeEmpty[j.nodeName.toLowerCase()]){k=null;break;}}k&&(p=!!h.length);}else k=null;p&&(u?s?g=m:m&&this.setStartBefore(m):u=true);if(k){p=k.getPrevious();if(!m&&!p){m=k;k=null;break;}k=p;}else m=null;}}m&&(m=c(m.getParent()));}p=this.endContainer;l=this.endOffset;m=k=null;s=u=false;var L=function L(a,b){var c=new CKEDITOR.dom.range(q);c.setStart(a,b);c.setEndAt(q,CKEDITOR.POSITION_BEFORE_END);var c=new CKEDITOR.dom.walker(c),e;for(c.guard=function(a){return!(a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary());};e=c.next();){if(e.type!=CKEDITOR.NODE_TEXT)return false;h=e!=a?e.getText():e.substring(b);if(d.test(h))return false;}return true;};if(p.type==CKEDITOR.NODE_TEXT){if(CKEDITOR.tools.trim(p.substring(l)).length)u=true;else{u=!p.getLength();if(l==p.getLength()){if(!(k=p.getNext()))m=p.getParent();}else L(p,l)&&(m=p.getParent());}}else(k=p.getChild(l))||(m=p);for(;m||k;){if(m&&!k){!s&&m.equals(f)&&(s=true);if(e?m.isBlockBoundary():!q.contains(m))break;if(!u||m.getComputedStyle("display")!="inline"){u=false;s?i=m:m&&this.setEndAfter(m);}k=m.getNext();}for(;k;){p=false;if(k.type==CKEDITOR.NODE_TEXT){h=k.getText();L(k,0)||(k=null);p=/^[\s\ufeff]/.test(h);}else if(k.type==CKEDITOR.NODE_ELEMENT){if((k.$.offsetWidth>0||b&&k.is("br"))&&!k.data("cke-bookmark"))if(u&&CKEDITOR.dtd.$removeEmpty[k.getName()]){h=k.getText();if(d.test(h))k=null;else{l=k.$.getElementsByTagName("*");for(F=0;j=l[F++];){if(!CKEDITOR.dtd.$removeEmpty[j.nodeName.toLowerCase()]){k=null;break;}}}k&&(p=!!h.length);}else k=null;}else p=1;p&&u&&(s?i=m:this.setEndAfter(m));if(k){p=k.getNext();if(!m&&!p){m=k;k=null;break;}k=p;}else m=null;}m&&(m=c(m.getParent()));}if(g&&i){f=g.contains(i)?i:g;this.setStartBefore(f);this.setEndAfter(f);}break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:m=new CKEDITOR.dom.range(this.root);q=this.root;m.setStartAt(q,CKEDITOR.POSITION_AFTER_START);m.setEnd(this.startContainer,this.startOffset);m=new CKEDITOR.dom.walker(m);var I,w,B=CKEDITOR.dom.walker.blockBoundary(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),v=null,C=function C(a){if(a.type==CKEDITOR.NODE_ELEMENT&&a.getAttribute("contenteditable")=="false"){if(v){if(v.equals(a)){v=null;return;}}else v=a;}else if(v)return;var b=B(a);b||(I=a);return b;},e=function e(a){var b=C(a);!b&&a.is&&a.is("br")&&(w=a);return b;};m.guard=C;m=m.lastBackward();I=I||q;this.setStartAt(I,!I.is("br")&&(!m&&this.checkStartOfBlock()||m&&I.contains(m))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){m=this.clone();m=new CKEDITOR.dom.walker(m);var A=CKEDITOR.dom.walker.whitespaces(),E=CKEDITOR.dom.walker.bookmark();m.evaluator=function(a){return!A(a)&&!E(a);};if((m=m.previous())&&m.type==CKEDITOR.NODE_ELEMENT&&m.is("br"))break;}m=this.clone();m.collapse();m.setEndAt(q,CKEDITOR.POSITION_BEFORE_END);m=new CKEDITOR.dom.walker(m);m.guard=a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?e:C;I=v=w=null;m=m.lastForward();I=I||q;this.setEndAt(I,!m&&this.checkEndOfBlock()||m&&I.contains(m)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);w&&this.setEndAfter(w);}},shrink:function shrink(a,b,c){if(!this.collapsed){var a=a||CKEDITOR.SHRINK_TEXT,d=this.clone(),e=this.startContainer,f=this.endContainer,q=this.startOffset,g=this.endOffset,i=1,m=1;if(e&&e.type==CKEDITOR.NODE_TEXT)if(q){if(q>=e.getLength())d.setStartAfter(e);else{d.setStartBefore(e);i=0;}}else d.setStartBefore(e);if(f&&f.type==CKEDITOR.NODE_TEXT)if(g){if(g>=f.getLength())d.setEndAfter(f);else{d.setEndAfter(f);m=0;}}else d.setEndBefore(f);var d=new CKEDITOR.dom.walker(d),k=CKEDITOR.dom.walker.bookmark();d.evaluator=function(b){return b.type==(a==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT);};var s;d.guard=function(b,d){if(k(b))return true;if(a==CKEDITOR.SHRINK_ELEMENT&&b.type==CKEDITOR.NODE_TEXT||d&&b.equals(s)||c===false&&b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary()||b.type==CKEDITOR.NODE_ELEMENT&&b.hasAttribute("contenteditable"))return false;!d&&b.type==CKEDITOR.NODE_ELEMENT&&(s=b);return true;};if(i)(e=d[a==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(e,b?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START);if(m){d.reset();(d=d[a==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(d,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END);}return!(!i&&!m);}},insertNode:function insertNode(a){this.optimizeBookmark();this.trim(false,true);var b=this.startContainer,c=b.getChild(this.startOffset);c?a.insertBefore(c):b.append(a);a.getParent()&&a.getParent().equals(this.endContainer)&&this.endOffset++;this.setStartBefore(a);},moveToPosition:function moveToPosition(a,b){this.setStartAt(a,b);this.collapse(true);},moveToRange:function moveToRange(a){this.setStart(a.startContainer,a.startOffset);this.setEnd(a.endContainer,a.endOffset);},selectNodeContents:function selectNodeContents(a){this.setStart(a,0);this.setEnd(a,a.type==CKEDITOR.NODE_TEXT?a.getLength():a.getChildCount());},setStart:function setStart(a,b){if(a.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[a.getName()]){b=a.getIndex();a=a.getParent();}this.startContainer=a;this.startOffset=b;if(!this.endContainer){this.endContainer=a;this.endOffset=b;}c(this);},setEnd:function setEnd(a,b){if(a.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[a.getName()]){b=a.getIndex()+1;a=a.getParent();}this.endContainer=a;this.endOffset=b;if(!this.startContainer){this.startContainer=a;this.startOffset=b;}c(this);},setStartAfter:function setStartAfter(a){this.setStart(a.getParent(),a.getIndex()+1);},setStartBefore:function setStartBefore(a){this.setStart(a.getParent(),a.getIndex());},setEndAfter:function setEndAfter(a){this.setEnd(a.getParent(),a.getIndex()+1);},setEndBefore:function setEndBefore(a){this.setEnd(a.getParent(),a.getIndex());},setStartAt:function setStartAt(a,b){switch(b){case CKEDITOR.POSITION_AFTER_START:this.setStart(a,0);break;case CKEDITOR.POSITION_BEFORE_END:a.type==CKEDITOR.NODE_TEXT?this.setStart(a,a.getLength()):this.setStart(a,a.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(a);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(a);}c(this);},setEndAt:function setEndAt(a,b){switch(b){case CKEDITOR.POSITION_AFTER_START:this.setEnd(a,0);break;case CKEDITOR.POSITION_BEFORE_END:a.type==CKEDITOR.NODE_TEXT?this.setEnd(a,a.getLength()):this.setEnd(a,a.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(a);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(a);}c(this);},fixBlock:function fixBlock(a,b){var c=this.createBookmark(),d=this.document.createElement(b);this.collapse(a);this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(d);d.trim();d.appendBogus();this.insertNode(d);this.moveToBookmark(c);return d;},splitBlock:function splitBlock(a){var b=new CKEDITOR.dom.elementPath(this.startContainer,this.root),c=new CKEDITOR.dom.elementPath(this.endContainer,this.root),d=b.block,e=c.block,f=null;if(!b.blockLimit.equals(c.blockLimit))return null;if(a!="br"){if(!d){d=this.fixBlock(true,a);e=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block;}e||(e=this.fixBlock(false,a));}a=d&&this.checkStartOfBlock();b=e&&this.checkEndOfBlock();this.deleteContents();if(d&&d.equals(e))if(b){f=new CKEDITOR.dom.elementPath(this.startContainer,this.root);this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END);e=null;}else if(a){f=new CKEDITOR.dom.elementPath(this.startContainer,this.root);this.moveToPosition(d,CKEDITOR.POSITION_BEFORE_START);d=null;}else{e=this.splitElement(d);d.is("ul","ol")||d.appendBogus();}return{previousBlock:d,nextBlock:e,wasStartOfBlock:a,wasEndOfBlock:b,elementPath:f};},splitElement:function splitElement(a){if(!this.collapsed)return null;this.setEndAt(a,CKEDITOR.POSITION_BEFORE_END);var b=this.extractContents(),c=a.clone(false);b.appendTo(c);c.insertAfter(a);this.moveToPosition(a,CKEDITOR.POSITION_AFTER_END);return c;},removeEmptyBlocksAtEnd:function(){function a(d){return function(a){return b(a)||c(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.isEmptyInlineRemoveable()||d.is("table")&&a.is("caption")?false:true;};}var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(false);return function(b){for(var c=this.createBookmark(),d=this[b?"endPath":"startPath"](),e=d.block||d.blockLimit,f;e&&!e.equals(d.root)&&!e.getFirst(a(e));){f=e.getParent();this[b?"setEndAt":"setStartAt"](e,CKEDITOR.POSITION_AFTER_END);e.remove(1);e=f;}this.moveToBookmark(c);};}(),startPath:function startPath(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root);},endPath:function endPath(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root);},checkBoundaryOfElement:function checkBoundaryOfElement(a,b){var c=b==CKEDITOR.START,d=this.clone();d.collapse(c);d[c?"setStartAt":"setEndAt"](a,c?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END);d=new CKEDITOR.dom.walker(d);d.evaluator=e(c);return d[c?"checkBackward":"checkForward"]();},checkStartOfBlock:function checkStartOfBlock(){var b=this.startContainer,c=this.startOffset;if(CKEDITOR.env.ie&&c&&b.type==CKEDITOR.NODE_TEXT){b=CKEDITOR.tools.ltrim(b.substring(0,c));j.test(b)&&this.trim(0,1);}this.trim();b=new CKEDITOR.dom.elementPath(this.startContainer,this.root);c=this.clone();c.collapse(true);c.setStartAt(b.block||b.blockLimit,CKEDITOR.POSITION_AFTER_START);b=new CKEDITOR.dom.walker(c);b.evaluator=a();return b.checkBackward();},checkEndOfBlock:function checkEndOfBlock(){var b=this.endContainer,c=this.endOffset;if(CKEDITOR.env.ie&&b.type==CKEDITOR.NODE_TEXT){b=CKEDITOR.tools.rtrim(b.substring(c));j.test(b)&&this.trim(1,0);}this.trim();b=new CKEDITOR.dom.elementPath(this.endContainer,this.root);c=this.clone();c.collapse(false);c.setEndAt(b.block||b.blockLimit,CKEDITOR.POSITION_BEFORE_END);b=new CKEDITOR.dom.walker(c);b.evaluator=a();return b.checkForward();},getPreviousNode:function getPreviousNode(a,b,c){var d=this.clone();d.collapse(1);d.setStartAt(c||this.root,CKEDITOR.POSITION_AFTER_START);c=new CKEDITOR.dom.walker(d);c.evaluator=a;c.guard=b;return c.previous();},getNextNode:function getNextNode(a,b,c){var d=this.clone();d.collapse();d.setEndAt(c||this.root,CKEDITOR.POSITION_BEFORE_END);c=new CKEDITOR.dom.walker(d);c.evaluator=a;c.guard=b;return c.next();},checkReadOnly:function(){function a(b,c){for(;b;){if(b.type==CKEDITOR.NODE_ELEMENT){if(b.getAttribute("contentEditable")=="false"&&!b.data("cke-editable"))return 0;if(b.is("html")||b.getAttribute("contentEditable")=="true"&&(b.contains(c)||b.equals(c)))break;}b=b.getParent();}return 1;}return function(){var b=this.startContainer,c=this.endContainer;return!(a(b,c)&&a(c,b));};}(),moveToElementEditablePosition:function moveToElementEditablePosition(a,b){if(a.type==CKEDITOR.NODE_ELEMENT&&!a.isEditable(false)){this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);return true;}for(var c=0;a;){if(a.type==CKEDITOR.NODE_TEXT){b&&this.endContainer&&this.checkEndOfBlock()&&j.test(a.getText())?this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);c=1;break;}if(a.type==CKEDITOR.NODE_ELEMENT)if(a.isEditable()){this.moveToPosition(a,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START);c=1;}else if(b&&a.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START);else if(a.getAttribute("contenteditable")=="false"&&a.is(CKEDITOR.dtd.$block)){this.setStartBefore(a);this.setEndAfter(a);return true;}var d=a,e=c,f=void 0;d.type==CKEDITOR.NODE_ELEMENT&&d.isEditable(false)&&(f=d[b?"getLast":"getFirst"](h));!e&&!f&&(f=d[b?"getPrevious":"getNext"](h));a=f;}return!!c;},moveToClosestEditablePosition:function moveToClosestEditablePosition(a,b){var c=new CKEDITOR.dom.range(this.root),d=0,e,f=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];c.moveToPosition(a,f[b?0:1]);if(a.is(CKEDITOR.dtd.$block)){if(e=c[b?"getNextEditableNode":"getPreviousEditableNode"]()){d=1;if(e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$block)&&e.getAttribute("contenteditable")=="false"){c.setStartAt(e,CKEDITOR.POSITION_BEFORE_START);c.setEndAt(e,CKEDITOR.POSITION_AFTER_END);}else c.moveToPosition(e,f[b?1:0]);}}else d=1;d&&this.moveToRange(c);return!!d;},moveToElementEditStart:function moveToElementEditStart(a){return this.moveToElementEditablePosition(a);},moveToElementEditEnd:function moveToElementEditEnd(a){return this.moveToElementEditablePosition(a,true);},getEnclosedNode:function getEnclosedNode(){var a=this.clone();a.optimize();if(a.startContainer.type!=CKEDITOR.NODE_ELEMENT||a.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var a=new CKEDITOR.dom.walker(a),b=CKEDITOR.dom.walker.bookmark(false,true),c=CKEDITOR.dom.walker.whitespaces(true);a.evaluator=function(a){return c(a)&&b(a);};var d=a.next();a.reset();return d&&d.equals(a.previous())?d:null;},getTouchedStartNode:function getTouchedStartNode(){var a=this.startContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.startOffset)||a;},getTouchedEndNode:function getTouchedEndNode(){var a=this.endContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.endOffset-1)||a;},getNextEditableNode:b(),getPreviousEditableNode:b(1),scrollIntoView:function scrollIntoView(){var a=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),b,c,d,e=this.clone();e.optimize();if(d=e.startContainer.type==CKEDITOR.NODE_TEXT){c=e.startContainer.getText();b=e.startContainer.split(e.startOffset);a.insertAfter(e.startContainer);}else e.insertNode(a);a.scrollIntoView();if(d){e.startContainer.setText(c);b.remove();}a.remove();}};})();CKEDITOR.POSITION_AFTER_START=1;CKEDITOR.POSITION_BEFORE_END=2;CKEDITOR.POSITION_BEFORE_START=3;CKEDITOR.POSITION_AFTER_END=4;CKEDITOR.ENLARGE_ELEMENT=1;CKEDITOR.ENLARGE_BLOCK_CONTENTS=2;CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3;CKEDITOR.ENLARGE_INLINE=4;CKEDITOR.START=1;CKEDITOR.END=2;CKEDITOR.SHRINK_ELEMENT=1;CKEDITOR.SHRINK_TEXT=2;"use strict";(function(){function a(a){if(!(arguments.length<1)){this.range=a;this.forceBrBreak=0;this.enlargeBr=1;this.enforceRealBlocks=0;this._||(this._={});}}function e(a,b,c){for(a=a.getNextSourceNode(b,null,c);!g(a);){a=a.getNextSourceNode(b,null,c);}return a;}function b(a){var b=[];a.forEach(function(a){if(a.getAttribute("contenteditable")=="true"){b.push(a);return false;}},CKEDITOR.NODE_ELEMENT,true);return b;}function c(a,d,e,f){a:{f==void 0&&(f=b(e));for(var o;o=f.shift();){if(o.getDtd().p){f={element:o,remaining:f};break a;}}f=null;}if(!f)return 0;if((o=CKEDITOR.filter.instances[f.element.data("cke-filter")])&&!o.check(d))return c(a,d,e,f.remaining);d=new CKEDITOR.dom.range(f.element);d.selectNodeContents(f.element);d=d.createIterator();d.enlargeBr=a.enlargeBr;d.enforceRealBlocks=a.enforceRealBlocks;d.activeFilter=d.filter=o;a._.nestedEditable={element:f.element,container:e,remaining:f.remaining,iterator:d};return 1;}function f(a,b,c){if(!b)return false;a=a.clone();a.collapse(!c);return a.checkBoundaryOfElement(b,c?CKEDITOR.START:CKEDITOR.END);}var d=/^[\r\n\t ]+$/,g=CKEDITOR.dom.walker.bookmark(false,true),j=CKEDITOR.dom.walker.whitespaces(true),l=function l(a){return g(a)&&j(a);},h={dd:1,dt:1,li:1};a.prototype={getNextParagraph:function getNextParagraph(a){var b,j,z,o,r,a=a||"p";if(this._.nestedEditable){if(b=this._.nestedEditable.iterator.getNextParagraph(a)){this.activeFilter=this._.nestedEditable.iterator.activeFilter;return b;}this.activeFilter=this.filter;if(c(this,a,this._.nestedEditable.container,this._.nestedEditable.remaining)){this.activeFilter=this._.nestedEditable.iterator.activeFilter;return this._.nestedEditable.iterator.getNextParagraph(a);}this._.nestedEditable=null;}if(!this.range.root.getDtd()[a])return null;if(!this._.started){var q=this.range.clone();j=q.startPath();var x=q.endPath(),i=!q.collapsed&&f(q,j.block),m=!q.collapsed&&f(q,x.block,1);q.shrink(CKEDITOR.SHRINK_ELEMENT,true);i&&q.setStartAt(j.block,CKEDITOR.POSITION_BEFORE_END);m&&q.setEndAt(x.block,CKEDITOR.POSITION_AFTER_START);j=q.endContainer.hasAscendant("pre",true)||q.startContainer.hasAscendant("pre",true);q.enlarge(this.forceBrBreak&&!j||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(!q.collapsed){j=new CKEDITOR.dom.walker(q.clone());x=CKEDITOR.dom.walker.bookmark(true,true);j.evaluator=x;this._.nextNode=j.next();j=new CKEDITOR.dom.walker(q.clone());j.evaluator=x;j=j.previous();this._.lastNode=j.getNextSourceNode(true);if(this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()){x=this.range.clone();x.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END);if(x.checkEndOfBlock()){x=new CKEDITOR.dom.elementPath(x.endContainer,x.root);this._.lastNode=(x.block||x.blockLimit).getNextSourceNode(true);}}if(!this._.lastNode||!q.root.contains(this._.lastNode)){this._.lastNode=this._.docEndMarker=q.document.createText("");this._.lastNode.insertAfter(j);}q=null;}this._.started=1;j=q;}x=this._.nextNode;q=this._.lastNode;for(this._.nextNode=null;x;){var i=0,m=x.hasAscendant("pre"),k=x.type!=CKEDITOR.NODE_ELEMENT,s=0;if(k)x.type==CKEDITOR.NODE_TEXT&&d.test(x.getText())&&(k=0);else{var u=x.getName();if(CKEDITOR.dtd.$block[u]&&x.getAttribute("contenteditable")=="false"){b=x;c(this,a,b);break;}else if(x.isBlockBoundary(this.forceBrBreak&&!m&&{br:1})){if(u=="br")k=1;else if(!j&&!x.getChildCount()&&u!="hr"){b=x;z=x.equals(q);break;}if(j){j.setEndAt(x,CKEDITOR.POSITION_BEFORE_START);if(u!="br")this._.nextNode=x;}i=1;}else{if(x.getFirst()){if(!j){j=this.range.clone();j.setStartAt(x,CKEDITOR.POSITION_BEFORE_START);}x=x.getFirst();continue;}k=1;}}if(k&&!j){j=this.range.clone();j.setStartAt(x,CKEDITOR.POSITION_BEFORE_START);}z=(!i||k)&&x.equals(q);if(j&&!i)for(;!x.getNext(l)&&!z;){u=x.getParent();if(u.isBlockBoundary(this.forceBrBreak&&!m&&{br:1})){i=1;k=0;z||u.equals(q);j.setEndAt(u,CKEDITOR.POSITION_BEFORE_END);break;}x=u;k=1;z=x.equals(q);s=1;}k&&j.setEndAt(x,CKEDITOR.POSITION_AFTER_END);x=e(x,s,q);if((z=!x)||i&&j)break;}if(!b){if(!j){this._.docEndMarker&&this._.docEndMarker.remove();return this._.nextNode=null;}b=new CKEDITOR.dom.elementPath(j.startContainer,j.root);x=b.blockLimit;i={div:1,th:1,td:1};b=b.block;if(!b&&x&&!this.enforceRealBlocks&&i[x.getName()]&&j.checkStartOfBlock()&&j.checkEndOfBlock()&&!x.equals(j.root))b=x;else if(!b||this.enforceRealBlocks&&b.is(h)){b=this.range.document.createElement(a);j.extractContents().appendTo(b);b.trim();j.insertNode(b);o=r=true;}else if(b.getName()!="li"){if(!j.checkStartOfBlock()||!j.checkEndOfBlock()){b=b.clone(false);j.extractContents().appendTo(b);b.trim();r=j.splitBlock();o=!r.wasStartOfBlock;r=!r.wasEndOfBlock;j.insertNode(b);}}else if(!z)this._.nextNode=b.equals(q)?null:e(j.getBoundaryNodes().endNode,1,q);}if(o)(o=b.getPrevious())&&o.type==CKEDITOR.NODE_ELEMENT&&(o.getName()=="br"?o.remove():o.getLast()&&o.getLast().$.nodeName.toLowerCase()=="br"&&o.getLast().remove());if(r)(o=b.getLast())&&o.type==CKEDITOR.NODE_ELEMENT&&o.getName()=="br"&&(!CKEDITOR.env.needsBrFiller||o.getPrevious(g)||o.getNext(g))&&o.remove();if(!this._.nextNode)this._.nextNode=z||b.equals(q)||!q?null:e(b,1,q);return b;}};CKEDITOR.dom.range.prototype.createIterator=function(){return new a(this);};})();CKEDITOR.command=function(a,e){this.uiItems=[];this.exec=function(b){if(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())return false;this.editorFocus&&a.focus();return this.fire("exec")===false?true:e.exec.call(this,a,b)!==false;};this.refresh=function(a,b){if(!this.readOnly&&a.readOnly)return true;if(this.context&&!b.isContextFor(this.context)){this.disable();return true;}if(!this.checkAllowed(true)){this.disable();return true;}this.startDisabled||this.enable();this.modes&&!this.modes[a.mode]&&this.disable();return this.fire("refresh",{editor:a,path:b})===false?true:e.refresh&&e.refresh.apply(this,arguments)!==false;};var b;this.checkAllowed=function(c){return!c&&typeof b=="boolean"?b:b=a.activeFilter.checkFeature(this);};CKEDITOR.tools.extend(this,e,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!e.context,state:CKEDITOR.TRISTATE_DISABLED});CKEDITOR.event.call(this);};CKEDITOR.command.prototype={enable:function enable(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(!this.preserveState||typeof this.previousState=="undefined"?CKEDITOR.TRISTATE_OFF:this.previousState);},disable:function disable(){this.setState(CKEDITOR.TRISTATE_DISABLED);},setState:function setState(a){if(this.state==a||a!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed())return false;this.previousState=this.state;this.state=a;this.fire("state");return true;},toggleState:function toggleState(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF);}};CKEDITOR.event.implementOn(CKEDITOR.command.prototype);CKEDITOR.ENTER_P=1;CKEDITOR.ENTER_BR=2;CKEDITOR.ENTER_DIV=3;CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1E4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]};(function(){function a(a,b,c,d,e){var f,k,a=[];for(f in b){k=b[f];k=typeof k=="boolean"?{}:typeof k=="function"?{match:k}:L(k);if(f.charAt(0)!="$")k.elements=f;if(c)k.featureName=c.toLowerCase();var i=k;i.elements=g(i.elements,/\s+/)||null;i.propertiesOnly=i.propertiesOnly||i.elements===true;var r=/\s*,\s*/,m=void 0;for(m in v){i[m]=g(i[m],r)||null;var s=i,p=C[m],A=g(i[C[m]],r),q=i[m],o=[],w=true,u=void 0;A?w=false:A={};for(u in q){if(u.charAt(0)=="!"){u=u.slice(1);o.push(u);A[u]=true;w=false;}}for(;u=o.pop();){q[u]=q["!"+u];delete q["!"+u];}s[p]=(w?false:A)||null;}i.match=i.match||null;d.push(k);a.push(k);}for(var b=e.elements,e=e.generic,h,c=0,d=a.length;c<d;++c){f=L(a[c]);k=f.classes===true||f.styles===true||f.attributes===true;i=f;m=p=r=void 0;for(r in v){i[r]=x(i[r]);}s=true;for(m in C){r=C[m];p=i[r];A=[];q=void 0;for(q in p){q.indexOf("*")>-1?A.push(RegExp("^"+q.replace(/\*/g,".*")+"$")):A.push(q);}p=A;if(p.length){i[r]=p;s=false;}}i.nothingRequired=s;i.noProperties=!(i.attributes||i.classes||i.styles);if(f.elements===true||f.elements===null)e[k?"unshift":"push"](f);else{i=f.elements;delete f.elements;for(h in i){if(b[h])b[h][k?"unshift":"push"](f);else b[h]=[f];}}}}function e(a,c,d,e){if(!a.match||a.match(c))if(e||j(a,c)){if(!a.propertiesOnly)d.valid=true;if(!d.allAttributes)d.allAttributes=b(a.attributes,c.attributes,d.validAttributes);if(!d.allStyles)d.allStyles=b(a.styles,c.styles,d.validStyles);if(!d.allClasses){a=a.classes;c=c.classes;e=d.validClasses;if(a){if(a===true)a=true;else{for(var f=0,k=c.length,i;f<k;++f){i=c[f];e[i]||(e[i]=a(i));}a=false;}}else a=false;d.allClasses=a;}}}function b(a,b,c){if(!a)return false;if(a===true)return true;for(var d in b){c[d]||(c[d]=a(d));}return false;}function c(a,b,c){if(!a.match||a.match(b)){if(a.noProperties)return false;c.hadInvalidAttribute=f(a.attributes,b.attributes)||c.hadInvalidAttribute;c.hadInvalidStyle=f(a.styles,b.styles)||c.hadInvalidStyle;a=a.classes;b=b.classes;if(a){for(var d=false,e=a===true,k=b.length;k--;){if(e||a(b[k])){b.splice(k,1);d=true;}}a=d;}else a=false;c.hadInvalidClass=a||c.hadInvalidClass;}}function f(a,b){if(!a)return false;var c=false,d=a===true,e;for(e in b){if(d||a(e)){delete b[e];c=true;}}return c;}function d(a,b,c){if(a.disabled||a.customConfig&&!c||!b)return false;a._.cachedChecks={};return true;}function g(a,b){if(!a)return false;if(a===true)return a;if(typeof a=="string"){a=I(a);return a=="*"?true:CKEDITOR.tools.convertArrayToObject(a.split(b));}if(CKEDITOR.tools.isArray(a))return a.length?CKEDITOR.tools.convertArrayToObject(a):false;var c={},d=0,e;for(e in a){c[e]=a[e];d++;}return d?c:false;}function j(a,b){if(a.nothingRequired)return true;var c,d,e,f;if(e=a.requiredClasses){f=b.classes;for(c=0;c<e.length;++c){d=e[c];if(typeof d=="string"){if(CKEDITOR.tools.indexOf(f,d)==-1)return false;}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(f,d))return false;}}return l(b.styles,a.requiredStyles)&&l(b.attributes,a.requiredAttributes);}function l(a,b){if(!b)return true;for(var c=0,d;c<b.length;++c){d=b[c];if(typeof d=="string"){if(!(d in a))return false;}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(a,d))return false;}return true;}function h(a){if(!a)return{};for(var a=a.split(/\s*,\s*/).sort(),b={};a.length;){b[a.shift()]=w;}return b;}function n(a){for(var b,c,d,e,f={},k=1,a=I(a);b=a.match(A);){if(c=b[2]){d=t(c,"styles");e=t(c,"attrs");c=t(c,"classes");}else d=e=c=null;f["$"+k++]={elements:b[1],classes:c,styles:d,attributes:e};a=a.slice(b[0].length);}return f;}function t(a,b){var c=a.match(E[b]);return c?I(c[1]):null;}function y(a){var b=a.styleBackup=a.attributes.style,c=a.classBackup=a.attributes["class"];if(!a.styles)a.styles=CKEDITOR.tools.parseCssText(b||"",1);if(!a.classes)a.classes=c?c.split(/\s+/):[];}function z(a,b,d,f){var k=0,i;if(f.toHtml)b.name=b.name.replace(ba,"$1");if(f.doCallbacks&&a.elementCallbacks){a:for(var m=a.elementCallbacks,p=0,A=m.length,o;p<A;++p){if(o=m[p](b)){i=o;break a;}}if(i)return i;}if(f.doTransform)if(i=a._.transformations[b.name]){y(b);for(m=0;m<i.length;++m){s(a,b,i[m]);}r(b);}if(f.doFilter){a:{m=b.name;p=a._;a=p.allowedRules.elements[m];i=p.allowedRules.generic;m=p.disallowedRules.elements[m];p=p.disallowedRules.generic;A=f.skipRequired;o={valid:false,validAttributes:{},validClasses:{},validStyles:{},allAttributes:false,allClasses:false,allStyles:false,hadInvalidAttribute:false,hadInvalidClass:false,hadInvalidStyle:false};var w,g;if(!a&&!i)a=null;else{y(b);if(m){w=0;for(g=m.length;w<g;++w){if(c(m[w],b,o)===false){a=null;break a;}}}if(p){w=0;for(g=p.length;w<g;++w){c(p[w],b,o);}}if(a){w=0;for(g=a.length;w<g;++w){e(a[w],b,o,A);}}if(i){w=0;for(g=i.length;w<g;++w){e(i[w],b,o,A);}}a=o;}}if(!a){d.push(b);return J;}if(!a.valid){d.push(b);return J;}g=a.validAttributes;var u=a.validStyles;i=a.validClasses;var m=b.attributes,h=b.styles,p=b.classes,A=b.classBackup,C=b.styleBackup,v,j,B=[];o=[];var E=/^data-cke-/;w=false;delete m.style;delete m["class"];delete b.classBackup;delete b.styleBackup;if(!a.allAttributes)for(v in m){if(!g[v])if(E.test(v)){if(v!=(j=v.replace(/^data-cke-saved-/,""))&&!g[j]){delete m[v];w=true;}}else{delete m[v];w=true;}}if(!a.allStyles||a.hadInvalidStyle){for(v in h){a.allStyles||u[v]?B.push(v+":"+h[v]):w=true;}if(B.length)m.style=B.sort().join("; ");}else if(C)m.style=C;if(!a.allClasses||a.hadInvalidClass){for(v=0;v<p.length;++v){(a.allClasses||i[p[v]])&&o.push(p[v]);}o.length&&(m["class"]=o.sort().join(" "));A&&o.length<A.split(/\s+/).length&&(w=true);}else A&&(m["class"]=A);w&&(k=J);if(!f.skipFinalValidation&&!q(b)){d.push(b);return J;}}if(f.toHtml)b.name=b.name.replace(ca,"cke:$1");return k;}function o(a){var b=[],c;for(c in a){c.indexOf("*")>-1&&b.push(c.replace(/\*/g,".*"));}return b.length?RegExp("^(?:"+b.join("|")+")$"):null;}function r(a){var b=a.attributes,c;delete b.style;delete b["class"];if(c=CKEDITOR.tools.writeCssText(a.styles,true))b.style=c;a.classes.length&&(b["class"]=a.classes.sort().join(" "));}function q(a){switch(a.name){case"a":if(!a.children.length&&!a.attributes.name)return false;break;case"img":if(!a.attributes.src)return false;}return true;}function x(a){if(!a)return false;if(a===true)return true;var b=o(a);return function(c){return c in a||b&&c.match(b);};}function i(){return new CKEDITOR.htmlParser.element("br");}function m(a){return a.type==CKEDITOR.NODE_ELEMENT&&(a.name=="br"||F.$block[a.name]);}function k(a,b,c){var d=a.name;if(F.$empty[d]||!a.children.length){if(d=="hr"&&b=="br")a.replaceWith(i());else{a.parent&&c.push({check:"it",el:a.parent});a.remove();}}else if(F.$block[d]||d=="tr"){if(b=="br"){if(a.previous&&!m(a.previous)){b=i();b.insertBefore(a);}if(a.next&&!m(a.next)){b=i();b.insertAfter(a);}a.replaceWithChildren();}else{var d=a.children,e;b:{e=F[b];for(var f=0,k=d.length,r;f<k;++f){r=d[f];if(r.type==CKEDITOR.NODE_ELEMENT&&!e[r.name]){e=false;break b;}}e=true;}if(e){a.name=b;a.attributes={};c.push({check:"parent-down",el:a});}else{e=a.parent;for(var f=e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||e.name=="body",s,k=d.length;k>0;){r=d[--k];if(f&&(r.type==CKEDITOR.NODE_TEXT||r.type==CKEDITOR.NODE_ELEMENT&&F.$inline[r.name])){if(!s){s=new CKEDITOR.htmlParser.element(b);s.insertAfter(a);c.push({check:"parent-down",el:s});}s.add(r,0);}else{s=null;r.insertAfter(a);e.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&r.type==CKEDITOR.NODE_ELEMENT&&!F[e.name][r.name]&&c.push({check:"el-up",el:r});}}a.remove();}}}else if(d=="style")a.remove();else{a.parent&&c.push({check:"it",el:a.parent});a.replaceWithChildren();}}function s(a,b,c){var d,e;for(d=0;d<c.length;++d){e=c[d];if((!e.check||a.check(e.check,false))&&(!e.left||e.left(b))){e.right(b,G);break;}}}function u(a,b){var c=b.getDefinition(),d=c.attributes,e=c.styles,f,k,i,r;if(a.name!=c.element)return false;for(f in d){if(f=="class"){c=d[f].split(/\s+/);for(i=a.classes.join("|");r=c.pop();){if(i.indexOf(r)==-1)return false;}}else if(a.attributes[f]!=d[f])return false;}for(k in e){if(a.styles[k]!=e[k])return false;}return true;}function p(a,b){var c,d;if(typeof a=="string")c=a;else if(a instanceof CKEDITOR.style)d=a;else{c=a[0];d=a[1];}return[{element:c,left:d,right:function right(a,c){c.transform(a,b);}}];}function O(a){return function(b){return u(b,a);};}function S(a){return function(b,c){c[a](b);};}var F=CKEDITOR.dtd,J=1,L=CKEDITOR.tools.copy,I=CKEDITOR.tools.trim,w="cke-test",B=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2;CKEDITOR.filter=function(a){this.allowedContent=[];this.disallowedContent=[];this.elementCallbacks=null;this.disabled=false;this.editor=null;this.id=CKEDITOR.tools.getNextNumber();this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}};CKEDITOR.filter.instances[this.id]=this;if(a instanceof CKEDITOR.editor){a=this.editor=a;this.customConfig=true;var b=a.config.allowedContent;if(b===true)this.disabled=true;else{if(!b)this.customConfig=false;this.allow(b,"config",1);this.allow(a.config.extraAllowedContent,"extra",1);this.allow(B[a.enterMode]+" "+B[a.shiftEnterMode],"default",1);this.disallow(a.config.disallowedContent);}}else{this.customConfig=false;this.allow(a,"default",1);}};CKEDITOR.filter.instances={};CKEDITOR.filter.prototype={allow:function allow(b,c,e){if(!d(this,b,e))return false;var f,k;if(typeof b=="string")b=n(b);else if(b instanceof CKEDITOR.style){if(b.toAllowedContentRules)return this.allow(b.toAllowedContentRules(this.editor),c,e);f=b.getDefinition();b={};e=f.attributes;b[f.element]=f={styles:f.styles,requiredStyles:f.styles&&CKEDITOR.tools.objectKeys(f.styles)};if(e){e=L(e);f.classes=e["class"]?e["class"].split(/\s+/):null;f.requiredClasses=f.classes;delete e["class"];f.attributes=e;f.requiredAttributes=e&&CKEDITOR.tools.objectKeys(e);}}else if(CKEDITOR.tools.isArray(b)){for(f=0;f<b.length;++f){k=this.allow(b[f],c,e);}return k;}a(this,b,c,this.allowedContent,this._.allowedRules);return true;},applyTo:function applyTo(a,b,c,d){if(this.disabled)return false;var e=this,f=[],i=this.editor&&this.editor.config.protectedSource,r,m=false,s={doFilter:!c,doTransform:true,doCallbacks:true,toHtml:b};a.forEach(function(a){if(a.type==CKEDITOR.NODE_ELEMENT){if(a.attributes["data-cke-filter"]=="off")return false;if(!b||!(a.name=="span"&&~CKEDITOR.tools.objectKeys(a.attributes).join("|").indexOf("data-cke-"))){r=z(e,a,f,s);if(r&J)m=true;else if(r&2)return false;}}else if(a.type==CKEDITOR.NODE_COMMENT&&a.value.match(/^\{cke_protected\}(?!\{C\})/)){var c;a:{var d=decodeURIComponent(a.value.replace(/^\{cke_protected\}/,""));c=[];var k,p,A;if(i)for(p=0;p<i.length;++p){if((A=d.match(i[p]))&&A[0].length==d.length){c=true;break a;}}d=CKEDITOR.htmlParser.fragment.fromHtml(d);d.children.length==1&&(k=d.children[0]).type==CKEDITOR.NODE_ELEMENT&&z(e,k,c,s);c=!c.length;}c||f.push(a);}},null,true);f.length&&(m=true);for(var p,a=[],d=B[d||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];c=f.pop();){c.type==CKEDITOR.NODE_ELEMENT?k(c,d,a):c.remove();}for(;p=a.pop();){c=p.el;if(c.parent)switch(p.check){case"it":F.$removeEmpty[c.name]&&!c.children.length?k(c,d,a):q(c)||k(c,d,a);break;case"el-up":c.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!F[c.parent.name][c.name]&&k(c,d,a);break;case"parent-down":c.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!F[c.parent.name][c.name]&&k(c.parent,d,a);}}return m;},checkFeature:function checkFeature(a){if(this.disabled||!a)return true;a.toFeature&&(a=a.toFeature(this.editor));return!a.requiredContent||this.check(a.requiredContent);},disable:function disable(){this.disabled=true;},disallow:function disallow(b){if(!d(this,b,true))return false;typeof b=="string"&&(b=n(b));a(this,b,null,this.disallowedContent,this._.disallowedRules);return true;},addContentForms:function addContentForms(a){if(!this.disabled&&a){var b,c,d=[],e;for(b=0;b<a.length&&!e;++b){c=a[b];if((typeof c=="string"||c instanceof CKEDITOR.style)&&this.check(c))e=c;}if(e){for(b=0;b<a.length;++b){d.push(p(a[b],e));}this.addTransformations(d);}}},addElementCallback:function addElementCallback(a){if(!this.elementCallbacks)this.elementCallbacks=[];this.elementCallbacks.push(a);},addFeature:function addFeature(a){if(this.disabled||!a)return true;a.toFeature&&(a=a.toFeature(this.editor));this.allow(a.allowedContent,a.name);this.addTransformations(a.contentTransformations);this.addContentForms(a.contentForms);return a.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(a.requiredContent):true;},addTransformations:function addTransformations(a){var b,c;if(!this.disabled&&a){var d=this._.transformations,e;for(e=0;e<a.length;++e){b=a[e];var f=void 0,k=void 0,i=void 0,r=void 0,m=void 0,s=void 0;c=[];for(k=0;k<b.length;++k){i=b[k];if(typeof i=="string"){i=i.split(/\s*:\s*/);r=i[0];m=null;s=i[1];}else{r=i.check;m=i.left;s=i.right;}if(!f){f=i;f=f.element?f.element:r?r.match(/^([a-z0-9]+)/i)[0]:f.left.getDefinition().element;}m instanceof CKEDITOR.style&&(m=O(m));c.push({check:r==f?null:r,left:m,right:typeof s=="string"?S(s):s});}b=f;d[b]||(d[b]=[]);d[b].push(c);}}},check:function check(a,b,c){if(this.disabled)return true;if(CKEDITOR.tools.isArray(a)){for(var d=a.length;d--;){if(this.check(a[d],b,c))return true;}return false;}var e,f;if(typeof a=="string"){f=a+"<"+(b===false?"0":"1")+(c?"1":"0")+">";if(f in this._.cachedChecks)return this._.cachedChecks[f];d=n(a).$1;e=d.styles;var k=d.classes;d.name=d.elements;d.classes=k=k?k.split(/\s*,\s*/):[];d.styles=h(e);d.attributes=h(d.attributes);d.children=[];k.length&&(d.attributes["class"]=k.join(" "));if(e)d.attributes.style=CKEDITOR.tools.writeCssText(d.styles);e=d;}else{d=a.getDefinition();e=d.styles;k=d.attributes||{};if(e){e=L(e);k.style=CKEDITOR.tools.writeCssText(e,true);}else e={};e={name:d.element,attributes:k,classes:k["class"]?k["class"].split(/\s+/):[],styles:e,children:[]};}var k=CKEDITOR.tools.clone(e),i=[],m;if(b!==false&&(m=this._.transformations[e.name])){for(d=0;d<m.length;++d){s(this,e,m[d]);}r(e);}z(this,k,i,{doFilter:true,doTransform:b!==false,skipRequired:!c,skipFinalValidation:!c});b=i.length>0?false:CKEDITOR.tools.objectCompare(e.attributes,k.attributes,true)?true:false;typeof a=="string"&&(this._.cachedChecks[f]=b);return b;},getAllowedEnterMode:function(){var a=["p","div","br"],b={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(c,d){var e=a.slice(),f;if(this.check(B[c]))return c;for(d||(e=e.reverse());f=e.pop();){if(this.check(f))return b[f];}return CKEDITOR.ENTER_BR;};}()};var v={styles:1,attributes:1,classes:1},C={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},A=/^([a-z0-9*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,E={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},ba=/^cke:(object|embed|param)$/,ca=/^(object|embed|param)$/,G=CKEDITOR.filter.transformationsTools={sizeToStyle:function sizeToStyle(a){this.lengthToStyle(a,"width");this.lengthToStyle(a,"height");},sizeToAttribute:function sizeToAttribute(a){this.lengthToAttribute(a,"width");this.lengthToAttribute(a,"height");},lengthToStyle:function lengthToStyle(a,b,c){c=c||b;if(!(c in a.styles)){var d=a.attributes[b];if(d){/^\d+$/.test(d)&&(d=d+"px");a.styles[c]=d;}}delete a.attributes[b];},lengthToAttribute:function lengthToAttribute(a,b,c){c=c||b;if(!(c in a.attributes)){var d=a.styles[b],e=d&&d.match(/^(\d+)(?:\.\d*)?px$/);e?a.attributes[c]=e[1]:d==w&&(a.attributes[c]=w);}delete a.styles[b];},alignmentToStyle:function alignmentToStyle(a){if(!("float"in a.styles)){var b=a.attributes.align;if(b=="left"||b=="right")a.styles["float"]=b;}delete a.attributes.align;},alignmentToAttribute:function alignmentToAttribute(a){if(!("align"in a.attributes)){var b=a.styles["float"];if(b=="left"||b=="right")a.attributes.align=b;}delete a.styles["float"];},matchesStyle:u,transform:function transform(a,b){if(typeof b=="string")a.name=b;else{var c=b.getDefinition(),d=c.styles,e=c.attributes,f,k,i,r;a.name=c.element;for(f in e){if(f=="class"){c=a.classes.join("|");for(i=e[f].split(/\s+/);r=i.pop();){c.indexOf(r)==-1&&a.classes.push(r);}}else a.attributes[f]=e[f];}for(k in d){a.styles[k]=d[k];}}}};})();(function(){CKEDITOR.focusManager=function(a){if(a.focusManager)return a.focusManager;this.hasFocus=false;this.currentActive=null;this._={editor:a};return this;};CKEDITOR.focusManager._={blurDelay:200};CKEDITOR.focusManager.prototype={focus:function focus(a){this._.timer&&clearTimeout(this._.timer);if(a)this.currentActive=a;if(!this.hasFocus&&!this._.locked){(a=CKEDITOR.currentInstance)&&a.focusManager.blur(1);this.hasFocus=true;(a=this._.editor.container)&&a.addClass("cke_focus");this._.editor.fire("focus");}},lock:function lock(){this._.locked=1;},unlock:function unlock(){delete this._.locked;},blur:function blur(a){function e(){if(this.hasFocus){this.hasFocus=false;var a=this._.editor.container;a&&a.removeClass("cke_focus");this._.editor.fire("blur");}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var b=CKEDITOR.focusManager._.blurDelay;a||!b?e.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer;e.call(this);},b,this);}},add:function add(a,e){var b=a.getCustomData("focusmanager");if(!b||b!=this){b&&b.remove(a);var b="focus",c="blur";if(e)if(CKEDITOR.env.ie){b="focusin";c="focusout";}else CKEDITOR.event.useCapture=1;var f={blur:function blur(){a.equals(this.currentActive)&&this.blur();},focus:function focus(){this.focus(a);}};a.on(b,f.focus,this);a.on(c,f.blur,this);if(e)CKEDITOR.event.useCapture=0;a.setCustomData("focusmanager",this);a.setCustomData("focusmanager_handlers",f);}},remove:function remove(a){a.removeCustomData("focusmanager");var e=a.removeCustomData("focusmanager_handlers");a.removeListener("blur",e.blur);a.removeListener("focus",e.focus);}};})();CKEDITOR.keystrokeHandler=function(a){if(a.keystrokeHandler)return a.keystrokeHandler;this.keystrokes={};this.blockedKeystrokes={};this._={editor:a};return this;};(function(){var a,e=function e(b){var b=b.data,e=b.getKeystroke(),d=this.keystrokes[e],g=this._.editor;a=g.fire("key",{keyCode:e,domEvent:b})===false;if(!a){d&&(a=g.execCommand(d,{from:"keystrokeHandler"})!==false);a||(a=!!this.blockedKeystrokes[e]);}a&&b.preventDefault(true);return!a;},b=function b(_b){if(a){a=false;_b.data.preventDefault(true);}};CKEDITOR.keystrokeHandler.prototype={attach:function attach(a){a.on("keydown",e,this);if(CKEDITOR.env.gecko&&CKEDITOR.env.mac)a.on("keypress",b,this);}};})();(function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function load(a,e,b){if(!a||!CKEDITOR.lang.languages[a])a=this.detect(e,a);var c=this,e=function e(){c[a].dir=c.rtl[a]?"rtl":"ltr";b(a,c[a]);};this[a]?e():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+a+".js"),e,this);},detect:function detect(a,e){var b=this.languages,e=e||navigator.userLanguage||navigator.language||a,c=e.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),f=c[1],c=c[2];b[f+"-"+c]?f=f+"-"+c:b[f]||(f=null);CKEDITOR.lang.detect=f?function(){return f;}:function(a){return a;};return f||a;}};})();CKEDITOR.scriptLoader=function(){var a={},e={};return{load:function load(b,c,f,d){var g=typeof b=="string";g&&(b=[b]);f||(f=CKEDITOR);var j=b.length,l=[],h=[],n=function n(a){c&&(g?c.call(f,a):c.call(f,l,h));};if(j===0)n(true);else{var t=function t(a,b){(b?l:h).push(a);if(--j<=0){d&&CKEDITOR.document.getDocumentElement().removeStyle("cursor");n(b);}},y=function y(b,c){a[b]=1;var d=e[b];delete e[b];for(var f=0;f<d.length;f++){d[f](b,c);}},z=function z(b){if(a[b])t(b,true);else{var d=e[b]||(e[b]=[]);d.push(t);if(!(d.length>1)){var f=new CKEDITOR.dom.element("script");f.setAttributes({type:"text/javascript",src:b});if(c)if(CKEDITOR.env.ie&&CKEDITOR.env.version<11)f.$.onreadystatechange=function(){if(f.$.readyState=="loaded"||f.$.readyState=="complete"){f.$.onreadystatechange=null;y(b,true);}};else{f.$.onload=function(){setTimeout(function(){y(b,true);},0);};f.$.onerror=function(){y(b,false);};}f.appendTo(CKEDITOR.document.getHead());}}};d&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var o=0;o<j;o++){z(b[o]);}}},queue:function(){function a(){var b;(b=c[0])&&this.load(b.scriptUrl,b.callback,CKEDITOR,0);}var c=[];return function(e,d){var g=this;c.push({scriptUrl:e,callback:function callback(){d&&d.apply(this,arguments);c.shift();a.call(g);}});c.length==1&&a.call(this);};}()};}();CKEDITOR.resourceManager=function(a,e){this.basePath=a;this.fileName=e;this.registered={};this.loaded={};this.externals={};this._={waitingList:{}};};CKEDITOR.resourceManager.prototype={add:function add(a,e){if(this.registered[a])throw'[CKEDITOR.resourceManager.add] The resource name "'+a+'" is already registered.';var b=this.registered[a]=e||{};b.name=a;b.path=this.getPath(a);CKEDITOR.fire(a+CKEDITOR.tools.capitalize(this.fileName)+"Ready",b);return this.get(a);},get:function get(a){return this.registered[a]||null;},getPath:function getPath(a){var e=this.externals[a];return CKEDITOR.getUrl(e&&e.dir||this.basePath+a+"/");},getFilePath:function getFilePath(a){var e=this.externals[a];return CKEDITOR.getUrl(this.getPath(a)+(e?e.file:this.fileName+".js"));},addExternal:function addExternal(a,e,b){for(var a=a.split(","),c=0;c<a.length;c++){var f=a[c];b||(e=e.replace(/[^\/]+$/,function(a){b=a;return"";}));this.externals[f]={dir:e,file:b||this.fileName+".js"};}},load:function load(a,e,b){CKEDITOR.tools.isArray(a)||(a=a?[a]:[]);for(var c=this.loaded,f=this.registered,d=[],g={},j={},l=0;l<a.length;l++){var h=a[l];if(h)if(!c[h]&&!f[h]){var n=this.getFilePath(h);d.push(n);n in g||(g[n]=[]);g[n].push(h);}else j[h]=this.get(h);}CKEDITOR.scriptLoader.load(d,function(a,d){if(d.length)throw'[CKEDITOR.resourceManager.load] Resource name "'+g[d[0]].join(",")+'" was not found at "'+d[0]+'".';for(var f=0;f<a.length;f++){for(var o=g[a[f]],r=0;r<o.length;r++){var q=o[r];j[q]=this.get(q);c[q]=1;}}e.call(b,j);},this);}};CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin");CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(a){var e={};return function(b,c,f){var d={},g=function g(b){a.call(this,b,function(a){CKEDITOR.tools.extend(d,a);var b=[],j;for(j in a){var t=a[j],y=t&&t.requires;if(!e[j]){if(t.icons)for(var z=t.icons.split(","),o=z.length;o--;){CKEDITOR.skin.addIcon(z[o],t.path+"icons/"+(CKEDITOR.env.hidpi&&t.hidpi?"hidpi/":"")+z[o]+".png");}e[j]=1;}if(y){y.split&&(y=y.split(","));for(t=0;t<y.length;t++){d[y[t]]||b.push(y[t]);}}}if(b.length)g.call(this,b);else{for(j in d){t=d[j];if(t.onLoad&&!t.onLoad._called){t.onLoad()===false&&delete d[j];t.onLoad._called=1;}}c&&c.call(f||window,d);}},this);};g.call(this,b);};});CKEDITOR.plugins.setLang=function(a,e,b){var c=this.get(a),a=c.langEntries||(c.langEntries={}),c=c.lang||(c.lang=[]);c.split&&(c=c.split(","));CKEDITOR.tools.indexOf(c,e)==-1&&c.push(e);a[e]=b;};CKEDITOR.ui=function(a){if(a.ui)return a.ui;this.items={};this.instances={};this.editor=a;this._={handlers:{}};return this;};CKEDITOR.ui.prototype={add:function add(a,e,b){b.name=a.toLowerCase();var c=this.items[a]={type:e,command:b.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(c,b);},get:function get(a){return this.instances[a];},create:function create(a){var e=this.items[a],b=e&&this._.handlers[e.type],c=e&&e.command&&this.editor.getCommand(e.command),b=b&&b.create.apply(this,e.args);this.instances[a]=b;c&&c.uiItems.push(b);if(b&&!b.type)b.type=e.type;return b;},addHandler:function addHandler(a,e){this._.handlers[a]=e;},space:function space(a){return CKEDITOR.document.getById(this.spaceId(a));},spaceId:function spaceId(a){return this.editor.id+"_"+a;}};CKEDITOR.event.implementOn(CKEDITOR.ui);(function(){function a(a,c,d){CKEDITOR.event.call(this);a=a&&CKEDITOR.tools.clone(a);if(c!==void 0){if(c instanceof CKEDITOR.dom.element){if(!d)throw Error("One of the element modes must be specified.");}else throw Error("Expect element of type CKEDITOR.dom.element.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&d==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!(d==CKEDITOR.ELEMENT_MODE_INLINE?c.is(CKEDITOR.dtd.$editable)||c.is("textarea"):d==CKEDITOR.ELEMENT_MODE_REPLACE?!c.is(CKEDITOR.dtd.$nonBodyContent):1))throw Error('The specified element mode is not supported on element: "'+c.getName()+'".');this.element=c;this.elementMode=d;this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(c.getId()||c.getNameAtt());}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={};this.commands={};this.templates={};this.name=this.name||e();this.id=CKEDITOR.tools.getNextId();this.status="unloaded";this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);this.ui=new CKEDITOR.ui(this);this.focusManager=new CKEDITOR.focusManager(this);this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this);this.on("readOnly",b);this.on("selectionChange",function(a){f(this,a.data.path);});this.on("activeFilterChange",function(){f(this,this.elementPath(),true);});this.on("mode",b);this.on("instanceReady",function(){this.config.startupFocus&&this.focus();});CKEDITOR.fire("instanceCreated",null,this);CKEDITOR.add(this);CKEDITOR.tools.setTimeout(function(){g(this,a);},0,this);}function e(){do{var a="editor"+ ++y;}while(CKEDITOR.instances[a]);return a;}function b(){var a=this.commands,b;for(b in a){c(this,a[b]);}}function c(a,b){b[b.startDisabled?"disable":a.readOnly&&!b.readOnly?"disable":b.modes[a.mode]?"enable":"disable"]();}function f(a,b,c){if(b){var d,e,f=a.commands;for(e in f){d=f[e];(c||d.contextSensitive)&&d.refresh(a,b);}}}function d(a){var b=a.config.customConfig;if(!b)return false;var b=CKEDITOR.getUrl(b),c=z[b]||(z[b]={});if(c.fn){c.fn.call(a,a.config);(CKEDITOR.getUrl(a.config.customConfig)==b||!d(a))&&a.fireOnce("customConfigLoaded");}else CKEDITOR.scriptLoader.queue(b,function(){c.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){};d(a);});return true;}function g(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on){a.on(c,b.on[c]);}CKEDITOR.tools.extend(a.config,b,true);delete a.config.on;}c=a.config;a.readOnly=!(!c.readOnly&&!(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.is("textarea")?a.element.hasAttribute("disabled"):a.element.isReadOnly():a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&a.element.hasAttribute("disabled")));a.blockless=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(a.element.is("textarea")||CKEDITOR.dtd[a.element.getName()].p):false;a.tabIndex=c.tabIndex||a.element&&a.element.getAttribute("tabindex")||0;a.activeEnterMode=a.enterMode=a.blockless?CKEDITOR.ENTER_BR:c.enterMode;a.activeShiftEnterMode=a.shiftEnterMode=a.blockless?CKEDITOR.ENTER_BR:c.shiftEnterMode;if(c.skin)CKEDITOR.skinName=c.skin;a.fireOnce("configLoaded");a.dataProcessor=new CKEDITOR.htmlDataProcessor(a);a.filter=a.activeFilter=new CKEDITOR.filter(a);j(a);});if(b&&b.customConfig!=void 0)a.config.customConfig=b.customConfig;d(a)||a.fireOnce("customConfigLoaded");}function j(a){CKEDITOR.skin.loadPart("editor",function(){l(a);});}function l(a){CKEDITOR.lang.load(a.config.language,a.config.defaultLanguage,function(b,c){var d=a.config.title;a.langCode=b;a.lang=CKEDITOR.tools.prototypedCopy(c);a.title=typeof d=="string"||d===false?d:[a.lang.editor,a.name].join(", ");if(!a.config.contentsLangDirection)a.config.contentsLangDirection=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.getDirection(1):a.lang.dir;a.fire("langLoaded");h(a);});}function h(a){a.getStylesSet(function(b){a.once("loaded",function(){a.fire("stylesSet",{styles:b});},null,null,1);n(a);});}function n(a){var b=a.config,c=b.plugins,d=b.extraPlugins,e=b.removePlugins;if(d)var f=RegExp("(?:^|,)(?:"+d.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),c=c.replace(f,""),c=c+(","+d);if(e)var k=RegExp("(?:^|,)(?:"+e.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),c=c.replace(k,"");CKEDITOR.env.air&&(c=c+",adobeair");CKEDITOR.plugins.load(c.split(","),function(c){var d=[],e=[],f=[];a.plugins=c;for(var i in c){var m=c[i],g=m.lang,q=null,h=m.requires,w;CKEDITOR.tools.isArray(h)&&(h=h.join(","));if(h&&(w=h.match(k)))for(;h=w.pop();){CKEDITOR.tools.setTimeout(function(a,b){throw Error('Plugin "'+a.replace(",","")+'" cannot be removed from the plugins list, because it\'s required by "'+b+'" plugin.');},0,null,[h,i]);}if(g&&!a.lang[i]){g.split&&(g=g.split(","));if(CKEDITOR.tools.indexOf(g,a.langCode)>=0)q=a.langCode;else{q=a.langCode.replace(/-.*/,"");q=q!=a.langCode&&CKEDITOR.tools.indexOf(g,q)>=0?q:CKEDITOR.tools.indexOf(g,"en")>=0?"en":g[0];}if(!m.langEntries||!m.langEntries[q])f.push(CKEDITOR.getUrl(m.path+"lang/"+q+".js"));else{a.lang[i]=m.langEntries[q];q=null;}}e.push(q);d.push(m);}CKEDITOR.scriptLoader.load(f,function(){for(var c=["beforeInit","init","afterInit"],f=0;f<c.length;f++){for(var k=0;k<d.length;k++){var i=d[k];f===0&&e[k]&&i.lang&&i.langEntries&&(a.lang[i.name]=i.langEntries[e[k]]);if(i[c[f]])i[c[f]](a);}}a.fireOnce("pluginsLoaded");b.keystrokes&&a.setKeystroke(a.config.keystrokes);for(k=0;k<a.config.blockedKeystrokes.length;k++){a.keystrokeHandler.blockedKeystrokes[a.config.blockedKeystrokes[k]]=1;}a.status="loaded";a.fireOnce("loaded");CKEDITOR.fire("instanceLoaded",null,a);});});}function t(){var a=this.element;if(a&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var b=this.getData();this.config.htmlEncodeOutput&&(b=CKEDITOR.tools.htmlEncode(b));a.is("textarea")?a.setValue(b):a.setHtml(b);return true;}return false;}a.prototype=CKEDITOR.editor.prototype;CKEDITOR.editor=a;var y=0,z={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function addCommand(a,b){b.name=a.toLowerCase();var d=new CKEDITOR.command(this,b);this.mode&&c(this,d);return this.commands[a]=d;},_attachToForm:function _attachToForm(){var a=this,b=a.element,c=new CKEDITOR.dom.element(b.$.form);if(b.is("textarea")&&c){var d=function d(c){a.updateElement();a._.required&&!b.getValue()&&a.fire("required")===false&&c.data.preventDefault();};c.on("submit",d);if(c.$.submit&&c.$.submit.call&&c.$.submit.apply)c.$.submit=CKEDITOR.tools.override(c.$.submit,function(a){return function(){d();a.apply?a.apply(this):a();};});a.on("destroy",function(){c.removeListener("submit",d);});}},destroy:function destroy(a){this.fire("beforeDestroy");!a&&t.call(this);this.editable(null);this.status="destroyed";this.fire("destroy");this.removeAllListeners();CKEDITOR.remove(this);CKEDITOR.fire("instanceDestroyed",null,this);},elementPath:function elementPath(a){if(!a){a=this.getSelection();if(!a)return null;a=a.getStartElement();}return a?new CKEDITOR.dom.elementPath(a,this.editable()):null;},createRange:function createRange(){var a=this.editable();return a?new CKEDITOR.dom.range(a):null;},execCommand:function execCommand(a,b){var c=this.getCommand(a),d={name:a,commandData:b,command:c};if(c&&c.state!=CKEDITOR.TRISTATE_DISABLED&&this.fire("beforeCommandExec",d)!==false){d.returnValue=c.exec(d.commandData);if(!c.async&&this.fire("afterCommandExec",d)!==false)return d.returnValue;}return false;},getCommand:function getCommand(a){return this.commands[a];},getData:function getData(a){!a&&this.fire("beforeGetData");var b=this._.data;if(typeof b!="string")b=(b=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?b.is("textarea")?b.getValue():b.getHtml():"";b={dataValue:b};!a&&this.fire("getData",b);return b.dataValue;},getSnapshot:function getSnapshot(){var a=this.fire("getSnapshot");if(typeof a!="string"){var b=this.element;b&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(a=b.is("textarea")?b.getValue():b.getHtml());}return a;},loadSnapshot:function loadSnapshot(a){this.fire("loadSnapshot",a);},setData:function setData(a,b,c){var d=true,e=b;if(b&&_typeof(b)=="object"){c=b.internal;e=b.callback;d=!b.noSnapshot;}!c&&d&&this.fire("saveSnapshot");if(e||!c)this.once("dataReady",function(a){!c&&d&&this.fire("saveSnapshot");e&&e.call(a.editor);});a={dataValue:a};!c&&this.fire("setData",a);this._.data=a.dataValue;!c&&this.fire("afterSetData",a);},setReadOnly:function setReadOnly(a){a=a==void 0||a;if(this.readOnly!=a){this.readOnly=a;this.keystrokeHandler.blockedKeystrokes[8]=+a;this.editable().setReadOnly(a);this.fire("readOnly");}},insertHtml:function insertHtml(a,b){this.fire("insertHtml",{dataValue:a,mode:b});},insertText:function insertText(a){this.fire("insertText",a);},insertElement:function insertElement(a){this.fire("insertElement",a);},focus:function focus(){this.fire("beforeFocus");},checkDirty:function checkDirty(){return this.status=="ready"&&this._.previousValue!==this.getSnapshot();},resetDirty:function resetDirty(){this._.previousValue=this.getSnapshot();},updateElement:function updateElement(){return t.call(this);},setKeystroke:function setKeystroke(){for(var a=this.keystrokeHandler.keystrokes,b=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],c,d,e=b.length;e--;){c=b[e];d=0;if(CKEDITOR.tools.isArray(c)){d=c[1];c=c[0];}d?a[c]=d:delete a[c];}},addFeature:function addFeature(a){return this.filter.addFeature(a);},setActiveFilter:function setActiveFilter(a){if(!a)a=this.filter;if(this.activeFilter!==a){this.activeFilter=a;this.fire("activeFilterChange");a===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(a.getAllowedEnterMode(this.enterMode),a.getAllowedEnterMode(this.shiftEnterMode,true));}},setActiveEnterMode:function setActiveEnterMode(a,b){a=a?this.blockless?CKEDITOR.ENTER_BR:a:this.enterMode;b=b?this.blockless?CKEDITOR.ENTER_BR:b:this.shiftEnterMode;if(this.activeEnterMode!=a||this.activeShiftEnterMode!=b){this.activeEnterMode=a;this.activeShiftEnterMode=b;this.fire("activeEnterModeChange");}}});})();CKEDITOR.ELEMENT_MODE_NONE=0;CKEDITOR.ELEMENT_MODE_REPLACE=1;CKEDITOR.ELEMENT_MODE_APPENDTO=2;CKEDITOR.ELEMENT_MODE_INLINE=3;CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)--\>)|(?:([^\\s>]+)\\s*((?:(?:\"[^\"]*\")|(?:'[^']*')|[^\"'>])*)\\/?>))","g")};};(function(){var a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,e={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function onTagOpen(){},onTagClose:function onTagClose(){},onText:function onText(){},onCDATA:function onCDATA(){},onComment:function onComment(){},parse:function parse(b){for(var c,f,d=0,g;c=this._.htmlPartsRegex.exec(b);){f=c.index;if(f>d){d=b.substring(d,f);if(g)g.push(d);else this.onText(d);}d=this._.htmlPartsRegex.lastIndex;if(f=c[1]){f=f.toLowerCase();if(g&&CKEDITOR.dtd.$cdata[f]){this.onCDATA(g.join(""));g=null;}if(!g){this.onTagClose(f);continue;}}if(g)g.push(c[0]);else if(f=c[3]){f=f.toLowerCase();if(!/="/.test(f)){var j={},l;c=c[4];var h=!!(c&&c.charAt(c.length-1)=="/");if(c)for(;l=a.exec(c);){var n=l[1].toLowerCase();l=l[2]||l[3]||l[4]||"";j[n]=!l&&e[n]?n:CKEDITOR.tools.htmlDecodeAttr(l);}this.onTagOpen(f,j,h);!g&&CKEDITOR.dtd.$cdata[f]&&(g=[]);}}else if(f=c[2])this.onComment(f);}if(b.length>d)this.onText(b.substring(d,b.length));}};})();CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function $(){this._={output:[]};},proto:{openTag:function openTag(a){this._.output.push("<",a);},openTagClose:function openTagClose(a,e){e?this._.output.push(" />"):this._.output.push(">");},attribute:function attribute(a,e){typeof e=="string"&&(e=CKEDITOR.tools.htmlEncodeAttr(e));this._.output.push(" ",a,'="',e,'"');},closeTag:function closeTag(a){this._.output.push("</",a,">");},text:function text(a){this._.output.push(a);},comment:function comment(a){this._.output.push("<\!--",a,"--\>");},write:function write(a){this._.output.push(a);},reset:function reset(){this._.output=[];this._.indent=false;},getHtml:function getHtml(a){var e=this._.output.join("");a&&this.reset();return e;}}});"use strict";(function(){CKEDITOR.htmlParser.node=function(){};CKEDITOR.htmlParser.node.prototype={remove:function remove(){var a=this.parent.children,e=CKEDITOR.tools.indexOf(a,this),b=this.previous,c=this.next;b&&(b.next=c);c&&(c.previous=b);a.splice(e,1);this.parent=null;},replaceWith:function replaceWith(a){var e=this.parent.children,b=CKEDITOR.tools.indexOf(e,this),c=a.previous=this.previous,f=a.next=this.next;c&&(c.next=a);f&&(f.previous=a);e[b]=a;a.parent=this.parent;this.parent=null;},insertAfter:function insertAfter(a){var e=a.parent.children,b=CKEDITOR.tools.indexOf(e,a),c=a.next;e.splice(b+1,0,this);this.next=a.next;this.previous=a;a.next=this;c&&(c.previous=this);this.parent=a.parent;},insertBefore:function insertBefore(a){var e=a.parent.children,b=CKEDITOR.tools.indexOf(e,a);e.splice(b,0,this);this.next=a;(this.previous=a.previous)&&(a.previous.next=this);a.previous=this;this.parent=a.parent;},getAscendant:function getAscendant(a){var e=typeof a=="function"?a:typeof a=="string"?function(b){return b.name==a;}:function(b){return b.name in a;},b=this.parent;for(;b&&b.type==CKEDITOR.NODE_ELEMENT;){if(e(b))return b;b=b.parent;}return null;},wrapWith:function wrapWith(a){this.replaceWith(a);a.add(this);return a;},getIndex:function getIndex(){return CKEDITOR.tools.indexOf(this.parent.children,this);},getFilterContext:function getFilterContext(a){return a||{};}};})();"use strict";CKEDITOR.htmlParser.comment=function(a){this.value=a;this._={isBlockLike:false};};CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node(),{type:CKEDITOR.NODE_COMMENT,filter:function filter(a,e){var b=this.value;if(!(b=a.onComment(e,b,this))){this.remove();return false;}if(typeof b!="string"){this.replaceWith(b);return false;}this.value=b;return true;},writeHtml:function writeHtml(a,e){e&&this.filter(e);a.comment(this.value);}});"use strict";(function(){CKEDITOR.htmlParser.text=function(a){this.value=a;this._={isBlockLike:false};};CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node(),{type:CKEDITOR.NODE_TEXT,filter:function filter(a,e){if(!(this.value=a.onText(e,this.value,this))){this.remove();return false;}},writeHtml:function writeHtml(a,e){e&&this.filter(e);a.text(this.value);}});})();"use strict";(function(){CKEDITOR.htmlParser.cdata=function(a){this.value=a;};CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node(),{type:CKEDITOR.NODE_TEXT,filter:function filter(){},writeHtml:function writeHtml(a){a.write(this.value);}});})();"use strict";CKEDITOR.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:true,hasInlineStarted:false};};(function(){function a(a){return a.attributes["data-cke-survive"]?false:a.name=="a"&&a.attributes.href||CKEDITOR.dtd.$removeEmpty[a.name];}var e=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),b={ol:1,ul:1},c=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),f={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(d,g,j){function l(a){var b;if(q.length>0)for(var c=0;c<q.length;c++){var d=q[c],e=d.name,f=CKEDITOR.dtd[e],k=i.name&&CKEDITOR.dtd[i.name];if((!k||k[e])&&(!a||!f||f[a]||!CKEDITOR.dtd[a])){if(!b){h();b=1;}d=d.clone();d.parent=i;i=d;q.splice(c,1);c--;}else if(e==i.name){t(i,i.parent,1);c--;}}}function h(){for(;x.length;){t(x.shift(),i);}}function n(a){if(a._.isBlockLike&&a.name!="pre"&&a.name!="textarea"){var b=a.children.length,c=a.children[b-1],d;if(c&&c.type==CKEDITOR.NODE_TEXT)(d=CKEDITOR.tools.rtrim(c.value))?c.value=d:a.children.length=b-1;}}function t(b,c,d){var c=c||i||r,e=i;if(b.previous===void 0){if(y(c,b)){i=c;o.onTagOpen(j,{});b.returnPoint=c=i;}n(b);(!a(b)||b.children.length)&&c.add(b);b.name=="pre"&&(k=false);b.name=="textarea"&&(m=false);}if(b.returnPoint){i=b.returnPoint;delete b.returnPoint;}else i=d?c:e;}function y(a,b){if((a==r||a.name=="body")&&j&&(!a.name||CKEDITOR.dtd[a.name][j])){var c,d;return(c=b.attributes&&(d=b.attributes["data-cke-real-element-type"])?d:b.name)&&c in CKEDITOR.dtd.$inline&&!(c in CKEDITOR.dtd.head)&&!b.isOrphan||b.type==CKEDITOR.NODE_TEXT;}}function z(a,b){return a in CKEDITOR.dtd.$listItem||a in CKEDITOR.dtd.$tableContent?a==b||a=="dt"&&b=="dd"||a=="dd"&&b=="dt":false;}var o=new CKEDITOR.htmlParser(),r=g instanceof CKEDITOR.htmlParser.element?g:typeof g=="string"?new CKEDITOR.htmlParser.element(g):new CKEDITOR.htmlParser.fragment(),q=[],x=[],i=r,m=r.name=="textarea",k=r.name=="pre";o.onTagOpen=function(d,f,p,r){f=new CKEDITOR.htmlParser.element(d,f);if(f.isUnknown&&p)f.isEmpty=true;f.isOptionalClose=r;if(a(f))q.push(f);else{if(d=="pre")k=true;else{if(d=="br"&&k){i.add(new CKEDITOR.htmlParser.text("\n"));return;}d=="textarea"&&(m=true);}if(d=="br")x.push(f);else{for(;;){r=(p=i.name)?CKEDITOR.dtd[p]||(i._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):c;if(!f.isUnknown&&!i.isUnknown&&!r[d]){if(i.isOptionalClose)o.onTagClose(p);else if(d in b&&p in b){p=i.children;(p=p[p.length-1])&&p.name=="li"||t(p=new CKEDITOR.htmlParser.element("li"),i);!f.returnPoint&&(f.returnPoint=i);i=p;}else if(d in CKEDITOR.dtd.$listItem&&!z(d,p))o.onTagOpen(d=="li"?"ul":"dl",{},0,1);else if(p in e&&!z(d,p)){!f.returnPoint&&(f.returnPoint=i);i=i.parent;}else{p in CKEDITOR.dtd.$inline&&q.unshift(i);if(i.parent)t(i,i.parent,1);else{f.isOrphan=1;break;}}}else break;}l(d);h();f.parent=i;f.isEmpty?t(f):i=f;}}};o.onTagClose=function(a){for(var b=q.length-1;b>=0;b--){if(a==q[b].name){q.splice(b,1);return;}}for(var c=[],d=[],e=i;e!=r&&e.name!=a;){e._.isBlockLike||d.unshift(e);c.push(e);e=e.returnPoint||e.parent;}if(e!=r){for(b=0;b<c.length;b++){var f=c[b];t(f,f.parent);}i=e;e._.isBlockLike&&h();t(e,e.parent);if(e==i)i=i.parent;q=q.concat(d);}a=="body"&&(j=false);};o.onText=function(a){if((!i._.hasInlineStarted||x.length)&&!k&&!m){a=CKEDITOR.tools.ltrim(a);if(a.length===0)return;}var b=i.name,d=b?CKEDITOR.dtd[b]||(i._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):c;if(!m&&!d["#"]&&b in e){o.onTagOpen(f[b]||"");o.onText(a);}else{h();l();!k&&!m&&(a=a.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," "));a=new CKEDITOR.htmlParser.text(a);if(y(i,a))this.onTagOpen(j,{},0,1);i.add(a);}};o.onCDATA=function(a){i.add(new CKEDITOR.htmlParser.cdata(a));};o.onComment=function(a){h();l();i.add(new CKEDITOR.htmlParser.comment(a));};o.parse(d);for(h();i!=r;){t(i,i.parent,1);}n(r);return r;};CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function add(a,b){isNaN(b)&&(b=this.children.length);var c=b>0?this.children[b-1]:null;if(c){if(a._.isBlockLike&&c.type==CKEDITOR.NODE_TEXT){c.value=CKEDITOR.tools.rtrim(c.value);if(c.value.length===0){this.children.pop();this.add(a);return;}}c.next=a;}a.previous=c;a.parent=this;this.children.splice(b,0,a);if(!this._.hasInlineStarted)this._.hasInlineStarted=a.type==CKEDITOR.NODE_TEXT||a.type==CKEDITOR.NODE_ELEMENT&&!a._.isBlockLike;},filter:function filter(a,b){b=this.getFilterContext(b);a.onRoot(b,this);this.filterChildren(a,false,b);},filterChildren:function filterChildren(a,b,c){if(this.childrenFilteredBy!=a.id){c=this.getFilterContext(c);if(b&&!this.parent)a.onRoot(c,this);this.childrenFilteredBy=a.id;for(b=0;b<this.children.length;b++){this.children[b].filter(a,c)===false&&b--;}}},writeHtml:function writeHtml(a,b){b&&this.filter(b);this.writeChildrenHtml(a);},writeChildrenHtml:function writeChildrenHtml(a,b,c){var e=this.getFilterContext();if(c&&!this.parent&&b)b.onRoot(e,this);b&&this.filterChildren(b,false,e);b=0;c=this.children;for(e=c.length;b<e;b++){c[b].writeHtml(a);}},forEach:function forEach(a,b,c){if(!c&&(!b||this.type==b))var e=a(this);if(e!==false)for(var c=this.children,f=0;f<c.length;f++){e=c[f];e.type==CKEDITOR.NODE_ELEMENT?e.forEach(a,b):(!b||e.type==b)&&a(e);}},getFilterContext:function getFilterContext(a){return a||{};}};})();"use strict";(function(){function a(){this.rules=[];}function e(b,c,e,d){var g,j;for(g in c){(j=b[g])||(j=b[g]=new a());j.add(c[g],e,d);}}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function $(b){this.id=CKEDITOR.tools.getNextNumber();this.elementNameRules=new a();this.attributeNameRules=new a();this.elementsRules={};this.attributesRules={};this.textRules=new a();this.commentRules=new a();this.rootRules=new a();b&&this.addRules(b,10);},proto:{addRules:function addRules(a,c){var f;if(typeof c=="number")f=c;else if(c&&"priority"in c)f=c.priority;typeof f!="number"&&(f=10);_typeof(c)!="object"&&(c={});a.elementNames&&this.elementNameRules.addMany(a.elementNames,f,c);a.attributeNames&&this.attributeNameRules.addMany(a.attributeNames,f,c);a.elements&&e(this.elementsRules,a.elements,f,c);a.attributes&&e(this.attributesRules,a.attributes,f,c);a.text&&this.textRules.add(a.text,f,c);a.comment&&this.commentRules.add(a.comment,f,c);a.root&&this.rootRules.add(a.root,f,c);},applyTo:function applyTo(a){a.filter(this);},onElementName:function onElementName(a,c){return this.elementNameRules.execOnName(a,c);},onAttributeName:function onAttributeName(a,c){return this.attributeNameRules.execOnName(a,c);},onText:function onText(a,c,e){return this.textRules.exec(a,c,e);},onComment:function onComment(a,c,e){return this.commentRules.exec(a,c,e);},onRoot:function onRoot(a,c){return this.rootRules.exec(a,c);},onElement:function onElement(a,c){for(var e=[this.elementsRules["^"],this.elementsRules[c.name],this.elementsRules.$],d,g=0;g<3;g++){if(d=e[g]){d=d.exec(a,c,this);if(d===false)return null;if(d&&d!=c)return this.onNode(a,d);if(c.parent&&!c.name)break;}}return c;},onNode:function onNode(a,c){var e=c.type;return e==CKEDITOR.NODE_ELEMENT?this.onElement(a,c):e==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(a,c.value)):e==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(a,c.value)):null;},onAttribute:function onAttribute(a,c,e,d){return(e=this.attributesRules[e])?e.exec(a,d,c,this):d;}}});CKEDITOR.htmlParser.filterRulesGroup=a;a.prototype={add:function add(a,c,e){this.rules.splice(this.findIndex(c),0,{value:a,priority:c,options:e});},addMany:function addMany(a,c,e){for(var d=[this.findIndex(c),0],g=0,j=a.length;g<j;g++){d.push({value:a[g],priority:c,options:e});}this.rules.splice.apply(this.rules,d);},findIndex:function findIndex(a){for(var c=this.rules,e=c.length-1;e>=0&&a<c[e].priority;){e--;}return e+1;},exec:function exec(a,c){var e=c instanceof CKEDITOR.htmlParser.node||c instanceof CKEDITOR.htmlParser.fragment,d=Array.prototype.slice.call(arguments,1),g=this.rules,j=g.length,l,h,n,t;for(t=0;t<j;t++){if(e){l=c.type;h=c.name;}n=g[t];if(!(a.nonEditable&&!n.options.applyToAll||a.nestedEditable&&n.options.excludeNestedEditable)){n=n.value.apply(null,d);if(n===false||e&&n&&(n.name!=h||n.type!=l))return n;n!=void 0&&(d[0]=c=n);}}return c;},execOnName:function execOnName(a,c){for(var e=0,d=this.rules,g=d.length,j;c&&e<g;e++){j=d[e];!(a.nonEditable&&!j.options.applyToAll||a.nestedEditable&&j.options.excludeNestedEditable)&&(c=c.replace(j.value[0],j.value[1]));}return c;}};})();(function(){function a(a,e){function m(a){return a||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1});}function p(a,e){return function(f){if(f.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var k=[],i=b(f),p,A;if(i)for(r(i,1)&&k.push(i);i;){if(d(i)&&(p=c(i))&&r(p))if((A=c(p))&&!d(A))k.push(p);else{m(s).insertAfter(p);p.remove();}i=i.previous;}for(i=0;i<k.length;i++){k[i].remove();}if(k=(typeof e=="function"?e(f):e)!==false)if(!s&&!CKEDITOR.env.needsBrFiller&&f.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)k=false;else if(!s&&!CKEDITOR.env.needsBrFiller&&(document.documentMode>7||f.name in CKEDITOR.dtd.tr||f.name in CKEDITOR.dtd.$listItem))k=false;else{k=b(f);k=!k||f.name=="form"&&k.name=="input";}k&&f.add(m(a));}};}function r(a,b){if((!s||CKEDITOR.env.needsBrFiller)&&a.type==CKEDITOR.NODE_ELEMENT&&a.name=="br"&&!a.attributes["data-cke-eol"])return true;var c;if(a.type==CKEDITOR.NODE_TEXT&&(c=a.value.match(q))){if(c.index){new CKEDITOR.htmlParser.text(a.value.substring(0,c.index)).insertBefore(a);a.value=c[0];}if(!CKEDITOR.env.needsBrFiller&&s&&(!b||a.parent.name in h))return true;if(!s)if((c=a.previous)&&c.name=="br"||!c||d(c))return true;}return false;}var w={elements:{}},s=e=="html",h=CKEDITOR.tools.extend({},k),v;for(v in h){"#"in i[v]||delete h[v];}for(v in h){w.elements[v]=p(s,a.config.fillEmptyBlocks);}w.root=p(s,false);w.elements.br=function(a){return function(b){if(b.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var e=b.attributes;if("data-cke-bogus"in e||"data-cke-eol"in e)delete e["data-cke-bogus"];else{for(e=b.next;e&&f(e);){e=e.next;}var k=c(b);!e&&d(b.parent)?g(b.parent,m(a)):d(e)&&k&&!d(k)&&m(a).insertBefore(e);}}};}(s);return w;}function e(a,b){return a!=CKEDITOR.ENTER_BR&&b!==false?a==CKEDITOR.ENTER_DIV?"div":"p":false;}function b(a){for(a=a.children[a.children.length-1];a&&f(a);){a=a.previous;}return a;}function c(a){for(a=a.previous;a&&f(a);){a=a.previous;}return a;}function f(a){return a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(a.value)||a.type==CKEDITOR.NODE_ELEMENT&&a.attributes["data-cke-bookmark"];}function d(a){return a&&(a.type==CKEDITOR.NODE_ELEMENT&&a.name in k||a.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT);}function g(a,b){var c=a.children[a.children.length-1];a.children.push(b);b.parent=a;if(c){c.next=b;b.previous=c;}}function j(a){a=a.attributes;a.contenteditable!="false"&&(a["data-cke-editable"]=a.contenteditable?"true":1);a.contenteditable="false";}function l(a){a=a.attributes;switch(a["data-cke-editable"]){case"true":a.contenteditable="true";break;case"1":delete a.contenteditable;}}function h(a){return a.replace(S,function(a,b,c){return"<"+b+c.replace(F,function(a,b){return J.test(b)&&c.indexOf("data-cke-saved-"+b)==-1?" data-cke-saved-"+a+" data-cke-"+CKEDITOR.rnd+"-"+a:a;})+">";});}function n(a,b){return a.replace(b,function(a,b,c){a.indexOf("<textarea")===0&&(a=b+z(c).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>");return"<cke:encoded>"+encodeURIComponent(a)+"</cke:encoded>";});}function t(a){return a.replace(w,function(a,b){return decodeURIComponent(b);});}function y(a){return a.replace(/<\!--(?!{cke_protected})[\s\S]+?--\>/g,function(a){return"<\!--"+x+"{C}"+encodeURIComponent(a).replace(/--/g,"%2D%2D")+"--\>";});}function z(a){return a.replace(/<\!--\{cke_protected\}\{C\}([\s\S]+?)--\>/g,function(a,b){return decodeURIComponent(b);});}function o(a,b){var c=b._.dataStore;return a.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g,function(a,b){return decodeURIComponent(b);}).replace(/\{cke_protected_(\d+)\}/g,function(a,b){return c&&c[b]||"";});}function r(a,b){for(var c=[],d=b.config.protectedSource,e=b._.dataStore||(b._.dataStore={id:1}),f=/<\!--\{cke_temp(comment)?\}(\d*?)--\>/g,d=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(d),a=a.replace(/<\!--[\s\S]*?--\>/g,function(a){return"<\!--{cke_tempcomment}"+(c.push(a)-1)+"--\>";}),k=0;k<d.length;k++){a=a.replace(d[k],function(a){a=a.replace(f,function(a,b,d){return c[d];});return /cke_temp(comment)?/.test(a)?a:"<\!--{cke_temp}"+(c.push(a)-1)+"--\>";});}a=a.replace(f,function(a,b,d){return"<\!--"+x+(b?"{C}":"")+encodeURIComponent(c[d]).replace(/--/g,"%2D%2D")+"--\>";});a=a.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=>]+))+\s*>/g,function(a){return a.replace(/<\!--\{cke_protected\}([^>]*)--\>/g,function(a,b){e[e.id]=decodeURIComponent(b);return"{cke_protected_"+e.id++ +"}";});});return a=a.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(a,c,d,e){return"<"+c+d+">"+o(z(e),b)+"</"+c+">";});}CKEDITOR.htmlDataProcessor=function(b){var c,d,f=this;this.editor=b;this.dataFilter=c=new CKEDITOR.htmlParser.filter();this.htmlFilter=d=new CKEDITOR.htmlParser.filter();this.writer=new CKEDITOR.htmlParser.basicWriter();c.addRules(s);c.addRules(u,{applyToAll:true});c.addRules(a(b,"data"),{applyToAll:true});d.addRules(p);d.addRules(O,{applyToAll:true});d.addRules(a(b,"html"),{applyToAll:true});b.on("toHtml",function(a){var a=a.data,c=a.dataValue,c=r(c,b),c=n(c,I),c=h(c),c=n(c,L),c=c.replace(B,"$1cke:$2"),c=c.replace(C,"<cke:$1$2></cke:$1>"),c=c.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),c=c.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2"),d=a.context||b.editable().getName(),f;if(CKEDITOR.env.ie&&CKEDITOR.env.version<9&&d=="pre"){d="div";c="<pre>"+c+"</pre>";f=1;}d=b.document.createElement(d);d.setHtml("a"+c);c=d.getHtml().substr(1);c=c.replace(RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),"");f&&(c=c.replace(/^<pre>|<\/pre>$/gi,""));c=c.replace(v,"$1$2");c=t(c);c=z(c);a.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(c,a.context,a.fixForBody===false?false:e(a.enterMode,b.config.autoParagraph));},null,null,5);b.on("toHtml",function(a){a.data.filter.applyTo(a.data.dataValue,true,a.data.dontFilter,a.data.enterMode)&&b.fire("dataFiltered");},null,null,6);b.on("toHtml",function(a){a.data.dataValue.filterChildren(f.dataFilter,true);},null,null,10);b.on("toHtml",function(a){var a=a.data,b=a.dataValue,c=new CKEDITOR.htmlParser.basicWriter();b.writeChildrenHtml(c);b=c.getHtml(true);a.dataValue=y(b);},null,null,15);b.on("toDataFormat",function(a){var c=a.data.dataValue;a.data.enterMode!=CKEDITOR.ENTER_BR&&(c=c.replace(/^<br *\/?>/i,""));a.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(c,a.data.context,e(a.data.enterMode,b.config.autoParagraph));},null,null,5);b.on("toDataFormat",function(a){a.data.dataValue.filterChildren(f.htmlFilter,true);},null,null,10);b.on("toDataFormat",function(a){a.data.filter.applyTo(a.data.dataValue,false,true);},null,null,11);b.on("toDataFormat",function(a){var c=a.data.dataValue,d=f.writer;d.reset();c.writeChildrenHtml(d);c=d.getHtml(true);c=z(c);c=o(c,b);a.data.dataValue=c;},null,null,15);};CKEDITOR.htmlDataProcessor.prototype={toHtml:function toHtml(a,b,c,d){var e=this.editor,f,k,i;if(b&&_typeof(b)=="object"){f=b.context;c=b.fixForBody;d=b.dontFilter;k=b.filter;i=b.enterMode;}else f=b;!f&&f!==null&&(f=e.editable().getName());return e.fire("toHtml",{dataValue:a,context:f,fixForBody:c,dontFilter:d,filter:k||e.filter,enterMode:i||e.enterMode}).dataValue;},toDataFormat:function toDataFormat(a,b){var c,d,e;if(b){c=b.context;d=b.filter;e=b.enterMode;}!c&&c!==null&&(c=this.editor.editable().getName());return this.editor.fire("toDataFormat",{dataValue:a,filter:d||this.editor.filter,context:c,enterMode:e||this.editor.enterMode}).dataValue;}};var q=/(?:&nbsp;|\xa0)$/,x="{cke_protected}",i=CKEDITOR.dtd,m=["caption","colgroup","col","thead","tfoot","tbody"],k=CKEDITOR.tools.extend({},i.$blockLimit,i.$block),s={elements:{input:j,textarea:j}},u={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},p={elements:{embed:function embed(a){var b=a.parent;if(b&&b.name=="object"){var c=b.attributes.width,b=b.attributes.height;if(c)a.attributes.width=c;if(b)a.attributes.height=b;}},a:function a(_a5){if(!_a5.children.length&&!_a5.attributes.name&&!_a5.attributes["data-cke-saved-name"])return false;}}},O={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function $(a){var b=a.attributes;if(b){if(b["data-cke-temp"])return false;for(var c=["name","href","src"],d,e=0;e<c.length;e++){d="data-cke-saved-"+c[e];d in b&&delete b[c[e]];}}return a;},table:function table(a){a.children.slice(0).sort(function(a,b){var c,d;if(a.type==CKEDITOR.NODE_ELEMENT&&b.type==a.type){c=CKEDITOR.tools.indexOf(m,a.name);d=CKEDITOR.tools.indexOf(m,b.name);}if(!(c>-1&&d>-1&&c!=d)){c=a.parent?a.getIndex():-1;d=b.parent?b.getIndex():-1;}return c>d?1:-1;});},param:function param(a){a.children=[];a.isEmpty=true;return a;},span:function span(a){a.attributes["class"]=="Apple-style-span"&&delete a.name;},html:function html(a){delete a.attributes.contenteditable;delete a.attributes["class"];},body:function body(a){delete a.attributes.spellcheck;delete a.attributes.contenteditable;},style:function style(a){var b=a.children[0];if(b&&b.value)b.value=CKEDITOR.tools.trim(b.value);if(!a.attributes.type)a.attributes.type="text/css";},title:function title(a){var b=a.children[0];!b&&g(a,b=new CKEDITOR.htmlParser.text());b.value=a.attributes["data-cke-title"]||"";},input:l,textarea:l},attributes:{"class":function _class(a){return CKEDITOR.tools.ltrim(a.replace(/(?:^|\s+)cke_[^\s]*/g,""))||false;}}};if(CKEDITOR.env.ie)O.attributes.style=function(a){return a.replace(/(^|;)([^\:]+)/g,function(a){return a.toLowerCase();});};var S=/<(a|area|img|input|source)\b([^>]*)>/gi,F=/([\w-]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,J=/^(href|src|name)$/i,L=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,I=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,w=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,B=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,v=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,C=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;})();"use strict";CKEDITOR.htmlParser.element=function(a,e){this.name=a;this.attributes=e||{};this.children=[];var b=a||"",c=b.match(/^cke:(.*)/);c&&(b=c[1]);b=!(!CKEDITOR.dtd.$nonBodyContent[b]&&!CKEDITOR.dtd.$block[b]&&!CKEDITOR.dtd.$listItem[b]&&!CKEDITOR.dtd.$tableContent[b]&&!(CKEDITOR.dtd.$nonEditable[b]||b=="br"));this.isEmpty=!!CKEDITOR.dtd.$empty[a];this.isUnknown=!CKEDITOR.dtd[a];this._={isBlockLike:b,hasInlineStarted:this.isEmpty||!b};};CKEDITOR.htmlParser.cssStyle=function(a){var e={};((a instanceof CKEDITOR.htmlParser.element?a.attributes.style:a)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,c,f){c=="font-family"&&(f=f.replace(/["']/g,""));e[c.toLowerCase()]=f;});return{rules:e,populate:function populate(a){var c=this.toString();if(c)a instanceof CKEDITOR.dom.element?a.setAttribute("style",c):a instanceof CKEDITOR.htmlParser.element?a.attributes.style=c:a.style=c;},toString:function toString(){var a=[],c;for(c in e){e[c]&&a.push(c,":",e[c],";");}return a.join("");}};};(function(){function a(a){return function(b){return b.type==CKEDITOR.NODE_ELEMENT&&(typeof a=="string"?b.name==a:b.name in a);};}var e=function e(a,b){a=a[0];b=b[0];return a<b?-1:a>b?1:0;},b=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node(),{type:CKEDITOR.NODE_ELEMENT,add:b.add,clone:function clone(){return new CKEDITOR.htmlParser.element(this.name,this.attributes);},filter:function filter(a,b){var d=this,e,j,b=d.getFilterContext(b);if(b.off)return true;if(!d.parent)a.onRoot(b,d);for(;;){e=d.name;if(!(j=a.onElementName(b,e))){this.remove();return false;}d.name=j;if(!(d=a.onElement(b,d))){this.remove();return false;}if(d!==this){this.replaceWith(d);return false;}if(d.name==e)break;if(d.type!=CKEDITOR.NODE_ELEMENT){this.replaceWith(d);return false;}if(!d.name){this.replaceWithChildren();return false;}}e=d.attributes;var l,h;for(l in e){h=l;for(j=e[l];;){if(h=a.onAttributeName(b,l)){if(h!=l){delete e[l];l=h;}else break;}else{delete e[l];break;}}h&&((j=a.onAttribute(b,d,h,j))===false?delete e[h]:e[h]=j);}d.isEmpty||this.filterChildren(a,false,b);return true;},filterChildren:b.filterChildren,writeHtml:function writeHtml(a,b){b&&this.filter(b);var d=this.name,g=[],j=this.attributes,l,h;a.openTag(d,j);for(l in j){g.push([l,j[l]]);}a.sortAttributes&&g.sort(e);l=0;for(h=g.length;l<h;l++){j=g[l];a.attribute(j[0],j[1]);}a.openTagClose(d,this.isEmpty);this.writeChildrenHtml(a);this.isEmpty||a.closeTag(d);},writeChildrenHtml:b.writeChildrenHtml,replaceWithChildren:function replaceWithChildren(){for(var a=this.children,b=a.length;b;){a[--b].insertAfter(this);}this.remove();},forEach:b.forEach,getFirst:function getFirst(b){if(!b)return this.children.length?this.children[0]:null;typeof b!="function"&&(b=a(b));for(var e=0,d=this.children.length;e<d;++e){if(b(this.children[e]))return this.children[e];}return null;},getHtml:function getHtml(){var a=new CKEDITOR.htmlParser.basicWriter();this.writeChildrenHtml(a);return a.getHtml();},setHtml:function setHtml(a){for(var a=this.children=CKEDITOR.htmlParser.fragment.fromHtml(a).children,b=0,d=a.length;b<d;++b){a[b].parent=this;}},getOuterHtml:function getOuterHtml(){var a=new CKEDITOR.htmlParser.basicWriter();this.writeHtml(a);return a.getHtml();},split:function split(a){for(var b=this.children.splice(a,this.children.length-a),d=this.clone(),e=0;e<b.length;++e){b[e].parent=d;}d.children=b;if(b[0])b[0].previous=null;if(a>0)this.children[a-1].next=null;this.parent.add(d,this.getIndex()+1);return d;},addClass:function addClass(a){if(!this.hasClass(a)){var b=this.attributes["class"]||"";this.attributes["class"]=b+(b?" ":"")+a;}},removeClass:function removeClass(a){var b=this.attributes["class"];if(b)(b=CKEDITOR.tools.trim(b.replace(RegExp("(?:\\s+|^)"+a+"(?:\\s+|$)")," ")))?this.attributes["class"]=b:delete this.attributes["class"];},hasClass:function hasClass(a){var b=this.attributes["class"];return!b?false:RegExp("(?:^|\\s)"+a+"(?=\\s|$)").test(b);},getFilterContext:function getFilterContext(a){var b=[];a||(a={off:false,nonEditable:false,nestedEditable:false});!a.off&&this.attributes["data-cke-processor"]=="off"&&b.push("off",true);!a.nonEditable&&this.attributes.contenteditable=="false"?b.push("nonEditable",true):a.nonEditable&&!a.nestedEditable&&this.attributes.contenteditable=="true"&&b.push("nestedEditable",true);if(b.length)for(var a=CKEDITOR.tools.copy(a),d=0;d<b.length;d=d+2){a[b[d]]=b[d+1];}return a;}},true);})();(function(){var a={},e=/{([^}]+)}/g,b=/([\\'])/g,c=/\n/g,f=/\r/g;CKEDITOR.template=function(d){if(a[d])this.output=a[d];else{var g=d.replace(b,"\\$1").replace(c,"\\n").replace(f,"\\r").replace(e,function(a,b){return"',data['"+b+"']==undefined?'{"+b+"}':data['"+b+"'],'";});this.output=a[d]=Function("data","buffer","return buffer?buffer.push('"+g+"'):['"+g+"'].join('');");}};})();delete CKEDITOR.loadFullCore;CKEDITOR.instances={};CKEDITOR.document=new CKEDITOR.dom.document(document);CKEDITOR.add=function(a){CKEDITOR.instances[a.name]=a;a.on("focus",function(){if(CKEDITOR.currentInstance!=a){CKEDITOR.currentInstance=a;CKEDITOR.fire("currentInstance");}});a.on("blur",function(){if(CKEDITOR.currentInstance==a){CKEDITOR.currentInstance=null;CKEDITOR.fire("currentInstance");}});CKEDITOR.fire("instance",null,a);};CKEDITOR.remove=function(a){delete CKEDITOR.instances[a.name];};(function(){var a={};CKEDITOR.addTemplate=function(e,b){var c=a[e];if(c)return c;c={name:e,source:b};CKEDITOR.fire("template",c);return a[e]=new CKEDITOR.template(c.source);};CKEDITOR.getTemplate=function(e){return a[e];};})();(function(){var a=[];CKEDITOR.addCss=function(e){a.push(e);};CKEDITOR.getCss=function(){return a.join("\n");};})();CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset");});CKEDITOR.TRISTATE_ON=1;CKEDITOR.TRISTATE_OFF=2;CKEDITOR.TRISTATE_DISABLED=0;(function(){CKEDITOR.inline=function(a,e){if(!CKEDITOR.env.isCompatible)return null;a=CKEDITOR.dom.element.get(a);if(a.getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var b=new CKEDITOR.editor(e,a,CKEDITOR.ELEMENT_MODE_INLINE),c=a.is("textarea")?a:null;if(c){b.setData(c.getValue(),null,true);a=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!b.readOnly+'" class="cke_textarea_inline">'+c.getValue()+"</div>",CKEDITOR.document);a.insertAfter(c);c.hide();c.$.form&&b._attachToForm();}else b.setData(a.getHtml(),null,true);b.on("loaded",function(){b.fire("uiReady");b.editable(a);b.container=a;b.setData(b.getData(1));b.resetDirty();b.fire("contentDom");b.mode="wysiwyg";b.fire("mode");b.status="ready";b.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,b);},null,null,1E4);b.on("destroy",function(){if(c){b.container.clearCustomData();b.container.remove();c.show();}b.element.clearCustomData();delete b.element;});return b;};CKEDITOR.inlineAll=function(){var a,e,b;for(b in CKEDITOR.dtd.$editable){for(var c=CKEDITOR.document.getElementsByTag(b),f=0,d=c.count();f<d;f++){a=c.getItem(f);if(a.getAttribute("contenteditable")=="true"){e={element:a,config:{}};CKEDITOR.fire("inline",e)!==false&&CKEDITOR.inline(a,e.config);}}}};CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll();});})();CKEDITOR.replaceClass="ckeditor";(function(){function a(a,f,d,g){if(!CKEDITOR.env.isCompatible)return null;a=CKEDITOR.dom.element.get(a);if(a.getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var j=new CKEDITOR.editor(f,a,g);if(g==CKEDITOR.ELEMENT_MODE_REPLACE){a.setStyle("visibility","hidden");j._.required=a.hasAttribute("required");a.removeAttribute("required");}d&&j.setData(d,null,true);j.on("loaded",function(){b(j);g==CKEDITOR.ELEMENT_MODE_REPLACE&&j.config.autoUpdateElement&&a.$.form&&j._attachToForm();j.setMode(j.config.startupMode,function(){j.resetDirty();j.status="ready";j.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,j);});});j.on("destroy",e);return j;}function e(){var a=this.container,b=this.element;if(a){a.clearCustomData();a.remove();}if(b){b.clearCustomData();if(this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE){b.show();this._.required&&b.setAttribute("required","required");}delete this.element;}}function b(a){var b=a.name,d=a.element,e=a.elementMode,j=a.fire("uiSpace",{space:"top",html:""}).html,l=a.fire("uiSpace",{space:"bottom",html:""}).html,h=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(a.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(a.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>'),b=CKEDITOR.dom.element.createFromHtml(h.output({id:a.id,name:b,langDir:a.lang.dir,langCode:a.langCode,voiceLabel:a.title,topHtml:j?'<span id="'+a.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+j+"</span>":"",contentId:a.ui.spaceId("contents"),bottomHtml:l?'<span id="'+a.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+l+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));if(e==CKEDITOR.ELEMENT_MODE_REPLACE){d.hide();b.insertAfter(d);}else d.append(b);a.container=b;j&&a.ui.space("top").unselectable();l&&a.ui.space("bottom").unselectable();d=a.config.width;e=a.config.height;d&&b.setStyle("width",CKEDITOR.tools.cssLength(d));e&&a.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(e));b.disableContextMenu();CKEDITOR.env.webkit&&b.on("focus",function(){a.focus();});a.fireOnce("uiReady");}CKEDITOR.replace=function(b,e){return a(b,e,null,CKEDITOR.ELEMENT_MODE_REPLACE);};CKEDITOR.appendTo=function(b,e,d){return a(b,e,d,CKEDITOR.ELEMENT_MODE_APPENDTO);};CKEDITOR.replaceAll=function(){for(var a=document.getElementsByTagName("textarea"),b=0;b<a.length;b++){var d=null,e=a[b];if(e.name||e.id){if(typeof arguments[0]=="string"){if(!RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(e.className))continue;}else if(typeof arguments[0]=="function"){d={};if(arguments[0](e,d)===false)continue;}this.replace(e,d);}}};CKEDITOR.editor.prototype.addMode=function(a,b){(this._.modes||(this._.modes={}))[a]=b;};CKEDITOR.editor.prototype.setMode=function(a,b){var d=this,e=this._.modes;if(!(a==d.mode||!e||!e[a])){d.fire("beforeSetMode",a);if(d.mode){var j=d.checkDirty(),e=d._.previousModeData,l,h=0;d.fire("beforeModeUnload");d.editable(0);d._.previousMode=d.mode;d._.previousModeData=l=d.getData(1);if(d.mode=="source"&&e==l){d.fire("lockSnapshot",{forceUpdate:true});h=1;}d.ui.space("contents").setHtml("");d.mode="";}else d._.previousModeData=d.getData(1);this._.modes[a](function(){d.mode=a;j!==void 0&&!j&&d.resetDirty();h?d.fire("unlockSnapshot"):a=="wysiwyg"&&d.fire("saveSnapshot");setTimeout(function(){d.fire("mode");b&&b.call(d);},0);});}};CKEDITOR.editor.prototype.resize=function(a,b,d,e){var j=this.container,l=this.ui.space("contents"),h=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement,e=e?j.getChild(1):j;e.setSize("width",a,true);h&&(h.style.width="1%");l.setStyle("height",Math.max(b-(d?0:(e.$.offsetHeight||0)-(l.$.clientHeight||0)),0)+"px");h&&(h.style.width="100%");this.fire("resize");};CKEDITOR.editor.prototype.getResizable=function(a){return a?this.ui.space("contents"):this.container;};CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass);});})();CKEDITOR.config.startupMode="wysiwyg";(function(){function a(a){var b=a.editor,d=a.data.path,f=d.blockLimit,m=a.data.selection,k=m.getRanges()[0],s;if(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)if(m=e(m,d)){m.appendBogus();s=CKEDITOR.env.ie;}if(b.config.autoParagraph!==false&&b.activeEnterMode!=CKEDITOR.ENTER_BR&&b.editable().equals(f)&&!d.block&&k.collapsed&&!k.getCommonAncestor().isReadOnly()){d=k.clone();d.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);f=new CKEDITOR.dom.walker(d);f.guard=function(a){return!c(a)||a.type==CKEDITOR.NODE_COMMENT||a.isReadOnly();};if(!f.checkForward()||d.checkStartOfBlock()&&d.checkEndOfBlock()){b=k.fixBlock(true,b.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p");if(!CKEDITOR.env.needsBrFiller)(b=b.getFirst(c))&&b.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(b.getText()).match(/^(?:&nbsp;|\xa0)$/)&&b.remove();s=1;a.cancel();}}s&&k.select();}function e(a,b){if(a.isFake)return 0;var d=b.block||b.blockLimit,e=d&&d.getLast(c);if(d&&d.isBlockBoundary()&&(!e||!(e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary()))&&!d.is("pre")&&!d.getBogus())return d;}function b(a){var b=a.data.getTarget();if(b.is("input")){b=b.getAttribute("type");(b=="submit"||b=="reset")&&a.data.preventDefault();}}function c(a){return t(a)&&y(a);}function f(a,b){return function(c){var d=CKEDITOR.dom.element.get(c.data.$.toElement||c.data.$.fromElement||c.data.$.relatedTarget);(!d||!b.equals(d)&&!b.contains(d))&&a.call(this,c);};}function d(a){var b,d=a.getRanges()[0],e=a.root,f={table:1,ul:1,ol:1,dl:1};if(d.startPath().contains(f)){var a=function a(_a6){return function(d,e){e&&d.type==CKEDITOR.NODE_ELEMENT&&d.is(f)&&(b=d);if(!e&&c(d)&&(!_a6||!h(d)))return false;};},k=d.clone();k.collapse(1);k.setStartAt(e,CKEDITOR.POSITION_AFTER_START);e=new CKEDITOR.dom.walker(k);e.guard=a();e.checkBackward();if(b){k=d.clone();k.collapse();k.setEndAt(b,CKEDITOR.POSITION_AFTER_END);e=new CKEDITOR.dom.walker(k);e.guard=a(true);b=false;e.checkForward();return b;}}return null;}function g(a){a.editor.focus();a.editor.fire("saveSnapshot");}function j(a){var b=a.editor;b.getSelection().scrollIntoView();setTimeout(function(){b.fire("saveSnapshot");},0);}function l(a,b,c){for(var d=a.getCommonAncestor(b),b=a=c?b:a;(a=a.getParent())&&!d.equals(a)&&a.getChildCount()==1;){b=a;}b.remove();}CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function $(a,b){this.base(b.$||b);this.editor=a;this.status="unloaded";this.hasFocus=false;this.setup();},proto:{focus:function focus(){var a;if(CKEDITOR.env.webkit&&!this.hasFocus){a=this.editor._.previousActive||this.getDocument().getActive();if(this.contains(a)){a.focus();return;}}try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]();}catch(b){if(!CKEDITOR.env.ie)throw b;}if(CKEDITOR.env.safari&&!this.isInline()){a=CKEDITOR.document.getActive();a.equals(this.getWindow().getFrame())||this.getWindow().focus();}},on:function on(a,b){var c=Array.prototype.slice.call(arguments,0);if(CKEDITOR.env.ie&&/^focus|blur$/.exec(a)){a=a=="focus"?"focusin":"focusout";b=f(b,this);c[0]=a;c[1]=b;}return CKEDITOR.dom.element.prototype.on.apply(this,c);},attachListener:function attachListener(a,b,c,d,e,f){!this._.listeners&&(this._.listeners=[]);var s=Array.prototype.slice.call(arguments,1),s=a.on.apply(a,s);this._.listeners.push(s);return s;},clearListeners:function clearListeners(){var a=this._.listeners;try{for(;a.length;){a.pop().removeListener();}}catch(b){}},restoreAttrs:function restoreAttrs(){var a=this._.attrChanges,b,c;for(c in a){if(a.hasOwnProperty(c)){b=a[c];b!==null?this.setAttribute(c,b):this.removeAttribute(c);}}},attachClass:function attachClass(a){var b=this.getCustomData("classes");if(!this.hasClass(a)){!b&&(b=[]);b.push(a);this.setCustomData("classes",b);this.addClass(a);}},changeAttr:function changeAttr(a,b){var c=this.getAttribute(a);if(b!==c){!this._.attrChanges&&(this._.attrChanges={});a in this._.attrChanges||(this._.attrChanges[a]=c);this.setAttribute(a,b);}},insertHtml:function insertHtml(a,b){g(this);z(this,b||"html",a);},insertText:function insertText(a){g(this);var b=this.editor,c=b.getSelection().getStartElement().hasAscendant("pre",true)?CKEDITOR.ENTER_BR:b.activeEnterMode,b=c==CKEDITOR.ENTER_BR,d=CKEDITOR.tools,a=d.htmlEncode(a.replace(/\r\n/g,"\n")),a=a.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),c=c==CKEDITOR.ENTER_P?"p":"div";if(!b){var e=/\n{2}/g;if(e.test(a))var f="<"+c+">",s="</"+c+">",a=f+a.replace(e,function(){return s+f;})+s;}a=a.replace(/\n/g,"<br>");b||(a=a.replace(RegExp("<br>(?=</"+c+">)"),function(a){return d.repeat(a,2);}));a=a.replace(/^ | $/g,"&nbsp;");a=a.replace(/(>|\s) /g,function(a,b){return b+"&nbsp;";}).replace(/ (?=<)/g,"&nbsp;");z(this,"text",a);},insertElement:function insertElement(a,b){b?this.insertElementIntoRange(a,b):this.insertElementIntoSelection(a);},insertElementIntoRange:function insertElementIntoRange(a,b){var c=this.editor,d=c.config.enterMode,e=a.getName(),f=CKEDITOR.dtd.$block[e];if(b.checkReadOnly())return false;b.deleteContents(1);b.startContainer.type==CKEDITOR.NODE_ELEMENT&&b.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&o(b);var s,h;if(f)for(;(s=b.getCommonAncestor(0,1))&&(h=CKEDITOR.dtd[s.getName()])&&(!h||!h[e]);){if(s.getName()in CKEDITOR.dtd.span)b.splitElement(s);else if(b.checkStartOfBlock()&&b.checkEndOfBlock()){b.setStartBefore(s);b.collapse(true);s.remove();}else b.splitBlock(d==CKEDITOR.ENTER_DIV?"div":"p",c.editable());}b.insertNode(a);return true;},insertElementIntoSelection:function insertElementIntoSelection(a){g(this);var b=this.editor,d=b.activeEnterMode,b=b.getSelection(),e=b.getRanges()[0],f=a.getName(),f=CKEDITOR.dtd.$block[f];if(this.insertElementIntoRange(a,e)){e.moveToPosition(a,CKEDITOR.POSITION_AFTER_END);if(f)if((f=a.getNext(function(a){return c(a)&&!h(a);}))&&f.type==CKEDITOR.NODE_ELEMENT&&f.is(CKEDITOR.dtd.$block))f.getDtd()["#"]?e.moveToElementEditStart(f):e.moveToElementEditEnd(a);else if(!f&&d!=CKEDITOR.ENTER_BR){f=e.fixBlock(true,d==CKEDITOR.ENTER_DIV?"div":"p");e.moveToElementEditStart(f);}}b.selectRanges([e]);j(this);},setData:function setData(a,b){b||(a=this.editor.dataProcessor.toHtml(a));this.setHtml(a);if(this.status=="unloaded")this.status="ready";this.editor.fire("dataReady");},getData:function getData(a){var b=this.getHtml();a||(b=this.editor.dataProcessor.toDataFormat(b));return b;},setReadOnly:function setReadOnly(a){this.setAttribute("contenteditable",!a);},detach:function detach(){this.removeClass("cke_editable");this.status="detached";var a=this.editor;this._.detach();delete a.document;delete a.window;},isInline:function isInline(){return this.getDocument().equals(CKEDITOR.document);},setup:function setup(){var a=this.editor;this.attachListener(a,"beforeGetData",function(){var b=this.getData();this.is("textarea")||a.config.ignoreEmptyParagraph!==false&&(b=b.replace(n,function(a,b){return b;}));a.setData(b,null,1);},this);this.attachListener(a,"getSnapshot",function(a){a.data=this.getData(1);},this);this.attachListener(a,"afterSetData",function(){this.setData(a.getData(1));},this);this.attachListener(a,"loadSnapshot",function(a){this.setData(a.data,1);},this);this.attachListener(a,"beforeFocus",function(){var b=a.getSelection();(b=b&&b.getNative())&&b.type=="Control"||this.focus();},this);this.attachListener(a,"insertHtml",function(a){this.insertHtml(a.data.dataValue,a.data.mode);},this);this.attachListener(a,"insertElement",function(a){this.insertElement(a.data);},this);this.attachListener(a,"insertText",function(a){this.insertText(a.data);},this);this.setReadOnly(a.readOnly);this.attachClass("cke_editable");this.attachClass(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"cke_editable_inline":a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE||a.elementMode==CKEDITOR.ELEMENT_MODE_APPENDTO?"cke_editable_themed":"");this.attachClass("cke_contents_"+a.config.contentsLangDirection);a.keystrokeHandler.blockedKeystrokes[8]=+a.readOnly;a.keystrokeHandler.attach(this);this.on("blur",function(){this.hasFocus=false;},null,null,-1);this.on("focus",function(){this.hasFocus=true;},null,null,-1);a.focusManager.add(this);if(this.equals(CKEDITOR.document.getActive())){this.hasFocus=true;a.once("contentDom",function(){a.focusManager.focus();});}this.isInline()&&this.changeAttr("tabindex",a.tabIndex);if(!this.is("textarea")){a.document=this.getDocument();a.window=this.getWindow();var e=a.document;this.changeAttr("spellcheck",!a.config.disableNativeSpellChecker);var f=a.config.contentsLangDirection;this.getDirection(1)!=f&&this.changeAttr("dir",f);var i=CKEDITOR.getCss();if(i){f=e.getHead();if(!f.getCustomData("stylesheet")){i=e.appendStyleText(i);i=new CKEDITOR.dom.element(i.ownerNode||i.owningElement);f.setCustomData("stylesheet",i);i.data("cke-temp",1);}}f=e.getCustomData("stylesheet_ref")||0;e.setCustomData("stylesheet_ref",f+1);this.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling);this.attachListener(this,"click",function(a){var a=a.data,b=new CKEDITOR.dom.elementPath(a.getTarget(),this).contains("a");b&&a.$.button!=2&&b.isReadOnly()&&a.preventDefault();});var m={8:1,46:1};this.attachListener(a,"key",function(b){if(a.readOnly)return true;var c=b.data.domEvent.getKey(),e;if(c in m){var b=a.getSelection(),f,i=b.getRanges()[0],h=i.startPath(),g,j,l,c=c==8;if(CKEDITOR.env.ie&&CKEDITOR.env.version<11&&(f=b.getSelectedElement())||(f=d(b))){a.fire("saveSnapshot");i.moveToPosition(f,CKEDITOR.POSITION_BEFORE_START);f.remove();i.select();a.fire("saveSnapshot");e=1;}else if(i.collapsed)if((g=h.block)&&(l=g[c?"getPrevious":"getNext"](t))&&l.type==CKEDITOR.NODE_ELEMENT&&l.is("table")&&i[c?"checkStartOfBlock":"checkEndOfBlock"]()){a.fire("saveSnapshot");i[c?"checkEndOfBlock":"checkStartOfBlock"]()&&g.remove();i["moveToElementEdit"+(c?"End":"Start")](l);i.select();a.fire("saveSnapshot");e=1;}else if(h.blockLimit&&h.blockLimit.is("td")&&(j=h.blockLimit.getAscendant("table"))&&i.checkBoundaryOfElement(j,c?CKEDITOR.START:CKEDITOR.END)&&(l=j[c?"getPrevious":"getNext"](t))){a.fire("saveSnapshot");i["moveToElementEdit"+(c?"End":"Start")](l);i.checkStartOfBlock()&&i.checkEndOfBlock()?l.remove():i.select();a.fire("saveSnapshot");e=1;}else if((j=h.contains(["td","th","caption"]))&&i.checkBoundaryOfElement(j,c?CKEDITOR.START:CKEDITOR.END))e=1;}return!e;});a.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(b){if(b.data.getKeystroke()in m&&!this.getFirst(c)){this.appendBogus();b=a.createRange();b.moveToPosition(this,CKEDITOR.POSITION_AFTER_START);b.select();}});this.attachListener(this,"dblclick",function(b){if(a.readOnly)return false;b={element:b.data.getTarget()};a.fire("doubleclick",b);});CKEDITOR.env.ie&&this.attachListener(this,"click",b);CKEDITOR.env.ie||this.attachListener(this,"mousedown",function(b){var c=b.data.getTarget();if(c.is("img","hr","input","textarea","select")&&!c.isReadOnly()){a.getSelection().selectElement(c);c.is("input","textarea","select")&&b.data.preventDefault();}});CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(b){if(b.data.$.button==2){b=b.data.getTarget();if(!b.getOuterHtml().replace(n,"")){var c=a.createRange();c.moveToElementEditStart(b);c.select(true);}}});if(CKEDITOR.env.webkit){this.attachListener(this,"click",function(a){a.data.getTarget().is("input","select")&&a.data.preventDefault();});this.attachListener(this,"mouseup",function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault();});}CKEDITOR.env.webkit&&this.attachListener(a,"key",function(b){b=b.data.domEvent.getKey();if(b in m){var c=b==8,d=a.getSelection().getRanges()[0],b=d.startPath();if(d.collapsed){var e;a:{var f=b.block;if(f){if(d[c?"checkStartOfBlock":"checkEndOfBlock"]()){if(!d.moveToClosestEditablePosition(f,!c)||!d.collapsed)e=false;else{if(d.startContainer.type==CKEDITOR.NODE_ELEMENT){var i=d.startContainer.getChild(d.startOffset-(c?1:0));if(i&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("hr")){a.fire("saveSnapshot");i.remove();e=true;break a;}}if((d=d.startPath().block)&&(!d||!d.contains(f))){a.fire("saveSnapshot");var h;(h=(c?d:f).getBogus())&&h.remove();e=a.getSelection();h=e.createBookmarks();(c?f:d).moveChildren(c?d:f,false);b.lastElement.mergeSiblings();l(f,d,!c);e.selectBookmarks(h);e=true;}}}else e=false;}else e=false;}if(!e)return;}else{c=d;e=b.block;h=c.endPath().block;if(!e||!h||e.equals(h))b=false;else{a.fire("saveSnapshot");(f=e.getBogus())&&f.remove();c.deleteContents();if(h.getParent()){h.moveChildren(e,false);b.lastElement.mergeSiblings();l(e,h,true);}c=a.getSelection().getRanges()[0];c.collapse(1);c.select();b=true;}if(!b)return;}a.getSelection().scrollIntoView();a.fire("saveSnapshot");return false;}},this,null,100);}}},_:{detach:function detach(){this.editor.setData(this.editor.getData(),0,1);this.clearListeners();this.restoreAttrs();var a;if(a=this.removeCustomData("classes"))for(;a.length;){this.removeClass(a.pop());}if(!this.is("textarea")){a=this.getDocument();var b=a.getHead();if(b.getCustomData("stylesheet")){var c=a.getCustomData("stylesheet_ref");if(--c)a.setCustomData("stylesheet_ref",c);else{a.removeCustomData("stylesheet_ref");b.removeCustomData("stylesheet").remove();}}}this.editor.fire("contentDomUnload");delete this.editor;}}});CKEDITOR.editor.prototype.editable=function(a){var b=this._.editable;if(b&&a)return 0;if(arguments.length)b=this._.editable=a?a instanceof CKEDITOR.editable?a:new CKEDITOR.editable(this,a):(b&&b.detach(),null);return b;};var h=CKEDITOR.dom.walker.bogus(),n=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,t=CKEDITOR.dom.walker.whitespaces(true),y=CKEDITOR.dom.walker.bookmark(false,true);CKEDITOR.on("instanceLoaded",function(b){var c=b.editor;c.on("insertElement",function(a){a=a.data;if(a.type==CKEDITOR.NODE_ELEMENT&&(a.is("input")||a.is("textarea"))){a.getAttribute("contentEditable")!="false"&&a.data("cke-editable",a.hasAttribute("contenteditable")?"true":"1");a.setAttribute("contentEditable",false);}});c.on("selectionChange",function(b){if(!c.readOnly){var d=c.getSelection();if(d&&!d.isLocked){d=c.checkDirty();c.fire("lockSnapshot");a(b);c.fire("unlockSnapshot");!d&&c.resetDirty();}}});});CKEDITOR.on("instanceCreated",function(a){var b=a.editor;b.on("mode",function(){var a=b.editable();if(a&&a.isInline()){var c=b.title;a.changeAttr("role","textbox");a.changeAttr("aria-label",c);c&&a.changeAttr("title",c);var d=b.fire("ariaEditorHelpLabel",{}).label;if(d)if(c=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents")){var e=CKEDITOR.tools.getNextId(),d=CKEDITOR.dom.element.createFromHtml('<span id="'+e+'" class="cke_voice_label">'+d+"</span>");c.append(d);a.changeAttr("aria-describedby",e);}}});});CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");var z=function(){function a(b){return b.type==CKEDITOR.NODE_ELEMENT;}function b(c,d){var e,f,i,k,m=[],p=d.range.startContainer;e=d.range.startPath();for(var p=h[p.getName()],C=0,g=c.getChildren(),j=g.count(),l=-1,n=-1,u=0,o=e.contains(h.$list);C<j;++C){e=g.getItem(C);if(a(e)){i=e.getName();if(o&&i in CKEDITOR.dtd.$list)m=m.concat(b(e,d));else{k=!!p[i];if(i=="br"&&e.data("cke-eol")&&(!C||C==j-1)){u=(f=C?m[C-1].node:g.getItem(C+1))&&(!a(f)||!f.is("br"));f=f&&a(f)&&h.$block[f.getName()];}l==-1&&!k&&(l=C);k||(n=C);m.push({isElement:1,isLineBreak:u,isBlock:e.isBlockBoundary(),hasBlockSibling:f,node:e,name:i,allowed:k});f=u=0;}}else m.push({isElement:0,node:e,allowed:1});}if(l>-1)m[l].firstNotAllowed=1;if(n>-1)m[n].lastNotAllowed=1;return m;}function d(b,c){var e=[],f=b.getChildren(),i=f.count(),k,m=0,p=h[c],C=!b.is(h.$inline)||b.is("br");for(C&&e.push(" ");m<i;m++){k=f.getItem(m);a(k)&&!k.is(p)?e=e.concat(d(k,c)):e.push(k);}C&&e.push(" ");return e;}function e(b){return b&&a(b)&&(b.is(h.$removeEmpty)||b.is("a")&&!b.isBlockBoundary());}function f(b,c,d,e){var k=b.clone(),i,p;k.setEndAt(c,CKEDITOR.POSITION_BEFORE_END);if((i=new CKEDITOR.dom.walker(k).next())&&a(i)&&g[i.getName()]&&(p=i.getPrevious())&&a(p)&&!p.getParent().equals(b.startContainer)&&d.contains(p)&&e.contains(i)&&i.isIdentical(p)){i.moveChildren(p);i.remove();f(b,c,d,e);}}function k(b,c){function d(b,c){if(c.isBlock&&c.isElement&&!c.node.is("br")&&a(b)&&b.is("br")){b.remove();return 1;}}var e=c.endContainer.getChild(c.endOffset),f=c.endContainer.getChild(c.endOffset-1);e&&d(e,b[b.length-1]);if(f&&d(f,b[0])){c.setEnd(c.endContainer,c.endOffset-1);c.collapse();}}var h=CKEDITOR.dtd,g={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},p={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},l=CKEDITOR.tools.extend({},h.$inline);delete l.br;return function(g,n,u){var o=g.editor;g.getDocument();var t=o.getSelection().getRanges()[0],w=false;if(n=="unfiltered_html"){n="html";w=true;}if(!t.checkReadOnly()){var B=new CKEDITOR.dom.elementPath(t.startContainer,t.root).blockLimit||t.root,n={type:n,dontFilter:w,editable:g,editor:o,range:t,blockLimit:B,mergeCandidates:[],zombies:[]},o=n.range,w=n.mergeCandidates,v,C,A,E;if(n.type=="text"&&o.shrink(CKEDITOR.SHRINK_ELEMENT,true,false)){v=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",o.document);o.insertNode(v);o.setStartAfter(v);}C=new CKEDITOR.dom.elementPath(o.startContainer);n.endPath=A=new CKEDITOR.dom.elementPath(o.endContainer);if(!o.collapsed){var B=A.block||A.blockLimit,y=o.getCommonAncestor();B&&!B.equals(y)&&!B.contains(y)&&o.checkEndOfBlock()&&n.zombies.push(B);o.deleteContents();}for(;(E=a(o.startContainer)&&o.startContainer.getChild(o.startOffset-1))&&a(E)&&E.isBlockBoundary()&&C.contains(E);){o.moveToPosition(E,CKEDITOR.POSITION_BEFORE_END);}f(o,n.blockLimit,C,A);if(v){o.setEndBefore(v);o.collapse();v.remove();}v=o.startPath();if(B=v.contains(e,false,1)){o.splitElement(B);n.inlineStylesRoot=B;n.inlineStylesPeak=v.lastElement;}v=o.createBookmark();(B=v.startNode.getPrevious(c))&&a(B)&&e(B)&&w.push(B);(B=v.startNode.getNext(c))&&a(B)&&e(B)&&w.push(B);for(B=v.startNode;(B=B.getParent())&&e(B);){w.push(B);}o.moveToBookmark(v);if(v=u){v=n.range;if(n.type=="text"&&n.inlineStylesRoot){E=n.inlineStylesPeak;o=E.getDocument().createText("{cke-peak}");for(w=n.inlineStylesRoot.getParent();!E.equals(w);){o=o.appendTo(E.clone());E=E.getParent();}u=o.getOuterHtml().split("{cke-peak}").join(u);}E=n.blockLimit.getName();if(/^\s+|\s+$/.test(u)&&"span"in CKEDITOR.dtd[E])var z='<span data-cke-marker="1">&nbsp;</span>',u=z+u+z;u=n.editor.dataProcessor.toHtml(u,{context:null,fixForBody:false,dontFilter:n.dontFilter,filter:n.editor.activeFilter,enterMode:n.editor.activeEnterMode});E=v.document.createElement("body");E.setHtml(u);if(z){E.getFirst().remove();E.getLast().remove();}if((z=v.startPath().block)&&!(z.getChildCount()==1&&z.getBogus()))a:{var G;if(E.getChildCount()==1&&a(G=E.getFirst())&&G.is(p)){z=G.getElementsByTag("*");v=0;for(w=z.count();v<w;v++){o=z.getItem(v);if(!o.is(l))break a;}G.moveChildren(G.getParent(1));G.remove();}}n.dataWrapper=E;v=u;}if(v){G=n.range;var z=G.document,D,u=n.blockLimit;v=0;var K;E=[];var H,Q,w=o=0,M,T;C=G.startContainer;var B=n.endPath.elements[0],U;A=B.getPosition(C);y=!!B.getCommonAncestor(C)&&A!=CKEDITOR.POSITION_IDENTICAL&&!(A&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED);C=b(n.dataWrapper,n);for(k(C,G);v<C.length;v++){A=C[v];if(D=A.isLineBreak){D=G;M=u;var N=void 0,W=void 0;if(A.hasBlockSibling)D=1;else{N=D.startContainer.getAscendant(h.$block,1);if(!N||!N.is({div:1,p:1}))D=0;else{W=N.getPosition(M);if(W==CKEDITOR.POSITION_IDENTICAL||W==CKEDITOR.POSITION_CONTAINS)D=0;else{M=D.splitElement(N);D.moveToPosition(M,CKEDITOR.POSITION_AFTER_START);D=1;}}}}if(D)w=v>0;else{D=G.startPath();if(!A.isBlock&&n.editor.config.autoParagraph!==false&&n.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&n.editor.editable().equals(D.blockLimit)&&!D.block&&(Q=n.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&n.editor.config.autoParagraph!==false?n.editor.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":false)){Q=z.createElement(Q);Q.appendBogus();G.insertNode(Q);CKEDITOR.env.needsBrFiller&&(K=Q.getBogus())&&K.remove();G.moveToPosition(Q,CKEDITOR.POSITION_BEFORE_END);}if((D=G.startPath().block)&&!D.equals(H)){if(K=D.getBogus()){K.remove();E.push(D);}H=D;}A.firstNotAllowed&&(o=1);if(o&&A.isElement){D=G.startContainer;for(M=null;D&&!h[D.getName()][A.name];){if(D.equals(u)){D=null;break;}M=D;D=D.getParent();}if(D){if(M){T=G.splitElement(M);n.zombies.push(T);n.zombies.push(M);}}else{M=u.getName();U=!v;D=v==C.length-1;M=d(A.node,M);for(var N=[],W=M.length,X=0,Z=void 0,$=0,aa=-1;X<W;X++){Z=M[X];if(Z==" "){if(!$&&(!U||X)){N.push(new CKEDITOR.dom.text(" "));aa=N.length;}$=1;}else{N.push(Z);$=0;}}D&&aa==N.length&&N.pop();U=N;}}if(U){for(;D=U.pop();){G.insertNode(D);}U=0;}else G.insertNode(A.node);if(A.lastNotAllowed&&v<C.length-1){(T=y?B:T)&&G.setEndAt(T,CKEDITOR.POSITION_AFTER_START);o=0;}G.collapse();}}n.dontMoveCaret=w;n.bogusNeededBlocks=E;}K=n.range;var P;T=n.bogusNeededBlocks;for(U=K.createBookmark();H=n.zombies.pop();){if(H.getParent()){Q=K.clone();Q.moveToElementEditStart(H);Q.removeEmptyBlocksAtEnd();}}if(T)for(;H=T.pop();){CKEDITOR.env.needsBrFiller?H.appendBogus():H.append(K.document.createText(" "));}for(;H=n.mergeCandidates.pop();){H.mergeSiblings();}K.moveToBookmark(U);if(!n.dontMoveCaret){for(H=a(K.startContainer)&&K.startContainer.getChild(K.startOffset-1);H&&a(H)&&!H.is(h.$empty);){if(H.isBlockBoundary())K.moveToPosition(H,CKEDITOR.POSITION_BEFORE_END);else{if(e(H)&&H.getHtml().match(/(\s|&nbsp;)$/g)){P=null;break;}P=K.clone();P.moveToPosition(H,CKEDITOR.POSITION_BEFORE_END);}H=H.getLast(c);}P&&K.moveToRange(P);}t.select();j(g);}};}(),o=function(){function a(b){b=new CKEDITOR.dom.walker(b);b.guard=function(a,b){if(b)return false;if(a.type==CKEDITOR.NODE_ELEMENT)return a.is(CKEDITOR.dtd.$tableContent);};b.evaluator=function(a){return a.type==CKEDITOR.NODE_ELEMENT;};return b;}function b(a,c,d){c=a.getDocument().createElement(c);a.append(c,d);return c;}function c(a){var b=a.count(),d;for(b;b-->0;){d=a.getItem(b);if(!CKEDITOR.tools.trim(d.getHtml())){d.appendBogus();CKEDITOR.env.ie&&CKEDITOR.env.version<9&&d.getChildCount()&&d.getFirst().remove();}}}return function(d){var e=d.startContainer,f=e.getAscendant("table",1),h=false;c(f.getElementsByTag("td"));c(f.getElementsByTag("th"));f=d.clone();f.setStart(e,0);f=a(f).lastBackward();if(!f){f=d.clone();f.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);f=a(f).lastForward();h=true;}f||(f=e);if(f.is("table")){d.setStartAt(f,CKEDITOR.POSITION_BEFORE_START);d.collapse(true);f.remove();}else{f.is({tbody:1,thead:1,tfoot:1})&&(f=b(f,"tr",h));f.is("tr")&&(f=b(f,f.getParent().is("thead")?"th":"td",h));(e=f.getBogus())&&e.remove();d.moveToPosition(f,h?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END);}};}();})();(function(){function a(){var a=this._.fakeSelection,b;if(a){b=this.getSelection(1);if(!b||!b.isHidden()){a.reset();a=0;}}if(!a){a=b||this.getSelection(1);if(!a||a.getType()==CKEDITOR.SELECTION_NONE)return;}this.fire("selectionCheck",a);b=this.elementPath();if(!b.compare(this._.selectionPreviousPath)){if(CKEDITOR.env.webkit)this._.previousActive=this.document.getActive();this._.selectionPreviousPath=b;this.fire("selectionChange",{selection:a,path:b});}}function e(){y=true;if(!t){b.call(this);t=CKEDITOR.tools.setTimeout(b,200,this);}}function b(){t=null;if(y){CKEDITOR.tools.setTimeout(a,0,this);y=false;}}function c(a){function b(c,d){return!c||c.type==CKEDITOR.NODE_TEXT?false:a.clone()["moveToElementEdit"+(d?"End":"Start")](c);}if(!(a.root instanceof CKEDITOR.editable))return false;var c=a.startContainer,d=a.getPreviousNode(z,null,c),e=a.getNextNode(z,null,c);return b(d)||b(e,1)||!d&&!e&&!(c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary()&&c.getBogus())?true:false;}function f(a){return a.getCustomData("cke-fillingChar");}function d(a,b){var c=a&&a.removeCustomData("cke-fillingChar");if(c){if(b!==false){var d,e=a.getDocument().getSelection().getNative(),f=e&&e.type!="None"&&e.getRangeAt(0);if(c.getLength()>1&&f&&f.intersectsNode(c.$)){d=[e.anchorOffset,e.focusOffset];f=e.focusNode==c.$&&e.focusOffset>0;e.anchorNode==c.$&&e.anchorOffset>0&&d[0]--;f&&d[1]--;var h;f=e;if(!f.isCollapsed){h=f.getRangeAt(0);h.setStart(f.anchorNode,f.anchorOffset);h.setEnd(f.focusNode,f.focusOffset);h=h.collapsed;}h&&d.unshift(d.pop());}}c.setText(g(c.getText()));if(d){c=e.getRangeAt(0);c.setStart(c.startContainer,d[0]);c.setEnd(c.startContainer,d[1]);e.removeAllRanges();e.addRange(c);}}}function g(a){return a.replace(/\u200B( )?/g,function(a){return a[1]?" ":"";});}function j(a,b,c){var d=a.on("focus",function(a){a.cancel();},null,null,-100);if(CKEDITOR.env.ie)var e=a.getDocument().on("selectionchange",function(a){a.cancel();},null,null,-100);else{var f=new CKEDITOR.dom.range(a);f.moveToElementEditStart(a);var h=a.getDocument().$.createRange();h.setStart(f.startContainer.$,f.startOffset);h.collapse(1);b.removeAllRanges();b.addRange(h);}c&&a.focus();d.removeListener();e&&e.removeListener();}function l(a){var b=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+'">&nbsp;</div>',a.document);a.fire("lockSnapshot");a.editable().append(b);var c=a.getSelection(1),d=a.createRange(),e=c.root.on("selectionchange",function(a){a.cancel();},null,null,0);d.setStartAt(b,CKEDITOR.POSITION_AFTER_START);d.setEndAt(b,CKEDITOR.POSITION_BEFORE_END);c.selectRanges([d]);e.removeListener();a.fire("unlockSnapshot");a._.hiddenSelectionContainer=b;}function h(a){var b={37:1,39:1,8:1,46:1};return function(c){var d=c.data.getKeystroke();if(b[d]){var e=a.getSelection().getRanges(),f=e[0];if(e.length==1&&f.collapsed)if((d=f[d<38?"getPreviousEditableNode":"getNextEditableNode"]())&&d.type==CKEDITOR.NODE_ELEMENT&&d.getAttribute("contenteditable")=="false"){a.getSelection().fake(d);c.data.preventDefault();c.cancel();}}};}function n(a){for(var b=0;b<a.length;b++){var c=a[b];c.getCommonAncestor().isReadOnly()&&a.splice(b,1);if(!c.collapsed){if(c.startContainer.isReadOnly())for(var d=c.startContainer,e;d;){if((e=d.type==CKEDITOR.NODE_ELEMENT)&&d.is("body")||!d.isReadOnly())break;e&&d.getAttribute("contentEditable")=="false"&&c.setStartAfter(d);d=d.getParent();}d=c.startContainer;e=c.endContainer;var f=c.startOffset,h=c.endOffset,g=c.clone();d&&d.type==CKEDITOR.NODE_TEXT&&(f>=d.getLength()?g.setStartAfter(d):g.setStartBefore(d));e&&e.type==CKEDITOR.NODE_TEXT&&(h?g.setEndAfter(e):g.setEndBefore(e));d=new CKEDITOR.dom.walker(g);d.evaluator=function(d){if(d.type==CKEDITOR.NODE_ELEMENT&&d.isReadOnly()){var e=c.clone();c.setEndBefore(d);c.collapsed&&a.splice(b--,1);if(!(d.getPosition(g.endContainer)&CKEDITOR.POSITION_CONTAINS)){e.setStartAfter(d);e.collapsed||a.splice(b+1,0,e);}return true;}return false;};d.next();}}return a;}var t,y,z=CKEDITOR.dom.walker.invisible(1),o=function(){function a(b){return function(a){var c=a.editor.createRange();c.moveToClosestEditablePosition(a.selected,b)&&a.editor.getSelection().selectRanges([c]);return false;};}function b(a){return function(b){var c=b.editor,d=c.createRange(),e;if(!(e=d.moveToClosestEditablePosition(b.selected,a)))e=d.moveToClosestEditablePosition(b.selected,!a);e&&c.getSelection().selectRanges([d]);c.fire("saveSnapshot");b.selected.remove();if(!e){d.moveToElementEditablePosition(c.editable());c.getSelection().selectRanges([d]);}c.fire("saveSnapshot");return false;};}var c=a(),d=a(1);return{37:c,38:c,39:d,40:d,8:b(),46:b(1)};}();CKEDITOR.on("instanceCreated",function(b){function c(){var a=f.getSelection();a&&a.removeAllRanges();}var f=b.editor;f.on("contentDom",function(){var b=f.document,c=CKEDITOR.document,i=f.editable(),m=b.getBody(),g=b.getDocumentElement(),j=i.isInline(),n,l;CKEDITOR.env.gecko&&i.attachListener(i,"focus",function(a){a.removeListener();if(n!==0)if((a=f.getSelection().getNative())&&a.isCollapsed&&a.anchorNode==i.$){a=f.createRange();a.moveToElementEditStart(i);a.select();}},null,null,-2);i.attachListener(i,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){n&&CKEDITOR.env.webkit&&(n=f._.previousActive&&f._.previousActive.equals(b.getActive()));f.unlockSelection(n);n=0;},null,null,-1);i.attachListener(i,"mousedown",function(){n=0;});if(CKEDITOR.env.ie||j){var o=function o(){l=new CKEDITOR.dom.selection(f.getSelection());l.lock();};r?i.attachListener(i,"beforedeactivate",o,null,null,-1):i.attachListener(f,"selectionCheck",o,null,null,-1);i.attachListener(i,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){f.lockSelection(l);n=1;},null,null,-1);i.attachListener(i,"mousedown",function(){n=0;});}if(CKEDITOR.env.ie&&!j){var w;i.attachListener(i,"mousedown",function(a){if(a.data.$.button==2){a=f.document.getSelection();if(!a||a.getType()==CKEDITOR.SELECTION_NONE)w=f.window.getScrollPosition();}});i.attachListener(i,"mouseup",function(a){if(a.data.$.button==2&&w){f.document.$.documentElement.scrollLeft=w.x;f.document.$.documentElement.scrollTop=w.y;}w=null;});if(b.$.compatMode!="BackCompat"){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)g.on("mousedown",function(a){function b(a){a=a.data.$;if(e){var c=m.$.createTextRange();try{c.moveToPoint(a.clientX,a.clientY);}catch(d){}e.setEndPoint(i.compareEndPoints("StartToStart",c)<0?"EndToEnd":"StartToStart",c);e.select();}}function d(){g.removeListener("mousemove",b);c.removeListener("mouseup",d);g.removeListener("mouseup",d);e.select();}a=a.data;if(a.getTarget().is("html")&&a.$.y<g.$.clientHeight&&a.$.x<g.$.clientWidth){var e=m.$.createTextRange();try{e.moveToPoint(a.$.clientX,a.$.clientY);}catch(f){}var i=e.duplicate();g.on("mousemove",b);c.on("mouseup",d);g.on("mouseup",d);}});if(CKEDITOR.env.version>7&&CKEDITOR.env.version<11){g.on("mousedown",function(a){if(a.data.getTarget().is("html")){c.on("mouseup",B);g.on("mouseup",B);}});var B=function B(){c.removeListener("mouseup",B);g.removeListener("mouseup",B);var a=CKEDITOR.document.$.selection,d=a.createRange();a.type!="None"&&d.parentElement().ownerDocument==b.$&&d.select();};}}}i.attachListener(i,"selectionchange",a,f);i.attachListener(i,"keyup",e,f);i.attachListener(i,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){f.forceNextSelectionCheck();f.selectionChange(1);});if(j&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var v;i.attachListener(i,"mousedown",function(){v=1;});i.attachListener(b.getDocumentElement(),"mouseup",function(){v&&e.call(f);v=0;});}else i.attachListener(CKEDITOR.env.ie?i:b.getDocumentElement(),"mouseup",e,f);CKEDITOR.env.webkit&&i.attachListener(b,"keydown",function(a){switch(a.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:d(i);}},null,null,-1);i.attachListener(i,"keydown",h(f),null,null,-1);});f.on("setData",function(){f.unlockSelection();CKEDITOR.env.webkit&&c();});f.on("contentDomUnload",function(){f.unlockSelection();});if(CKEDITOR.env.ie9Compat)f.on("beforeDestroy",c,null,null,9);f.on("dataReady",function(){delete f._.fakeSelection;delete f._.hiddenSelectionContainer;f.selectionChange(1);});f.on("loadSnapshot",function(){var a=f.editable().getLast(function(a){return a.type==CKEDITOR.NODE_ELEMENT;});a&&a.hasAttribute("data-cke-hidden-sel")&&a.remove();},null,null,100);f.on("key",function(a){if(f.mode=="wysiwyg"){var b=f.getSelection();if(b.isFake){var c=o[a.data.keyCode];if(c)return c({editor:f,selected:b.getSelectedElement(),selection:b,keyEvent:a});}}});});CKEDITOR.on("instanceReady",function(a){var b=a.editor;if(CKEDITOR.env.webkit){b.on("selectionChange",function(){var a=b.editable(),c=f(a);c&&(c.getCustomData("ready")?d(a):c.setCustomData("ready",1));},null,null,-1);b.on("beforeSetMode",function(){d(b.editable());},null,null,-1);var c,e,a=function a(){var a=b.editable();if(a)if(a=f(a)){var d=b.document.$.defaultView.getSelection();d.type=="Caret"&&d.anchorNode==a.$&&(e=1);c=a.getText();a.setText(g(c));}},h=function h(){var a=b.editable();if(a)if(a=f(a)){a.setText(c);if(e){b.document.$.defaultView.getSelection().setPosition(a.$,a.getLength());e=0;}}};b.on("beforeUndoImage",a);b.on("afterUndoImage",h);b.on("beforeGetData",a,null,null,0);b.on("getData",h);}});CKEDITOR.editor.prototype.selectionChange=function(b){(b?a:e).call(this);};CKEDITOR.editor.prototype.getSelection=function(a){if((this._.savedSelection||this._.fakeSelection)&&!a)return this._.savedSelection||this._.fakeSelection;return(a=this.editable())&&this.mode=="wysiwyg"?new CKEDITOR.dom.selection(a):null;};CKEDITOR.editor.prototype.lockSelection=function(a){a=a||this.getSelection(1);if(a.getType()!=CKEDITOR.SELECTION_NONE){!a.isLocked&&a.lock();this._.savedSelection=a;return true;}return false;};CKEDITOR.editor.prototype.unlockSelection=function(a){var b=this._.savedSelection;if(b){b.unlock(a);delete this._.savedSelection;return true;}return false;};CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath;};CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this);};CKEDITOR.dom.range.prototype.select=function(){var a=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);a.selectRanges([this]);return a;};CKEDITOR.SELECTION_NONE=1;CKEDITOR.SELECTION_TEXT=2;CKEDITOR.SELECTION_ELEMENT=3;var r=typeof window.getSelection!="function",q=1;CKEDITOR.dom.selection=function(a){if(a instanceof CKEDITOR.dom.selection)var b=a,a=a.root;var c=a instanceof CKEDITOR.dom.element;this.rev=b?b.rev:q++;this.document=a instanceof CKEDITOR.dom.document?a:a.getDocument();this.root=a=c?a:this.document.getBody();this.isLocked=0;this._={cache:{}};if(b){CKEDITOR.tools.extend(this._.cache,b._.cache);this.isFake=b.isFake;this.isLocked=b.isLocked;return this;}c=r?this.document.$.selection:this.document.getWindow().$.getSelection();if(CKEDITOR.env.webkit)(c.type=="None"&&this.document.getActive().equals(a)||c.type=="Caret"&&c.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT)&&j(a,c);else if(CKEDITOR.env.gecko)c&&this.document.getActive().equals(a)&&c.anchorNode&&c.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT&&j(a,c,true);else if(CKEDITOR.env.ie){b=this.document.getActive();if(r)c.type=="None"&&b&&b.equals(this.document.getDocumentElement())&&j(a,null,true);else{(c=c&&c.anchorNode)&&(c=new CKEDITOR.dom.node(c));b&&b.equals(this.document.getDocumentElement())&&c&&(a.equals(c)||a.contains(c))&&j(a,null,true);}}var a=this.getNative(),d,e;if(a)if(a.getRangeAt)d=(e=a.rangeCount&&a.getRangeAt(0))&&new CKEDITOR.dom.node(e.commonAncestorContainer);else{try{e=a.createRange();}catch(f){}d=e&&CKEDITOR.dom.element.get(e.item&&e.item(0)||e.parentElement());}if(!d||!(d.type==CKEDITOR.NODE_ELEMENT||d.type==CKEDITOR.NODE_TEXT)||!this.root.equals(d)&&!this.root.contains(d)){this._.cache.type=CKEDITOR.SELECTION_NONE;this._.cache.startElement=null;this._.cache.selectedElement=null;this._.cache.selectedText="";this._.cache.ranges=new CKEDITOR.dom.rangeList();}return this;};var x={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.dom.selection.prototype={getNative:function getNative(){return this._.cache.nativeSel!==void 0?this._.cache.nativeSel:this._.cache.nativeSel=r?this.document.$.selection:this.document.getWindow().$.getSelection();},getType:r?function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_NONE;try{var c=this.getNative(),d=c.type;if(d=="Text")b=CKEDITOR.SELECTION_TEXT;if(d=="Control")b=CKEDITOR.SELECTION_ELEMENT;if(c.createRange().parentElement())b=CKEDITOR.SELECTION_TEXT;}catch(e){}return a.type=b;}:function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_TEXT,c=this.getNative();if(!c||!c.rangeCount)b=CKEDITOR.SELECTION_NONE;else if(c.rangeCount==1){var c=c.getRangeAt(0),d=c.startContainer;if(d==c.endContainer&&d.nodeType==1&&c.endOffset-c.startOffset==1&&x[d.childNodes[c.startOffset].nodeName.toLowerCase()])b=CKEDITOR.SELECTION_ELEMENT;}return a.type=b;},getRanges:function(){var a=r?function(){function a(b){return new CKEDITOR.dom.node(b).getIndex();}var b=function b(_b2,c){_b2=_b2.duplicate();_b2.collapse(c);var d=_b2.parentElement();if(!d.hasChildNodes())return{container:d,offset:0};for(var e=d.children,f,i,h=_b2.duplicate(),k=0,g=e.length-1,w=-1,j,v;k<=g;){w=Math.floor((k+g)/2);f=e[w];h.moveToElementText(f);j=h.compareEndPoints("StartToStart",_b2);if(j>0)g=w-1;else if(j<0)k=w+1;else return{container:d,offset:a(f)};}if(w==-1||w==e.length-1&&j<0){h.moveToElementText(d);h.setEndPoint("StartToStart",_b2);h=h.text.replace(/(\r\n|\r)/g,"\n").length;e=d.childNodes;if(!h){f=e[e.length-1];return f.nodeType!=CKEDITOR.NODE_TEXT?{container:d,offset:e.length}:{container:f,offset:f.nodeValue.length};}for(d=e.length;h>0&&d>0;){i=e[--d];if(i.nodeType==CKEDITOR.NODE_TEXT){v=i;h=h-i.nodeValue.length;}}return{container:v,offset:-h};}h.collapse(j>0?true:false);h.setEndPoint(j>0?"StartToStart":"EndToStart",_b2);h=h.text.replace(/(\r\n|\r)/g,"\n").length;if(!h)return{container:d,offset:a(f)+(j>0?0:1)};for(;h>0;){try{i=f[j>0?"previousSibling":"nextSibling"];if(i.nodeType==CKEDITOR.NODE_TEXT){h=h-i.nodeValue.length;v=i;}f=i;}catch(n){return{container:d,offset:a(f)};}}return{container:v,offset:j>0?-h:v.nodeValue.length+h};};return function(){var a=this.getNative(),c=a&&a.createRange(),d=this.getType();if(!a)return[];if(d==CKEDITOR.SELECTION_TEXT){a=new CKEDITOR.dom.range(this.root);d=b(c,true);a.setStart(new CKEDITOR.dom.node(d.container),d.offset);d=b(c);a.setEnd(new CKEDITOR.dom.node(d.container),d.offset);a.endContainer.getPosition(a.startContainer)&CKEDITOR.POSITION_PRECEDING&&a.endOffset<=a.startContainer.getIndex()&&a.collapse();return[a];}if(d==CKEDITOR.SELECTION_ELEMENT){for(var d=[],e=0;e<c.length;e++){for(var f=c.item(e),i=f.parentNode,h=0,a=new CKEDITOR.dom.range(this.root);h<i.childNodes.length&&i.childNodes[h]!=f;h++){;}a.setStart(new CKEDITOR.dom.node(i),h);a.setEnd(new CKEDITOR.dom.node(i),h+1);d.push(a);}return d;}return[];};}():function(){var a=[],b,c=this.getNative();if(!c)return a;for(var d=0;d<c.rangeCount;d++){var e=c.getRangeAt(d);b=new CKEDITOR.dom.range(this.root);b.setStart(new CKEDITOR.dom.node(e.startContainer),e.startOffset);b.setEnd(new CKEDITOR.dom.node(e.endContainer),e.endOffset);a.push(b);}return a;};return function(b){var c=this._.cache,d=c.ranges;if(!d)c.ranges=d=new CKEDITOR.dom.rangeList(a.call(this));return!b?d:n(new CKEDITOR.dom.rangeList(d.slice()));};}(),getStartElement:function getStartElement(){var a=this._.cache;if(a.startElement!==void 0)return a.startElement;var b;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var c=this.getRanges()[0];if(c){if(c.collapsed){b=c.startContainer;b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());}else{for(c.optimize();;){b=c.startContainer;if(c.startOffset==(b.getChildCount?b.getChildCount():b.getLength())&&!b.isBlockBoundary())c.setStartAfter(b);else break;}b=c.startContainer;if(b.type!=CKEDITOR.NODE_ELEMENT)return b.getParent();b=b.getChild(c.startOffset);if(!b||b.type!=CKEDITOR.NODE_ELEMENT)b=c.startContainer;else for(c=b.getFirst();c&&c.type==CKEDITOR.NODE_ELEMENT;){b=c;c=c.getFirst();}}b=b.$;}}return a.startElement=b?new CKEDITOR.dom.element(b):null;},getSelectedElement:function getSelectedElement(){var a=this._.cache;if(a.selectedElement!==void 0)return a.selectedElement;var b=this,c=CKEDITOR.tools.tryThese(function(){return b.getNative().createRange().item(0);},function(){for(var a=b.getRanges()[0].clone(),c,d,e=2;e&&(!(c=a.getEnclosedNode())||!(c.type==CKEDITOR.NODE_ELEMENT&&x[c.getName()]&&(d=c)));e--){a.shrink(CKEDITOR.SHRINK_ELEMENT);}return d&&d.$;});return a.selectedElement=c?new CKEDITOR.dom.element(c):null;},getSelectedText:function getSelectedText(){var a=this._.cache;if(a.selectedText!==void 0)return a.selectedText;var b=this.getNative(),b=r?b.type=="Control"?"":b.createRange().text:b.toString();return a.selectedText=b;},lock:function lock(){this.getRanges();this.getStartElement();this.getSelectedElement();this.getSelectedText();this._.cache.nativeSel=null;this.isLocked=1;},unlock:function unlock(a){if(this.isLocked){if(a)var b=this.getSelectedElement(),c=!b&&this.getRanges(),d=this.isFake;this.isLocked=0;this.reset();if(a)(a=b||c[0]&&c[0].getCommonAncestor())&&a.getAscendant("body",1)&&(d?this.fake(b):b?this.selectElement(b):this.selectRanges(c));}},reset:function reset(){this._.cache={};this.isFake=0;var a=this.root.editor;if(a&&a._.fakeSelection&&this.rev==a._.fakeSelection.rev){delete a._.fakeSelection;var b=a._.hiddenSelectionContainer;if(b){var c=a.checkDirty();a.fire("lockSnapshot");b.remove();a.fire("unlockSnapshot");!c&&a.resetDirty();}delete a._.hiddenSelectionContainer;}this.rev=q++;},selectElement:function selectElement(a){var b=new CKEDITOR.dom.range(this.root);b.setStartBefore(a);b.setEndAfter(a);this.selectRanges([b]);},selectRanges:function selectRanges(a){var b=this.root.editor,b=b&&b._.hiddenSelectionContainer;this.reset();if(b)for(var b=this.root,e,f=0;f<a.length;++f){e=a[f];if(e.endContainer.equals(b))e.endOffset=Math.min(e.endOffset,b.getChildCount());}if(a.length)if(this.isLocked){var h=CKEDITOR.document.getActive();this.unlock();this.selectRanges(a);this.lock();h&&!h.equals(this.root)&&h.focus();}else{var g;a:{var j,n;if(a.length==1&&!(n=a[0]).collapsed&&(g=n.getEnclosedNode())&&g.type==CKEDITOR.NODE_ELEMENT){n=n.clone();n.shrink(CKEDITOR.SHRINK_ELEMENT,true);if((j=n.getEnclosedNode())&&j.type==CKEDITOR.NODE_ELEMENT)g=j;if(g.getAttribute("contenteditable")=="false")break a;}g=void 0;}if(g)this.fake(g);else{if(r){n=CKEDITOR.dom.walker.whitespaces(true);j=/\ufeff|\u00a0/;b={table:1,tbody:1,tr:1};if(a.length>1){g=a[a.length-1];a[0].setEnd(g.endContainer,g.endOffset);}g=a[0];var a=g.collapsed,l,o,q;if((e=g.getEnclosedNode())&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in x&&(!e.is("a")||!e.getText()))try{q=e.$.createControlRange();q.addElement(e.$);q.select();return;}catch(t){}if(g.startContainer.type==CKEDITOR.NODE_ELEMENT&&g.startContainer.getName()in b||g.endContainer.type==CKEDITOR.NODE_ELEMENT&&g.endContainer.getName()in b){g.shrink(CKEDITOR.NODE_ELEMENT,true);a=g.collapsed;}q=g.createBookmark();b=q.startNode;if(!a)h=q.endNode;q=g.document.$.body.createTextRange();q.moveToElementText(b.$);q.moveStart("character",1);if(h){j=g.document.$.body.createTextRange();j.moveToElementText(h.$);q.setEndPoint("EndToEnd",j);q.moveEnd("character",-1);}else{l=b.getNext(n);o=b.hasAscendant("pre");l=!(l&&l.getText&&l.getText().match(j))&&(o||!b.hasPrevious()||b.getPrevious().is&&b.getPrevious().is("br"));o=g.document.createElement("span");o.setHtml("&#65279;");o.insertBefore(b);l&&g.document.createText("﻿").insertBefore(b);}g.setStartBefore(b);b.remove();if(a){if(l){q.moveStart("character",-1);q.select();g.document.$.selection.clear();}else q.select();g.moveToPosition(o,CKEDITOR.POSITION_BEFORE_START);o.remove();}else{g.setEndBefore(h);h.remove();q.select();}}else{h=this.getNative();if(!h)return;this.removeAllRanges();for(q=0;q<a.length;q++){if(q<a.length-1){l=a[q];o=a[q+1];j=l.clone();j.setStart(l.endContainer,l.endOffset);j.setEnd(o.startContainer,o.startOffset);if(!j.collapsed){j.shrink(CKEDITOR.NODE_ELEMENT,true);g=j.getCommonAncestor();j=j.getEnclosedNode();if(g.isReadOnly()||j&&j.isReadOnly()){o.setStart(l.startContainer,l.startOffset);a.splice(q--,1);continue;}}}g=a[q];o=this.document.$.createRange();if(g.collapsed&&CKEDITOR.env.webkit&&c(g)){l=this.root;d(l,false);j=l.getDocument().createText("​");l.setCustomData("cke-fillingChar",j);g.insertNode(j);if((l=j.getNext())&&!j.getPrevious()&&l.type==CKEDITOR.NODE_ELEMENT&&l.getName()=="br"){d(this.root);g.moveToPosition(l,CKEDITOR.POSITION_BEFORE_START);}else g.moveToPosition(j,CKEDITOR.POSITION_AFTER_END);}o.setStart(g.startContainer.$,g.startOffset);try{o.setEnd(g.endContainer.$,g.endOffset);}catch(w){if(w.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")>=0){g.collapse(1);o.setEnd(g.endContainer.$,g.endOffset);}else throw w;}h.addRange(o);}}this.reset();this.root.fire("selectionchange");}}},fake:function fake(a){var b=this.root.editor;this.reset();l(b);var c=this._.cache,d=new CKEDITOR.dom.range(this.root);d.setStartBefore(a);d.setEndAfter(a);c.ranges=new CKEDITOR.dom.rangeList(d);c.selectedElement=c.startElement=a;c.type=CKEDITOR.SELECTION_ELEMENT;c.selectedText=c.nativeSel=null;this.isFake=1;this.rev=q++;b._.fakeSelection=this;this.root.fire("selectionchange");},isHidden:function isHidden(){var a=this.getCommonAncestor();a&&a.type==CKEDITOR.NODE_TEXT&&(a=a.getParent());return!(!a||!a.data("cke-hidden-sel"));},createBookmarks:function createBookmarks(a){a=this.getRanges().createBookmarks(a);this.isFake&&(a.isFake=1);return a;},createBookmarks2:function createBookmarks2(a){a=this.getRanges().createBookmarks2(a);this.isFake&&(a.isFake=1);return a;},selectBookmarks:function selectBookmarks(a){for(var b=[],c=0;c<a.length;c++){var d=new CKEDITOR.dom.range(this.root);d.moveToBookmark(a[c]);b.push(d);}a.isFake?this.fake(b[0].getEnclosedNode()):this.selectRanges(b);return this;},getCommonAncestor:function getCommonAncestor(){var a=this.getRanges();return!a.length?null:a[0].startContainer.getCommonAncestor(a[a.length-1].endContainer);},scrollIntoView:function scrollIntoView(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView();},removeAllRanges:function removeAllRanges(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var a=this.getNative();try{a&&a[r?"empty":"removeAllRanges"]();}catch(b){}this.reset();}}};})();"use strict";CKEDITOR.STYLE_BLOCK=1;CKEDITOR.STYLE_INLINE=2;CKEDITOR.STYLE_OBJECT=3;(function(){function a(a,b){for(var c,d;a=a.getParent();){if(a.equals(b))break;if(a.getAttribute("data-nostyle"))c=a;else if(!d){var e=a.getAttribute("contentEditable");e=="false"?c=a:e=="true"&&(d=1);}}return c;}function e(b){var d=b.document;if(b.collapsed){d=q(this,d);b.insertNode(d);b.moveToPosition(d,CKEDITOR.POSITION_BEFORE_END);}else{var f=this.element,h=this._.definition,i,g=h.ignoreReadonly,j=g||h.includeReadonly;j==void 0&&(j=b.root.getCustomData("cke_includeReadonly"));var k=CKEDITOR.dtd[f];if(!k){i=true;k=CKEDITOR.dtd.span;}b.enlarge(CKEDITOR.ENLARGE_INLINE,1);b.trim();var n=b.createBookmark(),l=n.startNode,m=n.endNode,o=l,p;if(!g){var r=b.getCommonAncestor(),g=a(l,r),r=a(m,r);g&&(o=g.getNextSourceNode(true));r&&(m=r);}for(o.getPosition(m)==CKEDITOR.POSITION_FOLLOWING&&(o=0);o;){g=false;if(o.equals(m)){o=null;g=true;}else{var t=o.type==CKEDITOR.NODE_ELEMENT?o.getName():null,r=t&&o.getAttribute("contentEditable")=="false",s=t&&o.getAttribute("data-nostyle");if(t&&o.data("cke-bookmark")){o=o.getNextSourceNode(true);continue;}if(r&&j&&CKEDITOR.dtd.$block[t])for(var y=o,u=c(y),x=void 0,J=u.length,O=0,y=J&&new CKEDITOR.dom.range(y.getDocument());O<J;++O){var x=u[O],S=CKEDITOR.filter.instances[x.data("cke-filter")];if(S?S.check(this):1){y.selectNodeContents(x);e.call(this,y);}}u=t?!k[t]||s?0:r&&!j?0:(o.getPosition(m)|L)==L&&(!h.childRule||h.childRule(o)):1;if(u){if((u=o.getParent())&&((u.getDtd()||CKEDITOR.dtd.span)[f]||i)&&(!h.parentRule||h.parentRule(u))){if(!p&&(!t||!CKEDITOR.dtd.$removeEmpty[t]||(o.getPosition(m)|L)==L)){p=b.clone();p.setStartBefore(o);}t=o.type;if(t==CKEDITOR.NODE_TEXT||r||t==CKEDITOR.NODE_ELEMENT&&!o.getChildCount()){for(var t=o,P;(g=!t.getNext(F))&&(P=t.getParent(),k[P.getName()])&&(P.getPosition(l)|I)==I&&(!h.childRule||h.childRule(P));){t=P;}p.setEndAfter(t);}}else g=true;}else g=true;o=o.getNextSourceNode(s||r);}if(g&&p&&!p.collapsed){for(var g=q(this,d),r=g.hasAttributes(),s=p.getCommonAncestor(),t={},u={},x={},J={},V,R,Y;g&&s;){if(s.getName()==f){for(V in h.attributes){if(!J[V]&&(Y=s.getAttribute(R)))g.getAttribute(V)==Y?u[V]=1:J[V]=1;}for(R in h.styles){if(!x[R]&&(Y=s.getStyle(R)))g.getStyle(R)==Y?t[R]=1:x[R]=1;}}s=s.getParent();}for(V in u){g.removeAttribute(V);}for(R in t){g.removeStyle(R);}r&&!g.hasAttributes()&&(g=null);if(g){p.extractContents().appendTo(g);p.insertNode(g);z.call(this,g);g.mergeSiblings();CKEDITOR.env.ie||g.$.normalize();}else{g=new CKEDITOR.dom.element("span");p.extractContents().appendTo(g);p.insertNode(g);z.call(this,g);g.remove(true);}p=null;}}b.moveToBookmark(n);b.shrink(CKEDITOR.SHRINK_TEXT);b.shrink(CKEDITOR.NODE_ELEMENT,true);}}function b(a){function b(){for(var a=new CKEDITOR.dom.elementPath(d.getParent()),c=new CKEDITOR.dom.elementPath(j.getParent()),e=null,f=null,h=0;h<a.elements.length;h++){var g=a.elements[h];if(g==a.block||g==a.blockLimit)break;k.checkElementRemovable(g)&&(e=g);}for(h=0;h<c.elements.length;h++){g=c.elements[h];if(g==c.block||g==c.blockLimit)break;k.checkElementRemovable(g)&&(f=g);}f&&j.breakParent(f);e&&d.breakParent(e);}a.enlarge(CKEDITOR.ENLARGE_INLINE,1);var c=a.createBookmark(),d=c.startNode;if(a.collapsed){for(var e=new CKEDITOR.dom.elementPath(d.getParent(),a.root),f,h=0,g;h<e.elements.length&&(g=e.elements[h]);h++){if(g==e.block||g==e.blockLimit)break;if(this.checkElementRemovable(g)){var i;if(a.collapsed&&(a.checkBoundaryOfElement(g,CKEDITOR.END)||(i=a.checkBoundaryOfElement(g,CKEDITOR.START)))){f=g;f.match=i?"start":"end";}else{g.mergeSiblings();g.is(this.element)?y.call(this,g):o(g,m(this)[g.getName()]);}}}if(f){g=d;for(h=0;;h++){i=e.elements[h];if(i.equals(f))break;else if(i.match)continue;else i=i.clone();i.append(g);g=i;}g[f.match=="start"?"insertBefore":"insertAfter"](f);}}else{var j=c.endNode,k=this;b();for(e=d;!e.equals(j);){f=e.getNextSourceNode();if(e.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(e)){e.getName()==this.element?y.call(this,e):o(e,m(this)[e.getName()]);if(f.type==CKEDITOR.NODE_ELEMENT&&f.contains(d)){b();f=d.getNext();}}e=f;}}a.moveToBookmark(c);a.shrink(CKEDITOR.NODE_ELEMENT,true);}function c(a){var b=[];a.forEach(function(a){if(a.getAttribute("contenteditable")=="true"){b.push(a);return false;}},CKEDITOR.NODE_ELEMENT,true);return b;}function f(a){var b=a.getEnclosedNode()||a.getCommonAncestor(false,true);(a=new CKEDITOR.dom.elementPath(b,a.root).contains(this.element,1))&&!a.isReadOnly()&&x(a,this);}function d(a){var b=a.getCommonAncestor(true,true);if(a=new CKEDITOR.dom.elementPath(b,a.root).contains(this.element,1)){var b=this._.definition,c=b.attributes;if(c)for(var d in c){a.removeAttribute(d,c[d]);}if(b.styles)for(var e in b.styles){b.styles.hasOwnProperty(e)&&a.removeStyle(e);}}}function g(a){var b=a.createBookmark(true),c=a.createIterator();c.enforceRealBlocks=true;if(this._.enterMode)c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var d,e=a.document,f;d=c.getNextParagraph();){if(!d.isReadOnly()&&(c.activeFilter?c.activeFilter.check(this):1)){f=q(this,e,d);l(d,f);}}a.moveToBookmark(b);}function j(a){var b=a.createBookmark(1),c=a.createIterator();c.enforceRealBlocks=true;c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var d,e;d=c.getNextParagraph();){if(this.checkElementRemovable(d))if(d.is("pre")){(e=this._.enterMode==CKEDITOR.ENTER_BR?null:a.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&d.copyAttributes(e);l(d,e);}else y.call(this,d);}a.moveToBookmark(b);}function l(a,b){var c=!b;if(c){b=a.getDocument().createElement("div");a.copyAttributes(b);}var d=b&&b.is("pre"),e=a.is("pre"),f=!d&&e;if(d&&!e){e=b;(f=a.getBogus())&&f.remove();f=a.getHtml();f=n(f,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"");f=f.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1");f=f.replace(/([ \t\n\r]+|&nbsp;)/g," ");f=f.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var g=a.getDocument().createElement("div");g.append(e);e.$.outerHTML="<pre>"+f+"</pre>";e.copyAttributes(g.getFirst());e=g.getFirst().remove();}else e.setHtml(f);b=e;}else f?b=t(c?[a.getHtml()]:h(a),b):a.moveChildren(b);b.replace(a);if(d){var c=b,i;if((i=c.getPrevious(J))&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("pre")){d=n(i.getHtml(),/\n$/,"")+"\n\n"+n(c.getHtml(),/^\n/,"");CKEDITOR.env.ie?c.$.outerHTML="<pre>"+d+"</pre>":c.setHtml(d);i.remove();}}else c&&r(b);}function h(a){a.getName();var b=[];n(a.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(a,b,c){return b+"</pre>"+c+"<pre>";}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(a,c){b.push(c);});return b;}function n(a,b,c){var d="",e="",a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(a,b,c){b&&(d=b);c&&(e=c);return"";});return d+a.replace(b,c)+e;}function t(a,b){var c;a.length>1&&(c=new CKEDITOR.dom.documentFragment(b.getDocument()));for(var d=0;d<a.length;d++){var e=a[d],e=e.replace(/(\r\n|\r)/g,"\n"),e=n(e,/^[ \t]*\n/,""),e=n(e,/\n$/,""),e=n(e,/^[ \t]+|[ \t]+$/g,function(a,b){return a.length==1?"&nbsp;":b?" "+CKEDITOR.tools.repeat("&nbsp;",a.length-1):CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" ";}),e=e.replace(/\n/g,"<br>"),e=e.replace(/[ \t]{2,}/g,function(a){return CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" ";});if(c){var f=b.clone();f.setHtml(e);c.append(f);}else b.setHtml(e);}return c||b;}function y(a,b){var c=this._.definition,d=c.attributes,c=c.styles,e=m(this)[a.getName()],f=CKEDITOR.tools.isEmpty(d)&&CKEDITOR.tools.isEmpty(c),h;for(h in d){if(!((h=="class"||this._.definition.fullMatch)&&a.getAttribute(h)!=k(h,d[h]))&&!(b&&h.slice(0,5)=="data-")){f=a.hasAttribute(h);a.removeAttribute(h);}}for(var g in c){if(!(this._.definition.fullMatch&&a.getStyle(g)!=k(g,c[g],true))){f=f||!!a.getStyle(g);a.removeStyle(g);}}o(a,e,u[a.getName()]);f&&(this._.definition.alwaysRemoveElement?r(a,1):!CKEDITOR.dtd.$block[a.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!a.hasAttributes()?r(a):a.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"));}function z(a){for(var b=m(this),c=a.getElementsByTag(this.element),d,e=c.count();--e>=0;){d=c.getItem(e);d.isReadOnly()||y.call(this,d,true);}for(var f in b){if(f!=this.element){c=a.getElementsByTag(f);for(e=c.count()-1;e>=0;e--){d=c.getItem(e);d.isReadOnly()||o(d,b[f]);}}}}function o(a,b,c){if(b=b&&b.attributes)for(var d=0;d<b.length;d++){var e=b[d][0],f;if(f=a.getAttribute(e)){var h=b[d][1];(h===null||h.test&&h.test(f)||typeof h=="string"&&f==h)&&a.removeAttribute(e);}}c||r(a);}function r(a,b){if(!a.hasAttributes()||b)if(CKEDITOR.dtd.$block[a.getName()]){var c=a.getPrevious(J),d=a.getNext(J);c&&(c.type==CKEDITOR.NODE_TEXT||!c.isBlockBoundary({br:1}))&&a.append("br",1);d&&(d.type==CKEDITOR.NODE_TEXT||!d.isBlockBoundary({br:1}))&&a.append("br");a.remove(true);}else{c=a.getFirst();d=a.getLast();a.remove(true);if(c){c.type==CKEDITOR.NODE_ELEMENT&&c.mergeSiblings();d&&!c.equals(d)&&d.type==CKEDITOR.NODE_ELEMENT&&d.mergeSiblings();}}}function q(a,b,c){var d;d=a.element;d=="*"&&(d="span");d=new CKEDITOR.dom.element(d,b);c&&c.copyAttributes(d);d=x(d,a);b.getCustomData("doc_processing_style")&&d.hasAttribute("id")?d.removeAttribute("id"):b.setCustomData("doc_processing_style",1);return d;}function x(a,b){var c=b._.definition,d=c.attributes,c=CKEDITOR.style.getStyleText(c);if(d)for(var e in d){a.setAttribute(e,d[e]);}c&&a.setAttribute("style",c);return a;}function i(a,b){for(var c in a){a[c]=a[c].replace(S,function(a,c){return b[c];});}}function m(a){if(a._.overrides)return a._.overrides;var b=a._.overrides={},c=a._.definition.overrides;if(c){CKEDITOR.tools.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var e=c[d],f,h;if(typeof e=="string")f=e.toLowerCase();else{f=e.element?e.element.toLowerCase():a.element;h=e.attributes;}e=b[f]||(b[f]={});if(h){var e=e.attributes=e.attributes||[],g;for(g in h){e.push([g.toLowerCase(),h[g]]);}}}}return b;}function k(a,b,c){var d=new CKEDITOR.dom.element("span");d[c?"setStyle":"setAttribute"](a,b);return d[c?"getStyle":"getAttribute"](a);}function s(a,b,c){for(var d=a.document,e=a.getRanges(),b=b?this.removeFromRange:this.applyToRange,f,h=e.createIterator();f=h.getNextRange();){b.call(this,f,c);}a.selectRanges(e);d.removeCustomData("doc_processing_style");}var u={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},p={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},O=/\s*(?:;\s*|$)/,S=/#\((.+?)\)/g,F=CKEDITOR.dom.walker.bookmark(0,1),J=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(a,b){if(typeof a.type=="string")return new CKEDITOR.style.customHandlers[a.type](a);var c=a.attributes;if(c&&c.style){a.styles=CKEDITOR.tools.extend({},a.styles,CKEDITOR.tools.parseCssText(c.style));delete c.style;}if(b){a=CKEDITOR.tools.clone(a);i(a.attributes,b);i(a.styles,b);}c=this.element=a.element?typeof a.element=="string"?a.element.toLowerCase():a.element:"*";this.type=a.type||(u[c]?CKEDITOR.STYLE_BLOCK:p[c]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE);if(_typeof(this.element)=="object")this.type=CKEDITOR.STYLE_OBJECT;this._={definition:a};};CKEDITOR.style.prototype={apply:function apply(a){if(a instanceof CKEDITOR.dom.document)return s.call(this,a.getSelection());if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;if(!b)this._.enterMode=a.activeEnterMode;s.call(this,a.getSelection(),0,a);this._.enterMode=b;}},remove:function remove(a){if(a instanceof CKEDITOR.dom.document)return s.call(this,a.getSelection(),1);if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;if(!b)this._.enterMode=a.activeEnterMode;s.call(this,a.getSelection(),1,a);this._.enterMode=b;}},applyToRange:function applyToRange(a){this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?e:this.type==CKEDITOR.STYLE_BLOCK?g:this.type==CKEDITOR.STYLE_OBJECT?f:null;return this.applyToRange(a);},removeFromRange:function removeFromRange(a){this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?b:this.type==CKEDITOR.STYLE_BLOCK?j:this.type==CKEDITOR.STYLE_OBJECT?d:null;return this.removeFromRange(a);},applyToObject:function applyToObject(a){x(a,this);},checkActive:function checkActive(a,b){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(a.block||a.blockLimit,true,b);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var c=a.elements,d=0,e;d<c.length;d++){e=c[d];if(!(this.type==CKEDITOR.STYLE_INLINE&&(e==a.block||e==a.blockLimit))){if(this.type==CKEDITOR.STYLE_OBJECT){var f=e.getName();if(!(typeof this.element=="string"?f==this.element:f in this.element))continue;}if(this.checkElementRemovable(e,true,b))return true;}}}return false;},checkApplicable:function checkApplicable(a,b,c){b&&b instanceof CKEDITOR.filter&&(c=b);if(c&&!c.check(this))return false;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!a.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!a.blockLimit.getDtd()[this.element];}return true;},checkElementMatch:function checkElementMatch(a,b){var c=this._.definition;if(!a||!c.ignoreReadonly&&a.isReadOnly())return false;var d=a.getName();if(typeof this.element=="string"?d==this.element:d in this.element){if(!b&&!a.hasAttributes())return true;if(d=c._AC)c=d;else{var d={},e=0,f=c.attributes;if(f)for(var h in f){e++;d[h]=f[h];}if(h=CKEDITOR.style.getStyleText(c)){d.style||e++;d.style=h;}d._length=e;c=c._AC=d;}if(c._length){for(var g in c){if(g!="_length"){e=a.getAttribute(g)||"";if(g=="style")a:{d=c[g];typeof d=="string"&&(d=CKEDITOR.tools.parseCssText(d));typeof e=="string"&&(e=CKEDITOR.tools.parseCssText(e,true));h=void 0;for(h in d){if(!(h in e&&(e[h]==d[h]||d[h]=="inherit"||e[h]=="inherit"))){d=false;break a;}}d=true;}else d=c[g]==e;if(d){if(!b)return true;}else if(b)return false;}}if(b)return true;}else return true;}return false;},checkElementRemovable:function checkElementRemovable(a,b,c){if(this.checkElementMatch(a,b,c))return true;if(b=m(this)[a.getName()]){var d;if(!(b=b.attributes))return true;for(c=0;c<b.length;c++){d=b[c][0];if(d=a.getAttribute(d)){var e=b[c][1];if(e===null||typeof e=="string"&&d==e||e.test(d))return true;}}}return false;},buildPreview:function buildPreview(a){var b=this._.definition,c=[],d=b.element;d=="bdo"&&(d="span");var c=["<",d],e=b.attributes;if(e)for(var f in e){c.push(" ",f,'="',e[f],'"');}(e=CKEDITOR.style.getStyleText(b))&&c.push(' style="',e,'"');c.push(">",a||b.name,"</",d,">");return c.join("");},getDefinition:function getDefinition(){return this._.definition;}};CKEDITOR.style.getStyleText=function(a){var b=a._ST;if(b)return b;var b=a.styles,c=a.attributes&&a.attributes.style||"",d="";c.length&&(c=c.replace(O,";"));for(var e in b){var f=b[e],h=(e+":"+f).replace(O,";");f=="inherit"?d=d+h:c=c+h;}c.length&&(c=CKEDITOR.tools.normalizeCssText(c,true));return a._ST=c+d;};CKEDITOR.style.customHandlers={};CKEDITOR.style.addCustomHandler=function(a){var b=function b(a){this._={definition:a};this.setup&&this.setup(a);};b.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},a,true);return this.customHandlers[a.type]=b;};var L=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,I=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED;})();CKEDITOR.styleCommand=function(a,e){this.requiredContent=this.allowedContent=this.style=a;CKEDITOR.tools.extend(this,e,true);};CKEDITOR.styleCommand.prototype.exec=function(a){a.focus();this.state==CKEDITOR.TRISTATE_OFF?a.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&a.removeStyle(this.style);};CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet");CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet);CKEDITOR.loadStylesSet=function(a,e,b){CKEDITOR.stylesSet.addExternal(a,e,"");CKEDITOR.stylesSet.load(a,b);};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function attachStyleStateChange(a,e){var b=this._.styleStateChangeCallbacks;if(!b){b=this._.styleStateChangeCallbacks=[];this.on("selectionChange",function(a){for(var e=0;e<b.length;e++){var d=b[e],g=d.style.checkActive(a.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;d.fn.call(this,g);}});}b.push({style:a,fn:e});},applyStyle:function applyStyle(a){a.apply(this);},removeStyle:function removeStyle(a){a.remove(this);},getStylesSet:function getStylesSet(a){if(this._.stylesDefinitions)a(this._.stylesDefinitions);else{var e=this,b=e.config.stylesCombo_stylesSet||e.config.stylesSet;if(b===false)a(null);else if(b instanceof Array){e._.stylesDefinitions=b;a(b);}else{b||(b="default");var b=b.split(":"),c=b[0];CKEDITOR.stylesSet.addExternal(c,b[1]?b.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),"");CKEDITOR.stylesSet.load(c,function(b){e._.stylesDefinitions=b[c];a(e._.stylesDefinitions);});}}}});CKEDITOR.dom.comment=function(a,e){typeof a=="string"&&(a=(e?e.$:document).createComment(a));CKEDITOR.dom.domObject.call(this,a);};CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node();CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function getOuterHtml(){return"<\!--"+this.$.nodeValue+"--\>";}});"use strict";(function(){var a={},e={},b;for(b in CKEDITOR.dtd.$blockLimit){b in CKEDITOR.dtd.$list||(a[b]=1);}for(b in CKEDITOR.dtd.$block){b in CKEDITOR.dtd.$blockLimit||b in CKEDITOR.dtd.$empty||(e[b]=1);}CKEDITOR.dom.elementPath=function(b,f){var d=null,g=null,j=[],l=b,h,f=f||b.getDocument().getBody();do{if(l.type==CKEDITOR.NODE_ELEMENT){j.push(l);if(!this.lastElement){this.lastElement=l;if(l.is(CKEDITOR.dtd.$object)||l.getAttribute("contenteditable")=="false")continue;}if(l.equals(f))break;if(!g){h=l.getName();l.getAttribute("contenteditable")=="true"?g=l:!d&&e[h]&&(d=l);if(a[h]){var n;if(n=!d){if(h=h=="div"){a:{h=l.getChildren();n=0;for(var t=h.count();n<t;n++){var y=h.getItem(n);if(y.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[y.getName()]){h=true;break a;}}h=false;}h=!h;}n=h;}n?d=l:g=l;}}}}while(l=l.getParent());g||(g=f);this.block=d;this.blockLimit=g;this.root=f;this.elements=j;};})();CKEDITOR.dom.elementPath.prototype={compare:function compare(a){var e=this.elements,a=a&&a.elements;if(!a||e.length!=a.length)return false;for(var b=0;b<e.length;b++){if(!e[b].equals(a[b]))return false;}return true;},contains:function contains(a,e,b){var c;typeof a=="string"&&(c=function c(b){return b.getName()==a;});a instanceof CKEDITOR.dom.element?c=function c(b){return b.equals(a);}:CKEDITOR.tools.isArray(a)?c=function c(b){return CKEDITOR.tools.indexOf(a,b.getName())>-1;}:typeof a=="function"?c=a:_typeof(a)=="object"&&(c=function c(b){return b.getName()in a;});var f=this.elements,d=f.length;e&&d--;if(b){f=Array.prototype.slice.call(f,0);f.reverse();}for(e=0;e<d;e++){if(c(f[e]))return f[e];}return null;},isContextFor:function isContextFor(a){var e;if(a in CKEDITOR.dtd.$block){e=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit;return!!e.getDtd()[a];}return true;},direction:function direction(){return(this.block||this.blockLimit||this.root).getDirection(1);}};CKEDITOR.dom.text=function(a,e){typeof a=="string"&&(a=(e?e.$:document).createTextNode(a));this.$=a;};CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node();CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function getLength(){return this.$.nodeValue.length;},getText:function getText(){return this.$.nodeValue;},setText:function setText(a){this.$.nodeValue=a;},split:function split(a){var e=this.$.parentNode,b=e.childNodes.length,c=this.getLength(),f=this.getDocument(),d=new CKEDITOR.dom.text(this.$.splitText(a),f);if(e.childNodes.length==b)if(a>=c){d=f.createText("");d.insertAfter(this);}else{a=f.createText("");a.insertAfter(d);a.remove();}return d;},substring:function substring(a,e){return typeof e!="number"?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,e);}});(function(){function a(a,c,e){var d=a.serializable,g=c[e?"endContainer":"startContainer"],j=e?"endOffset":"startOffset",l=d?c.document.getById(a.startNode):a.startNode,a=d?c.document.getById(a.endNode):a.endNode;if(g.equals(l.getPrevious())){c.startOffset=c.startOffset-g.getLength()-a.getPrevious().getLength();g=a.getNext();}else if(g.equals(a.getPrevious())){c.startOffset=c.startOffset-g.getLength();g=a.getNext();}g.equals(l.getParent())&&c[j]++;g.equals(a.getParent())&&c[j]++;c[e?"endContainer":"startContainer"]=g;return c;}CKEDITOR.dom.rangeList=function(a){if(a instanceof CKEDITOR.dom.rangeList)return a;a?a instanceof CKEDITOR.dom.range&&(a=[a]):a=[];return CKEDITOR.tools.extend(a,e);};var e={createIterator:function createIterator(){var a=this,c=CKEDITOR.dom.walker.bookmark(),e=[],d;return{getNextRange:function getNextRange(g){d=d==void 0?0:d+1;var j=a[d];if(j&&a.length>1){if(!d)for(var l=a.length-1;l>=0;l--){e.unshift(a[l].createBookmark(true));}if(g)for(var h=0;a[d+h+1];){for(var n=j.document,g=0,l=n.getById(e[h].endNode),n=n.getById(e[h+1].startNode);;){l=l.getNextSourceNode(false);if(n.equals(l))g=1;else if(c(l)||l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary())continue;break;}if(!g)break;h++;}for(j.moveToBookmark(e.shift());h--;){l=a[++d];l.moveToBookmark(e.shift());j.setEnd(l.endContainer,l.endOffset);}}return j;}};},createBookmarks:function createBookmarks(b){for(var c=[],e,d=0;d<this.length;d++){c.push(e=this[d].createBookmark(b,true));for(var g=d+1;g<this.length;g++){this[g]=a(e,this[g]);this[g]=a(e,this[g],true);}}return c;},createBookmarks2:function createBookmarks2(a){for(var c=[],e=0;e<this.length;e++){c.push(this[e].createBookmark2(a));}return c;},moveToBookmarks:function moveToBookmarks(a){for(var c=0;c<this.length;c++){this[c].moveToBookmark(a[c]);}}};})();(function(){function a(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/");}function e(b){var c=CKEDITOR.skin["ua_"+b],d=CKEDITOR.env;if(c)for(var c=c.split(",").sort(function(a,b){return a>b?-1:1;}),e=0,f;e<c.length;e++){f=c[e];if(d.ie&&(f.replace(/^ie/,"")==d.version||d.quirks&&f=="iequirks"))f="ie";if(d[f]){b=b+("_"+c[e]);break;}}return CKEDITOR.getUrl(a()+b+".css");}function b(a,b){if(!d[a]){CKEDITOR.document.appendStyleSheet(e(a));d[a]=1;}b&&b();}function c(a){var b=a.getById(g);if(!b){b=a.getHead().append("style");b.setAttribute("id",g);b.setAttribute("type","text/css");}return b;}function f(a,b,c){var d,e,f;if(CKEDITOR.env.webkit){b=b.split("}").slice(0,-1);for(e=0;e<b.length;e++){b[e]=b[e].split("{");}}for(var g=0;g<a.length;g++){if(CKEDITOR.env.webkit)for(e=0;e<b.length;e++){f=b[e][1];for(d=0;d<c.length;d++){f=f.replace(c[d][0],c[d][1]);}a[g].$.sheet.addRule(b[e][0],f);}else{f=b;for(d=0;d<c.length;d++){f=f.replace(c[d][0],c[d][1]);}CKEDITOR.env.ie&&CKEDITOR.env.version<11?a[g].$.styleSheet.cssText=a[g].$.styleSheet.cssText+f:a[g].$.innerHTML=a[g].$.innerHTML+f;}}}var d={};CKEDITOR.skin={path:a,loadPart:function loadPart(c,d){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(a()+"skin.js"),function(){b(c,d);}):b(c,d);},getPath:function getPath(a){return CKEDITOR.getUrl(e(a));},icons:{},addIcon:function addIcon(a,b,c,d){a=a.toLowerCase();this.icons[a]||(this.icons[a]={path:b,offset:c||0,bgsize:d||"16px"});},getIconStyle:function getIconStyle(a,b,c,d,e){var f;if(a){a=a.toLowerCase();b&&(f=this.icons[a+"-rtl"]);f||(f=this.icons[a]);}a=c||f&&f.path||"";d=d||f&&f.offset;e=e||f&&f.bgsize||"16px";return a&&"background-image:url("+CKEDITOR.getUrl(a)+");background-position:0 "+d+"px;background-size:"+e+";";}};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function getUiColor(){return this.uiColor;},setUiColor:function setUiColor(a){var b=c(CKEDITOR.document);return(this.setUiColor=function(a){var c=CKEDITOR.skin.chameleon,d=[[l,a]];this.uiColor=a;f([b],c(this,"editor"),d);f(j,c(this,"panel"),d);}).call(this,a);}});var g="cke_ui_color",j=[],l=/\$color/g;CKEDITOR.on("instanceLoaded",function(a){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var b=a.editor,a=function a(_a7){_a7=(_a7.data[0]||_a7.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!_a7.getById("cke_ui_color")){_a7=c(_a7);j.push(_a7);var d=b.getUiColor();d&&f([_a7],CKEDITOR.skin.chameleon(b,"panel"),[[l,d]]);}};b.on("panelShow",a);b.on("menuShow",a);b.config.uiColor&&b.setUiColor(b.config.uiColor);}});})();(function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=false;else{var a=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);a.appendTo(CKEDITOR.document.getHead());try{var e=a.getComputedStyle("border-top-color"),b=a.getComputedStyle("border-right-color");CKEDITOR.env.hc=!!(e&&e==b);}catch(c){CKEDITOR.env.hc=false;}a.remove();}if(CKEDITOR.env.hc)CKEDITOR.env.cssClass=CKEDITOR.env.cssClass+" cke_hc";CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}");CKEDITOR.status="loaded";CKEDITOR.fireOnce("loaded");if(a=CKEDITOR._.pending){delete CKEDITOR._.pending;for(e=0;e<a.length;e++){CKEDITOR.editor.prototype.constructor.apply(a[e][0],a[e][1]);CKEDITOR.add(a[e][0]);}}})();/*
 Copyright (c) 2003-2014, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/CKEDITOR.skin.name="moono";CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko";CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8";CKEDITOR.skin.chameleon=function(){var b=function(){return function(b,e){for(var a=b.match(/[^#]./g),c=0;3>c;c++){var f=a,h=c,d;d=parseInt(a[c],16);d=("0"+(0>e?0|d*(1+e):0|d+(255-d)*e).toString(16)).slice(-2);f[h]=d;}return"#"+a.join("");};}(),c=function(){var b=new CKEDITOR.template("background:#{to};background-image:-webkit-gradient(linear,lefttop,leftbottom,from({from}),to({to}));background-image:-moz-linear-gradient(top,{from},{to});background-image:-webkit-linear-gradient(top,{from},{to});background-image:-o-linear-gradient(top,{from},{to});background-image:-ms-linear-gradient(top,{from},{to});background-image:linear-gradient(top,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');");return function(c,a){return b.output({from:c,to:a});};}(),f={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(g,e){var a=g.uiColor,a={id:"."+g.id,defaultBorder:b(a,-0.1),defaultGradient:c(b(a,0.9),a),lightGradient:c(b(a,1),b(a,0.7)),mediumGradient:c(b(a,0.8),b(a,0.5)),ckeButtonOn:c(b(a,0.6),b(a,0.7)),ckeResizer:b(a,-0.4),ckeToolbarSeparator:b(a,0.5),ckeColorauto:b(a,0.8),dialogBody:b(a,0.7),dialogTabSelected:c("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:b(a,-0.6),elementsPathBg:a,menubuttonIcon:b(a,0.5),menubuttonIconHover:b(a,0.3)};return f[e].output(a).replace(/\[/g,"{").replace(/\]/g,"}");};}();CKEDITOR.plugins.add("dialogui",{onLoad:function onLoad(){var h=function h(b){this._||(this._={});this._["default"]=this._.initValue=b["default"]||"";this._.required=b.required||!1;for(var a=[this._],d=1;d<arguments.length;d++){a.push(arguments[d]);}a.push(!0);CKEDITOR.tools.extend.apply(CKEDITOR.tools,a);return this._;},r={build:function build(b,a,d){return new CKEDITOR.ui.dialog.textInput(b,a,d);}},l={build:function build(b,a,d){return new CKEDITOR.ui.dialog[a.type](b,a,d);}},n={isChanged:function isChanged(){return this.getValue()!=this.getInitValue();},reset:function reset(b){this.setValue(this.getInitValue(),b);},setInitValue:function setInitValue(){this._.initValue=this.getValue();},resetInitValue:function resetInitValue(){this._.initValue=this._["default"];},getInitValue:function getInitValue(){return this._.initValue;}},o=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function onChange(b,a){this._.domOnChangeRegistered||(b.on("load",function(){this.getInputElement().on("change",function(){b.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()});},this);},this),this._.domOnChangeRegistered=!0);this.on("change",a);}},!0),s=/^on([A-Z]\w+)/,p=function p(b){for(var a in b){(s.test(a)||"title"==a||"type"==a)&&delete b[a];}return b;};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function labeledElement(b,a,d,f){if(!(4>arguments.length)){var c=h.call(this,a);c.labelId=CKEDITOR.tools.getNextId()+"_label";this._.children=[];var e={role:a.role||"presentation"};a.includeLabel&&(e["aria-labelledby"]=c.labelId);CKEDITOR.ui.dialog.uiElement.call(this,b,a,d,"div",null,e,function(){var e=[],g=a.required?" cke_required":"";if(a.labelLayout!="horizontal")e.push('<label class="cke_dialog_ui_labeled_label'+g+'" ',' id="'+c.labelId+'"',c.inputId?' for="'+c.inputId+'"':"",(a.labelStyle?' style="'+a.labelStyle+'"':"")+">",a.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',a.controlStyle?' style="'+a.controlStyle+'"':"",' role="presentation">',f.call(this,b,a),"</div>");else{g={type:"hbox",widths:a.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+g+'" id="'+c.labelId+'" for="'+c.inputId+'"'+(a.labelStyle?' style="'+a.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(a.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(a.controlStyle?' style="'+a.controlStyle+'"':"")+">"+f.call(this,b,a)+"</span>"}]};CKEDITOR.dialog._.uiElementBuilders.hbox.build(b,g,e);}return e.join("");});}},textInput:function textInput(b,a,d){if(!(3>arguments.length)){h.call(this,a);var f=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",c={"class":"cke_dialog_ui_input_"+a.type,id:f,type:a.type};a.validate&&(this.validate=a.validate);a.maxLength&&(c.maxlength=a.maxLength);a.size&&(c.size=a.size);a.inputStyle&&(c.style=a.inputStyle);var e=this,k=!1;b.on("load",function(){e.getInputElement().on("keydown",function(a){a.data.getKeystroke()==13&&(k=true);});e.getInputElement().on("keyup",function(a){if(a.data.getKeystroke()==13&&k){b.getButton("ok")&&setTimeout(function(){b.getButton("ok").click();},0);k=false;}},null,null,1E3);});CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){var b=['<div class="cke_dialog_ui_input_',a.type,'" role="presentation"'];a.width&&b.push('style="width:'+a.width+'" ');b.push("><input ");c["aria-labelledby"]=this._.labelId;this._.required&&(c["aria-required"]=this._.required);for(var e in c){b.push(e+'="'+c[e]+'" ');}b.push(" /></div>");return b.join("");});}},textarea:function textarea(b,a,d){if(!(3>arguments.length)){h.call(this,a);var f=this,c=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",e={};a.validate&&(this.validate=a.validate);e.rows=a.rows||5;e.cols=a.cols||20;e["class"]="cke_dialog_ui_input_textarea "+(a["class"]||"");"undefined"!=typeof a.inputStyle&&(e.style=a.inputStyle);a.dir&&(e.dir=a.dir);CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){e["aria-labelledby"]=this._.labelId;this._.required&&(e["aria-required"]=this._.required);var a=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',c,'" '],b;for(b in e){a.push(b+'="'+CKEDITOR.tools.htmlEncode(e[b])+'" ');}a.push(">",CKEDITOR.tools.htmlEncode(f._["default"]),"</textarea></div>");return a.join("");});}},checkbox:function checkbox(b,a,d){if(!(3>arguments.length)){var f=h.call(this,a,{"default":!!a["default"]});a.validate&&(this.validate=a.validate);CKEDITOR.ui.dialog.uiElement.call(this,b,a,d,"span",null,null,function(){var c=CKEDITOR.tools.extend({},a,{id:a.id?a.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},true),e=[],d=CKEDITOR.tools.getNextId()+"_label",g={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":d};p(c);if(a["default"])g.checked="checked";if(typeof c.inputStyle!="undefined")c.style=c.inputStyle;f.checkbox=new CKEDITOR.ui.dialog.uiElement(b,c,e,"input",null,g);e.push(' <label id="',d,'" for="',g.id,'"'+(a.labelStyle?' style="'+a.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(a.label),"</label>");return e.join("");});}},radio:function radio(b,a,d){if(!(3>arguments.length)){h.call(this,a);this._["default"]||(this._["default"]=this._.initValue=a.items[0][1]);a.validate&&(this.validate=a.valdiate);var f=[],c=this;a.role="radiogroup";a.includeLabel=!0;CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){for(var e=[],d=[],g=(a.id?a.id:CKEDITOR.tools.getNextId())+"_radio",i=0;i<a.items.length;i++){var j=a.items[i],h=j[2]!==void 0?j[2]:j[0],l=j[1]!==void 0?j[1]:j[0],m=CKEDITOR.tools.getNextId()+"_radio_input",n=m+"_label",m=CKEDITOR.tools.extend({},a,{id:m,title:null,type:null},true),h=CKEDITOR.tools.extend({},m,{title:h},true),o={type:"radio","class":"cke_dialog_ui_radio_input",name:g,value:l,"aria-labelledby":n},q=[];if(c._["default"]==l)o.checked="checked";p(m);p(h);if(typeof m.inputStyle!="undefined")m.style=m.inputStyle;m.keyboardFocusable=true;f.push(new CKEDITOR.ui.dialog.uiElement(b,m,q,"input",null,o));q.push(" ");new CKEDITOR.ui.dialog.uiElement(b,h,q,"label",null,{id:n,"for":o.id},j[0]);e.push(q.join(""));}new CKEDITOR.ui.dialog.hbox(b,f,e,d);return d.join("");});this._.children=f;}},button:function button(b,a,d){if(arguments.length){"function"==typeof a&&(a=a(b.getParentEditor()));h.call(this,a,{disabled:a.disabled||!1});CKEDITOR.event.implementOn(this);var f=this;b.on("load",function(){var a=this.getElement();(function(){a.on("click",function(a){f.click();a.data.preventDefault();});a.on("keydown",function(a){a.data.getKeystroke()in{32:1}&&(f.click(),a.data.preventDefault());});})();a.unselectable();},this);var c=CKEDITOR.tools.extend({},a);delete c.style;var e=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,b,c,d,"a",null,{style:a.style,href:"javascript:void(0)",title:a.label,hidefocus:"true","class":a["class"],role:"button","aria-labelledby":e},'<span id="'+e+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(a.label)+"</span>");}},select:function select(b,a,d){if(!(3>arguments.length)){var f=h.call(this,a);a.validate&&(this.validate=a.validate);f.inputId=CKEDITOR.tools.getNextId()+"_select";CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){var c=CKEDITOR.tools.extend({},a,{id:a.id?a.id+"_select":CKEDITOR.tools.getNextId()+"_select"},true),e=[],d=[],g={id:f.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};e.push('<div class="cke_dialog_ui_input_',a.type,'" role="presentation"');a.width&&e.push('style="width:'+a.width+'" ');e.push(">");if(a.size!=void 0)g.size=a.size;if(a.multiple!=void 0)g.multiple=a.multiple;p(c);for(var i=0,j;i<a.items.length&&(j=a.items[i]);i++){d.push('<option value="',CKEDITOR.tools.htmlEncode(j[1]!==void 0?j[1]:j[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(j[0]));}if(typeof c.inputStyle!="undefined")c.style=c.inputStyle;f.select=new CKEDITOR.ui.dialog.uiElement(b,c,e,"select",null,g,d.join(""));e.push("</div>");return e.join("");});}},file:function file(b,a,d){if(!(3>arguments.length)){void 0===a["default"]&&(a["default"]="");var f=CKEDITOR.tools.extend(h.call(this,a),{definition:a,buttons:[]});a.validate&&(this.validate=a.validate);b.on("load",function(){CKEDITOR.document.getById(f.frameId).getParent().addClass("cke_dialog_ui_input_file");});CKEDITOR.ui.dialog.labeledElement.call(this,b,a,d,function(){f.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var b=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',f.frameId,'" title="',a.label,'" src="javascript:void('];b.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0");b.push(')"></iframe>');return b.join("");});}},fileButton:function fileButton(b,a,d){if(!(3>arguments.length)){h.call(this,a);var f=this;a.validate&&(this.validate=a.validate);var c=CKEDITOR.tools.extend({},a),e=c.onClick;c.className=(c.className?c.className+" ":"")+"cke_dialog_ui_button";c.onClick=function(c){var d=a["for"];if(!e||e.call(this,c)!==false){b.getContentElement(d[0],d[1]).submit();this.disable();}};b.on("load",function(){b.getContentElement(a["for"][0],a["for"][1])._.buttons.push(f);});CKEDITOR.ui.dialog.button.call(this,b,c,d);}},html:function(){var b=/^\s*<[\w:]+\s+([^>]*)?>/,a=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,d=/\/$/;return function(f,c,e){if(!(3>arguments.length)){var k=[],g=c.html;"<"!=g.charAt(0)&&(g="<span>"+g+"</span>");var i=c.focus;if(i){var j=this.focus;this.focus=function(){("function"==typeof i?i:j).call(this);this.fire("focus");};c.isFocusable&&(this.isFocusable=this.isFocusable);this.keyboardFocusable=!0;}CKEDITOR.ui.dialog.uiElement.call(this,f,c,k,"span",null,null,"");k=k.join("").match(b);g=g.match(a)||["","",""];d.test(g[1])&&(g[1]=g[1].slice(0,-1),g[2]="/"+g[2]);e.push([g[1]," ",k[1]||"",g[2]].join(""));}};}(),fieldset:function fieldset(b,a,d,f,c){var e=c.label;this._={children:a};CKEDITOR.ui.dialog.uiElement.call(this,b,c,f,"fieldset",null,null,function(){var a=[];e&&a.push("<legend"+(c.labelStyle?' style="'+c.labelStyle+'"':"")+">"+e+"</legend>");for(var b=0;b<d.length;b++){a.push(d[b]);}return a.join("");});}},!0);CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement();CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement(),{setLabel:function setLabel(b){var a=CKEDITOR.document.getById(this._.labelId);1>a.getChildCount()?new CKEDITOR.dom.text(b,CKEDITOR.document).appendTo(a):a.getChild(0).$.nodeValue=b;return this;},getLabel:function getLabel(){var b=CKEDITOR.document.getById(this._.labelId);return!b||1>b.getChildCount()?"":b.getChild(0).getText();},eventProcessors:o},!0);CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement(),{click:function click(){return!this._.disabled?this.fire("click",{dialog:this._.dialog}):!1;},enable:function enable(){this._.disabled=!1;var b=this.getElement();b&&b.removeClass("cke_disabled");},disable:function disable(){this._.disabled=!0;this.getElement().addClass("cke_disabled");},isVisible:function isVisible(){return this.getElement().getFirst().isVisible();},isEnabled:function isEnabled(){return!this._.disabled;},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function onClick(b,a){this.on("click",function(){a.apply(this,arguments);});}},!0),accessKeyUp:function accessKeyUp(){this.click();},accessKeyDown:function accessKeyDown(){this.focus();},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement(),{getInputElement:function getInputElement(){return CKEDITOR.document.getById(this._.inputId);},focus:function focus(){var b=this.selectParentTab();setTimeout(function(){var a=b.getInputElement();a&&a.$.focus();},0);},select:function select(){var b=this.selectParentTab();setTimeout(function(){var a=b.getInputElement();a&&(a.$.focus(),a.$.select());},0);},accessKeyUp:function accessKeyUp(){this.select();},setValue:function setValue(b){!b&&(b="");return CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments);},keyboardFocusable:!0},n,!0);CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput();CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement(),{getInputElement:function getInputElement(){return this._.select.getElement();},add:function add(b,a,d){var f=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),c=this.getInputElement().$;f.$.text=b;f.$.value=void 0===a||null===a?b:a;void 0===d||null===d?CKEDITOR.env.ie?c.add(f.$):c.add(f.$,null):c.add(f.$,d);return this;},remove:function remove(b){this.getInputElement().$.remove(b);return this;},clear:function clear(){for(var b=this.getInputElement().$;0<b.length;){b.remove(0);}return this;},keyboardFocusable:!0},n,!0);CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement(),{getInputElement:function getInputElement(){return this._.checkbox.getElement();},setValue:function setValue(b,a){this.getInputElement().$.checked=b;!a&&this.fire("change",{value:b});},getValue:function getValue(){return this.getInputElement().$.checked;},accessKeyUp:function accessKeyUp(){this.setValue(!this.getValue());},eventProcessors:{onChange:function onChange(b,a){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return o.onChange.apply(this,arguments);b.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){b=b.data.$;"checked"==b.propertyName&&this.fire("change",{value:a.$.checked});},this);},this);this.on("change",a);return null;}},keyboardFocusable:!0},n,!0);CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement(),{setValue:function setValue(b,a){for(var d=this._.children,f,c=0;c<d.length&&(f=d[c]);c++){f.getElement().$.checked=f.getValue()==b;}!a&&this.fire("change",{value:b});},getValue:function getValue(){for(var b=this._.children,a=0;a<b.length;a++){if(b[a].getElement().$.checked)return b[a].getValue();}return null;},accessKeyUp:function accessKeyUp(){var b=this._.children,a;for(a=0;a<b.length;a++){if(b[a].getElement().$.checked){b[a].getElement().focus();return;}}b[0].getElement().focus();},eventProcessors:{onChange:function onChange(b,a){if(CKEDITOR.env.ie)b.on("load",function(){for(var a=this._.children,b=this,c=0;c<a.length;c++){a[c].getElement().on("propertychange",function(a){a=a.data.$;"checked"==a.propertyName&&this.$.checked&&b.fire("change",{value:this.getAttribute("value")});});}},this),this.on("change",a);else return o.onChange.apply(this,arguments);return null;}}},n,!0);CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement(),n,{getInputElement:function getInputElement(){var b=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<b.$.forms.length?new CKEDITOR.dom.element(b.$.forms[0].elements[0]):this.getElement();},submit:function submit(){this.getInputElement().getParent().$.submit();return this;},getAction:function getAction(){return this.getInputElement().getParent().$.action;},registerEvents:function registerEvents(b){var a=/^on([A-Z]\w+)/,d,f=function f(a,b,c,d){a.on("formLoaded",function(){a.getInputElement().on(c,d,a);});},c;for(c in b){if(d=c.match(a))this.eventProcessors[c]?this.eventProcessors[c].call(this,this._.dialog,b[c]):f(this,this._.dialog,d[1].toLowerCase(),b[c]);}return this;},reset:function reset(){function b(){d.$.open();var b="";f.size&&(b=f.size-(CKEDITOR.env.ie?7:0));var h=a.frameId+"_input";d.$.write(['<html dir="'+g+'" lang="'+i+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+g+'" lang="'+i+'" action="',CKEDITOR.tools.htmlEncode(f.action),'"><label id="',a.labelId,'" for="',h,'" style="display:none">',CKEDITOR.tools.htmlEncode(f.label),'</label><input style="width:100%" id="',h,'" aria-labelledby="',a.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(f.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<b?b:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+e+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+k+")}","<\/script>"].join(""));d.$.close();for(b=0;b<c.length;b++){c[b].enable();}}var a=this._,d=CKEDITOR.document.getById(a.frameId).getFrameDocument(),f=a.definition,c=a.buttons,e=this.formLoadedNumber,k=this.formUnloadNumber,g=a.dialog._.editor.lang.dir,i=a.dialog._.editor.langCode;e||(e=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded");},this),k=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData();},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(e);CKEDITOR.tools.removeFunction(k);}));CKEDITOR.env.gecko?setTimeout(b,500):b();},getValue:function getValue(){return this.getInputElement().$.value||"";},setInitValue:function setInitValue(){this._.initValue="";},eventProcessors:{onChange:function onChange(b,a){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()});},this);},this),this._.domOnChangeRegistered=!0);this.on("change",a);}},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button();CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype);CKEDITOR.dialog.addUIElement("text",r);CKEDITOR.dialog.addUIElement("password",r);CKEDITOR.dialog.addUIElement("textarea",l);CKEDITOR.dialog.addUIElement("checkbox",l);CKEDITOR.dialog.addUIElement("radio",l);CKEDITOR.dialog.addUIElement("button",l);CKEDITOR.dialog.addUIElement("select",l);CKEDITOR.dialog.addUIElement("file",l);CKEDITOR.dialog.addUIElement("fileButton",l);CKEDITOR.dialog.addUIElement("html",l);CKEDITOR.dialog.addUIElement("fieldset",{build:function build(b,a,d){for(var f=a.children,c,e=[],h=[],g=0;g<f.length&&(c=f[g]);g++){var i=[];e.push(i);h.push(CKEDITOR.dialog._.uiElementBuilders[c.type].build(b,c,i));}return new CKEDITOR.ui.dialog[a.type](b,h,e,d,a);}});}});CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;(function(){function t(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+a,c=b-1;c>b-a;c--){if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];}return null;}function u(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),c=b+1;c<b+a;c++){if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];}return null;}function G(a,b){for(var c=a.$.getElementsByTagName("input"),e=0,d=c.length;e<d;e++){var g=new CKEDITOR.dom.element(c[e]);"text"==g.getAttribute("type").toLowerCase()&&(b?(g.setAttribute("value",g.getCustomData("fake_value")||""),g.removeCustomData("fake_value")):(g.setCustomData("fake_value",g.getAttribute("value")),g.setAttribute("value","")));}}function P(a,b){var c=this.getInputElement();c&&(a?c.removeAttribute("aria-invalid"):c.setAttribute("aria-invalid",!0));a||(this.select?this.select():this.focus());b&&alert(b);this.fire("validated",{valid:a,msg:b});}function Q(){var a=this.getInputElement();a&&a.removeAttribute("aria-invalid");}function R(a){var a=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",S).output({id:CKEDITOR.tools.getNextNumber(),editorId:a.id,langDir:a.lang.dir,langCode:a.langCode,editorDialogClass:"cke_editor_"+a.name.replace(/\./g,"\\.")+"_dialog",closeTitle:a.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),b=a.getChild([0,0,0,0,0]),c=b.getChild(0),e=b.getChild(1);if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var d="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())";CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+d+'" tabIndex="-1"></iframe>').appendTo(b.getParent());}c.unselectable();e.unselectable();return{element:a,parts:{dialog:a.getChild(0),title:c,close:e,tabs:b.getChild(2),contents:b.getChild([3,0,0,0]),footer:b.getChild([3,0,1,0])}};}function H(a,b,c){this.element=b;this.focusIndex=c;this.tabIndex=0;this.isFocusable=function(){return!b.getAttribute("disabled")&&b.isVisible();};this.focus=function(){a._.currentFocusIndex=this.focusIndex;this.element.focus();};b.on("keydown",function(a){a.data.getKeystroke()in{32:1,13:1}&&this.fire("click");});b.on("focus",function(){this.fire("mouseover");});b.on("blur",function(){this.fire("mouseout");});}function T(a){function b(){a.layout();}var c=CKEDITOR.document.getWindow();c.on("resize",b);a.on("hide",function(){c.removeListener("resize",b);});}function I(a,b){this._={dialog:a};CKEDITOR.tools.extend(this,b);}function U(a){function b(b){var c=a.getSize(),i=CKEDITOR.document.getWindow().getViewPaneSize(),o=b.data.$.screenX,j=b.data.$.screenY,n=o-e.x,l=j-e.y;e={x:o,y:j};d.x+=n;d.y+=l;a.move(d.x+h[3]<f?-h[3]:d.x-h[1]>i.width-c.width-f?i.width-c.width+("rtl"==g.lang.dir?0:h[1]):d.x,d.y+h[0]<f?-h[0]:d.y-h[2]>i.height-c.height-f?i.height-c.height+h[2]:d.y,1);b.data.preventDefault();}function c(){CKEDITOR.document.removeListener("mousemove",b);CKEDITOR.document.removeListener("mouseup",c);if(CKEDITOR.env.ie6Compat){var a=q.getChild(0).getFrameDocument();a.removeListener("mousemove",b);a.removeListener("mouseup",c);}}var e=null,d=null;a.getElement().getFirst();var g=a.getParentEditor(),f=g.config.dialog_magnetDistance,h=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof f&&(f=20);a.parts.title.on("mousedown",function(f){e={x:f.data.$.screenX,y:f.data.$.screenY};CKEDITOR.document.on("mousemove",b);CKEDITOR.document.on("mouseup",c);d=a.getPosition();if(CKEDITOR.env.ie6Compat){var h=q.getChild(0).getFrameDocument();h.on("mousemove",b);h.on("mouseup",c);}f.data.preventDefault();},a);}function V(a){var b,c;function e(d){var e="rtl"==h.lang.dir,j=o.width,C=o.height,D=j+(d.data.$.screenX-b)*(e?-1:1)*(a._.moved?1:2),n=C+(d.data.$.screenY-c)*(a._.moved?1:2),x=a._.element.getFirst(),x=e&&x.getComputedStyle("right"),y=a.getPosition();y.y+n>i.height&&(n=i.height-y.y);if((e?x:y.x)+D>i.width)D=i.width-(e?x:y.x);if(f==CKEDITOR.DIALOG_RESIZE_WIDTH||f==CKEDITOR.DIALOG_RESIZE_BOTH)j=Math.max(g.minWidth||0,D-m);if(f==CKEDITOR.DIALOG_RESIZE_HEIGHT||f==CKEDITOR.DIALOG_RESIZE_BOTH)C=Math.max(g.minHeight||0,n-k);a.resize(j,C);a._.moved||a.layout();d.data.preventDefault();}function d(){CKEDITOR.document.removeListener("mouseup",d);CKEDITOR.document.removeListener("mousemove",e);j&&(j.remove(),j=null);if(CKEDITOR.env.ie6Compat){var a=q.getChild(0).getFrameDocument();a.removeListener("mouseup",d);a.removeListener("mousemove",e);}}var g=a.definition,f=g.resizable;if(f!=CKEDITOR.DIALOG_RESIZE_NONE){var h=a.getParentEditor(),m,k,i,o,j,n=CKEDITOR.tools.addFunction(function(f){o=a.getSize();var h=a.parts.contents;h.$.getElementsByTagName("iframe").length&&(j=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),h.append(j));k=o.height-a.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks));m=o.width-a.parts.contents.getSize("width",1);b=f.screenX;c=f.screenY;i=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",e);CKEDITOR.document.on("mouseup",d);CKEDITOR.env.ie6Compat&&(h=q.getChild(0).getFrameDocument(),h.on("mousemove",e),h.on("mouseup",d));f.preventDefault&&f.preventDefault();});a.on("load",function(){var b="";f==CKEDITOR.DIALOG_RESIZE_WIDTH?b=" cke_resizer_horizontal":f==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(b=" cke_resizer_vertical");b=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+b+" cke_resizer_"+h.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(h.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+n+', event )">'+("ltr"==h.lang.dir?"◢":"◣")+"</div>");a.parts.footer.append(b,1);});h.on("destroy",function(){CKEDITOR.tools.removeFunction(n);});}}function E(a){a.data.preventDefault(1);}function J(a){var b=CKEDITOR.document.getWindow(),c=a.config,e=c.dialog_backgroundCoverColor||"white",d=c.dialog_backgroundCoverOpacity,g=c.baseFloatZIndex,c=CKEDITOR.tools.genKey(e,d,g),f=w[c];f?f.show():(g=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",g,"; top: 0px; left: 0px; ",!CKEDITOR.env.ie6Compat?"background-color: "+e:"",'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(e="<html><body style=\\'background-color:"+e+";\\'></body></html>",g.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),g.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+e+"' );document.close();")+"})())"),g.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),g.push("</div>"),f=CKEDITOR.dom.element.createFromHtml(g.join("")),f.setOpacity(void 0!=d?d:0.5),f.on("keydown",E),f.on("keypress",E),f.on("keyup",E),f.appendTo(CKEDITOR.document.getBody()),w[c]=f);a.focusManager.add(f);q=f;var a=function a(){var a=b.getViewPaneSize();f.setStyles({width:a.width+"px",height:a.height+"px"});},h=function h(){var a=b.getScrollPosition(),c=CKEDITOR.dialog._.currentTop;f.setStyles({left:a.x+"px",top:a.y+"px"});if(c){do{a=c.getPosition();c.move(a.x,a.y);}while(c=c._.parentDialog);}};F=a;b.on("resize",a);a();(!CKEDITOR.env.mac||!CKEDITOR.env.webkit)&&f.focus();if(CKEDITOR.env.ie6Compat){var m=function m(){h();arguments.callee.prevScrollHandler.apply(this,arguments);};b.$.setTimeout(function(){m.prevScrollHandler=window.onscroll||function(){};window.onscroll=m;},0);h();}}function K(a){q&&(a.focusManager.remove(q),a=CKEDITOR.document.getWindow(),q.hide(),a.removeListener("resize",F),CKEDITOR.env.ie6Compat&&a.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null;},0),F=null);}var r=CKEDITOR.tools.cssLength,S='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(a,b){function c(){var a=l._.focusList;a.sort(function(a,b){return a.tabIndex!=b.tabIndex?b.tabIndex-a.tabIndex:a.focusIndex-b.focusIndex;});for(var b=a.length,c=0;c<b;c++){a[c].focusIndex=c;}}function e(a){var b=l._.focusList,a=a||0;if(!(1>b.length)){var c=l._.currentFocusIndex;try{b[c].getInputElement().$.blur();}catch(f){}for(var d=c=(c+a+b.length)%b.length;a&&!b[d].isFocusable()&&!(d=(d+a+b.length)%b.length,d==c);){;}b[d].focus();"text"==b[d].type&&b[d].select();}}function d(b){if(l==CKEDITOR.dialog._.currentTop){var c=b.data.getKeystroke(),d="rtl"==a.lang.dir;o=j=0;if(9==c||c==CKEDITOR.SHIFT+9)c=c==CKEDITOR.SHIFT+9,l._.tabBarMode?(c=c?t.call(l):u.call(l),l.selectPage(c),l._.tabs[c][0].focus()):e(c?-1:1),o=1;else if(c==CKEDITOR.ALT+121&&!l._.tabBarMode&&1<l.getPageCount())l._.tabBarMode=!0,l._.tabs[l._.currentTabId][0].focus(),o=1;else if((37==c||39==c)&&l._.tabBarMode)c=c==(d?39:37)?t.call(l):u.call(l),l.selectPage(c),l._.tabs[c][0].focus(),o=1;else if((13==c||32==c)&&l._.tabBarMode)this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,e(1),o=1;else if(13==c){c=b.data.getTarget();if(!c.is("a","button","select","textarea")&&(!c.is("input")||"button"!=c.$.type))(c=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(c.click,0,c),o=1;j=1;}else if(27==c)(c=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(c.click,0,c):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),j=1;else return;g(b);}}function g(a){o?a.data.preventDefault(1):j&&a.data.stopPropagation();}var f=CKEDITOR.dialog._.dialogDefinitions[b],h=CKEDITOR.tools.clone(W),m=a.config.dialog_buttonsOrder||"OS",k=a.lang.dir,i={},o,j;("OS"==m&&CKEDITOR.env.mac||"rtl"==m&&"ltr"==k||"ltr"==m&&"rtl"==k)&&h.buttons.reverse();f=CKEDITOR.tools.extend(f(a),h);f=CKEDITOR.tools.clone(f);f=new L(this,f);h=R(a);this._={editor:a,element:h.element,name:b,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1};this.parts=h.parts;CKEDITOR.tools.setTimeout(function(){a.fire("ariaWidget",this.parts.contents);},0,this);h={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"};h["rtl"==k?"right":"left"]=0;this.parts.dialog.setStyles(h);CKEDITOR.event.call(this);this.definition=f=CKEDITOR.fire("dialogDefinition",{name:b,definition:f},a).definition;if(!("removeDialogTabs"in a._)&&a.config.removeDialogTabs){h=a.config.removeDialogTabs.split(";");for(k=0;k<h.length;k++){if(m=h[k].split(":"),2==m.length){var n=m[0];i[n]||(i[n]=[]);i[n].push(m[1]);}}a._.removeDialogTabs=i;}if(a._.removeDialogTabs&&(i=a._.removeDialogTabs[b]))for(k=0;k<i.length;k++){f.removeContents(i[k]);}if(f.onLoad)this.on("load",f.onLoad);if(f.onShow)this.on("show",f.onShow);if(f.onHide)this.on("hide",f.onHide);if(f.onOk)this.on("ok",function(b){a.fire("saveSnapshot");setTimeout(function(){a.fire("saveSnapshot");},0);!1===f.onOk.call(this,b)&&(b.data.hide=!1);});if(f.onCancel)this.on("cancel",function(a){!1===f.onCancel.call(this,a)&&(a.data.hide=!1);});var l=this,p=function p(a){var b=l._.contents,c=!1,d;for(d in b){for(var f in b[d]){if(c=a.call(this,b[d][f]))return;}}};this.on("ok",function(a){p(function(b){if(b.validate){var c=b.validate(this),d="string"==typeof c||!1===c;d&&(a.data.hide=!1,a.stop());P.call(b,!d,"string"==typeof c?c:void 0);return d;}});},this,null,0);this.on("cancel",function(b){p(function(c){if(c.isChanged())return!a.config.dialog_noConfirmCancel&&!confirm(a.lang.common.confirmCancel)&&(b.data.hide=!1),!0;});},this,null,0);this.parts.close.on("click",function(a){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide();a.data.preventDefault();},this);this.changeFocus=e;var v=this._.element;a.focusManager.add(v,1);this.on("show",function(){v.on("keydown",d,this);if(CKEDITOR.env.gecko)v.on("keypress",g,this);});this.on("hide",function(){v.removeListener("keydown",d);CKEDITOR.env.gecko&&v.removeListener("keypress",g);p(function(a){Q.apply(a);});});this.on("iframeAdded",function(a){new CKEDITOR.dom.document(a.data.iframe.$.contentWindow.document).on("keydown",d,this,null,0);});this.on("show",function(){c();if(a.config.dialog_startupFocusTab&&1<l._.pageCount)l._.tabBarMode=!0,l._.tabs[l._.currentTabId][0].focus();else if(!this._.hasFocus)if(this._.currentFocusIndex=-1,f.onFocus){var b=f.onFocus.call(this);b&&b.focus();}else e(1);},this,null,4294967295);if(CKEDITOR.env.ie6Compat)this.on("load",function(){var a=this.getElement(),b=a.getFirst();b.remove();b.appendTo(a);},this);U(this);V(this);new CKEDITOR.dom.text(f.title,CKEDITOR.document).appendTo(this.parts.title);for(k=0;k<f.contents.length;k++){(i=f.contents[k])&&this.addPage(i);}this.parts.tabs.on("click",function(a){var b=a.data.getTarget();b.hasClass("cke_dialog_tab")&&(b=b.$.id,this.selectPage(b.substring(4,b.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,e(1)),a.data.preventDefault());},this);k=[];i=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:f.buttons},k).getChild();this.parts.footer.setHtml(k.join(""));for(k=0;k<i.length;k++){this._.buttons[i[k].id]=i[k];}};CKEDITOR.dialog.prototype={destroy:function destroy(){this.hide();this._.element.remove();},resize:function(){return function(a,b){if(!this._.contentSize||!(this._.contentSize.width==a&&this._.contentSize.height==b))CKEDITOR.dialog.fire("resize",{dialog:this,width:a,height:b},this._.editor),this.fire("resize",{width:a,height:b},this._.editor),this.parts.contents.setStyles({width:a+"px",height:b+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:a,height:b};};}(),getSize:function getSize(){var a=this._.element.getFirst();return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0};},move:function move(a,b,c){var e=this._.element.getFirst(),d="rtl"==this._.editor.lang.dir,g="fixed"==e.getComputedStyle("position");CKEDITOR.env.ie&&e.setStyle("zoom","100%");if(!g||!this._.position||!(this._.position.x==a&&this._.position.y==b))this._.position={x:a,y:b},g||(g=CKEDITOR.document.getWindow().getScrollPosition(),a+=g.x,b+=g.y),d&&(g=this.getSize(),a=CKEDITOR.document.getWindow().getViewPaneSize().width-g.width-a),b={top:(0<b?b:0)+"px"},b[d?"right":"left"]=(0<a?a:0)+"px",e.setStyles(b),c&&(this._.moved=1);},getPosition:function getPosition(){return CKEDITOR.tools.extend({},this._.position);},show:function show(){var a=this._.element,b=this.definition;!a.getParent()||!a.getParent().equals(CKEDITOR.document.getBody())?a.appendTo(CKEDITOR.document.getBody()):a.setStyle("display","block");this.resize(this._.contentSize&&this._.contentSize.width||b.width||b.minWidth,this._.contentSize&&this._.contentSize.height||b.height||b.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex);this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,J(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this);a.on("keydown",M);a.on("keyup",N);this._.hasFocus=!1;for(var c in b.contents){if(b.contents[c]){var a=b.contents[c],e=this._.tabs[a.id],d=a.requiredContent,g=0;if(e){for(var f in this._.contents[a.id]){var h=this._.contents[a.id][f];"hbox"==h.type||"vbox"==h.type||!h.getInputElement()||(h.requiredContent&&!this._.editor.activeFilter.check(h.requiredContent)?h.disable():(h.enable(),g++));}!g||d&&!this._.editor.activeFilter.check(d)?e[0].addClass("cke_dialog_tab_disabled"):e[0].removeClass("cke_dialog_tab_disabled");}}}CKEDITOR.tools.setTimeout(function(){this.layout();T(this);this.parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this);this.fire("show",{});this._.editor.fire("dialogShow",this);this._.parentDialog||this._.editor.focusManager.lock();this.foreach(function(a){a.setInitValue&&a.setInitValue();});},100,this);},layout:function layout(){var a=this.parts.dialog,b=this.getSize(),c=CKEDITOR.document.getWindow().getViewPaneSize(),e=(c.width-b.width)/2,d=(c.height-b.height)/2;CKEDITOR.env.ie6Compat||(b.height+(0<d?d:0)>c.height||b.width+(0<e?e:0)>c.width?a.setStyle("position","absolute"):a.setStyle("position","fixed"));this.move(this._.moved?this._.position.x:e,this._.moved?this._.position.y:d);},foreach:function foreach(a){for(var b in this._.contents){for(var c in this._.contents[b]){a.call(this,this._.contents[b][c]);}}return this;},reset:function(){var a=function a(_a8){_a8.reset&&_a8.reset(1);};return function(){this.foreach(a);return this;};}(),setupContent:function setupContent(){var a=arguments;this.foreach(function(b){b.setup&&b.setup.apply(b,a);});},commitContent:function commitContent(){var a=arguments;this.foreach(function(b){CKEDITOR.env.ie&&this._.currentFocusIndex==b.focusIndex&&b.getInputElement().$.blur();b.commit&&b.commit.apply(b,a);});},hide:function hide(){if(this.parts.dialog.isVisible()){this.fire("hide",{});this._.editor.fire("dialogHide",this);this.selectPage(this._.tabIdList[0]);var a=this._.element;a.setStyle("display","none");this.parts.dialog.setStyle("visibility","hidden");for(X(this);CKEDITOR.dialog._.currentTop!=this;){CKEDITOR.dialog._.currentTop.hide();}if(this._.parentDialog){var b=this._.parentDialog.getElement().getFirst();b.setStyle("z-index",parseInt(b.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2));}else K(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null;a.removeListener("keydown",M);a.removeListener("keyup",N);var c=this._.editor;c.focus();setTimeout(function(){c.focusManager.unlock();},0);}delete this._.parentDialog;this.foreach(function(a){a.resetInitValue&&a.resetInitValue();});}},addPage:function addPage(a){if(!a.requiredContent||this._.editor.filter.check(a.requiredContent)){for(var b=[],c=a.label?' title="'+CKEDITOR.tools.htmlEncode(a.label)+'"':"",e=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:a.elements,expand:!!a.expand,padding:a.padding,style:a.style||"width: 100%;"},b),d=this._.contents[a.id]={},g=e.getChild(),f=0;e=g.shift();){!e.notAllowed&&"hbox"!=e.type&&"vbox"!=e.type&&f++,d[e.id]=e,"function"==typeof e.getChild&&g.push.apply(g,e.getChild());}f||(a.hidden=!0);b=CKEDITOR.dom.element.createFromHtml(b.join(""));b.setAttribute("role","tabpanel");e=CKEDITOR.env;d="cke_"+a.id+"_"+CKEDITOR.tools.getNextNumber();c=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",c,a.hidden?' style="display:none"':"",' id="',d,'"',e.gecko&&!e.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',a.label,"</a>"].join(""));b.setAttribute("aria-labelledby",d);this._.tabs[a.id]=[c,b];this._.tabIdList.push(a.id);!a.hidden&&this._.pageCount++;this._.lastTab=c;this.updateStyle();b.setAttribute("name",a.id);b.appendTo(this.parts.contents);c.unselectable();this.parts.tabs.append(c);a.accessKey&&(O(this,this,"CTRL+"+a.accessKey,Y,Z),this._.accessKeyMap["CTRL+"+a.accessKey]=a.id);}},selectPage:function selectPage(a){if(this._.currentTabId!=a&&!this._.tabs[a][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:a,currentPage:this._.currentTabId})){for(var b in this._.tabs){var c=this._.tabs[b][0],e=this._.tabs[b][1];b!=a&&(c.removeClass("cke_dialog_tab_selected"),e.hide());e.setAttribute("aria-hidden",b!=a);}var d=this._.tabs[a];d[0].addClass("cke_dialog_tab_selected");CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(G(d[1]),d[1].show(),setTimeout(function(){G(d[1],1);},0)):d[1].show();this._.currentTabId=a;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,a);}},updateStyle:function updateStyle(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page");},hidePage:function hidePage(a){var b=this._.tabs[a]&&this._.tabs[a][0];b&&1!=this._.pageCount&&b.isVisible()&&(a==this._.currentTabId&&this.selectPage(t.call(this)),b.hide(),this._.pageCount--,this.updateStyle());},showPage:function showPage(a){if(a=this._.tabs[a]&&this._.tabs[a][0])a.show(),this._.pageCount++,this.updateStyle();},getElement:function getElement(){return this._.element;},getName:function getName(){return this._.name;},getContentElement:function getContentElement(a,b){var c=this._.contents[a];return c&&c[b];},getValueOf:function getValueOf(a,b){return this.getContentElement(a,b).getValue();},setValueOf:function setValueOf(a,b,c){return this.getContentElement(a,b).setValue(c);},getButton:function getButton(a){return this._.buttons[a];},click:function click(a){return this._.buttons[a].click();},disableButton:function disableButton(a){return this._.buttons[a].disable();},enableButton:function enableButton(a){return this._.buttons[a].enable();},getPageCount:function getPageCount(){return this._.pageCount;},getParentEditor:function getParentEditor(){return this._.editor;},getSelectedElement:function getSelectedElement(){return this.getParentEditor().getSelection().getSelectedElement();},addFocusable:function addFocusable(a,b){if("undefined"==typeof b)b=this._.focusList.length,this._.focusList.push(new H(this,a,b));else{this._.focusList.splice(b,0,new H(this,a,b));for(var c=b+1;c<this._.focusList.length;c++){this._.focusList[c].focusIndex++;}}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function add(a,b){if(!this._.dialogDefinitions[a]||"function"==typeof b)this._.dialogDefinitions[a]=b;},exists:function exists(a){return!!this._.dialogDefinitions[a];},getCurrent:function getCurrent(){return CKEDITOR.dialog._.currentTop;},isTabEnabled:function isTabEnabled(a,b,c){a=a.config.removeDialogTabs;return!(a&&a.match(RegExp("(?:^|;)"+b+":"+c+"(?:$|;)","i")));},okButton:function(){var a=function a(_a9,c){c=c||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:_a9.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function onClick(a){a=a.data.dialog;!1!==a.fire("ok",{hide:!0}).hide&&a.hide();}},c,!0);};a.type="button";a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b);},{type:"button"},!0);};return a;}(),cancelButton:function(){var a=function a(_a10,c){c=c||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:_a10.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function onClick(a){a=a.data.dialog;!1!==a.fire("cancel",{hide:!0}).hide&&a.hide();}},c,!0);};a.type="button";a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b);},{type:"button"},!0);};return a;}(),addUIElement:function addUIElement(a,b){this._.uiElementBuilders[a]=b;}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var W={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},z=function z(a,b,c){for(var e=0,d;d=a[e];e++){if(d.id==b||c&&d[c]&&(d=z(d[c],b,c)))return d;}return null;},A=function A(a,b,c,e,d){if(c){for(var g=0,f;f=a[g];g++){if(f.id==c)return a.splice(g,0,b),b;if(e&&f[e]&&(f=A(f[e],b,c,e,!0)))return f;}if(d)return null;}a.push(b);return b;},B=function B(a,b,c){for(var e=0,d;d=a[e];e++){if(d.id==b)return a.splice(e,1);if(c&&d[c]&&(d=B(d[c],b,c)))return d;}return null;},L=function L(a,b){this.dialog=a;for(var c=b.contents,e=0,d;d=c[e];e++){c[e]=d&&new I(a,d);}CKEDITOR.tools.extend(this,b);};L.prototype={getContents:function getContents(a){return z(this.contents,a);},getButton:function getButton(a){return z(this.buttons,a);},addContents:function addContents(a,b){return A(this.contents,a,b);},addButton:function addButton(a,b){return A(this.buttons,a,b);},removeContents:function removeContents(a){B(this.contents,a);},removeButton:function removeButton(a){B(this.buttons,a);}};I.prototype={get:function get(a){return z(this.elements,a,"children");},add:function add(a,b){return A(this.elements,a,b,"children");},remove:function remove(a){B(this.elements,a,"children");}};var F,w={},q,s={},M=function M(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,e=a.data.$.shiftKey,d=String.fromCharCode(a.data.$.keyCode);if((b=s[(b?"CTRL+":"")+(c?"ALT+":"")+(e?"SHIFT+":"")+d])&&b.length)b=b[b.length-1],b.keydown&&b.keydown.call(b.uiElement,b.dialog,b.key),a.data.preventDefault();},N=function N(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,e=a.data.$.shiftKey,d=String.fromCharCode(a.data.$.keyCode);if((b=s[(b?"CTRL+":"")+(c?"ALT+":"")+(e?"SHIFT+":"")+d])&&b.length)b=b[b.length-1],b.keyup&&(b.keyup.call(b.uiElement,b.dialog,b.key),a.data.preventDefault());},O=function O(a,b,c,e,d){(s[c]||(s[c]=[])).push({uiElement:a,dialog:b,key:c,keyup:d||a.accessKeyUp,keydown:e||a.accessKeyDown});},X=function X(a){for(var b in s){for(var c=s[b],e=c.length-1;0<=e;e--){(c[e].dialog==a||c[e].uiElement==a)&&c.splice(e,1);}0===c.length&&delete s[b];}},Z=function Z(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b]);},Y=function Y(){};(function(){CKEDITOR.ui.dialog={uiElement:function uiElement(a,b,c,e,d,g,f){if(!(4>arguments.length)){var h=(e.call?e(b):e)||"div",m=["<",h," "],k=(d&&d.call?d(b):d)||{},i=(g&&g.call?g(b):g)||{},o=(f&&f.call?f.call(this,a,b):f)||"",j=this.domId=i.id||CKEDITOR.tools.getNextId()+"_uiElement";this.id=b.id;b.requiredContent&&!a.getParentEditor().filter.check(b.requiredContent)&&(k.display="none",this.notAllowed=!0);i.id=j;var n={};b.type&&(n["cke_dialog_ui_"+b.type]=1);b.className&&(n[b.className]=1);b.disabled&&(n.cke_disabled=1);for(var l=i["class"]&&i["class"].split?i["class"].split(" "):[],j=0;j<l.length;j++){l[j]&&(n[l[j]]=1);}l=[];for(j in n){l.push(j);}i["class"]=l.join(" ");b.title&&(i.title=b.title);n=(b.style||"").split(";");b.align&&(l=b.align,k["margin-left"]="left"==l?0:"auto",k["margin-right"]="right"==l?0:"auto");for(j in k){n.push(j+":"+k[j]);}b.hidden&&n.push("display:none");for(j=n.length-1;0<=j;j--){""===n[j]&&n.splice(j,1);}0<n.length&&(i.style=(i.style?i.style+"; ":"")+n.join("; "));for(j in i){m.push(j+'="'+CKEDITOR.tools.htmlEncode(i[j])+'" ');}m.push(">",o,"</",h,">");c.push(m.join(""));(this._||(this._={})).dialog=a;"boolean"==typeof b.isChanged&&(this.isChanged=function(){return b.isChanged;});"function"==typeof b.isChanged&&(this.isChanged=b.isChanged);"function"==typeof b.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(a){return function(c){a.call(this,b.setValue.call(this,c));};}));"function"==typeof b.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(a){return function(){return b.getValue.call(this,a.call(this));};}));CKEDITOR.event.implementOn(this);this.registerEvents(b);this.accessKeyUp&&this.accessKeyDown&&b.accessKey&&O(this,a,"CTRL+"+b.accessKey);var p=this;a.on("load",function(){var b=p.getInputElement();if(b){var c=p.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?"cke_dialog_ui_focused":"";b.on("focus",function(){a._.tabBarMode=false;a._.hasFocus=true;p.fire("focus");c&&this.addClass(c);});b.on("blur",function(){p.fire("blur");c&&this.removeClass(c);});}});CKEDITOR.tools.extend(this,b);this.keyboardFocusable&&(this.tabIndex=b.tabIndex||0,this.focusIndex=a._.focusList.push(this)-1,this.on("focus",function(){a._.currentFocusIndex=p.focusIndex;}));}},hbox:function hbox(a,b,c,e,d){if(!(4>arguments.length)){this._||(this._={});var g=this._.children=b,f=d&&d.widths||null,h=d&&d.height||null,m,k={role:"presentation"};d&&d.align&&(k.align=d.align);CKEDITOR.ui.dialog.uiElement.call(this,a,d||{type:"hbox"},e,"table",{},k,function(){var a=['<tbody><tr class="cke_dialog_ui_hbox">'];for(m=0;m<c.length;m++){var b="cke_dialog_ui_hbox_child",e=[];0===m&&(b="cke_dialog_ui_hbox_first");m==c.length-1&&(b="cke_dialog_ui_hbox_last");a.push('<td class="',b,'" role="presentation" ');f?f[m]&&e.push("width:"+r(f[m])):e.push("width:"+Math.floor(100/c.length)+"%");h&&e.push("height:"+r(h));d&&void 0!=d.padding&&e.push("padding:"+r(d.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&g[m].align&&e.push("text-align:"+g[m].align);0<e.length&&a.push('style="'+e.join("; ")+'" ');a.push(">",c[m],"</td>");}a.push("</tr></tbody>");return a.join("");});}},vbox:function vbox(a,b,c,e,d){if(!(3>arguments.length)){this._||(this._={});var g=this._.children=b,f=d&&d.width||null,h=d&&d.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,a,d||{type:"vbox"},e,"div",null,{role:"presentation"},function(){var b=['<table role="presentation" cellspacing="0" border="0" '];b.push('style="');d&&d.expand&&b.push("height:100%;");b.push("width:"+r(f||"100%"),";");CKEDITOR.env.webkit&&b.push("float:none;");b.push('"');b.push('align="',CKEDITOR.tools.htmlEncode(d&&d.align||("ltr"==a.getParentEditor().lang.dir?"left":"right")),'" ');b.push("><tbody>");for(var e=0;e<c.length;e++){var i=[];b.push('<tr><td role="presentation" ');f&&i.push("width:"+r(f||"100%"));h?i.push("height:"+r(h[e])):d&&d.expand&&i.push("height:"+Math.floor(100/c.length)+"%");d&&void 0!=d.padding&&i.push("padding:"+r(d.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&g[e].align&&i.push("text-align:"+g[e].align);0<i.length&&b.push('style="',i.join("; "),'" ');b.push(' class="cke_dialog_ui_vbox_child">',c[e],"</td></tr>");}b.push("</tbody></table>");return b.join("");});}}};})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function getElement(){return CKEDITOR.document.getById(this.domId);},getInputElement:function getInputElement(){return this.getElement();},getDialog:function getDialog(){return this._.dialog;},setValue:function setValue(a,b){this.getInputElement().setValue(a);!b&&this.fire("change",{value:a});return this;},getValue:function getValue(){return this.getInputElement().getValue();},isChanged:function isChanged(){return!1;},selectParentTab:function selectParentTab(){for(var a=this.getInputElement();(a=a.getParent())&&-1==a.$.className.search("cke_dialog_page_contents");){;}if(!a)return this;a=a.getAttribute("name");this._.dialog._.currentTabId!=a&&this._.dialog.selectPage(a);return this;},focus:function focus(){this.selectParentTab().getInputElement().focus();return this;},registerEvents:function registerEvents(a){var b=/^on([A-Z]\w+)/,c,e=function e(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a);});},d;for(d in a){if(c=d.match(b))this.eventProcessors[d]?this.eventProcessors[d].call(this,this._.dialog,a[d]):e(this,this._.dialog,c[1].toLowerCase(),a[d]);}return this;},eventProcessors:{onLoad:function onLoad(a,b){a.on("load",b,this);},onShow:function onShow(a,b){a.on("show",b,this);},onHide:function onHide(a,b){a.on("hide",b,this);}},accessKeyDown:function accessKeyDown(){this.focus();},accessKeyUp:function accessKeyUp(){},disable:function disable(){var a=this.getElement();this.getInputElement().setAttribute("disabled","true");a.addClass("cke_disabled");},enable:function enable(){var a=this.getElement();this.getInputElement().removeAttribute("disabled");a.removeClass("cke_disabled");},isEnabled:function isEnabled(){return!this.getElement().hasClass("cke_disabled");},isVisible:function isVisible(){return this.getInputElement().isVisible();},isFocusable:function isFocusable(){return!this.isEnabled()||!this.isVisible()?!1:!0;}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement(),{getChild:function getChild(a){if(1>arguments.length)return this._.children.concat();a.splice||(a=[a]);return 2>a.length?this._.children[a[0]]:this._.children[a[0]]&&this._.children[a[0]].getChild?this._.children[a[0]].getChild(a.slice(1,a.length)):null;}},!0);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox();(function(){var a={build:function build(a,c,e){for(var d=c.children,g,f=[],h=[],m=0;m<d.length&&(g=d[m]);m++){var k=[];f.push(k);h.push(CKEDITOR.dialog._.uiElementBuilders[g.type].build(a,g,k));}return new CKEDITOR.ui.dialog[c.type](a,h,f,e,c);}};CKEDITOR.dialog.addUIElement("hbox",a);CKEDITOR.dialog.addUIElement("vbox",a);})();CKEDITOR.dialogCommand=function(a,b){this.dialogName=a;CKEDITOR.tools.extend(this,b,!0);};CKEDITOR.dialogCommand.prototype={exec:function exec(a){a.openDialog(this.dialogName);},canUndo:!1,editorFocus:1};(function(){var a=/^([a]|[^a])+$/,b=/^\d*$/,c=/^\d*(?:\.\d+)?$/,e=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,d=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,g=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function functions(){var a=arguments;return function(){var b=this&&this.getValue?this.getValue():a[0],c=void 0,d=CKEDITOR.VALIDATE_AND,e=[],g;for(g=0;g<a.length;g++){if("function"==typeof a[g])e.push(a[g]);else break;}g<a.length&&"string"==typeof a[g]&&(c=a[g],g++);g<a.length&&"number"==typeof a[g]&&(d=a[g]);var j=d==CKEDITOR.VALIDATE_AND?!0:!1;for(g=0;g<e.length;g++){j=d==CKEDITOR.VALIDATE_AND?j&&e[g](b):j||e[g](b);}return!j?c:!0;};},regex:function regex(a,b){return function(c){c=this&&this.getValue?this.getValue():c;return!a.test(c)?b:!0;};},notEmpty:function notEmpty(b){return this.regex(a,b);},integer:function integer(a){return this.regex(b,a);},number:function number(a){return this.regex(c,a);},cssLength:function cssLength(a){return this.functions(function(a){return d.test(CKEDITOR.tools.trim(a));},a);},htmlLength:function htmlLength(a){return this.functions(function(a){return e.test(CKEDITOR.tools.trim(a));},a);},inlineStyle:function inlineStyle(a){return this.functions(function(a){return g.test(CKEDITOR.tools.trim(a));},a);},equals:function equals(a,b){return this.functions(function(b){return b==a;},b);},notEqual:function notEqual(a,b){return this.functions(function(b){return b!=a;},b);}};CKEDITOR.on("instanceDestroyed",function(a){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var b;b=CKEDITOR.dialog._.currentTop;){b.hide();}for(var c in w){w[c].remove();}w={};}var a=a.editor._.storedDialogs,d;for(d in a){a[d].destroy();}});})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function openDialog(a,b){var c=null,e=CKEDITOR.dialog._.dialogDefinitions[a];null===CKEDITOR.dialog._.currentTop&&J(this);if("function"==typeof e)c=this._.storedDialogs||(this._.storedDialogs={}),c=c[a]||(c[a]=new CKEDITOR.dialog(this,a)),b&&b.call(c,c),c.show();else{if("failed"==e)throw K(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+a+'" failed when loading definition.');"string"==typeof e&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[a]&&(CKEDITOR.dialog._.dialogDefinitions[a]="failed");this.openDialog(a,b);},this,0,1);}CKEDITOR.skin.loadPart("dialog");return c;}});})();CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function init(t){t.on("doubleclick",function(u){u.data.dialog&&t.openDialog(u.data.dialog);},null,null,999);}});CKEDITOR.plugins.add("about",{requires:"dialog",init:function init(a){var b=a.addCommand("about",new CKEDITOR.dialogCommand("about"));b.modes={wysiwyg:1,source:1};b.canUndo=!1;b.readOnly=1;a.ui.addButton&&a.ui.addButton("About",{label:a.lang.about.title,command:"about",toolbar:"about"});CKEDITOR.dialog.add("about",this.path+"dialogs/about.js");}});(function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function init(b){var c=this;b.addCommand("a11yHelp",{exec:function exec(){var a=b.langCode,a=c.availableLangs[a]?a:c.availableLangs[a.replace(/-.*/,"")]?a.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+a+".js"),function(){b.lang.a11yhelp=c.langEntries[a];b.openDialog("a11yHelp");});},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1});b.setKeystroke(CKEDITOR.ALT+48,"a11yHelp");CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js");b.on("ariaEditorHelpLabel",function(a){a.data.label=b.lang.common.editorHelp;});}});})();(function(){function f(c){var a=this.att,c=c&&c.hasAttribute(a)&&c.getAttribute(a)||"";void 0!==c&&this.setValue(c);}function g(){for(var c,a=0;a<arguments.length;a++){if(arguments[a]instanceof CKEDITOR.dom.element){c=arguments[a];break;}}if(c){var a=this.att,b=this.getValue();b?c.setAttribute(a,b):c.removeAttribute(a,b);}}var i={id:1,dir:1,classes:1,styles:1};CKEDITOR.plugins.add("dialogadvtab",{requires:"dialog",allowedContent:function allowedContent(c){c||(c=i);var a=[];c.id&&a.push("id");c.dir&&a.push("dir");var b="";a.length&&(b+="["+a.join(",")+"]");c.classes&&(b+="(*)");c.styles&&(b+="{*}");return b;},createAdvancedTab:function createAdvancedTab(c,a,b){a||(a=i);var d=c.lang.common,h={id:"advanced",label:d.advancedTab,title:d.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},e=[];if(a.id||a.dir)a.id&&e.push({id:"advId",att:"id",type:"text",requiredContent:b?b+"[id]":null,label:d.id,setup:f,commit:g}),a.dir&&e.push({id:"advLangDir",att:"dir",type:"select",requiredContent:b?b+"[dir]":null,label:d.langDir,"default":"",style:"width:100%",items:[[d.notSet,""],[d.langDirLTR,"ltr"],[d.langDirRTL,"rtl"]],setup:f,commit:g}),h.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(e)});if(a.styles||a.classes)e=[],a.styles&&e.push({id:"advStyles",att:"style",type:"text",requiredContent:b?b+"{cke-xyz}":null,label:d.styles,"default":"",validate:CKEDITOR.dialog.validate.inlineStyle(d.invalidInlineStyle),onChange:function onChange(){},getStyle:function getStyle(a,c){var b=this.getValue().match(RegExp("(?:^|;)\\s*"+a+"\\s*:\\s*([^;]*)","i"));return b?b[1]:c;},updateStyle:function updateStyle(a,b){var d=this.getValue(),e=c.document.createElement("span");e.setAttribute("style",d);e.setStyle(a,b);d=CKEDITOR.tools.normalizeCssText(e.getAttribute("style"));this.setValue(d,1);},setup:f,commit:g}),a.classes&&e.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",requiredContent:b?b+"(cke-xyz)":null,label:d.cssClasses,"default":"",setup:f,commit:g}]}),h.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(e)});return h;}});})();CKEDITOR.plugins.add("basicstyles",{init:function init(c){var e=0,d=function d(g,_d,b,a){if(a){var a=new CKEDITOR.style(a),f=h[b];f.unshift(a);c.attachStyleStateChange(a,function(a){!c.readOnly&&c.getCommand(b).setState(a);});c.addCommand(b,new CKEDITOR.styleCommand(a,{contentForms:f}));c.ui.addButton&&c.ui.addButton(g,{label:_d,command:b,toolbar:"basicstyles,"+(e+=10)});}},h={bold:["strong","b",["span",function(a){a=a.styles["font-weight"];return"bold"==a||700<=+a;}]],italic:["em","i",["span",function(a){return"italic"==a.styles["font-style"];}]],underline:["u",["span",function(a){return"underline"==a.styles["text-decoration"];}]],strike:["s","strike",["span",function(a){return"line-through"==a.styles["text-decoration"];}]],subscript:["sub"],superscript:["sup"]},b=c.config,a=c.lang.basicstyles;d("Bold",a.bold,"bold",b.coreStyles_bold);d("Italic",a.italic,"italic",b.coreStyles_italic);d("Underline",a.underline,"underline",b.coreStyles_underline);d("Strike",a.strike,"strike",b.coreStyles_strike);d("Subscript",a.subscript,"subscript",b.coreStyles_subscript);d("Superscript",a.superscript,"superscript",b.coreStyles_superscript);c.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]]);}});CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"};CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"};CKEDITOR.config.coreStyles_underline={element:"u"};CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"};CKEDITOR.config.coreStyles_subscript={element:"sub"};CKEDITOR.config.coreStyles_superscript={element:"sup"};(function(){function n(a,f,d,b){if(!a.isReadOnly()&&!a.equals(d.editable())){CKEDITOR.dom.element.setMarker(b,a,"bidi_processed",1);for(var b=a,c=d.editable();(b=b.getParent())&&!b.equals(c);){if(b.getCustomData("bidi_processed")){a.removeStyle("direction");a.removeAttribute("dir");return;}}b="useComputedState"in d.config?d.config.useComputedState:1;if((b?a.getComputedStyle("direction"):a.getStyle("direction")||a.hasAttribute("dir"))!=f)a.removeStyle("direction"),b?(a.removeAttribute("dir"),f!=a.getComputedStyle("direction")&&a.setAttribute("dir",f)):a.setAttribute("dir",f),d.forceNextSelectionCheck();}}function r(a,f,d){var b=a.getCommonAncestor(!1,!0),a=a.clone();a.enlarge(d==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(a.checkBoundaryOfElement(b,CKEDITOR.START)&&a.checkBoundaryOfElement(b,CKEDITOR.END)){for(var c;b&&b.type==CKEDITOR.NODE_ELEMENT&&(c=b.getParent())&&1==c.getChildCount()&&!(b.getName()in f);){b=c;}return b.type==CKEDITOR.NODE_ELEMENT&&b.getName()in f&&b;}}function m(a){return{context:"p",allowedContent:{"h1 h2 h3 h4 h5 h6 table ul ol blockquote div tr p div li td":{propertiesOnly:!0,attributes:"dir"}},requiredContent:"p[dir]",refresh:function refresh(a,d){var b=a.config.useComputedState,c,b=void 0===b||b;if(!b){c=d.lastElement;for(var h=a.editable();c&&!(c.getName()in q||c.equals(h));){var e=c.getParent();if(!e)break;c=e;}}c=c||d.block||d.blockLimit;c.equals(a.editable())&&(h=a.getSelection().getRanges()[0].getEnclosedNode())&&h.type==CKEDITOR.NODE_ELEMENT&&(c=h);c&&(b=b?c.getComputedStyle("direction"):c.getStyle("direction")||c.getAttribute("dir"),a.getCommand("bidirtl").setState("rtl"==b?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),a.getCommand("bidiltr").setState("ltr"==b?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF));b=(d.block||d.blockLimit||a.editable()).getDirection(1);if(b!=(a._.selDir||a.lang.dir))a._.selDir=b,a.fire("contentDirChanged",b);},exec:function exec(f){var d=f.getSelection(),b=f.config.enterMode,c=d.getRanges();if(c&&c.length){for(var h={},e=d.createBookmarks(),c=c.createIterator(),g,j=0;g=c.getNextRange(1);){var i=g.getEnclosedNode();if(!i||i&&!(i.type==CKEDITOR.NODE_ELEMENT&&i.getName()in o))i=r(g,p,b);i&&n(i,a,f,h);var k=new CKEDITOR.dom.walker(g),l=e[j].startNode,m=e[j++].endNode;k.evaluator=function(a){return!!(a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in p&&!(a.getName()==(b==CKEDITOR.ENTER_P?"p":"div")&&a.getParent().type==CKEDITOR.NODE_ELEMENT&&"blockquote"==a.getParent().getName())&&a.getPosition(l)&CKEDITOR.POSITION_FOLLOWING&&(a.getPosition(m)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING);};for(;i=k.next();){n(i,a,f,h);}g=g.createIterator();for(g.enlargeBr=b!=CKEDITOR.ENTER_BR;i=g.getNextParagraph(b==CKEDITOR.ENTER_P?"p":"div");){n(i,a,f,h);}}CKEDITOR.dom.element.clearAllMarkers(h);f.forceNextSelectionCheck();d.selectBookmarks(e);f.focus();}}};}function s(a){var f=a==j.setAttribute,d=a==j.removeAttribute,b=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(c,h){if(!this.isReadOnly()){var e;if(e=c==(f||d?"dir":"direction")||"style"==c&&(d||b.test(h))){a:{e=this;for(var g=e.getDocument().getBody().getParent();e;){if(e.equals(g)){e=!1;break a;}e=e.getParent();}e=!0;}e=!e;}if(e&&(e=this.getDirection(1),g=a.apply(this,arguments),e!=this.getDirection(1)))return this.getDocument().fire("dirChanged",this),g;}return a.apply(this,arguments);};}var p={table:1,ul:1,ol:1,blockquote:1,div:1},o={},q={};CKEDITOR.tools.extend(o,p,{tr:1,p:1,div:1,li:1});CKEDITOR.tools.extend(q,o,{td:1});CKEDITOR.plugins.add("bidi",{init:function init(a){function f(b,c,d,e,f){a.addCommand(d,new CKEDITOR.command(a,e));a.ui.addButton&&a.ui.addButton(b,{label:c,command:d,toolbar:"bidi,"+f});}if(!a.blockless){var d=a.lang.bidi;f("BidiLtr",d.ltr,"bidiltr",m("ltr"),10);f("BidiRtl",d.rtl,"bidirtl",m("rtl"),20);a.on("contentDom",function(){a.document.on("dirChanged",function(b){a.fire("dirChanged",{node:b.data,dir:b.data.getDirection(1)});});});a.on("contentDirChanged",function(b){var b=(a.lang.dir!=b.data?"add":"remove")+"Class",c=a.ui.space(a.config.toolbarLocation);if(c)c[b]("cke_mixed_dir_content");});}}});for(var j=CKEDITOR.dom.element.prototype,l=["setStyle","removeStyle","setAttribute","removeAttribute"],k=0;k<l.length;k++){j[l[k]]=CKEDITOR.tools.override(j[l[k]],s);}})();(function(){var k={exec:function exec(g){var a=g.getCommand("blockquote").state,i=g.getSelection(),c=i&&i.getRanges()[0];if(c){var h=i.createBookmarks();if(CKEDITOR.env.ie){var e=h[0].startNode,b=h[0].endNode,d;if(e&&"blockquote"==e.getParent().getName())for(d=e;d=d.getNext();){if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){e.move(d,!0);break;}}if(b&&"blockquote"==b.getParent().getName())for(d=b;d=d.getPrevious();){if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){b.move(d);break;}}}var f=c.createIterator();f.enlargeBr=g.config.enterMode!=CKEDITOR.ENTER_BR;if(a==CKEDITOR.TRISTATE_OFF){for(e=[];a=f.getNextParagraph();){e.push(a);}1>e.length&&(a=g.document.createElement(g.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),b=h.shift(),c.insertNode(a),a.append(new CKEDITOR.dom.text("﻿",g.document)),c.moveToBookmark(b),c.selectNodeContents(a),c.collapse(!0),b=c.createBookmark(),e.push(a),h.unshift(b));d=e[0].getParent();c=[];for(b=0;b<e.length;b++){a=e[b],d=d.getCommonAncestor(a.getParent());}for(a={table:1,tbody:1,tr:1,ol:1,ul:1};a[d.getName()];){d=d.getParent();}for(b=null;0<e.length;){for(a=e.shift();!a.getParent().equals(d);){a=a.getParent();}a.equals(b)||c.push(a);b=a;}for(;0<c.length;){if(a=c.shift(),"blockquote"==a.getName()){for(b=new CKEDITOR.dom.documentFragment(g.document);a.getFirst();){b.append(a.getFirst().remove()),e.push(b.getLast());}b.replace(a);}else e.push(a);}c=g.document.createElement("blockquote");for(c.insertBefore(e[0]);0<e.length;){a=e.shift(),c.append(a);}}else if(a==CKEDITOR.TRISTATE_ON){b=[];for(d={};a=f.getNextParagraph();){for(e=c=null;a.getParent();){if("blockquote"==a.getParent().getName()){c=a.getParent();e=a;break;}a=a.getParent();}c&&e&&!e.getCustomData("blockquote_moveout")&&(b.push(e),CKEDITOR.dom.element.setMarker(d,e,"blockquote_moveout",!0));}CKEDITOR.dom.element.clearAllMarkers(d);a=[];e=[];for(d={};0<b.length;){f=b.shift(),c=f.getParent(),f.getPrevious()?f.getNext()?(f.breakParent(f.getParent()),e.push(f.getNext())):f.remove().insertAfter(c):f.remove().insertBefore(c),c.getCustomData("blockquote_processed")||(e.push(c),CKEDITOR.dom.element.setMarker(d,c,"blockquote_processed",!0)),a.push(f);}CKEDITOR.dom.element.clearAllMarkers(d);for(b=e.length-1;0<=b;b--){c=e[b];a:{d=c;for(var f=0,k=d.getChildCount(),j=void 0;f<k&&(j=d.getChild(f));f++){if(j.type==CKEDITOR.NODE_ELEMENT&&j.isBlockBoundary()){d=!1;break a;}}d=!0;}d&&c.remove();}if(g.config.enterMode==CKEDITOR.ENTER_BR)for(c=!0;a.length;){if(f=a.shift(),"div"==f.getName()){b=new CKEDITOR.dom.documentFragment(g.document);c&&f.getPrevious()&&!(f.getPrevious().type==CKEDITOR.NODE_ELEMENT&&f.getPrevious().isBlockBoundary())&&b.append(g.document.createElement("br"));for(c=f.getNext()&&!(f.getNext().type==CKEDITOR.NODE_ELEMENT&&f.getNext().isBlockBoundary());f.getFirst();){f.getFirst().remove().appendTo(b);}c&&b.append(g.document.createElement("br"));b.replace(f);c=!1;}}}i.selectBookmarks(h);g.focus();}},refresh:function refresh(g,a){this.setState(g.elementPath(a.block||a.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function init(g){g.blockless||(g.addCommand("blockquote",k),g.ui.addButton&&g.ui.addButton("Blockquote",{label:g.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}));}});})();(function(){function v(b){function a(){var e=b.editable();e.on(p,function(b){(!CKEDITOR.env.ie||!n)&&u(b);});CKEDITOR.env.ie&&e.on("paste",function(e){q||(g(),e.data.preventDefault(),u(e),h("paste")||b.openDialog("paste"));});CKEDITOR.env.ie&&(e.on("contextmenu",i,null,null,0),e.on("beforepaste",function(b){b.data&&!b.data.$.ctrlKey&&!b.data.$.shiftKey&&i();},null,null,0));e.on("beforecut",function(){!n&&j(b);});var a;e.attachListener(CKEDITOR.env.ie?e:b.document.getDocumentElement(),"mouseup",function(){a=setTimeout(function(){r();},0);});b.on("destroy",function(){clearTimeout(a);});e.on("keyup",r);}function c(e){return{type:e,canUndo:"cut"==e,startDisabled:!0,exec:function exec(){"cut"==this.type&&j();var e;var a=this.type;if(CKEDITOR.env.ie)e=h(a);else try{e=b.document.$.execCommand(a,!1,null);}catch(d){e=!1;}e||alert(b.lang.clipboard[this.type+"Error"]);return e;}};}function d(){return{canUndo:!1,async:!0,exec:function exec(b,a){var d=function d(a,_d2){a&&f(a.type,a.dataValue,!!_d2);b.fire("afterCommandExec",{name:"paste",command:c,returnValue:!!a});},c=this;"string"==typeof a?d({type:"auto",dataValue:a},1):b.getClipboardData(d);}};}function g(){q=1;setTimeout(function(){q=0;},100);}function i(){n=1;setTimeout(function(){n=0;},10);}function h(e){var a=b.document,d=a.getBody(),c=!1,j=function j(){c=!0;};d.on(e,j);(7<CKEDITOR.env.version?a.$:a.$.selection.createRange()).execCommand(e);d.removeListener(e,j);return c;}function f(e,a,d){e={type:e};if(d&&!1===b.fire("beforePaste",e)||!a)return!1;e.dataValue=a;return b.fire("paste",e);}function j(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var e=b.getSelection(),a,d,c;if(e.getType()==CKEDITOR.SELECTION_ELEMENT&&(a=e.getSelectedElement()))d=e.getRanges()[0],c=b.document.createText(""),c.insertBefore(a),d.setStartBefore(c),d.setEndAfter(a),e.selectRanges([d]),setTimeout(function(){a.getParent()&&(c.remove(),e.selectElement(a));},0);}}function l(a,d){var c=b.document,j=b.editable(),l=function l(b){b.cancel();},g;if(!c.getById("cke_pastebin")){var i=b.getSelection(),s=i.createBookmarks();CKEDITOR.env.ie&&i.root.fire("selectionchange");var k=new CKEDITOR.dom.element((CKEDITOR.env.webkit||j.is("body"))&&!CKEDITOR.env.ie?"body":"div",c);k.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var f=0,c=c.getWindow();CKEDITOR.env.webkit?(j.append(k),k.addClass("cke_editable"),j.is("body")||(f="static"!=j.getComputedStyle("position")?j:CKEDITOR.dom.element.get(j.$.offsetParent),f=f.getDocumentPosition().y)):j.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(k);k.setStyles({position:"absolute",top:c.getScrollPosition().y-f+10+"px",width:"1px",height:Math.max(1,c.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0});(f=k.getParent().isReadOnly())?(k.setOpacity(0),k.setAttribute("contenteditable",!0)):k.setStyle("ltr"==b.config.contentsLangDirection?"left":"right","-1000px");b.on("selectionChange",l,null,null,0);if(CKEDITOR.env.webkit||CKEDITOR.env.gecko)g=j.once("blur",l,null,null,-100);f&&k.focus();f=new CKEDITOR.dom.range(k);f.selectNodeContents(k);var h=f.select();CKEDITOR.env.ie&&(g=j.once("blur",function(){b.lockSelection(h);}));var m=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){if(CKEDITOR.env.webkit)CKEDITOR.document.getBody().$.scrollTop=m;g&&g.removeListener();CKEDITOR.env.ie&&j.focus();i.selectBookmarks(s);k.remove();var a;if(CKEDITOR.env.webkit&&(a=k.getFirst())&&a.is&&a.hasClass("Apple-style-span"))k=a;b.removeListener("selectionChange",l);d(k.getHtml());},0);}}function s(){if(CKEDITOR.env.ie){b.focus();g();var a=b.focusManager;a.lock();if(b.editable().fire(p)&&!h("paste"))return a.unlock(),!1;a.unlock();}else try{if(b.editable().fire(p)&&!b.document.$.execCommand("Paste",!1,null))throw 0;}catch(d){return!1;}return!0;}function o(a){if("wysiwyg"==b.mode)switch(a.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:a=b.editable();g();!CKEDITOR.env.ie&&a.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:b.fire("saveSnapshot"),setTimeout(function(){b.fire("saveSnapshot");},50);}}function u(a){var d={type:"auto"},c=b.fire("beforePaste",d);l(a,function(b){b=b.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,"");c&&f(d.type,b,0,1);});}function r(){if("wysiwyg"==b.mode){var a=m("paste");b.getCommand("cut").setState(m("cut"));b.getCommand("copy").setState(m("copy"));b.getCommand("paste").setState(a);b.fire("pasteState",a);}}function m(a){if(t&&a in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==a)return CKEDITOR.TRISTATE_OFF;var a=b.getSelection(),d=a.getRanges();return a.getType()==CKEDITOR.SELECTION_NONE||1==d.length&&d[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF;}var n=0,q=0,t=0,p=CKEDITOR.env.ie?"beforepaste":"paste";(function(){b.on("key",o);b.on("contentDom",a);b.on("selectionChange",function(b){t=b.data.selection.getRanges()[0].checkReadOnly();r();});b.contextMenu&&b.contextMenu.addListener(function(b,a){t=a.getRanges()[0].checkReadOnly();return{cut:m("cut"),copy:m("copy"),paste:m("paste")};});})();(function(){function a(d,c,j,e,l){var g=b.lang.clipboard[c];b.addCommand(c,j);b.ui.addButton&&b.ui.addButton(d,{label:g,command:c,toolbar:"clipboard,"+e});b.addMenuItems&&b.addMenuItem(c,{label:g,command:c,group:"clipboard",order:l});}a("Cut","cut",c("cut"),10,1);a("Copy","copy",c("copy"),20,4);a("Paste","paste",d(),30,8);})();b.getClipboardData=function(a,d){function c(a){a.removeListener();a.cancel();d(a.data);}function j(a){a.removeListener();a.cancel();i=!0;d({type:f,dataValue:a.data});}function l(){this.customTitle=a&&a.title;}var g=!1,f="auto",i=!1;d||(d=a,a=null);b.on("paste",c,null,null,0);b.on("beforePaste",function(a){a.removeListener();g=true;f=a.data.type;},null,null,1E3);!1===s()&&(b.removeListener("paste",c),g&&b.fire("pasteDialog",l)?(b.on("pasteDialogCommit",j),b.on("dialogHide",function(a){a.removeListener();a.data.removeListener("pasteDialogCommit",j);setTimeout(function(){i||d(null);},10);})):d(null));};}function w(b){if(CKEDITOR.env.webkit){if(!b.match(/^[^<]*$/g)&&!b.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html";}else if(CKEDITOR.env.ie){if(!b.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!b.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html";}else if(CKEDITOR.env.gecko){if(!b.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html";}else return"html";return"htmlifiedtext";}function x(b,a){function c(a){return CKEDITOR.tools.repeat("</p><p>",~~(a/2))+(1==a%2?"<br>":"");}a=a.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>");a=a.replace(/<\/?[A-Z]+>/g,function(a){return a.toLowerCase();});if(a.match(/^[^<]$/))return a;CKEDITOR.env.webkit&&-1<a.indexOf("<div>")&&(a=a.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),a.match(/<div>(<br>|)<\/div>/)&&(a="<p>"+a.replace(/(<div>(<br>|)<\/div>)+/g,function(a){return c(a.split("</div><div>").length+1);})+"</p>"),a=a.replace(/<\/div><div>/g,"<br>"),a=a.replace(/<\/?div>/g,""));CKEDITOR.env.gecko&&b.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(a=a.replace(/^<br><br>$/,"<br>")),-1<a.indexOf("<br><br>")&&(a="<p>"+a.replace(/(<br>){2,}/g,function(a){return c(a.length/4);})+"</p>"));return o(b,a);}function y(){var b=new CKEDITOR.htmlParser.filter(),a={blockquote:1,dl:1,fieldset:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ol:1,p:1,table:1,ul:1},c=CKEDITOR.tools.extend({br:0},CKEDITOR.dtd.$inline),d={p:1,br:1,"cke:br":1},g=CKEDITOR.dtd,i=CKEDITOR.tools.extend({area:1,basefont:1,embed:1,iframe:1,map:1,object:1,param:1},CKEDITOR.dtd.$nonBodyContent,CKEDITOR.dtd.$cdata),h=function h(a){delete a.name;a.add(new CKEDITOR.htmlParser.text(" "));},f=function f(a){for(var b=a,c;(b=b.next)&&b.name&&b.name.match(/^h\d$/);){c=new CKEDITOR.htmlParser.element("cke:br");c.isEmpty=!0;for(a.add(c);c=b.children.shift();){a.add(c);}}};b.addRules({elements:{h1:f,h2:f,h3:f,h4:f,h5:f,h6:f,img:function img(a){var a=CKEDITOR.tools.trim(a.attributes.alt||""),b=" ";a&&!a.match(/(^http|\.(jpe?g|gif|png))/i)&&(b=" ["+a+"] ");return new CKEDITOR.htmlParser.text(b);},td:h,th:h,$:function $(b){var f=b.name,h;if(i[f])return!1;b.attributes={};if("br"==f)return b;if(a[f])b.name="p";else if(c[f])delete b.name;else if(g[f]){h=new CKEDITOR.htmlParser.element("cke:br");h.isEmpty=!0;if(CKEDITOR.dtd.$empty[f])return h;b.add(h,0);h=h.clone();h.isEmpty=!0;b.add(h);delete b.name;}d[b.name]||delete b.name;return b;}}},{applyToAll:!0});return b;}function z(b,a,c){var a=new CKEDITOR.htmlParser.fragment.fromHtml(a),d=new CKEDITOR.htmlParser.basicWriter();a.writeHtml(d,c);var a=d.getHtml(),a=a.replace(/\s*(<\/?[a-z:]+ ?\/?>)\s*/g,"$1").replace(/(<cke:br \/>){2,}/g,"<cke:br />").replace(/(<cke:br \/>)(<\/?p>|<br \/>)/g,"$2").replace(/(<\/?p>|<br \/>)(<cke:br \/>)/g,"$1").replace(/<(cke:)?br( \/)?>/g,"<br>").replace(/<p><\/p>/g,""),g=0,a=a.replace(/<\/?p>/g,function(a){if("<p>"==a){if(1<++g)return"</p><p>";}else if(0<--g)return"</p><p>";return a;}).replace(/<p><\/p>/g,"");return o(b,a);}function o(b,a){b.enterMode==CKEDITOR.ENTER_BR?a=a.replace(/(<\/p><p>)+/g,function(a){return CKEDITOR.tools.repeat("<br>",2*(a.length/7));}).replace(/<\/?p>/g,""):b.enterMode==CKEDITOR.ENTER_DIV&&(a=a.replace(/<(\/)?p>/g,"<$1div>"));return a;}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function init(b){var a;v(b);CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js"));b.on("paste",function(a){var b=a.data.dataValue,g=CKEDITOR.dtd.$block;-1<b.indexOf("Apple-")&&(b=b.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=a.data.type&&(b=b.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(a,b){return b.replace(/\t/g,"&nbsp;&nbsp; &nbsp;");})),-1<b.indexOf('<br class="Apple-interchange-newline">')&&(a.data.startsWithEOL=1,a.data.preSniffing="html",b=b.replace(/<br class="Apple-interchange-newline">/,"")),b=b.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1"));if(b.match(/^<[^<]+cke_(editable|contents)/i)){var i,h,f=new CKEDITOR.dom.element("div");for(f.setHtml(b);1==f.getChildCount()&&(i=f.getFirst())&&i.type==CKEDITOR.NODE_ELEMENT&&(i.hasClass("cke_editable")||i.hasClass("cke_contents"));){f=h=i;}h&&(b=h.getHtml().replace(/<br>$/i,""));}CKEDITOR.env.ie?b=b.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(b,d){if(d.toLowerCase()in g){a.data.preSniffing="html";return"<"+d;}return b;}):CKEDITOR.env.webkit?b=b.replace(/<\/(\w+)><div><br><\/div>$/,function(b,d){if(d in g){a.data.endsWithEOL=1;return"</"+d+">";}return b;}):CKEDITOR.env.gecko&&(b=b.replace(/(\s)<br>$/,"$1"));a.data.dataValue=b;},null,null,3);b.on("paste",function(c){var c=c.data,d=c.type,g=c.dataValue,i,h=b.config.clipboard_defaultContentType||"html";i="html"==d||"html"==c.preSniffing?"html":w(g);"htmlifiedtext"==i?g=x(b.config,g):"text"==d&&"html"==i&&(g=z(b.config,g,a||(a=y(b))));c.startsWithEOL&&(g='<br data-cke-eol="1">'+g);c.endsWithEOL&&(g+='<br data-cke-eol="1">');"auto"==d&&(d="html"==i||"html"==h?"html":"text");c.type=d;c.dataValue=g;delete c.preSniffing;delete c.startsWithEOL;delete c.endsWithEOL;},null,null,6);b.on("paste",function(a){a=a.data;b.insertHtml(a.dataValue,a.type);setTimeout(function(){b.fire("afterPaste");},0);},null,null,1E3);b.on("pasteDialog",function(a){setTimeout(function(){b.openDialog("paste",a.data);},0);});}});})();(function(){var c='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(c+=' onkeypress="return false;"');CKEDITOR.env.gecko&&(c+=' onblur="this.style.cssText = this.style.cssText;"');var c=c+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"'),c=c+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span>{arrowHtml}</a>',m=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),n=CKEDITOR.addTemplate("button",c);CKEDITOR.plugins.add("button",{beforeInit:function beforeInit(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler);}});CKEDITOR.UI_BUTTON="button";CKEDITOR.ui.button=function(a){CKEDITOR.tools.extend(this,a,{title:a.label,click:a.click||function(b){b.execCommand(a.command);}});this._={};};CKEDITOR.ui.button.handler={create:function create(a){return new CKEDITOR.ui.button(a);}};CKEDITOR.ui.button.prototype={render:function render(a,b){var c=CKEDITOR.env,i=this._.id=CKEDITOR.tools.getNextId(),f="",e=this.command,k;this._.editor=a;var d={id:i,button:this,editor:a,focus:function focus(){CKEDITOR.document.getById(i).focus();},execute:function execute(){this.button.click(a);},attach:function attach(a){this.button.attach(a);}},o=CKEDITOR.tools.addFunction(function(a){if(d.onkey)return a=new CKEDITOR.dom.event(a),!1!==d.onkey(d,a.getKeystroke());}),p=CKEDITOR.tools.addFunction(function(a){var b;d.onfocus&&(b=!1!==d.onfocus(d,new CKEDITOR.dom.event(a)));return b;}),l=0;d.clickFn=k=CKEDITOR.tools.addFunction(function(){l&&(a.unlockSelection(1),l=0);d.execute();});if(this.modes){var j={},g=function g(){var b=a.mode;b&&(b=this.modes[b]?void 0!=j[b]?j[b]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,b=a.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:b,this.setState(b),this.refresh&&this.refresh());};a.on("beforeModeUnload",function(){a.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(j[a.mode]=this._.state);},this);a.on("activeFilterChange",g,this);a.on("mode",g,this);!this.readOnly&&a.on("readOnly",g,this);}else if(e&&(e=a.getCommand(e)))e.on("state",function(){this.setState(e.state);},this),f+=e.state==CKEDITOR.TRISTATE_ON?"on":e.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";if(this.directional)a.on("contentDirChanged",function(b){var c=CKEDITOR.document.getById(this._.id),d=c.getFirst(),b=b.data;b!=a.lang.dir?c.addClass("cke_"+b):c.removeClass("cke_ltr").removeClass("cke_rtl");d.setAttribute("style",CKEDITOR.skin.getIconStyle(h,"rtl"==b,this.icon,this.iconOffset));},this);e||(f+="off");var h=g=this.name||this.command;this.icon&&!/\./.test(this.icon)&&(h=this.icon,this.icon=null);c={id:i,name:g,iconName:h,label:this.label,cls:this.className||"",state:f,ariaDisabled:"disabled"==f?"true":"false",title:this.title,titleJs:c.gecko&&!c.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:o,focusFn:p,clickFn:k,style:CKEDITOR.skin.getIconStyle(h,"rtl"==a.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?m.output():""};n.output(c,b);if(this.onRender)this.onRender();return d;},setState:function setState(a){if(this._.state==a)return!1;this._.state=a;var b=CKEDITOR.document.getById(this._.id);return b?(b.setState(a,"cke_button"),a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled"),this.hasArrow?(a=a==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(a)):a==CKEDITOR.TRISTATE_ON?b.setAttribute("aria-pressed",!0):b.removeAttribute("aria-pressed"),!0):!1;},getState:function getState(){return this._.state;},toFeature:function toFeature(a){if(this._.feature)return this._.feature;var b=this;!this.allowedContent&&!this.requiredContent&&this.command&&(b=a.getCommand(this.command)||b);return this._.feature=b;}};CKEDITOR.ui.prototype.addButton=function(a,b){this.add(a,CKEDITOR.UI_BUTTON,b);};})();CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function onLoad(){function e(c){var a=this._;a.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(c),a.on?a.panel.hide():a.panel.showBlock(this._.id,this.document.getById(this._.id),4));}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function $(c){var a=c.panel||{};delete c.panel;this.base(c);this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document;a.block={attributes:a.attributes};this.hasArrow=a.toolbarRelated=!0;this.click=e;this._={panelDefinition:a};},statics:{handler:{create:function create(c){return new CKEDITOR.ui.panelButton(c);}}},proto:{createPanel:function createPanel(c){var a=this._;if(!a.panel){var f=this._.panelDefinition,e=this._.panelDefinition.block,g=f.parent||CKEDITOR.document.getBody(),d=this._.panel=new CKEDITOR.ui.floatPanel(c,g,f),f=d.addBlock(a.id,e),b=this;d.onShow=function(){b.className&&this.element.addClass(b.className+"_panel");b.setState(CKEDITOR.TRISTATE_ON);a.on=1;b.editorFocus&&c.focus();if(b.onOpen)b.onOpen();};d.onHide=function(d){b.className&&this.element.getFirst().removeClass(b.className+"_panel");b.setState(b.modes&&b.modes[c.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);a.on=0;if(!d&&b.onClose)b.onClose();};d.onEscape=function(){d.hide(1);b.document.getById(a.id).focus();};if(this.onBlock)this.onBlock(d,f);f.onHide=function(){a.on=0;b.setState(CKEDITOR.TRISTATE_OFF);};}}}});},beforeInit:function beforeInit(e){e.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler);}});CKEDITOR.UI_PANELBUTTON="panelbutton";(function(){CKEDITOR.plugins.add("panel",{beforeInit:function beforeInit(a){a.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler);}});CKEDITOR.UI_PANEL="panel";CKEDITOR.ui.panel=function(a,b){b&&CKEDITOR.tools.extend(this,b);CKEDITOR.tools.extend(this,{className:"",css:[]});this.id=CKEDITOR.tools.getNextId();this.document=a;this.isFramed=this.forceIFrame||this.css.length;this._={blocks:{}};};CKEDITOR.ui.panel.handler={create:function create(a){return new CKEDITOR.ui.panel(a);}};var f=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),g=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),h=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function render(a,b){this.getHolderElement=function(){var a=this._.holder;if(!a){if(this.isFramed){var a=this.document.getById(this.id+"_frame"),b=a.getParent(),a=a.getFrameDocument();CKEDITOR.env.iOS&&b.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"});b=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0;if(this.onLoad)this.onLoad();},this));a.write(h.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+b+");"},d)));a.getWindow().$.CKEDITOR=CKEDITOR;a.on("keydown",function(a){var b=a.data.getKeystroke(),c=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(b)?a.data.preventDefault():(27==b||b==("rtl"==c?39:37))&&this.onEscape&&!1===this.onEscape(b)&&a.data.preventDefault();},this);a=a.getBody();a.unselectable();CKEDITOR.env.air&&CKEDITOR.tools.callFunction(b);}else a=this.document.getById(this.id);this._.holder=a;}return a;};var d={editorId:a.id,id:this.id,langCode:a.langCode,dir:a.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":a.config.baseFloatZIndex+1};if(this.isFramed){var e=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";d.frame=g.output({id:this.id+"_frame",src:e});}e=f.output(d);b&&b.push(e);return e;},addBlock:function addBlock(a,b){b=this._.blocks[a]=b instanceof CKEDITOR.ui.panel.block?b:new CKEDITOR.ui.panel.block(this.getHolderElement(),b);this._.currentBlock||this.showBlock(a);return b;},getBlock:function getBlock(a){return this._.blocks[a];},showBlock:function showBlock(a){var a=this._.blocks[a],b=this._.currentBlock,d=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");b&&b.hide();this._.currentBlock=a;CKEDITOR.fire("ariaWidget",d);a._.focusIndex=-1;this._.onKeyDown=a.onKeyDown&&CKEDITOR.tools.bind(a.onKeyDown,a);a.show();return a;},destroy:function destroy(){this.element&&this.element.remove();}};CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function $(a,b){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}}));b&&CKEDITOR.tools.extend(this,b);this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]});this.keys={};this._.focusIndex=-1;this.element.disableContextMenu();},_:{markItem:function markItem(a){-1!=a&&(a=this.element.getElementsByTag("a").getItem(this._.focusIndex=a),CKEDITOR.env.webkit&&a.getDocument().getWindow().focus(),a.focus(),this.onMark&&this.onMark(a));}},proto:{show:function show(){this.element.setStyle("display","");},hide:function hide(){(!this.onHide||!0!==this.onHide.call(this))&&this.element.setStyle("display","none");},onKeyDown:function onKeyDown(a,b){var d=this.keys[a];switch(d){case"next":for(var e=this._.focusIndex,d=this.element.getElementsByTag("a"),c;c=d.getItem(++e);){if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.focusIndex=e;c.focus();break;}}return!c&&!b?(this._.focusIndex=-1,this.onKeyDown(a,1)):!1;case"prev":e=this._.focusIndex;for(d=this.element.getElementsByTag("a");0<e&&(c=d.getItem(--e));){if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.focusIndex=e;c.focus();break;}c=null;}return!c&&!b?(this._.focusIndex=d.count(),this.onKeyDown(a,1)):!1;case"click":case"mouseup":return e=this._.focusIndex,(c=0<=e&&this.element.getElementsByTag("a").getItem(e))&&(c.$[d]?c.$[d]():c.$["on"+d]()),!1;}return!0;}}});})();CKEDITOR.plugins.add("floatpanel",{requires:"panel"});(function(){function r(a,b,c,i,f){var f=CKEDITOR.tools.genKey(b.getUniqueId(),c.getUniqueId(),a.lang.dir,a.uiColor||"",i.css||"",f||""),h=g[f];h||(h=g[f]=new CKEDITOR.ui.panel(b,i),h.element=c.append(CKEDITOR.dom.element.createFromHtml(h.render(a),b)),h.element.setStyles({display:"none",position:"absolute"}));return h;}var g={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function $(a,b,c,i){function f(){d.hide();}c.forceIFrame=1;c.toolbarRelated&&a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(b=CKEDITOR.document.getById("cke_"+a.name));var h=b.getDocument(),i=r(a,h,b,c,i||0),j=i.element,l=j.getFirst(),d=this;j.disableContextMenu();this.element=j;this._={editor:a,panel:i,parentElement:b,definition:c,document:h,iframe:l,children:[],dir:a.lang.dir};a.on("mode",f);a.on("resize",f);if(!CKEDITOR.env.iOS)h.getWindow().on("resize",f);},proto:{addBlock:function addBlock(a,b){return this._.panel.addBlock(a,b);},addListBlock:function addListBlock(a,b){return this._.panel.addListBlock(a,b);},getBlock:function getBlock(a){return this._.panel.getBlock(a);},showBlock:function showBlock(a,b,c,i,f,h){var j=this._.panel,l=j.showBlock(a);this.allowBlur(!1);a=this._.editor.editable();this._.returnFocus=a.hasFocus?a:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);this._.hideTimeout=0;var d=this.element,a=this._.iframe,a=CKEDITOR.env.ie?a:new CKEDITOR.dom.window(a.$.contentWindow),g=d.getDocument(),o=this._.parentElement.getPositionedAncestor(),p=b.getDocumentPosition(g),g=o?o.getDocumentPosition(g):{x:0,y:0},m="rtl"==this._.dir,e=p.x+(i||0)-g.x,k=p.y+(f||0)-g.y;if(m&&(1==c||4==c))e+=b.$.offsetWidth;else if(!m&&(2==c||3==c))e+=b.$.offsetWidth-1;if(3==c||4==c)k+=b.$.offsetHeight-1;this._.panel._.offsetParentId=b.getId();d.setStyles({top:k+"px",left:0,display:""});d.setOpacity(0);d.getFirst().removeStyle("width");this._.editor.focusManager.add(a);this._.blurSet||(CKEDITOR.event.useCapture=!0,a.on("blur",function(a){function q(){delete this._.returnFocus;this.hide();}this.allowBlur()&&a.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(q,0,this)):q.call(this));},this),a.on("focus",function(){this._.focused=!0;this.hideChild();this.allowBlur(!0);},this),CKEDITOR.env.iOS&&(a.on("touchstart",function(){clearTimeout(this._.hideTimeout);},this),a.on("touchend",function(){this._.hideTimeout=0;this.focus();},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1);j.onEscape=CKEDITOR.tools.bind(function(a){if(this.onEscape&&this.onEscape(a)===false)return false;},this);CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.tools.bind(function(){d.removeStyle("width");if(l.autoSize){var a=l.element.getDocument(),a=(CKEDITOR.env.webkit?l.element:a.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&a>0&&(a=a+((d.$.offsetWidth||0)-(d.$.clientWidth||0)+3));d.setStyle("width",a+10+"px");a=l.element.$.scrollHeight;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&a>0&&(a=a+((d.$.offsetHeight||0)-(d.$.clientHeight||0)+3));d.setStyle("height",a+"px");j._.currentBlock.element.setStyle("display","none").removeStyle("display");}else d.removeStyle("height");m&&(e=e-d.$.offsetWidth);d.setStyle("left",e+"px");var b=j.element.getWindow(),a=d.$.getBoundingClientRect(),b=b.getViewPaneSize(),c=a.width||a.right-a.left,f=a.height||a.bottom-a.top,i=m?a.right:b.width-a.left,g=m?b.width-a.right:a.left;m?i<c&&(e=g>c?e+c:b.width>c?e-a.left:e-a.right+b.width):i<c&&(e=g>c?e-c:b.width>c?e-a.right+b.width:e-a.left);c=a.top;b.height-a.top<f&&(k=c>f?k-f:b.height>f?k-a.bottom+b.height:k-a.top);if(CKEDITOR.env.ie){b=a=new CKEDITOR.dom.element(d.$.offsetParent);b.getName()=="html"&&(b=b.getDocument().getBody());b.getComputedStyle("direction")=="rtl"&&(e=CKEDITOR.env.ie8Compat?e-d.getDocument().getDocumentElement().$.scrollLeft*2:e-(a.$.scrollWidth-a.$.clientWidth));}var a=d.getFirst(),n;(n=a.getCustomData("activePanel"))&&n.onHide&&n.onHide.call(this,1);a.setCustomData("activePanel",this);d.setStyles({top:k+"px",left:e+"px"});d.setOpacity(1);h&&h();},this);j.isLoaded?a():j.onLoad=a;CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus();l.element.focus();if(CKEDITOR.env.webkit)CKEDITOR.document.getBody().$.scrollTop=a;this.allowBlur(true);this._.editor.fire("panelShow",this);},0,this);},CKEDITOR.env.air?200:0,this);this.visible=1;this.onShow&&this.onShow.call(this);},focus:function focus(){if(CKEDITOR.env.webkit){var a=CKEDITOR.document.getActive();a&&!a.equals(this._.iframe)&&a.$.blur();}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus();},blur:function blur(){var a=this._.iframe.getFrameDocument().getActive();a&&a.is("a")&&(this._.lastFocused=a);},hide:function hide(a){if(this.visible&&(!this.onHide||!0!==this.onHide.call(this))){this.hideChild();CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur();this.element.setStyle("display","none");this.visible=0;this.element.getFirst().removeCustomData("activePanel");if(a=a&&this._.returnFocus)CKEDITOR.env.webkit&&a.type&&a.getWindow().$.focus(),a.focus();delete this._.lastFocused;this._.editor.fire("panelHide",this);}},allowBlur:function allowBlur(a){var b=this._.panel;void 0!=a&&(b.allowBlur=a);return b.allowBlur;},showAsChild:function showAsChild(a,b,c,g,f,h){this._.activeChild==a&&a._.panel._.offsetParentId==c.getId()||(this.hideChild(),a.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide();},0,this);},this),this._.activeChild=a,this._.focused=!1,a.showBlock(b,c,g,f,h),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+="";},100));},hideChild:function hideChild(a){var b=this._.activeChild;b&&(delete b.onHide,delete this._.activeChild,b.hide(),a&&this.focus());}}});CKEDITOR.on("instanceDestroyed",function(){var a=CKEDITOR.tools.isEmpty(CKEDITOR.instances),b;for(b in g){var c=g[b];a?c.destroy():c.element.hide();}a&&(g={});});})();CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function init(c){function m(l,g,e,h){var j=new CKEDITOR.style(i["colorButton_"+g+"Style"]),k=CKEDITOR.tools.getNextId()+"_colorBox";c.ui.add(l,CKEDITOR.UI_PANELBUTTON,{label:e,title:e,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+h,allowedContent:j,requiredContent:j,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":f.panelTitle}},onBlock:function onBlock(a,b){b.autoSize=!0;b.element.addClass("cke_colorblock");b.element.setHtml(o(a,g,k));b.element.getDocument().getBody().setStyle("overflow","hidden");CKEDITOR.ui.fire("ready",this);var d=b.keys,e="rtl"==c.lang.dir;d[e?37:39]="next";d[40]="next";d[9]="next";d[e?39:37]="prev";d[38]="prev";d[CKEDITOR.SHIFT+9]="prev";d[32]="click";},refresh:function refresh(){c.activeFilter.check(j)||this.setState(CKEDITOR.TRISTATE_DISABLED);},onOpen:function onOpen(){var a=c.getSelection(),a=a&&a.getStartElement(),a=c.elementPath(a),b;if(a){a=a.block||a.blockLimit||c.document.getBody();do{b=a&&a.getComputedStyle("back"==g?"background-color":"color")||"transparent";}while("back"==g&&"transparent"==b&&a&&(a=a.getParent()));if(!b||"transparent"==b)b="#ffffff";this._.panel._.iframe.getFrameDocument().getById(k).setStyle("background-color",b);return b;}}});}function o(l,g,e){var h=[],j=i.colorButton_colors.split(","),k=CKEDITOR.tools.addFunction(function(a,b){if("?"==a){var e=arguments.callee,d=function d(a){this.removeListener("ok",d);this.removeListener("cancel",d);"ok"==a.name&&e(this.getContentElement("picker","selectedColor").getValue(),b);};c.openDialog("colordialog",function(){this.on("ok",d);this.on("cancel",d);});}else{c.focus();l.hide();c.fire("saveSnapshot");c.removeStyle(new CKEDITOR.style(i["colorButton_"+b+"Style"],{color:"inherit"}));if(a){var f=i["colorButton_"+b+"Style"];f.childRule="back"==b?function(a){return n(a);}:function(a){return!(a.is("a")||a.getElementsByTag("a").count())||n(a);};c.applyStyle(new CKEDITOR.style(f,{color:a}));}c.fire("saveSnapshot");}});h.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',f.auto,'" onclick="CKEDITOR.tools.callFunction(',k,",null,'",g,"');return false;\" href=\"javascript:void('",f.auto,'\')" role="option"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td><span class="cke_colorbox" id="',e,'"></span></td><td colspan=7 align=center>',f.auto,'</td></tr></table></a><table role="presentation" cellspacing=0 cellpadding=0 width="100%">');for(e=0;e<j.length;e++){0===e%8&&h.push("</tr><tr>");var a=j[e].split("/"),b=a[0],d=a[1]||b;a[1]||(b="#"+b.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));a=c.lang.colorbutton.colors[d]||d;h.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',a,'" onclick="CKEDITOR.tools.callFunction(',k,",'",b,"','",g,"'); return false;\" href=\"javascript:void('",a,'\')" role="option"><span class="cke_colorbox" style="background-color:#',d,'"></span></a></td>');}(c.plugins.colordialog&&void 0===i.colorButton_enableMore||i.colorButton_enableMore)&&h.push('</tr><tr><td colspan=8 align=center><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',f.more,'" onclick="CKEDITOR.tools.callFunction(',k,",'?','",g,"');return false;\" href=\"javascript:void('",f.more,"')\"",' role="option">',f.more,"</a></td>");h.push("</tr></table>");return h.join("");}function n(c){return"false"==c.getAttribute("contentEditable")||c.getAttribute("data-nostyle");}var i=c.config,f=c.lang.colorbutton;CKEDITOR.env.hc||(m("TextColor","fore",f.textColorTitle,10),m("BGColor","back",f.bgColorTitle,20));}});CKEDITOR.config.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF";CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]};CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}};CKEDITOR.plugins.colordialog={requires:"dialog",init:function init(b){var c=new CKEDITOR.dialogCommand("colordialog");c.editorFocus=!1;b.addCommand("colordialog",c);CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js");b.getColorFromDialog=function(c,f){var d=function d(a){this.removeListener("ok",d);this.removeListener("cancel",d);a="ok"==a.name?this.getValueOf("picker","selectedColor"):null;c.call(f,a);},e=function e(a){a.on("ok",d);a.on("cancel",d);};b.execCommand("colordialog");if(b._.storedDialogs&&b._.storedDialogs.colordialog)e(b._.storedDialogs.colordialog);else CKEDITOR.on("dialogDefinition",function(a){if("colordialog"==a.data.name){var b=a.data.definition;a.removeListener();b.onLoad=CKEDITOR.tools.override(b.onLoad,function(a){return function(){e(this);b.onLoad=a;"function"==typeof a&&a.call(this);};});}});};}};CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog);(function(){CKEDITOR.plugins.add("templates",{requires:"dialog",init:function init(a){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js"));a.addCommand("templates",new CKEDITOR.dialogCommand("templates"));a.ui.addButton&&a.ui.addButton("Templates",{label:a.lang.templates.button,command:"templates",toolbar:"doctools,10"});}});var c={},f={};CKEDITOR.addTemplates=function(a,d){c[a]=d;};CKEDITOR.getTemplates=function(a){return c[a];};CKEDITOR.loadTemplates=function(a,d){for(var e=[],b=0,c=a.length;b<c;b++){f[a[b]]||(e.push(a[b]),f[a[b]]=1);}e.length?CKEDITOR.scriptLoader.load(e,d):setTimeout(d,0);};})();CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")];CKEDITOR.config.templates_replaceContent=!0;CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function beforeInit(g){for(var h=g.config.menu_groups.split(","),m=g._.menuGroups={},l=g._.menuItems={},a=0;a<h.length;a++){m[h[a]]=a+1;}g.addMenuGroup=function(b,a){m[b]=a||100;};g.addMenuItem=function(a,c){m[c.group]&&(l[a]=new CKEDITOR.menuItem(this,a,c));};g.addMenuItems=function(a){for(var c in a){this.addMenuItem(c,a[c]);}};g.getMenuItem=function(a){return l[a];};g.removeMenuItem=function(a){delete l[a];};}});(function(){function g(a){a.sort(function(a,c){return a.group<c.group?-1:a.group>c.group?1:a.order<c.order?-1:a.order>c.order?1:0;});}var h='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1"_cke_focus=1 hidefocus="true" role="{role}" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked}';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(h+=' onkeypress="return false;"');CKEDITOR.env.gecko&&(h+=' onblur="this.style.cssText = this.style.cssText;"');var h=h+(' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">'),m=CKEDITOR.addTemplate("menuItem",h+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{arrowHtml}</span></a></span>'),l=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function $(a,b){b=this._.definition=b||{};this.id=CKEDITOR.tools.getNextId();this.editor=a;this.items=[];this._.listeners=[];this._.level=b.level||1;var c=CKEDITOR.tools.extend({},b.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),k=c.block.attributes=c.attributes||{};!k.role&&(k.role="menu");this._.panelDefinition=c;},_:{onShow:function onShow(){var a=this.editor.getSelection(),b=a&&a.getStartElement(),c=this.editor.elementPath(),k=this._.listeners;this.removeAll();for(var e=0;e<k.length;e++){var j=k[e](b,a,c);if(j)for(var i in j){var f=this.editor.getMenuItem(i);if(f&&(!f.command||this.editor.getCommand(f.command).state))f.state=j[i],this.add(f);}}},onClick:function onClick(a){this.hide();if(a.onClick)a.onClick();else a.command&&this.editor.execCommand(a.command);},onEscape:function onEscape(a){var b=this.parent;b?b._.panel.hideChild(1):27==a&&this.hide(1);return!1;},onHide:function onHide(){this.onHide&&this.onHide();},showSubMenu:function showSubMenu(a){var b=this._.subMenu,c=this.items[a];if(c=c.getItems&&c.getItems()){b?b.removeAll():(b=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),b.parent=this,b._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var k in c){var e=this.editor.getMenuItem(k);e&&(e.state=c[k],b.add(e));}var j=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+(""+a));setTimeout(function(){b.show(j,2);},0);}else this._.panel.hideChild(1);}},proto:{add:function add(a){a.order||(a.order=this.items.length);this.items.push(a);},removeAll:function removeAll(){this.items=[];},show:function show(a,b,c,k){if(!this.parent&&(this._.onShow(),!this.items.length))return;var b=b||("rtl"==this.editor.lang.dir?2:1),e=this.items,j=this.editor,i=this._.panel,f=this._.element;if(!i){i=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level);i.onEscape=CKEDITOR.tools.bind(function(a){if(!1===this._.onEscape(a))return!1;},this);i.onShow=function(){i._.panel.getHolderElement().getParent().addClass("cke cke_reset_all");};i.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide();},this);f=i.addBlock(this.id,this._.panelDefinition.block);f.autoSize=!0;var d=f.keys;d[40]="next";d[9]="next";d[38]="prev";d[CKEDITOR.SHIFT+9]="prev";d["rtl"==j.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click";d[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(d[13]="mouseup");f=this._.element=f.element;d=f.getDocument();d.getBody().setStyle("overflow","hidden");d.getElementsByTag("html").getItem(0).setStyle("overflow","hidden");this._.itemOverFn=CKEDITOR.tools.addFunction(function(a){clearTimeout(this._.showSubTimeout);this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,j.config.menu_subMenuDelay||400,this,[a]);},this);this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout);},this);this._.itemClickFn=CKEDITOR.tools.addFunction(function(a){var b=this.items[a];if(b.state==CKEDITOR.TRISTATE_DISABLED)this.hide(1);else if(b.getItems)this._.showSubMenu(a);else this._.onClick(b);},this);}g(e);for(var d=j.elementPath(),d=['<div class="cke_menu'+(d&&d.direction()!=j.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],h=e.length,m=h&&e[0].group,l=0;l<h;l++){var n=e[l];m!=n.group&&(d.push('<div class="cke_menuseparator" role="separator"></div>'),m=n.group);n.render(this,l,d);}d.push("</div>");f.setHtml(d.join(""));CKEDITOR.ui.fire("ready",this);this.parent?this.parent._.panel.showAsChild(i,this.id,a,b,c,k):i.showBlock(this.id,a,b,c,k);j.fire("menuShow",[i]);},addListener:function addListener(a){this._.listeners.push(a);},hide:function hide(a){this._.onHide&&this._.onHide();this._.panel&&this._.panel.hide(a);}}});CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function $(a,b,c){CKEDITOR.tools.extend(this,c,{order:0,className:"cke_menubutton__"+b});this.group=a._.menuGroups[this.group];this.editor=a;this.name=b;},proto:{render:function render(a,b,c){var h=a.id+(""+b),e="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,j="",i=e==CKEDITOR.TRISTATE_ON?"on":e==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(j=' aria-checked="'+(e==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var f=this.getItems,d="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",g=this.name;this.icon&&!/\./.test(this.icon)&&(g=this.icon);a={id:h,name:this.name,iconName:g,label:this.label,cls:this.className||"",state:i,hasPopup:f?"true":"false",disabled:e==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:a._.itemOverFn,moveOutFn:a._.itemOutFn,clickFn:a._.itemClickFn,index:b,iconStyle:CKEDITOR.skin.getIconStyle(g,"rtl"==this.editor.lang.dir,g==this.icon?null:this.icon,this.iconOffset),arrowHtml:f?l.output({label:d}):"",role:this.role?this.role:"menuitem",ariaChecked:j};m.output(a,c);}}});})();CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div";CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function onLoad(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function $(a){this.base.call(this,a,{panel:{className:"cke_menu_panel",attributes:{"aria-label":a.lang.contextmenu.options}}});},proto:{addTarget:function addTarget(a,e){a.on("contextmenu",function(a){var a=a.data,c=CKEDITOR.env.webkit?f:CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey;if(!e||!c){a.preventDefault();if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){var c=this.editor,b=new CKEDITOR.dom.elementPath(a.getTarget(),c.editable()).contains(function(a){return a.hasAttribute("contenteditable");},!0);b&&"false"==b.getAttribute("contenteditable")&&c.getSelection().fake(b);}var b=a.getTarget().getDocument(),d=a.getTarget().getDocument().getDocumentElement(),c=!b.equals(CKEDITOR.document),b=b.getWindow().getScrollPosition(),g=c?a.$.clientX:a.$.pageX||b.x+a.$.clientX,h=c?a.$.clientY:a.$.pageY||b.y+a.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(d,null,g,h);},CKEDITOR.env.ie?200:0,this);}},this);if(CKEDITOR.env.webkit){var f,d=function d(){f=0;};a.on("keydown",function(a){f=CKEDITOR.env.mac?a.data.$.metaKey:a.data.$.ctrlKey;});a.on("keyup",d);a.on("contextmenu",d);}},open:function open(a,e,f,d){this.editor.focus();a=a||CKEDITOR.document.getDocumentElement();this.editor.selectionChange(1);this.show(a,e,f,d);}}});},beforeInit:function beforeInit(a){var e=a.contextMenu=new CKEDITOR.plugins.contextMenu(a);a.on("contentDom",function(){e.addTarget(a.editable(),!1!==a.config.browserContextMenuOnCtrl);});a.addCommand("contextMenu",{exec:function exec(){a.contextMenu.open(a.document.getBody());}});a.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu");a.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu");}});(function(){CKEDITOR.plugins.add("div",{requires:"dialog",init:function init(a){if(!a.blockless){var c=a.lang.div,b="div(*)";CKEDITOR.dialog.isTabEnabled(a,"editdiv","advanced")&&(b+=";div[dir,id,lang,title]{*}");a.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv",{allowedContent:b,requiredContent:"div",contextSensitive:!0,refresh:function refresh(a,c){this.setState("div"in(a.config.div_wrapTable?c.root:c.blockLimit).getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);}}));a.addCommand("editdiv",new CKEDITOR.dialogCommand("editdiv",{requiredContent:"div"}));a.addCommand("removediv",{requiredContent:"div",exec:function exec(a){function c(b){if((b=CKEDITOR.plugins.div.getSurroundDiv(a,b))&&!b.data("cke-div-added"))f.push(b),b.data("cke-div-added");}for(var b=a.getSelection(),g=b&&b.getRanges(),e,h=b.createBookmarks(),f=[],d=0;d<g.length;d++){e=g[d],e.collapsed?c(b.getStartElement()):(e=new CKEDITOR.dom.walker(e),e.evaluator=c,e.lastForward());}for(d=0;d<f.length;d++){f[d].remove(!0);}b.selectBookmarks(h);}});a.ui.addButton&&a.ui.addButton("CreateDiv",{label:c.toolbar,command:"creatediv",toolbar:"blocks,50"});a.addMenuItems&&(a.addMenuItems({editdiv:{label:c.edit,command:"editdiv",group:"div",order:1},removediv:{label:c.remove,command:"removediv",group:"div",order:5}}),a.contextMenu&&a.contextMenu.addListener(function(b){return!b||b.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv(a)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null;}));CKEDITOR.dialog.add("creatediv",this.path+"dialogs/div.js");CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js");}}});CKEDITOR.plugins.div={getSurroundDiv:function getSurroundDiv(a,c){var b=a.elementPath(c);return a.elementPath(b.blockLimit).contains(function(a){return a.is("div")&&!a.isReadOnly();},1);}};})();CKEDITOR.plugins.add("resize",{init:function init(b){var f,g,n,o,a=b.config,q=b.ui.spaceId("resizer"),h=b.element?b.element.getDirection(1):"ltr";!a.resize_dir&&(a.resize_dir="vertical");void 0==a.resize_maxWidth&&(a.resize_maxWidth=3E3);void 0==a.resize_maxHeight&&(a.resize_maxHeight=3E3);void 0==a.resize_minWidth&&(a.resize_minWidth=750);void 0==a.resize_minHeight&&(a.resize_minHeight=250);if(!1!==a.resize_enabled){var c=null,i=("both"==a.resize_dir||"horizontal"==a.resize_dir)&&a.resize_minWidth!=a.resize_maxWidth,l=("both"==a.resize_dir||"vertical"==a.resize_dir)&&a.resize_minHeight!=a.resize_maxHeight,j=function j(d){var e=f,m=g,c=e+(d.data.$.screenX-n)*("rtl"==h?-1:1),d=m+(d.data.$.screenY-o);i&&(e=Math.max(a.resize_minWidth,Math.min(c,a.resize_maxWidth)));l&&(m=Math.max(a.resize_minHeight,Math.min(d,a.resize_maxHeight)));b.resize(i?e:null,m);},k=function k(){CKEDITOR.document.removeListener("mousemove",j);CKEDITOR.document.removeListener("mouseup",k);b.document&&(b.document.removeListener("mousemove",j),b.document.removeListener("mouseup",k));},p=CKEDITOR.tools.addFunction(function(d){c||(c=b.getResizable());f=c.$.offsetWidth||0;g=c.$.offsetHeight||0;n=d.screenX;o=d.screenY;a.resize_minWidth>f&&(a.resize_minWidth=f);a.resize_minHeight>g&&(a.resize_minHeight=g);CKEDITOR.document.on("mousemove",j);CKEDITOR.document.on("mouseup",k);b.document&&(b.document.on("mousemove",j),b.document.on("mouseup",k));d.preventDefault&&d.preventDefault();});b.on("destroy",function(){CKEDITOR.tools.removeFunction(p);});b.on("uiSpace",function(a){if("bottom"==a.data.space){var e="";i&&!l&&(e=" cke_resizer_horizontal");!i&&l&&(e=" cke_resizer_vertical");var c='<span id="'+q+'" class="cke_resizer'+e+" cke_resizer_"+h+'" title="'+CKEDITOR.tools.htmlEncode(b.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+p+', event)">'+("ltr"==h?"◢":"◣")+"</span>";"ltr"==h&&"ltr"==e?a.data.html+=c:a.data.html=c+a.data.html;}},b,null,100);b.on("maximize",function(a){b.ui.space("resizer")[a.data==CKEDITOR.TRISTATE_ON?"hide":"show"]();});}}});(function(){function w(a){function d(){for(var b=g(),e=CKEDITOR.tools.clone(a.config.toolbarGroups)||n(a),f=0;f<e.length;f++){var k=e[f];if("/"!=k){"string"==typeof k&&(k=e[f]={name:k});var i,d=k.groups;if(d)for(var h=0;h<d.length;h++){i=d[h],(i=b[i])&&c(k,i);}(i=b[k.name])&&c(k,i);}}return e;}function g(){var b={},c,f,e;for(c in a.ui.items){f=a.ui.items[c],e=f.toolbar||"others",e=e.split(","),f=e[0],e=parseInt(e[1]||-1,10),b[f]||(b[f]=[]),b[f].push({name:c,order:e});}for(f in b){b[f]=b[f].sort(function(b,a){return b.order==a.order?0:0>a.order?-1:0>b.order?1:b.order<a.order?-1:1;});}return b;}function c(c,e){if(e.length){c.items?c.items.push(a.ui.create("-")):c.items=[];for(var f;f=e.shift();){if(f="string"==typeof f?f:f.name,!b||-1==CKEDITOR.tools.indexOf(b,f))(f=a.ui.create(f))&&a.addFeature(f)&&c.items.push(f);}}}function h(b){var a=[],e,d,h;for(e=0;e<b.length;++e){d=b[e],h={},"/"==d?a.push(d):CKEDITOR.tools.isArray(d)?(c(h,CKEDITOR.tools.clone(d)),a.push(h)):d.items&&(c(h,CKEDITOR.tools.clone(d.items)),h.name=d.name,a.push(h));}return a;}var b=a.config.removeButtons,b=b&&b.split(","),e=a.config.toolbar;"string"==typeof e&&(e=a.config["toolbar_"+e]);return a.toolbar=e?h(e):d();}function n(a){return a._.toolbarGroups||(a._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}]);}var u=function u(){this.toolbars=[];this.focusCommandExecuted=!1;};u.prototype.focus=function(){for(var a=0,d;d=this.toolbars[a++];){for(var g=0,c;c=d.items[g++];){if(c.focus){c.focus();return;}}}};var x={modes:{wysiwyg:1,source:1},readOnly:1,exec:function exec(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){a.toolbox.focus();},100):a.toolbox.focus());}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function init(a){var d,g=function g(c,h){var b,e="rtl"==a.lang.dir,j=a.config.toolbarGroupCycling,o=e?37:39,e=e?39:37,j=void 0===j||j;switch(h){case 9:case CKEDITOR.SHIFT+9:for(;!b||!b.items.length;){if(b=9==h?(b?b.next:c.toolbar.next)||a.toolbox.toolbars[0]:(b?b.previous:c.toolbar.previous)||a.toolbox.toolbars[a.toolbox.toolbars.length-1],b.items.length)for(c=b.items[d?b.items.length-1:0];c&&!c.focus;){(c=d?c.previous:c.next)||(b=0);}}c&&c.focus();return!1;case o:b=c;do{b=b.next,!b&&j&&(b=c.toolbar.items[0]);}while(b&&!b.focus);b?b.focus():g(c,9);return!1;case 40:return c.button&&c.button.hasArrow?(a.once("panelShow",function(b){b.data._.panel._.currentBlock.onKeyDown(40);}),c.execute()):g(c,40==h?o:e),!1;case e:case 38:b=c;do{b=b.previous,!b&&j&&(b=c.toolbar.items[c.toolbar.items.length-1]);}while(b&&!b.focus);b?b.focus():(d=1,g(c,CKEDITOR.SHIFT+9),d=0);return!1;case 27:return a.focus(),!1;case 13:case 32:return c.execute(),!1;}return!0;};a.on("uiSpace",function(c){if(c.data.space==a.config.toolbarLocation){c.removeListener();a.toolbox=new u();var d=CKEDITOR.tools.getNextId(),b=['<span id="',d,'" class="cke_voice_label">',a.lang.toolbar.toolbars,"</span>",'<span id="'+a.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',d,'" onmousedown="return false;">'],d=!1!==a.config.toolbarStartupExpanded,e,j;a.config.toolbarCanCollapse&&a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&b.push('<span class="cke_toolbox_main"'+(d?">":' style="display:none">'));for(var o=a.toolbox.toolbars,f=w(a),k=0;k<f.length;k++){var i,l=0,r,m=f[k],s;if(m)if(e&&(b.push("</span>"),j=e=0),"/"===m)b.push('<span class="cke_toolbar_break"></span>');else{s=m.items||m;for(var t=0;t<s.length;t++){var p=s[t],n;if(p)if(p.type==CKEDITOR.UI_SEPARATOR)j=e&&p;else{n=!1!==p.canGroup;if(!l){i=CKEDITOR.tools.getNextId();l={id:i,items:[]};r=m.name&&(a.lang.toolbar.toolbarGroups[m.name]||m.name);b.push('<span id="',i,'" class="cke_toolbar"',r?' aria-labelledby="'+i+'_label"':"",' role="toolbar">');r&&b.push('<span id="',i,'_label" class="cke_voice_label">',r,"</span>");b.push('<span class="cke_toolbar_start"></span>');var q=o.push(l)-1;0<q&&(l.previous=o[q-1],l.previous.next=l);}n?e||(b.push('<span class="cke_toolgroup" role="presentation">'),e=1):e&&(b.push("</span>"),e=0);i=function i(c){c=c.render(a,b);q=l.items.push(c)-1;if(q>0){c.previous=l.items[q-1];c.previous.next=c;}c.toolbar=l;c.onkey=g;c.onfocus=function(){a.toolbox.focusCommandExecuted||a.focus();};};j&&(i(j),j=0);i(p);}}e&&(b.push("</span>"),j=e=0);l&&b.push('<span class="cke_toolbar_end"></span></span>');}}a.config.toolbarCanCollapse&&b.push("</span>");if(a.config.toolbarCanCollapse&&a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var v=CKEDITOR.tools.addFunction(function(){a.execCommand("toolbarCollapse");});a.on("destroy",function(){CKEDITOR.tools.removeFunction(v);});a.addCommand("toolbarCollapse",{readOnly:1,exec:function exec(b){var a=b.ui.space("toolbar_collapser"),c=a.getPrevious(),e=b.ui.space("contents"),d=c.getParent(),f=parseInt(e.$.style.height,10),h=d.$.offsetHeight,g=a.hasClass("cke_toolbox_collapser_min");g?(c.show(),a.removeClass("cke_toolbox_collapser_min"),a.setAttribute("title",b.lang.toolbar.toolbarCollapse)):(c.hide(),a.addClass("cke_toolbox_collapser_min"),a.setAttribute("title",b.lang.toolbar.toolbarExpand));a.getFirst().setText(g?"▲":"◀");e.setStyle("height",f-(d.$.offsetHeight-h)+"px");b.fire("resize");},modes:{wysiwyg:1,source:1}});a.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse");b.push('<a title="'+(d?a.lang.toolbar.toolbarCollapse:a.lang.toolbar.toolbarExpand)+'" id="'+a.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser');d||b.push(" cke_toolbox_collapser_min");b.push('" onclick="CKEDITOR.tools.callFunction('+v+')">','<span class="cke_arrow">&#9650;</span>',"</a>");}b.push("</span>");c.data.html+=b.join("");}});a.on("destroy",function(){if(this.toolbox){var a,d=0,b,e,g;for(a=this.toolbox.toolbars;d<a.length;d++){e=a[d].items;for(b=0;b<e.length;b++){g=e[b],g.clickFn&&CKEDITOR.tools.removeFunction(g.clickFn),g.keyDownFn&&CKEDITOR.tools.removeFunction(g.keyDownFn);}}}});a.on("uiReady",function(){var c=a.ui.space("toolbox");c&&a.focusManager.add(c,1);});a.addCommand("toolbarFocus",x);a.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus");a.ui.add("-",CKEDITOR.UI_SEPARATOR,{});a.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function create(){return{render:function render(a,d){d.push('<span class="cke_toolbar_separator" role="separator"></span>');return{};}};}});}});CKEDITOR.ui.prototype.addToolbarGroup=function(a,d,g){var c=n(this.editor),h=0===d,b={name:a};if(g){if(g=CKEDITOR.tools.search(c,function(a){return a.name==g;})){!g.groups&&(g.groups=[]);if(d&&(d=CKEDITOR.tools.indexOf(g.groups,d),0<=d)){g.groups.splice(d+1,0,a);return;}h?g.groups.splice(0,0,a):g.groups.push(a);return;}d=null;}d&&(d=CKEDITOR.tools.indexOf(c,function(a){return a.name==d;}));h?c.splice(0,0,a):"number"==typeof d?c.splice(d+1,0,b):c.push(a);};})();CKEDITOR.UI_SEPARATOR="separator";CKEDITOR.config.toolbarLocation="top";(function(){var k;function n(a,c){function j(d){d=i.list[d];if(d.equals(a.editable())||"true"==d.getAttribute("contenteditable")){var e=a.createRange();e.selectNodeContents(d);e.select();}else a.getSelection().selectElement(d);a.focus();}function s(){l&&l.setHtml(o);delete i.list;}var m=a.ui.spaceId("path"),l,i=a._.elementsPath,n=i.idBase;c.html+='<span id="'+m+'_label" class="cke_voice_label">'+a.lang.elementspath.eleLabel+'</span><span id="'+m+'" class="cke_path" role="group" aria-labelledby="'+m+'_label">'+o+"</span>";a.on("uiReady",function(){var d=a.ui.space("path");d&&a.focusManager.add(d,1);});i.onClick=j;var t=CKEDITOR.tools.addFunction(j),u=CKEDITOR.tools.addFunction(function(d,e){var g=i.idBase,b,e=new CKEDITOR.dom.event(e);b="rtl"==a.lang.dir;switch(e.getKeystroke()){case b?39:37:case 9:return(b=CKEDITOR.document.getById(g+(d+1)))||(b=CKEDITOR.document.getById(g+"0")),b.focus(),!1;case b?37:39:case CKEDITOR.SHIFT+9:return(b=CKEDITOR.document.getById(g+(d-1)))||(b=CKEDITOR.document.getById(g+(i.list.length-1))),b.focus(),!1;case 27:return a.focus(),!1;case 13:case 32:return j(d),!1;}return!0;});a.on("selectionChange",function(){a.editable();for(var d=[],e=i.list=[],g=[],b=i.filters,c=!0,j=a.elementPath().elements,f,k=j.length;k--;){var h=j[k],p=0;f=h.data("cke-display-name")?h.data("cke-display-name"):h.data("cke-real-element-type")?h.data("cke-real-element-type"):h.getName();c=h.hasAttribute("contenteditable")?"true"==h.getAttribute("contenteditable"):c;!c&&!h.hasAttribute("contenteditable")&&(p=1);for(var q=0;q<b.length;q++){var r=b[q](h,f);if(!1===r){p=1;break;}f=r||f;}p||(e.unshift(h),g.unshift(f));}e=e.length;for(b=0;b<e;b++){f=g[b],c=a.lang.elementspath.eleTitle.replace(/%1/,f),f=v.output({id:n+b,label:c,text:f,jsTitle:"javascript:void('"+f+"')",index:b,keyDownFn:u,clickFn:t}),d.unshift(f);}l||(l=CKEDITOR.document.getById(m));g=l;g.setHtml(d.join("")+o);a.fire("elementsPathUpdate",{space:g});});a.on("readOnly",s);a.on("contentDomUnload",s);a.addCommand("elementsPathFocus",k);a.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus");}k={editorFocus:!1,readOnly:1,exec:function exec(a){(a=CKEDITOR.document.getById(a._.elementsPath.idBase+"0"))&&a.focus(CKEDITOR.env.ie||CKEDITOR.env.air);}};var o='<span class="cke_path_empty">&nbsp;</span>',c="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(c+=' onkeypress="return false;"');CKEDITOR.env.gecko&&(c+=' onblur="this.style.cssText = this.style.cssText;"');var v=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+c+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function init(a){a._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]};a.on("uiSpace",function(c){"bottom"==c.data.space&&n(a,c.data);});}});})();(function(){function m(c,e,b){b=c.config.forceEnterMode||b;"wysiwyg"==c.mode&&(e||(e=c.activeEnterMode),c.elementPath().isContextFor("p")||(e=CKEDITOR.ENTER_BR,b=1),c.fire("saveSnapshot"),e==CKEDITOR.ENTER_BR?p(c,e,null,b):q(c,e,null,b),c.fire("saveSnapshot"));}function r(c){for(var c=c.getSelection().getRanges(!0),e=c.length-1;0<e;e--){c[e].deleteContents();}return c[0];}CKEDITOR.plugins.add("enterkey",{init:function init(c){c.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function exec(c){m(c);}});c.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function exec(c){m(c,c.activeShiftEnterMode,1);}});c.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]]);}});var u=CKEDITOR.dom.walker.whitespaces(),v=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function enterBlock(c,e,b,h){if(b=b||r(c)){var f=b.document,i=b.checkStartOfBlock(),k=b.checkEndOfBlock(),j=c.elementPath(b.startContainer),a=j.block,l=e==CKEDITOR.ENTER_DIV?"div":"p",d;if(i&&k){if(a&&(a.is("li")||a.getParent().is("li"))){a.is("li")||(a=a.getParent());b=a.getParent();d=b.getParent();var h=!a.hasPrevious(),n=!a.hasNext(),l=c.getSelection(),g=l.createBookmarks(),i=a.getDirection(1),k=a.getAttribute("class"),o=a.getAttribute("style"),m=d.getDirection(1)!=i,c=c.enterMode!=CKEDITOR.ENTER_BR||m||o||k;if(d.is("li")){if(h||n)a[h?"insertBefore":"insertAfter"](d);else a.breakParent(d);}else{if(c){if(j.block.is("li")?(d=f.createElement(e==CKEDITOR.ENTER_P?"p":"div"),m&&d.setAttribute("dir",i),o&&d.setAttribute("style",o),k&&d.setAttribute("class",k),a.moveChildren(d)):d=j.block,h||n)d[h?"insertBefore":"insertAfter"](b);else a.breakParent(b),d.insertAfter(b);}else if(a.appendBogus(!0),h||n)for(;f=a[h?"getFirst":"getLast"]();){f[h?"insertBefore":"insertAfter"](b);}else for(a.breakParent(b);f=a.getLast();){f.insertAfter(b);}a.remove();}l.selectBookmarks(g);return;}if(a&&a.getParent().is("blockquote")){a.breakParent(a.getParent());a.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||a.getPrevious().remove();a.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||a.getNext().remove();b.moveToElementEditStart(a);b.select();return;}}else if(a&&a.is("pre")&&!k){p(c,e,b,h);return;}if(i=b.splitBlock(l)){e=i.previousBlock;a=i.nextBlock;j=i.wasStartOfBlock;c=i.wasEndOfBlock;if(a)g=a.getParent(),g.is("li")&&(a.breakParent(g),a.move(a.getNext(),1));else if(e&&(g=e.getParent())&&g.is("li"))e.breakParent(g),g=e.getNext(),b.moveToElementEditStart(g),e.move(e.getPrevious());if(!j&&!c)a.is("li")&&(d=b.clone(),d.selectNodeContents(a),d=new CKEDITOR.dom.walker(d),d.evaluator=function(a){return!(v(a)||u(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$inline&&!(a.getName()in CKEDITOR.dtd.$empty));},(g=d.next())&&g.type==CKEDITOR.NODE_ELEMENT&&g.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?f.createElement("br"):f.createText(" ")).insertBefore(g)),a&&b.moveToElementEditStart(a);else{if(e){if(e.is("li")||!s.test(e.getName())&&!e.is("pre"))d=e.clone();}else a&&(d=a.clone());d?h&&!d.is("li")&&d.renameNode(l):g&&g.is("li")?d=g:(d=f.createElement(l),e&&(n=e.getDirection())&&d.setAttribute("dir",n));if(f=i.elementPath){h=0;for(l=f.elements.length;h<l;h++){g=f.elements[h];if(g.equals(f.block)||g.equals(f.blockLimit))break;CKEDITOR.dtd.$removeEmpty[g.getName()]&&(g=g.clone(),d.moveChildren(g),d.append(g));}}d.appendBogus();d.getParent()||b.insertNode(d);d.is("li")&&d.removeAttribute("value");if(CKEDITOR.env.ie&&j&&(!c||!e.getChildCount()))b.moveToElementEditStart(c?e:d),b.select();b.moveToElementEditStart(j&&!c?a:d);}b.select();b.scrollIntoView();}}},enterBr:function enterBr(c,e,b,h){if(b=b||r(c)){var f=b.document,i=b.checkEndOfBlock(),k=new CKEDITOR.dom.elementPath(c.getSelection().getStartElement()),j=k.block,a=j&&k.block.getName();!h&&"li"==a?q(c,e,b,h):(!h&&i&&s.test(a)?(i=j.getDirection())?(f=f.createElement("div"),f.setAttribute("dir",i),f.insertAfter(j),b.setStart(f,0)):(f.createElement("br").insertAfter(j),CKEDITOR.env.gecko&&f.createText("").insertAfter(j),b.setStartAt(j.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(c="pre"==a&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?f.createText("\r"):f.createElement("br"),b.deleteContents(),b.insertNode(c),CKEDITOR.env.needsBrFiller?(f.createText("﻿").insertAfter(c),i&&(j||k.blockLimit).appendBogus(),c.getNext().$.nodeValue="",b.setStartAt(c.getNext(),CKEDITOR.POSITION_AFTER_START)):b.setStartAt(c,CKEDITOR.POSITION_AFTER_END)),b.collapse(!0),b.select(),b.scrollIntoView());}}};var t=CKEDITOR.plugins.enterkey,p=t.enterBr,q=t.enterBlock,s=/^h[1-6]$/;})();(function(){function j(a,b){var d={},e=[],f={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},a=a.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(a,h){var c=b?"&"+h+";":f[h];d[c]=b?f[h]:"&"+h+";";e.push(c);return"";});if(!b&&a){var a=a.split(","),c=document.createElement("div"),g;c.innerHTML="&"+a.join(";&")+";";g=c.innerHTML;c=null;for(c=0;c<g.length;c++){var i=g.charAt(c);d[i]="&"+a[c]+";";e.push(i);}}d.regex=e.join(b?"|":"");return d;}CKEDITOR.plugins.add("entities",{afterInit:function afterInit(a){var b=a.config;if(a=(a=a.dataProcessor)&&a.htmlFilter){var d=[];!1!==b.basicEntities&&d.push("nbsp,gt,lt,amp");b.entities&&(d.length&&d.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),b.entities_latin&&d.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),b.entities_greek&&d.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),b.entities_additional&&d.push(b.entities_additional));var e=j(d.join(",")),f=e.regex?"["+e.regex+"]":"a^";delete e.regex;b.entities&&b.entities_processNumerical&&(f="[^ -~]|"+f);var f=RegExp(f,"g"),c=function c(a){return b.entities_processNumerical=="force"||!e[a]?"&#"+a.charCodeAt(0)+";":e[a];},g=j("nbsp,gt,lt,amp,shy",!0),i=RegExp(g.regex,"g"),k=function k(a){return g[a];};a.addRules({text:function text(a){return a.replace(i,k).replace(f,c);}},{applyToAll:!0,excludeNestedEditable:!0});}}});})();CKEDITOR.config.basicEntities=!0;CKEDITOR.config.entities=!0;CKEDITOR.config.entities_latin=!0;CKEDITOR.config.entities_greek=!0;CKEDITOR.config.entities_additional="#39";CKEDITOR.plugins.add("popup");CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function popup(e,a,b,d){a=a||"80%";b=b||"70%";"string"==typeof a&&1<a.length&&"%"==a.substr(a.length-1,1)&&(a=parseInt(window.screen.width*parseInt(a,10)/100,10));"string"==typeof b&&1<b.length&&"%"==b.substr(b.length-1,1)&&(b=parseInt(window.screen.height*parseInt(b,10)/100,10));640>a&&(a=640);420>b&&(b=420);var f=parseInt((window.screen.height-b)/2,10),g=parseInt((window.screen.width-a)/2,10),d=(d||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+a+",height="+b+",top="+f+",left="+g,c=window.open("",null,d,!0);if(!c)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(c.moveTo(g,f),c.resizeTo(a,b)),c.focus(),c.location.href=e;}catch(h){window.open(e,null,d,!0);}return!0;}});(function(){function g(a,c){var d=[];if(c)for(var b in c){d.push(b+"="+encodeURIComponent(c[b]));}else return a;return a+(-1!=a.indexOf("?")?"&":"?")+d.join("&");}function i(a){a+="";return a.charAt(0).toUpperCase()+a.substr(1);}function k(){var a=this.getDialog(),c=a.getParentEditor();c._.filebrowserSe=this;var d=c.config["filebrowser"+i(a.getName())+"WindowWidth"]||c.config.filebrowserWindowWidth||"80%",a=c.config["filebrowser"+i(a.getName())+"WindowHeight"]||c.config.filebrowserWindowHeight||"70%",b=this.filebrowser.params||{};b.CKEditor=c.name;b.CKEditorFuncNum=c._.filebrowserFn;b.langCode||(b.langCode=c.langCode);b=g(this.filebrowser.url,b);c.popup(b,d,a,c.config.filebrowserWindowFeatures||c.config.fileBrowserWindowFeatures);}function l(){var a=this.getDialog();a.getParentEditor()._.filebrowserSe=this;return!a.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value||!a.getContentElement(this["for"][0],this["for"][1]).getAction()?!1:!0;}function m(a,c,d){var b=d.params||{};b.CKEditor=a.name;b.CKEditorFuncNum=a._.filebrowserFn;b.langCode||(b.langCode=a.langCode);c.action=g(d.url,b);c.filebrowser=d;}function j(a,c,d,b){if(b&&b.length)for(var e,g=b.length;g--;){if(e=b[g],("hbox"==e.type||"vbox"==e.type||"fieldset"==e.type)&&j(a,c,d,e.children),e.filebrowser)if("string"==typeof e.filebrowser&&(e.filebrowser={action:"fileButton"==e.type?"QuickUpload":"Browse",target:e.filebrowser}),"Browse"==e.filebrowser.action){var f=e.filebrowser.url;void 0===f&&(f=a.config["filebrowser"+i(c)+"BrowseUrl"],void 0===f&&(f=a.config.filebrowserBrowseUrl));f&&(e.onClick=k,e.filebrowser.url=f,e.hidden=!1);}else if("QuickUpload"==e.filebrowser.action&&e["for"]&&(f=e.filebrowser.url,void 0===f&&(f=a.config["filebrowser"+i(c)+"UploadUrl"],void 0===f&&(f=a.config.filebrowserUploadUrl)),f)){var h=e.onClick;e.onClick=function(a){var b=a.sender;return h&&h.call(b,a)===false?false:l.call(b,a);};e.filebrowser.url=f;e.hidden=!1;m(a,d.getContents(e["for"][0]).get(e["for"][1]),e.filebrowser);}}}function h(a,c,d){if(-1!==d.indexOf(";")){for(var d=d.split(";"),b=0;b<d.length;b++){if(h(a,c,d[b]))return!0;}return!1;}return(a=a.getContents(c).get(d).filebrowser)&&a.url;}function n(a,c){var d=this._.filebrowserSe.getDialog(),b=this._.filebrowserSe["for"],e=this._.filebrowserSe.filebrowser.onSelect;b&&d.getContentElement(b[0],b[1]).reset();if(!("function"==typeof c&&!1===c.call(this._.filebrowserSe))&&!(e&&!1===e.call(this._.filebrowserSe,a,c))&&("string"==typeof c&&c&&alert(c),a&&(b=this._.filebrowserSe,d=b.getDialog(),b=b.filebrowser.target||null)))if(b=b.split(":"),e=d.getContentElement(b[0],b[1]))e.setValue(a),d.selectPage(b[0]);}CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function init(a){a._.filebrowserFn=CKEDITOR.tools.addFunction(n,a);a.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn);});}});CKEDITOR.on("dialogDefinition",function(a){if(a.editor.plugins.filebrowser)for(var c=a.data.definition,d,b=0;b<c.contents.length;++b){if(d=c.contents[b])j(a.editor,a.data.name,c,d.elements),d.hidden&&d.filebrowser&&(d.hidden=!h(c,d.id,d.filebrowser));}});})();CKEDITOR.plugins.add("find",{requires:"dialog",init:function init(a){var b=a.addCommand("find",new CKEDITOR.dialogCommand("find"));b.canUndo=!1;b.readOnly=1;a.addCommand("replace",new CKEDITOR.dialogCommand("replace")).canUndo=!1;a.ui.addButton&&(a.ui.addButton("Find",{label:a.lang.find.find,command:"find",toolbar:"find,10"}),a.ui.addButton("Replace",{label:a.lang.find.replace,command:"replace",toolbar:"find,20"}));CKEDITOR.dialog.add("find",this.path+"dialogs/find.js");CKEDITOR.dialog.add("replace",this.path+"dialogs/find.js");}});CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}};(function(){function g(a,b){var c=j.exec(a),d=j.exec(b);if(c){if(!c[2]&&"px"==d[2])return d[1];if("px"==c[2]&&!d[2])return d[1]+"px";}return b;}var i=CKEDITOR.htmlParser.cssStyle,h=CKEDITOR.tools.cssLength,j=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,k={elements:{$:function $(a){var b=a.attributes;if((b=(b=(b=b&&b["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(b)))&&b.children[0])&&a.attributes["data-cke-resizable"]){var c=new i(a).rules,a=b.attributes,d=c.width,c=c.height;d&&(a.width=g(a.width,d));c&&(a.height=g(a.height,c));}return b;}}};CKEDITOR.plugins.add("fakeobjects",{init:function init(a){a.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects");},afterInit:function afterInit(a){(a=(a=a.dataProcessor)&&a.htmlFilter)&&a.addRules(k,{applyToAll:!0});}});CKEDITOR.editor.prototype.createFakeElement=function(a,b,c,d){var e=this.lang.fakeobjects,e=e[c]||e.unknown,b={"class":b,"data-cke-realelement":encodeURIComponent(a.getOuterHtml()),"data-cke-real-node-type":a.type,alt:e,title:e,align:a.getAttribute("align")||""};CKEDITOR.env.hc||(b.src=CKEDITOR.tools.transparentImageData);c&&(b["data-cke-real-element-type"]=c);d&&(b["data-cke-resizable"]=d,c=new i(),d=a.getAttribute("width"),a=a.getAttribute("height"),d&&(c.rules.width=h(d)),a&&(c.rules.height=h(a)),c.populate(b));return this.document.createElement("img",{attributes:b});};CKEDITOR.editor.prototype.createFakeParserElement=function(a,b,c,d){var e=this.lang.fakeobjects,e=e[c]||e.unknown,f;f=new CKEDITOR.htmlParser.basicWriter();a.writeHtml(f);f=f.getHtml();b={"class":b,"data-cke-realelement":encodeURIComponent(f),"data-cke-real-node-type":a.type,alt:e,title:e,align:a.attributes.align||""};CKEDITOR.env.hc||(b.src=CKEDITOR.tools.transparentImageData);c&&(b["data-cke-real-element-type"]=c);d&&(b["data-cke-resizable"]=d,d=a.attributes,a=new i(),c=d.width,d=d.height,void 0!=c&&(a.rules.width=h(c)),void 0!=d&&(a.rules.height=h(d)),a.populate(b));return new CKEDITOR.htmlParser.element("img",b);};CKEDITOR.editor.prototype.restoreRealElement=function(a){if(a.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var b=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(a.data("cke-realelement")),this.document);if(a.data("cke-resizable")){var c=a.getStyle("width"),a=a.getStyle("height");c&&b.setAttribute("width",g(b.getAttribute("width"),c));a&&b.setAttribute("height",g(b.getAttribute("height"),a));}return b;};})();(function(){function d(a){a=a.attributes;return"application/x-shockwave-flash"==a.type||f.test(a.src||"");}function e(a,b){return a.createFakeParserElement(b,"cke_flash","flash",!0);}var f=/\.swf(?:$|\?)/i;CKEDITOR.plugins.add("flash",{requires:"dialog,fakeobjects",onLoad:function onLoad(){CKEDITOR.addCss("img.cke_flash{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}");},init:function init(a){var b="object[classid,codebase,height,hspace,vspace,width];param[name,value];embed[height,hspace,pluginspage,src,type,vspace,width]";CKEDITOR.dialog.isTabEnabled(a,"flash","properties")&&(b+=";object[align]; embed[allowscriptaccess,quality,scale,wmode]");CKEDITOR.dialog.isTabEnabled(a,"flash","advanced")&&(b+=";object[id]{*}; embed[bgcolor]{*}(*)");a.addCommand("flash",new CKEDITOR.dialogCommand("flash",{allowedContent:b,requiredContent:"embed"}));a.ui.addButton&&a.ui.addButton("Flash",{label:a.lang.common.flash,command:"flash",toolbar:"insert,20"});CKEDITOR.dialog.add("flash",this.path+"dialogs/flash.js");a.addMenuItems&&a.addMenuItems({flash:{label:a.lang.flash.properties,command:"flash",group:"flash"}});a.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&"flash"==b.data("cke-real-element-type")&&(a.data.dialog="flash");});a.contextMenu&&a.contextMenu.addListener(function(a){if(a&&a.is("img")&&!a.isReadOnly()&&"flash"==a.data("cke-real-element-type"))return{flash:CKEDITOR.TRISTATE_OFF};});},afterInit:function afterInit(a){var b=a.dataProcessor;(b=b&&b.dataFilter)&&b.addRules({elements:{"cke:object":function ckeObject(b){var c=b.attributes;if((!c.classid||!(""+c.classid).toLowerCase())&&!d(b)){for(c=0;c<b.children.length;c++){if("cke:embed"==b.children[c].name){if(!d(b.children[c]))break;return e(a,b);}}return null;}return e(a,b);},"cke:embed":function ckeEmbed(b){return!d(b)?null:e(a,b);}}},5);}});})();CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1});(function(){function i(a){var j=a.config,m=a.fire("uiSpace",{space:"top",html:""}).html,p=function(){function f(a,c,e){b.setStyle(c,s(e));b.setStyle("position",a);}function e(a){var b=i.getDocumentPosition();switch(a){case"top":f("absolute","top",b.y-n-o);break;case"pin":f("fixed","top",t);break;case"bottom":f("absolute","top",b.y+(c.height||c.bottom-c.top)+o);}k=a;}var k,i,l,c,h,n,r,m=j.floatSpaceDockedOffsetX||0,o=j.floatSpaceDockedOffsetY||0,q=j.floatSpacePinnedOffsetX||0,t=j.floatSpacePinnedOffsetY||0;return function(d){if(i=a.editable())if(d&&"focus"==d.name&&b.show(),b.removeStyle("left"),b.removeStyle("right"),l=b.getClientRect(),c=i.getClientRect(),h=g.getViewPaneSize(),n=l.height,r="pageXOffset"in g.$?g.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,k){n+o<=c.top?e("top"):n+o>h.height-c.bottom?e("pin"):e("bottom");var d=h.width/2,d=0<c.left&&c.right<h.width&&c.width>l.width?"rtl"==a.config.contentsLangDirection?"right":"left":d-c.left>c.right-d?"left":"right",f;l.width>h.width?(d="left",f=0):(f="left"==d?0<c.left?c.left:0:c.right<h.width?h.width-c.right:0,f+l.width>h.width&&(d="left"==d?"right":"left",f=0));b.setStyle(d,s(("pin"==k?q:m)+f+("pin"==k?0:"left"==d?r:-r)));}else k="pin",e("pin"),p(d);};}();if(m){var i=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(a.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(a.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),b=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(i.output({content:m,id:a.id,langDir:a.lang.dir,langCode:a.langCode,name:a.name,style:"display:none;z-index:"+(j.baseFloatZIndex-1),topId:a.ui.spaceId("top"),voiceLabel:a.title}))),q=CKEDITOR.tools.eventsBuffer(500,p),e=CKEDITOR.tools.eventsBuffer(100,p);b.unselectable();b.on("mousedown",function(a){a=a.data;a.getTarget().hasAscendant("a",1)||a.preventDefault();});a.on("focus",function(b){p(b);a.on("change",q.input);g.on("scroll",e.input);g.on("resize",e.input);});a.on("blur",function(){b.hide();a.removeListener("change",q.input);g.removeListener("scroll",e.input);g.removeListener("resize",e.input);});a.on("destroy",function(){g.removeListener("scroll",e.input);g.removeListener("resize",e.input);b.clearCustomData();b.remove();});a.focusManager.hasFocus&&b.show();a.focusManager.add(b,1);}}var g=CKEDITOR.document.getWindow(),s=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function init(a){a.on("loaded",function(){i(this);},null,null,20);}});})();CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function onLoad(){var f=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),g=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),h=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),i=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(a,b){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),b));};CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function $(a,b){var b=b||{},c=b.attributes||(b.attributes={});(this.multiSelect=!!b.multiSelect)&&(c["aria-multiselectable"]=!0);!c.role&&(c.role="listbox");this.base.apply(this,arguments);this.element.setAttribute("role",c.role);c=this.keys;c[40]="next";c[9]="next";c[38]="prev";c[CKEDITOR.SHIFT+9]="prev";c[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(c[13]="mouseup");this._.pendingHtml=[];this._.pendingList=[];this._.items={};this._.groups={};},_:{close:function close(){if(this._.started){var a=f.output({items:this._.pendingList.join("")});this._.pendingList=[];this._.pendingHtml.push(a);delete this._.started;}},getClick:function getClick(){this._.click||(this._.click=CKEDITOR.tools.addFunction(function(a){var b=this.toggle(a);if(this.onClick)this.onClick(a,b);},this));return this._.click;}},proto:{add:function add(a,b,c){var d=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0);this._.items[a]=d;var e;e=CKEDITOR.tools.htmlEncodeAttr(a).replace(i,"\\'");a={id:d,val:e,onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(c||a),text:b||a};this._.pendingList.push(g.output(a));},startGroup:function startGroup(a){this._.close();var b=CKEDITOR.tools.getNextId();this._.groups[a]=b;this._.pendingHtml.push(h.output({id:b,label:a}));},commit:function commit(){this._.close();this.element.appendHtml(this._.pendingHtml.join(""));delete this._.size;this._.pendingHtml=[];},toggle:function toggle(a){var b=this.isMarked(a);b?this.unmark(a):this.mark(a);return!b;},hideGroup:function hideGroup(a){var b=(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();a&&(a.setStyle("display","none"),b&&"ul"==b.getName()&&b.setStyle("display","none"));},hideItem:function hideItem(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none");},showAll:function showAll(){var a=this._.items,b=this._.groups,c=this.element.getDocument(),d;for(d in a){c.getById(a[d]).setStyle("display","");}for(var e in b){a=c.getById(b[e]),d=a.getNext(),a.setStyle("display",""),d&&"ul"==d.getName()&&d.setStyle("display","");}},mark:function mark(a){this.multiSelect||this.unmarkAll();var a=this._.items[a],b=this.element.getDocument().getById(a);b.addClass("cke_selected");this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",!0);this.onMark&&this.onMark(b);},unmark:function unmark(a){var b=this.element.getDocument(),a=this._.items[a],c=b.getById(a);c.removeClass("cke_selected");b.getById(a+"_option").removeAttribute("aria-selected");this.onUnmark&&this.onUnmark(c);},unmarkAll:function unmarkAll(){var a=this._.items,b=this.element.getDocument(),c;for(c in a){var d=a[c];b.getById(d).removeClass("cke_selected");b.getById(d+"_option").removeAttribute("aria-selected");}this.onUnmark&&this.onUnmark();},isMarked:function isMarked(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected");},focus:function focus(a){this._.focusIndex=-1;var b=this.element.getElementsByTag("a"),c,d=-1;if(a)for(c=this.element.getDocument().getById(this._.items[a]).getFirst();a=b.getItem(++d);){if(a.equals(c)){this._.focusIndex=d;break;}}else this.element.focus();c&&setTimeout(function(){c.focus();},0);}}});}});CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function beforeInit(d){d.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler);}});(function(){var d='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" hidefocus=true title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":'" href="javascript:void(\'{titleJs}\')"')+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(d+=' onkeypress="return false;"');CKEDITOR.env.gecko&&(d+=' onblur="this.style.cssText = this.style.cssText;"');var d=d+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>"),i=CKEDITOR.addTemplate("combo",d);CKEDITOR.UI_RICHCOMBO="richcombo";CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function $(a){CKEDITOR.tools.extend(this,a,{canGroup:!1,title:a.label,modes:{wysiwyg:1},editorFocus:1});a=this.panel||{};delete this.panel;this.id=CKEDITOR.tools.getNextNumber();this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document;a.className="cke_combopanel";a.block={multiSelect:a.multiSelect,attributes:a.attributes};a.toolbarRelated=!0;this._={panelDefinition:a,items:{}};},proto:{renderHtml:function renderHtml(a){var b=[];this.render(a,b);return b.join("");},render:function render(a,b){function g(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var c=this.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;a.readOnly&&!this.readOnly&&(c=CKEDITOR.TRISTATE_DISABLED);this.setState(c);this.setValue("");c!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh();}}var d=CKEDITOR.env,h="cke_"+this.id,e=CKEDITOR.tools.addFunction(function(b){j&&(a.unlockSelection(1),j=0);c.execute(b);},this),f=this,c={id:h,combo:this,focus:function focus(){CKEDITOR.document.getById(h).getChild(1).focus();},execute:function execute(c){var b=f._;if(b.state!=CKEDITOR.TRISTATE_DISABLED)if(f.createPanel(a),b.on)b.panel.hide();else{f.commit();var d=f.getValue();d?b.list.mark(d):b.list.unmarkAll();b.panel.showBlock(f.id,new CKEDITOR.dom.element(c),4);}},clickFn:e};a.on("activeFilterChange",g,this);a.on("mode",g,this);a.on("selectionChange",g,this);!this.readOnly&&a.on("readOnly",g,this);var k=CKEDITOR.tools.addFunction(function(b,d){var b=new CKEDITOR.dom.event(b),g=b.getKeystroke();if(40==g)a.once("panelShow",function(a){a.data._.panel._.currentBlock.onKeyDown(40);});switch(g){case 13:case 32:case 40:CKEDITOR.tools.callFunction(e,d);break;default:c.onkey(c,g);}b.preventDefault();}),l=CKEDITOR.tools.addFunction(function(){c.onfocus&&c.onfocus();}),j=0;c.keyDownFn=k;d={id:h,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:d.gecko&&!d.hc?"":(this.title||"").replace("'",""),keydownFn:k,focusFn:l,clickFn:e};i.output(d,b);if(this.onRender)this.onRender();return c;},createPanel:function createPanel(a){if(!this._.panel){var b=this._.panelDefinition,d=this._.panelDefinition.block,i=b.parent||CKEDITOR.document.getBody(),h="cke_combopanel__"+this.name,e=new CKEDITOR.ui.floatPanel(a,i,b),f=e.addListBlock(this.id,d),c=this;e.onShow=function(){this.element.addClass(h);c.setState(CKEDITOR.TRISTATE_ON);c._.on=1;c.editorFocus&&!a.focusManager.hasFocus&&a.focus();if(c.onOpen)c.onOpen();a.once("panelShow",function(){f.focus(!f.multiSelect&&c.getValue());});};e.onHide=function(b){this.element.removeClass(h);c.setState(c.modes&&c.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);c._.on=0;if(!b&&c.onClose)c.onClose();};e.onEscape=function(){e.hide(1);};f.onClick=function(a,b){c.onClick&&c.onClick.call(c,a,b);e.hide();};this._.panel=e;this._.list=f;e.getBlock(this.id).onHide=function(){c._.on=0;c.setState(CKEDITOR.TRISTATE_OFF);};this.init&&this.init();}},setValue:function setValue(a,b){this._.value=a;var d=this.document.getById("cke_"+this.id+"_text");d&&(!a&&!b?(b=this.label,d.addClass("cke_combo_inlinelabel")):d.removeClass("cke_combo_inlinelabel"),d.setText("undefined"!=typeof b?b:a));},getValue:function getValue(){return this._.value||"";},unmarkAll:function unmarkAll(){this._.list.unmarkAll();},mark:function mark(a){this._.list.mark(a);},hideItem:function hideItem(a){this._.list.hideItem(a);},hideGroup:function hideGroup(a){this._.list.hideGroup(a);},showAll:function showAll(){this._.list.showAll();},add:function add(a,b,d){this._.items[a]=d||a;this._.list.add(a,b,d);},startGroup:function startGroup(a){this._.list.startGroup(a);},commit:function commit(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this));this._.committed=1;},setState:function setState(a){if(this._.state!=a){var b=this.document.getById("cke_"+this.id);b.setState(a,"cke_combo");a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled");this._.state=a;}},getState:function getState(){return this._.state;},enable:function enable(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState);},disable:function disable(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED));}},statics:{handler:{create:function create(a){return new CKEDITOR.ui.richCombo(a);}}}});CKEDITOR.ui.prototype.addRichCombo=function(a,b){this.add(a,CKEDITOR.UI_RICHCOMBO,b);};})();(function(){function e(b,a,e,h,j,n,l,o){for(var p=b.config,k=new CKEDITOR.style(l),c=j.split(";"),j=[],g={},d=0;d<c.length;d++){var f=c[d];if(f){var f=f.split("/"),m={},i=c[d]=f[0];m[e]=j[d]=f[1]||i;g[i]=new CKEDITOR.style(l,m);g[i]._.definition.name=i;}else c.splice(d--,1);}b.ui.addRichCombo(a,{label:h.label,title:h.panelTitle,toolbar:"styles,"+o,allowedContent:k,requiredContent:k,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(p.contentsCss),multiSelect:!1,attributes:{"aria-label":h.panelTitle}},init:function init(){this.startGroup(h.panelTitle);for(var b=0;b<c.length;b++){var a=c[b];this.add(a,g[a].buildPreview(),a);}},onClick:function onClick(a){b.focus();b.fire("saveSnapshot");var c=g[a];b[this.getValue()==a?"removeStyle":"applyStyle"](c);b.fire("saveSnapshot");},onRender:function onRender(){b.on("selectionChange",function(a){for(var c=this.getValue(),a=a.data.path.elements,d=0,f;d<a.length;d++){f=a[d];for(var e in g){if(g[e].checkElementMatch(f,!0,b)){e!=c&&this.setValue(e);return;}}}this.setValue("",n);},this);},refresh:function refresh(){b.activeFilter.check(k)||this.setState(CKEDITOR.TRISTATE_DISABLED);}});}CKEDITOR.plugins.add("font",{requires:"richcombo",init:function init(b){var a=b.config;e(b,"Font","family",b.lang.font,a.font_names,a.font_defaultLabel,a.font_style,30);e(b,"FontSize","size",b.lang.font.fontSize,a.fontSize_sizes,a.fontSize_defaultLabel,a.fontSize_style,40);}});})();CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif";CKEDITOR.config.font_defaultLabel="";CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]};CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px";CKEDITOR.config.fontSize_defaultLabel="";CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]};CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",onLoad:function onLoad(){CKEDITOR.addCss(".cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n");CKEDITOR.addCss("img.cke_hidden{background-image: url("+CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}");},init:function init(a){var b=a.lang,g=0,h={email:1,password:1,search:1,tel:1,text:1,url:1},j={checkbox:"input[type,name,checked]",radio:"input[type,name,checked]",textfield:"input[type,name,value,size,maxlength]",textarea:"textarea[cols,rows,name]",select:"select[name,size,multiple]; option[value,selected]",button:"input[type,name,value]",form:"form[action,name,id,enctype,target,method]",hiddenfield:"input[type,name,value]",imagebutton:"input[type,alt,src]{width,height,border,border-width,border-style,margin,float}"},k={checkbox:"input",radio:"input",textfield:"input",textarea:"textarea",select:"select",button:"input",form:"form",hiddenfield:"input",imagebutton:"input"},e=function e(d,c,_e){var h={allowedContent:j[c],requiredContent:k[c]};"form"==c&&(h.context="form");a.addCommand(c,new CKEDITOR.dialogCommand(c,h));a.ui.addButton&&a.ui.addButton(d,{label:b.common[d.charAt(0).toLowerCase()+d.slice(1)],command:c,toolbar:"forms,"+(g+=10)});CKEDITOR.dialog.add(c,_e);},f=this.path+"dialogs/";!a.blockless&&e("Form","form",f+"form.js");e("Checkbox","checkbox",f+"checkbox.js");e("Radio","radio",f+"radio.js");e("TextField","textfield",f+"textfield.js");e("Textarea","textarea",f+"textarea.js");e("Select","select",f+"select.js");e("Button","button",f+"button.js");var i=a.plugins.image;i&&!a.plugins.image2&&e("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js");e("HiddenField","hiddenfield",f+"hiddenfield.js");a.addMenuItems&&(e={checkbox:{label:b.forms.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:b.forms.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:b.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:b.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},button:{label:b.forms.button.title,command:"button",group:"button"},select:{label:b.forms.select.title,command:"select",group:"select"},textarea:{label:b.forms.textarea.title,command:"textarea",group:"textarea"}},i&&(e.imagebutton={label:b.image.titleButton,command:"imagebutton",group:"imagebutton"}),!a.blockless&&(e.form={label:b.forms.form.menu,command:"form",group:"form"}),a.addMenuItems(e));a.contextMenu&&(!a.blockless&&a.contextMenu.addListener(function(d,c,a){if((d=a.contains("form",1))&&!d.isReadOnly())return{form:CKEDITOR.TRISTATE_OFF};}),a.contextMenu.addListener(function(d){if(d&&!d.isReadOnly()){var c=d.getName();if(c=="select")return{select:CKEDITOR.TRISTATE_OFF};if(c=="textarea")return{textarea:CKEDITOR.TRISTATE_OFF};if(c=="input"){var a=d.getAttribute("type")||"text";switch(a){case"button":case"submit":case"reset":return{button:CKEDITOR.TRISTATE_OFF};case"checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case"radio":return{radio:CKEDITOR.TRISTATE_OFF};case"image":return i?{imagebutton:CKEDITOR.TRISTATE_OFF}:null;}if(h[a])return{textfield:CKEDITOR.TRISTATE_OFF};}if(c=="img"&&d.data("cke-real-element-type")=="hiddenfield")return{hiddenfield:CKEDITOR.TRISTATE_OFF};}}));a.on("doubleclick",function(d){var c=d.data.element;if(!a.blockless&&c.is("form"))d.data.dialog="form";else if(c.is("select"))d.data.dialog="select";else if(c.is("textarea"))d.data.dialog="textarea";else if(c.is("img")&&c.data("cke-real-element-type")=="hiddenfield")d.data.dialog="hiddenfield";else if(c.is("input")){c=c.getAttribute("type")||"text";switch(c){case"button":case"submit":case"reset":d.data.dialog="button";break;case"checkbox":d.data.dialog="checkbox";break;case"radio":d.data.dialog="radio";break;case"image":d.data.dialog="imagebutton";}if(h[c])d.data.dialog="textfield";}});},afterInit:function afterInit(a){var b=a.dataProcessor,g=b&&b.htmlFilter,b=b&&b.dataFilter;CKEDITOR.env.ie&&g&&g.addRules({elements:{input:function input(a){var a=a.attributes,b=a.type;b||(a.type="text");("checkbox"==b||"radio"==b)&&"on"==a.value&&delete a.value;}}},{applyToAll:!0});b&&b.addRules({elements:{input:function input(b){if("hidden"==b.attributes.type)return a.createFakeParserElement(b,"cke_hidden","hiddenfield");}}},{applyToAll:!0});}});CKEDITOR.plugins.add("format",{requires:"richcombo",init:function init(a){if(!a.blockless){for(var f=a.config,c=a.lang.format,j=f.format_tags.split(";"),d={},k=0,l=[],g=0;g<j.length;g++){var h=j[g],i=new CKEDITOR.style(f["format_"+h]);if(!a.filter.customConfig||a.filter.check(i))k++,d[h]=i,d[h]._.enterMode=a.config.enterMode,l.push(i);}0!==k&&a.ui.addRichCombo("Format",{label:c.label,title:c.panelTitle,toolbar:"styles,20",allowedContent:l,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(f.contentsCss),multiSelect:!1,attributes:{"aria-label":c.panelTitle}},init:function init(){this.startGroup(c.panelTitle);for(var a in d){var e=c["tag_"+a];this.add(a,d[a].buildPreview(e),e);}},onClick:function onClick(b){a.focus();a.fire("saveSnapshot");var b=d[b],e=a.elementPath();a[b.checkActive(e,a)?"removeStyle":"applyStyle"](b);setTimeout(function(){a.fire("saveSnapshot");},0);},onRender:function onRender(){a.on("selectionChange",function(b){var e=this.getValue(),b=b.data.path;this.refresh();for(var c in d){if(d[c].checkActive(b,a)){c!=e&&this.setValue(c,a.lang.format["tag_"+c]);return;}}this.setValue("");},this);},onOpen:function onOpen(){this.showAll();for(var b in d){a.activeFilter.check(d[b])||this.hideItem(b);}},refresh:function refresh(){var b=a.elementPath();if(b){if(b.isContextFor("p"))for(var c in d){if(a.activeFilter.check(d[c]))return;}this.setState(CKEDITOR.TRISTATE_DISABLED);}}});}}});CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div";CKEDITOR.config.format_p={element:"p"};CKEDITOR.config.format_div={element:"div"};CKEDITOR.config.format_pre={element:"pre"};CKEDITOR.config.format_address={element:"address"};CKEDITOR.config.format_h1={element:"h1"};CKEDITOR.config.format_h2={element:"h2"};CKEDITOR.config.format_h3={element:"h3"};CKEDITOR.config.format_h4={element:"h4"};CKEDITOR.config.format_h5={element:"h5"};CKEDITOR.config.format_h6={element:"h6"};(function(){var b={canUndo:!1,exec:function exec(a){var b=a.document.createElement("hr");a.insertElement(b);},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function init(a){a.blockless||(a.addCommand("horizontalrule",b),a.ui.addButton&&a.ui.addButton("HorizontalRule",{label:a.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}));}});})();CKEDITOR.plugins.add("htmlwriter",{init:function init(b){var a=new CKEDITOR.htmlWriter();a.forceSimpleAmpersand=b.config.forceSimpleAmpersand;a.indentationChars=b.config.dataIndentationChars||"\t";b.dataProcessor.writer=a;}});CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function $(){this.base();this.indentationChars="\t";this.selfClosingEnd=" />";this.lineBreakChars="\n";this.sortAttributes=1;this._.indent=0;this._.indentation="";this._.inPre=0;this._.rules={};var b=CKEDITOR.dtd,a;for(a in CKEDITOR.tools.extend({},b.$nonBodyContent,b.$block,b.$listItem,b.$tableContent)){this.setRules(a,{indent:!b[a]["#"],breakBeforeOpen:1,breakBeforeClose:!b[a]["#"],breakAfterClose:1,needsSpace:a in b.$block&&!(a in{li:1,dt:1,dd:1})});}this.setRules("br",{breakAfterOpen:1});this.setRules("title",{indent:0,breakAfterOpen:0});this.setRules("style",{indent:0,breakBeforeClose:1});this.setRules("pre",{breakAfterOpen:1,indent:0});},proto:{openTag:function openTag(b){var a=this._.rules[b];this._.afterCloser&&a&&a.needsSpace&&this._.needsSpace&&this._.output.push("\n");this._.indent?this.indentation():a&&a.breakBeforeOpen&&(this.lineBreak(),this.indentation());this._.output.push("<",b);this._.afterCloser=0;},openTagClose:function openTagClose(b,a){var c=this._.rules[b];a?(this._.output.push(this.selfClosingEnd),c&&c.breakAfterClose&&(this._.needsSpace=c.needsSpace)):(this._.output.push(">"),c&&c.indent&&(this._.indentation+=this.indentationChars));c&&c.breakAfterOpen&&this.lineBreak();"pre"==b&&(this._.inPre=1);},attribute:function attribute(b,a){"string"==typeof a&&(this.forceSimpleAmpersand&&(a=a.replace(/&amp;/g,"&")),a=CKEDITOR.tools.htmlEncodeAttr(a));this._.output.push(" ",b,'="',a,'"');},closeTag:function closeTag(b){var a=this._.rules[b];a&&a.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length));this._.indent?this.indentation():a&&a.breakBeforeClose&&(this.lineBreak(),this.indentation());this._.output.push("</",b,">");"pre"==b&&(this._.inPre=0);a&&a.breakAfterClose&&(this.lineBreak(),this._.needsSpace=a.needsSpace);this._.afterCloser=1;},text:function text(b){this._.indent&&(this.indentation(),!this._.inPre&&(b=CKEDITOR.tools.ltrim(b)));this._.output.push(b);},comment:function comment(b){this._.indent&&this.indentation();this._.output.push("<\!--",b,"--\>");},lineBreak:function lineBreak(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars);this._.indent=1;},indentation:function indentation(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation);this._.indent=0;},reset:function reset(){this._.output=[];this._.indent=0;this._.indentation="";this._.afterCloser=0;this._.inPre=0;},setRules:function setRules(b,a){var c=this._.rules[b];c?CKEDITOR.tools.extend(c,a,!0):this._.rules[b]=a;}}});(function(){CKEDITOR.plugins.add("iframe",{requires:"dialog,fakeobjects",onLoad:function onLoad(){CKEDITOR.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}");},init:function init(a){var b=a.lang.iframe,c="iframe[align,longdesc,frameborder,height,name,scrolling,src,title,width]";a.plugins.dialogadvtab&&(c+=";iframe"+a.plugins.dialogadvtab.allowedContent({id:1,classes:1,styles:1}));CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js");a.addCommand("iframe",new CKEDITOR.dialogCommand("iframe",{allowedContent:c,requiredContent:"iframe"}));a.ui.addButton&&a.ui.addButton("Iframe",{label:b.toolbar,command:"iframe",toolbar:"insert,80"});a.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&"iframe"==b.data("cke-real-element-type")&&(a.data.dialog="iframe");});a.addMenuItems&&a.addMenuItems({iframe:{label:b.title,command:"iframe",group:"image"}});a.contextMenu&&a.contextMenu.addListener(function(a){if(a&&a.is("img")&&"iframe"==a.data("cke-real-element-type"))return{iframe:CKEDITOR.TRISTATE_OFF};});},afterInit:function afterInit(a){var b=a.dataProcessor;(b=b&&b.dataFilter)&&b.addRules({elements:{iframe:function iframe(b){return a.createFakeParserElement(b,"cke_iframe","iframe",!0);}}});}});})();(function(){function k(a){var d=this.editor,b=a.document,c=b.body,e=b.getElementById("cke_actscrpt");e&&e.parentNode.removeChild(e);(e=b.getElementById("cke_shimscrpt"))&&e.parentNode.removeChild(e);(e=b.getElementById("cke_basetagscrpt"))&&e.parentNode.removeChild(e);CKEDITOR.env.gecko&&(c.contentEditable=!1,2E4>CKEDITOR.env.version&&(c.innerHTML=c.innerHTML.replace(/^.*<\!-- cke-content-start --\>/,""),setTimeout(function(){var a=new CKEDITOR.dom.range(new CKEDITOR.dom.document(b));a.setStart(new CKEDITOR.dom.node(c),0);d.getSelection().selectRanges([a]);},0)));c.contentEditable=!0;CKEDITOR.env.ie&&(c.hideFocus=!0,c.disabled=!0,c.removeAttribute("disabled"));delete this._.isLoadingData;this.$=c;b=new CKEDITOR.dom.document(b);this.setup();CKEDITOR.env.ie&&(b.getDocumentElement().addClass(b.$.compatMode),d.config.enterMode!=CKEDITOR.ENTER_P&&this.attachListener(b,"selectionchange",function(){var a=b.getBody(),c=d.getSelection(),e=c&&c.getRanges()[0];e&&a.getHtml().match(/^<p>(?:&nbsp;|<br>)<\/p>$/i)&&e.startContainer.equals(a)&&setTimeout(function(){e=d.getSelection().getRanges()[0];if(!e.startContainer.equals("body")){a.getFirst().remove(1);e.moveToElementEditEnd(a);e.select();}},0);}));if(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)b.getDocumentElement().on("mousedown",function(a){a.data.getTarget().is("html")&&setTimeout(function(){d.editable().focus();});});l(d);try{d.document.$.execCommand("2D-position",!1,!0);}catch(g){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==d.document.$.compatMode)&&this.attachListener(this,"keydown",function(a){var b=a.data.getKeystroke();if(b==33||b==34)if(CKEDITOR.env.ie)setTimeout(function(){d.getSelection().scrollIntoView();},0);else if(d.window.$.innerHeight>this.$.offsetHeight){var c=d.createRange();c[b==33?"moveToElementEditStart":"moveToElementEditEnd"](this);c.select();a.data.preventDefault();}});CKEDITOR.env.ie&&this.attachListener(b,"blur",function(){try{b.$.selection.empty();}catch(a){}});CKEDITOR.env.iOS&&this.attachListener(b,"touchend",function(){a.focus();});d.document.getElementsByTag("title").getItem(0).data("cke-title",d.document.$.title);CKEDITOR.env.ie&&(d.document.$.title=this._.docTitle);CKEDITOR.tools.setTimeout(function(){if(this.status=="unloaded")this.status="ready";d.fire("contentDom");if(this._.isPendingFocus){d.focus();this._.isPendingFocus=false;}setTimeout(function(){d.fire("dataReady");},0);CKEDITOR.env.ie&&setTimeout(function(){if(d.document){var a=d.document.$.body;a.runtimeStyle.marginBottom="0px";a.runtimeStyle.marginBottom="";}},1E3);},0,this);}function l(a){function d(){var c;a.editable().attachListener(a,"selectionChange",function(){var d=a.getSelection().getSelectedElement();d&&(c&&(c.detachEvent("onresizestart",b),c=null),d.$.attachEvent("onresizestart",b),c=d.$);});}function b(a){a.returnValue=!1;}if(CKEDITOR.env.gecko)try{var c=a.document.$;c.execCommand("enableObjectResizing",!1,!a.config.disableObjectResizing);c.execCommand("enableInlineTableEditing",!1,!a.config.disableNativeTableHandles);}catch(e){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&a.config.disableObjectResizing&&d(a);}function m(){var a=[];if(8<=CKEDITOR.document.$.documentMode){a.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var d=[],b;for(b in CKEDITOR.dtd.$removeEmpty){d.push("html.CSS1Compat "+b+"[contenteditable=false]");}a.push(d.join(",")+"{display:inline-block}");}else CKEDITOR.env.gecko&&(a.push("html{height:100% !important}"),a.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));a.push("html{cursor:text;*cursor:auto}");a.push("img,input,textarea{cursor:default}");return a.join("\n");}CKEDITOR.plugins.add("wysiwygarea",{init:function init(a){a.config.fullPage&&a.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"});a.addMode("wysiwyg",function(d){function b(b){b&&b.removeListener();a.editable(new j(a,e.$.contentWindow.document.body));a.setData(a.getData(1),d);}var c="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",c=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent(c)+"}())":"",e=CKEDITOR.dom.element.createFromHtml('<iframe src="'+c+'" frameBorder="0"></iframe>');e.setStyles({width:"100%",height:"100%"});e.addClass("cke_wysiwyg_frame cke_reset");var g=a.ui.space("contents");g.append(e);if(c=CKEDITOR.env.ie||CKEDITOR.env.gecko)e.on("load",b);var f=a.title,h=a.fire("ariaEditorHelpLabel",{}).label;f&&(CKEDITOR.env.ie&&h&&(f+=", "+h),e.setAttribute("title",f));if(h){var f=CKEDITOR.tools.getNextId(),i=CKEDITOR.dom.element.createFromHtml('<span id="'+f+'" class="cke_voice_label">'+h+"</span>");g.append(i,1);e.setAttribute("aria-describedby",f);}a.on("beforeModeUnload",function(a){a.removeListener();i&&i.remove();});e.setAttributes({tabIndex:a.tabIndex,allowTransparency:"true"});!c&&b();CKEDITOR.env.webkit&&(c=function c(){g.setStyle("width","100%");e.hide();e.setSize("width",g.getSize("width"));g.removeStyle("width");e.show();},e.setCustomData("onResize",c),CKEDITOR.document.getWindow().on("resize",c));a.fire("ariaWidget",e);});}});CKEDITOR.editor.prototype.addContentsCss=function(a){var d=this.config,b=d.contentsCss;CKEDITOR.tools.isArray(b)||(d.contentsCss=b?[b]:[]);d.contentsCss.push(a);};var j=CKEDITOR.tools.createClass({$:function $(a){this.base.apply(this,arguments);this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(a){CKEDITOR.tools.setTimeout(k,0,this,a);},this);this._.docTitle=this.getWindow().getFrame().getAttribute("title");},base:CKEDITOR.editable,proto:{setData:function setData(a,d){var b=this.editor;if(d)this.setHtml(a),b.fire("dataReady");else{this._.isLoadingData=!0;b._.dataStore={id:1};var c=b.config,e=c.fullPage,g=c.docType,f=CKEDITOR.tools.buildStyleHtml(m()).replace(/<style>/,'<style data-cke-temp="1">');e||(f+=CKEDITOR.tools.buildStyleHtml(b.config.contentsCss));var h=c.baseHref?'<base href="'+c.baseHref+'" data-cke-temp="1" />':"";e&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(a){b.docType=g=a;return"";}).replace(/<\?xml\s[^\?]*\?>/i,function(a){b.xmlDeclaration=a;return"";}));a=b.dataProcessor.toHtml(a);e?(/<body[\s|>]/.test(a)||(a="<body>"+a),/<html[\s|>]/.test(a)||(a="<html>"+a+"</html>"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$&<title></title>")):a=a.replace(/<html[^>]*>/,"$&<head><title></title></head>"),h&&(a=a.replace(/<head>/,"$&"+h)),a=a.replace(/<\/head\s*>/,f+"$&"),a=g+a):a=c.docType+'<html dir="'+c.contentsLangDirection+'" lang="'+(c.contentsLanguage||b.langCode)+'"><head><title>'+this._.docTitle+"</title>"+h+f+"</head><body"+(c.bodyId?' id="'+c.bodyId+'"':"")+(c.bodyClass?' class="'+c.bodyClass+'"':"")+">"+a+"</body></html>";CKEDITOR.env.gecko&&(a=a.replace(/<body/,'<body contenteditable="true" '),2E4>CKEDITOR.env.version&&(a=a.replace(/<body[^>]*>/,"$&<\!-- cke-content-start --\>")));c='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"<\/script>";CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(c+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)<\/script>');h&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(c+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;<\/script>');a=a.replace(/(?=\s*<\/(:?head)>)/,c);this.clearCustomData();this.clearListeners();b.fire("contentDomUnload");var i=this.getDocument();try{i.write(a);}catch(j){setTimeout(function(){i.write(a);},0);}}},getData:function getData(a){if(a)return this.getHtml();var a=this.editor,d=a.config,b=d.fullPage,c=b&&a.docType,e=b&&a.xmlDeclaration,g=this.getDocument(),b=b?g.getDocumentElement().getOuterHtml():g.getBody().getHtml();CKEDITOR.env.gecko&&d.enterMode!=CKEDITOR.ENTER_BR&&(b=b.replace(/<br>(?=\s*(:?$|<\/body>))/,""));b=a.dataProcessor.toDataFormat(b);e&&(b=e+"\n"+b);c&&(b=c+"\n"+b);return b;},focus:function focus(){this._.isLoadingData?this._.isPendingFocus=!0:j.baseProto.focus.call(this);},detach:function detach(){var a=this.editor,d=a.document,a=a.window.getFrame();j.baseProto.detach.call(this);this.clearCustomData();d.getDocumentElement().clearCustomData();a.clearCustomData();CKEDITOR.tools.removeFunction(this._.frameLoadedHandler);(d=a.removeCustomData("onResize"))&&d.removeListener();a.remove();}}});})();CKEDITOR.config.disableObjectResizing=!1;CKEDITOR.config.disableNativeTableHandles=!0;CKEDITOR.config.disableNativeSpellChecker=!0;CKEDITOR.config.contentsCss=CKEDITOR.getUrl("contents.css");(function(){function e(b,a){a||(a=b.getSelection().getSelectedElement());if(a&&a.is("img")&&!a.data("cke-realelement")&&!a.isReadOnly())return a;}function f(b){var a=b.getStyle("float");if("inherit"==a||"none"==a)a=0;a||(a=b.getAttribute("align"));return a;}CKEDITOR.plugins.add("image",{requires:"dialog",init:function init(b){if(!b.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var a="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(b,"image","advanced")&&(a="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)");b.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:a,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]}));b.ui.addButton&&b.ui.addButton("Image",{label:b.lang.common.image,command:"image",toolbar:"insert,10"});b.on("doubleclick",function(b){var a=b.data.element;a.is("img")&&!a.data("cke-realelement")&&!a.isReadOnly()&&(b.data.dialog="image");});b.addMenuItems&&b.addMenuItems({image:{label:b.lang.image.menu,command:"image",group:"image"}});b.contextMenu&&b.contextMenu.addListener(function(a){if(e(b,a))return{image:CKEDITOR.TRISTATE_OFF};});}},afterInit:function afterInit(b){function a(a){var d=b.getCommand("justify"+a);if(d){if("left"==a||"right"==a)d.on("exec",function(d){var c=e(b),g;c&&(g=f(c),g==a?(c.removeStyle("float"),a==f(c)&&c.removeAttribute("align")):c.setStyle("float",a),d.cancel());});d.on("refresh",function(d){var c=e(b);c&&(c=f(c),this.setState(c==a?CKEDITOR.TRISTATE_ON:"right"==a||"left"==a?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),d.cancel());});}}b.plugins.image2||(a("left"),a("right"),a("center"),a("block"));}});})();CKEDITOR.config.image_removeLinkByEmptyURL=!0;(function(){function k(a,b){var e,f;b.on("refresh",function(a){var b=[i],c;for(c in a.data.states){b.push(a.data.states[c]);}this.setState(CKEDITOR.tools.search(b,m)?m:i);},b,null,100);b.on("exec",function(b){e=a.getSelection();f=e.createBookmarks(1);b.data||(b.data={});b.data.done=!1;},b,null,0);b.on("exec",function(){a.forceNextSelectionCheck();e.selectBookmarks(f);},b,null,100);}var i=CKEDITOR.TRISTATE_DISABLED,m=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function init(a){var b=CKEDITOR.plugins.indent.genericDefinition;k(a,a.addCommand("indent",new b(!0)));k(a,a.addCommand("outdent",new b()));a.ui.addButton&&(a.ui.addButton("Indent",{label:a.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),a.ui.addButton("Outdent",{label:a.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"}));a.on("dirChanged",function(b){var f=a.createRange(),j=b.data.node;f.setStartBefore(j);f.setEndAfter(j);for(var l=new CKEDITOR.dom.walker(f),c;c=l.next();){if(c.type==CKEDITOR.NODE_ELEMENT)if(!c.equals(j)&&c.getDirection()){f.setStartAfter(c);l=new CKEDITOR.dom.walker(f);}else{var d=a.config.indentClasses;if(d)for(var g=b.data.dir=="ltr"?["_rtl",""]:["","_rtl"],h=0;h<d.length;h++){if(c.hasClass(d[h]+g[0])){c.removeClass(d[h]+g[0]);c.addClass(d[h]+g[1]);}}d=c.getStyle("margin-right");g=c.getStyle("margin-left");d?c.setStyle("margin-left",d):c.removeStyle("margin-left");g?c.setStyle("margin-right",g):c.removeStyle("margin-right");}}});}});CKEDITOR.plugins.indent={genericDefinition:function genericDefinition(a){this.isIndent=!!a;this.startDisabled=!this.isIndent;},specificDefinition:function specificDefinition(a,b,e){this.name=b;this.editor=a;this.jobs={};this.enterBr=a.config.enterMode==CKEDITOR.ENTER_BR;this.isIndent=!!e;this.relatedGlobal=e?"indent":"outdent";this.indentKey=e?9:CKEDITOR.SHIFT+9;this.database={};},registerCommands:function registerCommands(a,b){a.on("pluginsLoaded",function(){for(var a in b){(function(a,b){var e=a.getCommand(b.relatedGlobal),c;for(c in b.jobs){e.on("exec",function(d){d.data.done||(a.fire("lockSnapshot"),b.execJob(a,c)&&(d.data.done=!0),a.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(b.database));},this,null,c),e.on("refresh",function(d){d.data.states||(d.data.states={});d.data.states[b.name+"@"+c]=b.refreshJob(a,c,d.data.path);},this,null,c);}a.addFeature(b);})(this,b[a]);}});}};CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function exec(){}};CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function execJob(a,b){var e=this.jobs[b];if(e.state!=i)return e.exec.call(this,a);},refreshJob:function refreshJob(a,b,e){b=this.jobs[b];b.state=a.activeFilter.checkFeature(this)?b.refresh.call(this,a,e):i;return b.state;},getContext:function getContext(a){return a.contains(this.context);}};})();(function(){function h(b,c,a){if(!b.getCustomData("indent_processed")){var d=this.editor,f=this.isIndent;if(c){d=b.$.className.match(this.classNameRegex);a=0;d&&(d=d[1],a=CKEDITOR.tools.indexOf(c,d)+1);if(0>(a+=f?1:-1))return;a=Math.min(a,c.length);a=Math.max(a,0);b.$.className=CKEDITOR.tools.ltrim(b.$.className.replace(this.classNameRegex,""));0<a&&b.addClass(c[a-1]);}else{var c=i(b,a),a=parseInt(b.getStyle(c),10),g=d.config.indentOffset||40;isNaN(a)&&(a=0);a+=(f?1:-1)*g;if(0>a)return;a=Math.max(a,0);a=Math.ceil(a/g)*g;b.setStyle(c,a?a+(d.config.indentUnit||"px"):"");""===b.getAttribute("style")&&b.removeAttribute("style");}CKEDITOR.dom.element.setMarker(this.database,b,"indent_processed",1);}}function i(b,c){return"ltr"==(c||b.getComputedStyle("direction"))?"margin-left":"margin-right";}var j=CKEDITOR.dtd.$listItem,l=CKEDITOR.dtd.$list,f=CKEDITOR.TRISTATE_DISABLED,k=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function init(b){function c(b,c){a.specificDefinition.apply(this,arguments);this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:!d?"margin-left,margin-right":null,classes:d||null}};this.enterBr&&(this.allowedContent.div=!0);this.requiredContent=(this.enterBr?"div":"p")+(d?"("+d.join(",")+")":"{margin-left}");this.jobs={20:{refresh:function refresh(a,b){var e=b.block||b.blockLimit;if(e.is(j))e=e.getParent();else if(e.getAscendant(j))return f;if(!this.enterBr&&!this.getContext(b))return f;if(d){var c;c=d;var e=e.$.className.match(this.classNameRegex),g=this.isIndent;c=e?g?e[1]!=c.slice(-1):true:g;return c?k:f;}return this.isIndent?k:e?CKEDITOR[(parseInt(e.getStyle(i(e)),10)||0)<=0?"TRISTATE_DISABLED":"TRISTATE_OFF"]:f;},exec:function exec(a){var b=a.getSelection(),b=b&&b.getRanges()[0],c;if(c=a.elementPath().contains(l))h.call(this,c,d);else{b=b.createIterator();a=a.config.enterMode;b.enforceRealBlocks=true;for(b.enlargeBr=a!=CKEDITOR.ENTER_BR;c=b.getNextParagraph(a==CKEDITOR.ENTER_P?"p":"div");){c.isReadOnly()||h.call(this,c,d);}}return true;}}};}var a=CKEDITOR.plugins.indent,d=b.config.indentClasses;a.registerCommands(b,{indentblock:new c(b,"indentblock",!0),outdentblock:new c(b,"outdentblock")});CKEDITOR.tools.extend(c.prototype,a.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:d?RegExp("(?:^|\\s+)("+d.join("|")+")(?=$|\\s)"):null});}});})();(function(){function s(e){function g(b){for(var f=d.startContainer,a=d.endContainer;f&&!f.getParent().equals(b);){f=f.getParent();}for(;a&&!a.getParent().equals(b);){a=a.getParent();}if(!f||!a)return!1;for(var h=f,f=[],c=!1;!c;){h.equals(a)&&(c=!0),f.push(h),h=h.getNext();}if(1>f.length)return!1;h=b.getParents(!0);for(a=0;a<h.length;a++){if(h[a].getName&&k[h[a].getName()]){b=h[a];break;}}for(var h=n.isIndent?1:-1,a=f[0],f=f[f.length-1],c=CKEDITOR.plugins.list.listToArray(b,o),g=c[f.getCustomData("listarray_index")].indent,a=a.getCustomData("listarray_index");a<=f.getCustomData("listarray_index");a++){if(c[a].indent+=h,0<h){var l=c[a].parent;c[a].parent=new CKEDITOR.dom.element(l.getName(),l.getDocument());}}for(a=f.getCustomData("listarray_index")+1;a<c.length&&c[a].indent>g;a++){c[a].indent+=h;}f=CKEDITOR.plugins.list.arrayToList(c,o,null,e.config.enterMode,b.getDirection());if(!n.isIndent){var i;if((i=b.getParent())&&i.is("li"))for(var h=f.listNode.getChildren(),m=[],j,a=h.count()-1;0<=a;a--){(j=h.getItem(a))&&j.is&&j.is("li")&&m.push(j);}}f&&f.listNode.replace(b);if(m&&m.length)for(a=0;a<m.length;a++){for(j=b=m[a];(j=j.getNext())&&j.is&&j.getName()in k;){CKEDITOR.env.needsNbspFiller&&!b.getFirst(t)&&b.append(d.document.createText(" ")),b.append(j);}b.insertAfter(i);}f&&e.fire("contentDomInvalidated");return!0;}for(var n=this,o=this.database,k=this.context,l=e.getSelection(),l=(l&&l.getRanges()).createIterator(),d;d=l.getNextRange();){for(var b=d.getCommonAncestor();b&&!(b.type==CKEDITOR.NODE_ELEMENT&&k[b.getName()]);){b=b.getParent();}b||(b=d.startPath().contains(k))&&d.setEndAt(b,CKEDITOR.POSITION_BEFORE_END);if(!b){var c=d.getEnclosedNode();c&&c.type==CKEDITOR.NODE_ELEMENT&&c.getName()in k&&(d.setStartAt(c,CKEDITOR.POSITION_AFTER_START),d.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),b=c);}b&&d.startContainer.type==CKEDITOR.NODE_ELEMENT&&d.startContainer.getName()in k&&(c=new CKEDITOR.dom.walker(d),c.evaluator=i,d.startContainer=c.next());b&&d.endContainer.type==CKEDITOR.NODE_ELEMENT&&d.endContainer.getName()in k&&(c=new CKEDITOR.dom.walker(d),c.evaluator=i,d.endContainer=c.previous());if(b)return g(b);}return 0;}function p(e,g){g||(g=e.contains(this.context));return g&&e.block&&e.block.equals(g.getFirst(i));}function i(e){return e.type==CKEDITOR.NODE_ELEMENT&&e.is("li");}function t(e){return u(e)&&v(e);}var u=CKEDITOR.dom.walker.whitespaces(!0),v=CKEDITOR.dom.walker.bookmark(!1,!0),q=CKEDITOR.TRISTATE_DISABLED,r=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function init(e){function g(e,g){i.specificDefinition.apply(this,arguments);this.requiredContent=["ul","ol"];e.on("key",function(g){if("wysiwyg"==e.mode&&g.data.keyCode==this.indentKey){var d=this.getContext(e.elementPath());if(d&&(!this.isIndent||!p.call(this,e.elementPath(),d)))e.execCommand(this.relatedGlobal),g.cancel();}},this);this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(e,d){var b=this.getContext(d),c=p.call(this,d,b);return!b||!this.isIndent||c?q:r;}:function(e,d){return!this.getContext(d)||this.isIndent?q:r;},exec:CKEDITOR.tools.bind(s,this)};}var i=CKEDITOR.plugins.indent;i.registerCommands(e,{indentlist:new g(e,"indentlist",!0),outdentlist:new g(e,"outdentlist")});CKEDITOR.tools.extend(g.prototype,i.specificDefinition.prototype,{context:{ol:1,ul:1}});}});})();CKEDITOR.plugins.add("smiley",{requires:"dialog",init:function init(a){a.config.smiley_path=a.config.smiley_path||this.path+"images/";a.addCommand("smiley",new CKEDITOR.dialogCommand("smiley",{allowedContent:"img[alt,height,!src,title,width]",requiredContent:"img"}));a.ui.addButton&&a.ui.addButton("Smiley",{label:a.lang.smiley.toolbar,command:"smiley",toolbar:"insert,50"});CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js");}});CKEDITOR.config.smiley_images="regular_smile.png sad_smile.png wink_smile.png teeth_smile.png confused_smile.png tongue_smile.png embarrassed_smile.png omg_smile.png whatchutalkingabout_smile.png angry_smile.png angel_smile.png shades_smile.png devil_smile.png cry_smile.png lightbulb.png thumbs_down.png thumbs_up.png heart.png broken_heart.png kiss.png envelope.png".split(" ");CKEDITOR.config.smiley_descriptions="smiley;sad;wink;laugh;frown;cheeky;blush;surprise;indecision;angry;angel;cool;devil;crying;enlightened;no;yes;heart;broken heart;kiss;mail".split(";");(function(){function l(a,c){var c=void 0===c||c,b;if(c)b=a.getComputedStyle("text-align");else{for(;!a.hasAttribute||!a.hasAttribute("align")&&!a.getStyle("text-align");){b=a.getParent();if(!b)break;a=b;}b=a.getStyle("text-align")||a.getAttribute("align")||"";}b&&(b=b.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,""));!b&&c&&(b="rtl"==a.getComputedStyle("direction")?"right":"left");return b;}function g(a,c,b){this.editor=a;this.name=c;this.value=b;this.context="p";var c=a.config.justifyClasses,h=a.config.enterMode==CKEDITOR.ENTER_P?"p":"div";if(c){switch(b){case"left":this.cssClassName=c[0];break;case"center":this.cssClassName=c[1];break;case"right":this.cssClassName=c[2];break;case"justify":this.cssClassName=c[3];}this.cssClassRegex=RegExp("(?:^|\\s+)(?:"+c.join("|")+")(?=$|\\s)");this.requiredContent=h+"("+this.cssClassName+")";}else this.requiredContent=h+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}};a.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0);}function j(a){var c=a.editor,b=c.createRange();b.setStartBefore(a.data.node);b.setEndAfter(a.data.node);for(var h=new CKEDITOR.dom.walker(b),d;d=h.next();){if(d.type==CKEDITOR.NODE_ELEMENT)if(!d.equals(a.data.node)&&d.getDirection())b.setStartAfter(d),h=new CKEDITOR.dom.walker(b);else{var e=c.config.justifyClasses;e&&(d.hasClass(e[0])?(d.removeClass(e[0]),d.addClass(e[2])):d.hasClass(e[2])&&(d.removeClass(e[2]),d.addClass(e[0])));e=d.getStyle("text-align");"left"==e?d.setStyle("text-align","right"):"right"==e&&d.setStyle("text-align","left");}}}g.prototype={exec:function exec(a){var c=a.getSelection(),b=a.config.enterMode;if(c){for(var h=c.createBookmarks(),d=c.getRanges(),e=this.cssClassName,g,f,i=a.config.useComputedState,i=void 0===i||i,k=d.length-1;0<=k;k--){g=d[k].createIterator();for(g.enlargeBr=b!=CKEDITOR.ENTER_BR;f=g.getNextParagraph(b==CKEDITOR.ENTER_P?"p":"div");){if(!f.isReadOnly()){f.removeAttribute("align");f.removeStyle("text-align");var j=e&&(f.$.className=CKEDITOR.tools.ltrim(f.$.className.replace(this.cssClassRegex,""))),m=this.state==CKEDITOR.TRISTATE_OFF&&(!i||l(f,!0)!=this.value);e?m?f.addClass(e):j||f.removeAttribute("class"):m&&f.setStyle("text-align",this.value);}}}a.focus();a.forceNextSelectionCheck();c.selectBookmarks(h);}},refresh:function refresh(a,c){var b=c.block||c.blockLimit;this.setState("body"!=b.getName()&&l(b,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);}};CKEDITOR.plugins.add("justify",{init:function init(a){if(!a.blockless){var c=new g(a,"justifyleft","left"),b=new g(a,"justifycenter","center"),h=new g(a,"justifyright","right"),d=new g(a,"justifyblock","justify");a.addCommand("justifyleft",c);a.addCommand("justifycenter",b);a.addCommand("justifyright",h);a.addCommand("justifyblock",d);a.ui.addButton&&(a.ui.addButton("JustifyLeft",{label:a.lang.justify.left,command:"justifyleft",toolbar:"align,10"}),a.ui.addButton("JustifyCenter",{label:a.lang.justify.center,command:"justifycenter",toolbar:"align,20"}),a.ui.addButton("JustifyRight",{label:a.lang.justify.right,command:"justifyright",toolbar:"align,30"}),a.ui.addButton("JustifyBlock",{label:a.lang.justify.block,command:"justifyblock",toolbar:"align,40"}));a.on("dirChanged",j);}}});})();CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function onLoad(){var d=function d(c){var a=this._,b=a.menu;a.state!==CKEDITOR.TRISTATE_DISABLED&&(a.on&&b?b.hide():(a.previousState=a.state,b||(b=a.menu=new CKEDITOR.menu(c,{panel:{className:"cke_menu_panel",attributes:{"aria-label":c.lang.common.options}}}),b.onHide=CKEDITOR.tools.bind(function(){var b=this.command?c.getCommand(this.command).modes:this.modes;this.setState(!b||b[c.mode]?a.previousState:CKEDITOR.TRISTATE_DISABLED);a.on=0;},this),this.onMenu&&b.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),a.on=1,setTimeout(function(){b.show(CKEDITOR.document.getById(a.id),4);},0)));};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function $(c){delete c.panel;this.base(c);this.hasArrow=!0;this.click=d;},statics:{handler:{create:function create(c){return new CKEDITOR.ui.menuButton(c);}}}});},beforeInit:function beforeInit(d){d.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler);}});CKEDITOR.UI_MENUBUTTON="menubutton";(function(){CKEDITOR.plugins.add("language",{requires:"menubutton",init:function init(a){var b=a.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],c=this,d=a.lang.language,e={},g,h,i,f;a.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function exec(a,b){var c=e["language_"+b];if(c)a[c.style.checkActive(a.elementPath(),a)?"removeStyle":"applyStyle"](c.style);},refresh:function refresh(a){this.setState(c.getCurrentLangElement(a)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);}});for(f=0;f<b.length;f++){g=b[f].split(":"),h=g[0],i="language_"+h,e[i]={label:g[1],langId:h,group:"language",order:f,ltr:"rtl"!=(""+g[2]).toLowerCase(),onClick:function onClick(){a.execCommand("language",this.langId);},role:"menuitemcheckbox"},e[i].style=new CKEDITOR.style({element:"span",attributes:{lang:h,dir:e[i].ltr?"ltr":"rtl"}});}e.language_remove={label:d.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:e.length,onClick:function onClick(){var b=c.getCurrentLangElement(a);b&&a.execCommand("language",b.getAttribute("lang"));}};a.addMenuGroup("language",1);a.addMenuGroup("language_remove");a.addMenuItems(e);a.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:d.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",toolbar:"bidi,30",command:"language",onMenu:function onMenu(){var b={},d=c.getCurrentLangElement(a),f;for(f in e){b[f]=CKEDITOR.TRISTATE_OFF;}b.language_remove=d?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;d&&(b["language_"+d.getAttribute("lang")]=CKEDITOR.TRISTATE_ON);return b;}});},getCurrentLangElement:function getCurrentLangElement(a){var b=a.elementPath(),a=b&&b.elements,c;if(b)for(var d=0;d<a.length;d++){b=a[d],!c&&"span"==b.getName()&&b.hasAttribute("dir")&&b.hasAttribute("lang")&&(c=b);}return c;}});})();(function(){function m(c){return c.replace(/'/g,"\\$&");}function n(c){for(var b,a=c.length,f=[],e=0;e<a;e++){b=c.charCodeAt(e),f.push(b);}return"String.fromCharCode("+f.join(",")+")";}function o(c,b){var a=c.plugins.link,f=a.compiledProtectionFunction.params,e,d;d=[a.compiledProtectionFunction.name,"("];for(var g=0;g<f.length;g++){a=f[g].toLowerCase(),e=b[a],0<g&&d.push(","),d.push("'",e?m(encodeURIComponent(b[a])):"","'");}d.push(")");return d.join("");}function l(c){var c=c.config.emailProtection||"",b;c&&"encode"!=c&&(b={},c.replace(/^([^(]+)\(([^)]+)\)$/,function(a,c,e){b.name=c;b.params=[];e.replace(/[^,\s]+/g,function(a){b.params.push(a);});}));return b;}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function onLoad(){function c(b){return a.replace(/%1/g,"rtl"==b?"right":"left").replace(/%2/g,"cke_contents_"+b);}var b="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",a=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+b+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+b+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(c("ltr")+c("rtl"));},init:function init(c){var b="a[!href]";CKEDITOR.dialog.isTabEnabled(c,"link","advanced")&&(b=b.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)"));CKEDITOR.dialog.isTabEnabled(c,"link","target")&&(b=b.replace("]",",target,onclick]"));c.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:b,requiredContent:"a[href]"}));c.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"}));c.addCommand("unlink",new CKEDITOR.unlinkCommand());c.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand());c.setKeystroke(CKEDITOR.CTRL+76,"link");c.ui.addButton&&(c.ui.addButton("Link",{label:c.lang.link.toolbar,command:"link",toolbar:"links,10"}),c.ui.addButton("Unlink",{label:c.lang.link.unlink,command:"unlink",toolbar:"links,20"}),c.ui.addButton("Anchor",{label:c.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"}));CKEDITOR.dialog.add("link",this.path+"dialogs/link.js");CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js");c.on("doubleclick",function(a){var b=CKEDITOR.plugins.link.getSelectedLink(c)||a.data.element;if(!b.isReadOnly())if(b.is("a")){a.data.dialog=b.getAttribute("name")&&(!b.getAttribute("href")||!b.getChildCount())?"anchor":"link";a.data.link=b;}else if(CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,b))a.data.dialog="anchor";},null,null,0);c.on("doubleclick",function(a){a.data.dialog in{link:1,anchor:1}&&a.data.link&&c.getSelection().selectElement(a.data.link);},null,null,20);c.addMenuItems&&c.addMenuItems({anchor:{label:c.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:c.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:c.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:c.lang.link.unlink,command:"unlink",group:"link",order:5}});c.contextMenu&&c.contextMenu.addListener(function(a){if(!a||a.isReadOnly())return null;a=CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,a);if(!a&&!(a=CKEDITOR.plugins.link.getSelectedLink(c)))return null;var b={};a.getAttribute("href")&&a.getChildCount()&&(b={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF});if(a&&a.hasAttribute("name"))b.anchor=b.removeAnchor=CKEDITOR.TRISTATE_OFF;return b;});this.compiledProtectionFunction=l(c);},afterInit:function afterInit(c){c.dataProcessor.dataFilter.addRules({elements:{a:function a(_a11){return!_a11.attributes.name?null:!_a11.children.length?c.createFakeParserElement(_a11,"cke_anchor","anchor"):null;}}});var b=c._.elementsPath&&c._.elementsPath.filters;b&&b.push(function(a,b){if("a"==b&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,a)||a.getAttribute("name")&&(!a.getAttribute("href")||!a.getChildCount())))return"anchor";});}});var p=/^javascript:/,q=/^mailto:([^?]+)(?:\?(.+))?$/,r=/subject=([^;?:@&=$,\/]*)/,s=/body=([^;?:@&=$,\/]*)/,t=/^#(.*)$/,u=/^((?:http|https|ftp|news):\/\/)?(.*)$/,v=/^(_(?:self|top|parent|blank))$/,w=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,x=/^javascript:([^(]+)\(([^)]+)\)$/,y=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,z=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,j={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType","class":"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function getSelectedLink(c){var b=c.getSelection(),a=b.getSelectedElement();return a&&a.is("a")?a:(b=b.getRanges()[0])?(b.shrink(CKEDITOR.SHRINK_TEXT),c.elementPath(b.getCommonAncestor()).contains("a",1)):null;},getEditorAnchors:function getEditorAnchors(c){for(var b=c.editable(),a=b.isInline()&&!c.plugins.divarea?c.document:b,b=a.getElementsByTag("a"),a=a.getElementsByTag("img"),f=[],e=0,d;d=b.getItem(e++);){if(d.data("cke-saved-name")||d.hasAttribute("name"))f.push({name:d.data("cke-saved-name")||d.getAttribute("name"),id:d.getAttribute("id")});}for(e=0;d=a.getItem(e++);){(d=this.tryRestoreFakeAnchor(c,d))&&f.push({name:d.getAttribute("name"),id:d.getAttribute("id")});}return f;},fakeAnchor:!0,tryRestoreFakeAnchor:function tryRestoreFakeAnchor(c,b){if(b&&b.data("cke-real-element-type")&&"anchor"==b.data("cke-real-element-type")){var a=c.restoreRealElement(b);if(a.data("cke-saved-name"))return a;}},parseLinkAttributes:function parseLinkAttributes(c,b){var a=b&&(b.data("cke-saved-href")||b.getAttribute("href"))||"",f=c.plugins.link.compiledProtectionFunction,e=c.config.emailProtection,d,g={};a.match(p)&&("encode"==e?a=a.replace(w,function(a,b,c){return"mailto:"+String.fromCharCode.apply(String,b.split(","))+(c&&c.replace(/\\'/g,"'"));}):e&&a.replace(x,function(a,b,c){if(b==f.name){g.type="email";for(var a=g.email={},b=/(^')|('$)/g,c=c.match(/[^,\s]+/g),d=c.length,e,h,i=0;i<d;i++){e=decodeURIComponent,h=c[i].replace(b,"").replace(/\\'/g,"'"),h=e(h),e=f.params[i].toLowerCase(),a[e]=h;}a.address=[a.name,a.domain].join("@");}}));if(!g.type)if(e=a.match(t))g.type="anchor",g.anchor={},g.anchor.name=g.anchor.id=e[1];else if(e=a.match(q)){d=a.match(r);a=a.match(s);g.type="email";var i=g.email={};i.address=e[1];d&&(i.subject=decodeURIComponent(d[1]));a&&(i.body=decodeURIComponent(a[1]));}else if(a&&(d=a.match(u)))g.type="url",g.url={},g.url.protocol=d[1],g.url.url=d[2];if(b){if(a=b.getAttribute("target"))g.target={type:a.match(v)?a:"frame",name:a};else if(a=(a=b.data("cke-pa-onclick")||b.getAttribute("onclick"))&&a.match(y))for(g.target={type:"popup",name:a[1]};e=z.exec(a[2]);){("yes"==e[2]||"1"==e[2])&&!(e[1]in{height:1,width:1,top:1,left:1})?g.target[e[1]]=!0:isFinite(e[2])&&(g.target[e[1]]=e[2]);}var a={},h;for(h in j){(e=b.getAttribute(h))&&(a[j[h]]=e);}if(h=b.data("cke-saved-name")||a.advName)a.advName=h;CKEDITOR.tools.isEmpty(a)||(g.advanced=a);}return g;},getLinkAttributes:function getLinkAttributes(c,b){var a=c.config.emailProtection||"",f={};switch(b.type){case"url":var a=b.url&&void 0!=b.url.protocol?b.url.protocol:"http://",e=b.url&&CKEDITOR.tools.trim(b.url.url)||"";f["data-cke-saved-href"]=0===e.indexOf("/")?e:a+e;break;case"anchor":a=b.anchor&&b.anchor.id;f["data-cke-saved-href"]="#"+(b.anchor&&b.anchor.name||a||"");break;case"email":var d=b.email,e=d.address;switch(a){case"":case"encode":var g=encodeURIComponent(d.subject||""),i=encodeURIComponent(d.body||""),d=[];g&&d.push("subject="+g);i&&d.push("body="+i);d=d.length?"?"+d.join("&"):"";"encode"==a?(a=["javascript:void(location.href='mailto:'+",n(e)],d&&a.push("+'",m(d),"'"),a.push(")")):a=["mailto:",e,d];break;default:a=e.split("@",2),d.name=a[0],d.domain=a[1],a=["javascript:",o(c,d)];}f["data-cke-saved-href"]=a.join("");}if(b.target)if("popup"==b.target.type){for(var a=["window.open(this.href, '",b.target.name||"","', '"],h="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),e=h.length,g=function g(a){b.target[a]&&h.push(a+"="+b.target[a]);},d=0;d<e;d++){h[d]+=b.target[h[d]]?"=yes":"=no";}g("width");g("left");g("height");g("top");a.push(h.join(","),"'); return false;");f["data-cke-pa-onclick"]=a.join("");}else"notSet"!=b.target.type&&b.target.name&&(f.target=b.target.name);if(b.advanced){for(var k in j){(a=b.advanced[j[k]])&&(f[k]=a);}f.name&&(f["data-cke-saved-name"]=f.name);}f["data-cke-saved-href"]&&(f.href=f["data-cke-saved-href"]);k=CKEDITOR.tools.extend({target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1},j);for(var l in f){delete k[l];}return{set:f,removed:CKEDITOR.tools.objectKeys(k)};}};CKEDITOR.unlinkCommand=function(){};CKEDITOR.unlinkCommand.prototype={exec:function exec(c){var b=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});c.removeStyle(b);},refresh:function refresh(c,b){var a=b.lastElement&&b.lastElement.getAscendant("a",!0);a&&"a"==a.getName()&&a.getAttribute("href")&&a.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED);},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"};CKEDITOR.removeAnchorCommand=function(){};CKEDITOR.removeAnchorCommand.prototype={exec:function exec(c){var b=c.getSelection(),a=b.createBookmarks(),f;if(b&&(f=b.getSelectedElement())&&(!f.getChildCount()?CKEDITOR.plugins.link.tryRestoreFakeAnchor(c,f):f.is("a")))f.remove(1);else if(f=CKEDITOR.plugins.link.getSelectedLink(c))f.hasAttribute("href")?(f.removeAttributes({name:1,"data-cke-saved-name":1}),f.removeClass("cke_anchor")):f.remove(1);b.selectBookmarks(a);},requiredContent:"a[name]"};CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0});})();(function(){function E(c,j,e){function b(b){if((d=a[b?"getFirst":"getLast"]())&&(!d.is||!d.isBlockBoundary())&&(m=j.root[b?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))&&(!m.is||!m.isBlockBoundary({br:1})))c.document.createElement("br")[b?"insertBefore":"insertAfter"](d);}for(var k=CKEDITOR.plugins.list.listToArray(j.root,e),g=[],h=0;h<j.contents.length;h++){var f=j.contents[h];if((f=f.getAscendant("li",!0))&&!f.getCustomData("list_item_processed"))g.push(f),CKEDITOR.dom.element.setMarker(e,f,"list_item_processed",!0);}f=null;for(h=0;h<g.length;h++){f=g[h].getCustomData("listarray_index"),k[f].indent=-1;}for(h=f+1;h<k.length;h++){if(k[h].indent>k[h-1].indent+1){g=k[h-1].indent+1-k[h].indent;for(f=k[h].indent;k[h]&&k[h].indent>=f;){k[h].indent+=g,h++;}h--;}}var a=CKEDITOR.plugins.list.arrayToList(k,e,null,c.config.enterMode,j.root.getAttribute("dir")).listNode,d,m;b(!0);b();a.replace(j.root);c.fire("contentDomInvalidated");}function x(c,j){this.name=c;this.context=this.type=j;this.allowedContent=j+" li";this.requiredContent=j;}function A(c,j,e,b){for(var k,g;k=c[b?"getLast":"getFirst"](F);){(g=k.getDirection(1))!==j.getDirection(1)&&k.setAttribute("dir",g),k.remove(),e?k[b?"insertBefore":"insertAfter"](e):j.append(k,b);}}function B(c){var j;(j=function j(e){var b=c[e?"getPrevious":"getNext"](q);b&&b.type==CKEDITOR.NODE_ELEMENT&&b.is(c.getName())&&(A(c,b,null,!e),c.remove(),c=b);})();j(1);}function C(c){return c.type==CKEDITOR.NODE_ELEMENT&&(c.getName()in CKEDITOR.dtd.$block||c.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[c.getName()]["#"];}function y(c,j,e){c.fire("saveSnapshot");e.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var b=e.extractContents();j.trim(!1,!0);var k=j.createBookmark(),g=new CKEDITOR.dom.elementPath(j.startContainer),h=g.block,g=g.lastElement.getAscendant("li",1)||h,f=new CKEDITOR.dom.elementPath(e.startContainer),a=f.contains(CKEDITOR.dtd.$listItem),f=f.contains(CKEDITOR.dtd.$list);h?(h=h.getBogus())&&h.remove():f&&(h=f.getPrevious(q))&&v(h)&&h.remove();(h=b.getLast())&&h.type==CKEDITOR.NODE_ELEMENT&&h.is("br")&&h.remove();(h=j.startContainer.getChild(j.startOffset))?b.insertBefore(h):j.startContainer.append(b);if(a&&(b=w(a)))g.contains(a)?(A(b,a.getParent(),a),b.remove()):g.append(b);for(;e.checkStartOfBlock()&&e.checkEndOfBlock();){f=e.startPath();b=f.block;if(!b)break;b.is("li")&&(g=b.getParent(),b.equals(g.getLast(q))&&b.equals(g.getFirst(q))&&(b=g));e.moveToPosition(b,CKEDITOR.POSITION_BEFORE_START);b.remove();}e=e.clone();b=c.editable();e.setEndAt(b,CKEDITOR.POSITION_BEFORE_END);e=new CKEDITOR.dom.walker(e);e.evaluator=function(a){return q(a)&&!v(a);};(e=e.next())&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$list&&B(e);j.moveToBookmark(k);j.select();c.fire("saveSnapshot");}function w(c){return(c=c.getLast(q))&&c.type==CKEDITOR.NODE_ELEMENT&&c.getName()in r?c:null;}var r={ol:1,ul:1},G=CKEDITOR.dom.walker.whitespaces(),D=CKEDITOR.dom.walker.bookmark(),q=function q(c){return!(G(c)||D(c));},v=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function listToArray(c,j,e,b,k){if(!r[c.getName()])return[];b||(b=0);e||(e=[]);for(var g=0,h=c.getChildCount();g<h;g++){var f=c.getChild(g);f.type==CKEDITOR.NODE_ELEMENT&&f.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(f,j,e,b+1);if("li"==f.$.nodeName.toLowerCase()){var a={parent:c,indent:b,element:f,contents:[]};k?a.grandparent=k:(a.grandparent=c.getParent(),a.grandparent&&"li"==a.grandparent.$.nodeName.toLowerCase()&&(a.grandparent=a.grandparent.getParent()));j&&CKEDITOR.dom.element.setMarker(j,f,"listarray_index",e.length);e.push(a);for(var d=0,m=f.getChildCount(),i;d<m;d++){i=f.getChild(d),i.type==CKEDITOR.NODE_ELEMENT&&r[i.getName()]?CKEDITOR.plugins.list.listToArray(i,j,e,b+1,a.grandparent):a.contents.push(i);}}}return e;},arrayToList:function arrayToList(c,j,e,b,k){e||(e=0);if(!c||c.length<e+1)return null;for(var g,h=c[e].parent.getDocument(),f=new CKEDITOR.dom.documentFragment(h),a=null,d=e,m=Math.max(c[e].indent,0),i=null,n,l,p=b==CKEDITOR.ENTER_P?"p":"div";;){var o=c[d];g=o.grandparent;n=o.element.getDirection(1);if(o.indent==m){if(!a||c[d].parent.getName()!=a.getName())a=c[d].parent.clone(!1,1),k&&a.setAttribute("dir",k),f.append(a);i=a.append(o.element.clone(0,1));n!=a.getDirection(1)&&i.setAttribute("dir",n);for(g=0;g<o.contents.length;g++){i.append(o.contents[g].clone(1,1));}d++;}else if(o.indent==Math.max(m,0)+1)o=c[d-1].element.getDirection(1),d=CKEDITOR.plugins.list.arrayToList(c,null,d,b,o!=n?n:null),!i.getChildCount()&&CKEDITOR.env.needsNbspFiller&&!(7<h.$.documentMode)&&i.append(h.createText(" ")),i.append(d.listNode),d=d.nextIndex;else if(-1==o.indent&&!e&&g){r[g.getName()]?(i=o.element.clone(!1,!0),n!=g.getDirection(1)&&i.setAttribute("dir",n)):i=new CKEDITOR.dom.documentFragment(h);var a=g.getDirection(1)!=n,u=o.element,z=u.getAttribute("class"),v=u.getAttribute("style"),w=i.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(b!=CKEDITOR.ENTER_BR||a||v||z),s,x=o.contents.length,t;for(g=0;g<x;g++){if(s=o.contents[g],D(s)&&1<x)w?t=s.clone(1,1):i.append(s.clone(1,1));else if(s.type==CKEDITOR.NODE_ELEMENT&&s.isBlockBoundary()){a&&!s.getDirection()&&s.setAttribute("dir",n);l=s;var y=u.getAttribute("style");y&&l.setAttribute("style",y.replace(/([^;])$/,"$1;")+(l.getAttribute("style")||""));z&&s.addClass(z);l=null;t&&(i.append(t),t=null);i.append(s.clone(1,1));}else w?(l||(l=h.createElement(p),i.append(l),a&&l.setAttribute("dir",n)),v&&l.setAttribute("style",v),z&&l.setAttribute("class",z),t&&(l.append(t),t=null),l.append(s.clone(1,1))):i.append(s.clone(1,1));}t&&((l||i).append(t),t=null);i.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&d!=c.length-1&&(CKEDITOR.env.needsBrFiller&&(n=i.getLast())&&n.type==CKEDITOR.NODE_ELEMENT&&n.is("br")&&n.remove(),n=i.getLast(q),(!n||!(n.type==CKEDITOR.NODE_ELEMENT&&n.is(CKEDITOR.dtd.$block)))&&i.append(h.createElement("br")));n=i.$.nodeName.toLowerCase();("div"==n||"p"==n)&&i.appendBogus();f.append(i);a=null;d++;}else return null;l=null;if(c.length<=d||Math.max(c[d].indent,0)<m)break;}if(j)for(c=f.getFirst();c;){if(c.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(j,c),c.getName()in CKEDITOR.dtd.$listItem&&(e=c,h=k=b=void 0,b=e.getDirection()))){for(k=e.getParent();k&&!(h=k.getDirection());){k=k.getParent();}b==h&&e.removeAttribute("dir");}c=c.getNextSourceNode();}return{listNode:f,nextIndex:d};}};var H=/^h[1-6]$/,F=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);x.prototype={exec:function exec(c){this.refresh(c,c.elementPath());var j=c.config,e=c.getSelection(),b=e&&e.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var k=c.editable();if(k.getFirst(q)){var g=1==b.length&&b[0];(j=g&&g.getEnclosedNode())&&j.is&&this.type==j.getName()&&this.setState(CKEDITOR.TRISTATE_ON);}else j.enterMode==CKEDITOR.ENTER_BR?k.appendBogus():b[0].fixBlock(1,j.enterMode==CKEDITOR.ENTER_P?"p":"div"),e.selectRanges(b);}for(var j=e.createBookmarks(!0),k=[],h={},b=b.createIterator(),f=0;(g=b.getNextRange())&&++f;){var a=g.getBoundaryNodes(),d=a.startNode,m=a.endNode;d.type==CKEDITOR.NODE_ELEMENT&&"td"==d.getName()&&g.setStartAt(a.startNode,CKEDITOR.POSITION_AFTER_START);m.type==CKEDITOR.NODE_ELEMENT&&"td"==m.getName()&&g.setEndAt(a.endNode,CKEDITOR.POSITION_BEFORE_END);g=g.createIterator();for(g.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;a=g.getNextParagraph();){if(!a.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(h,a,"list_block",1);for(var i=c.elementPath(a),d=i.elements,m=0,i=i.blockLimit,n,l=d.length-1;0<=l&&(n=d[l]);l--){if(r[n.getName()]&&i.contains(n)){i.removeCustomData("list_group_object_"+f);(d=n.getCustomData("list_group_object"))?d.contents.push(a):(d={root:n,contents:[a]},k.push(d),CKEDITOR.dom.element.setMarker(h,n,"list_group_object",d));m=1;break;}}m||(m=i,m.getCustomData("list_group_object_"+f)?m.getCustomData("list_group_object_"+f).contents.push(a):(d={root:m,contents:[a]},CKEDITOR.dom.element.setMarker(h,m,"list_group_object_"+f,d),k.push(d)));}}}for(n=[];0<k.length;){if(d=k.shift(),this.state==CKEDITOR.TRISTATE_OFF){if(r[d.root.getName()]){b=c;f=d;d=h;g=n;m=CKEDITOR.plugins.list.listToArray(f.root,d);i=[];for(a=0;a<f.contents.length;a++){if(l=f.contents[a],(l=l.getAscendant("li",!0))&&!l.getCustomData("list_item_processed"))i.push(l),CKEDITOR.dom.element.setMarker(d,l,"list_item_processed",!0);}for(var l=f.root.getDocument(),p=void 0,o=void 0,a=0;a<i.length;a++){var u=i[a].getCustomData("listarray_index"),p=m[u].parent;p.is(this.type)||(o=l.createElement(this.type),p.copyAttributes(o,{start:1,type:1}),o.removeStyle("list-style-type"),m[u].parent=o);}d=CKEDITOR.plugins.list.arrayToList(m,d,null,b.config.enterMode);m=void 0;i=d.listNode.getChildCount();for(a=0;a<i&&(m=d.listNode.getChild(a));a++){m.getName()==this.type&&g.push(m);}d.listNode.replace(f.root);b.fire("contentDomInvalidated");}else{m=c;a=d;g=n;i=a.contents;b=a.root.getDocument();f=[];1==i.length&&i[0].equals(a.root)&&(d=b.createElement("div"),i[0].moveChildren&&i[0].moveChildren(d),i[0].append(d),i[0]=d);a=a.contents[0].getParent();for(l=0;l<i.length;l++){a=a.getCommonAncestor(i[l].getParent());}p=m.config.useComputedState;m=d=void 0;p=void 0===p||p;for(l=0;l<i.length;l++){for(o=i[l];u=o.getParent();){if(u.equals(a)){f.push(o);!m&&o.getDirection()&&(m=1);o=o.getDirection(p);null!==d&&(d=d&&d!=o?null:o);break;}o=u;}}if(!(1>f.length)){i=f[f.length-1].getNext();l=b.createElement(this.type);g.push(l);for(p=g=void 0;f.length;){g=f.shift(),p=b.createElement("li"),g.is("pre")||H.test(g.getName())||"false"==g.getAttribute("contenteditable")?g.appendTo(p):(g.copyAttributes(p),d&&g.getDirection()&&(p.removeStyle("direction"),p.removeAttribute("dir")),g.moveChildren(p),g.remove()),p.appendTo(l);}d&&m&&l.setAttribute("dir",d);i?l.insertBefore(i):l.appendTo(a);}}}else this.state==CKEDITOR.TRISTATE_ON&&r[d.root.getName()]&&E.call(this,c,d,h);}for(l=0;l<n.length;l++){B(n[l]);}CKEDITOR.dom.element.clearAllMarkers(h);e.selectBookmarks(j);c.focus();},refresh:function refresh(c,j){var e=j.contains(r,1),b=j.blockLimit||j.root;e&&b.contains(e)?this.setState(e.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF);}};CKEDITOR.plugins.add("list",{requires:"indentlist",init:function init(c){c.blockless||(c.addCommand("numberedlist",new x("numberedlist","ol")),c.addCommand("bulletedlist",new x("bulletedlist","ul")),c.ui.addButton&&(c.ui.addButton("NumberedList",{label:c.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),c.ui.addButton("BulletedList",{label:c.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),c.on("key",function(j){var e=j.data.domEvent.getKey();if(c.mode=="wysiwyg"&&e in{8:1,46:1}){var b=c.getSelection().getRanges()[0],k=b&&b.startPath();if(b&&b.collapsed){var g=e==8,h=c.editable(),f=new CKEDITOR.dom.walker(b.clone());f.evaluator=function(a){return q(a)&&!v(a);};f.guard=function(a,b){return!(b&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"));};e=b.clone();if(g){var a,d;if((a=k.contains(r))&&b.checkBoundaryOfElement(a,CKEDITOR.START)&&(a=a.getParent())&&a.is("li")&&(a=w(a))){d=a;a=a.getPrevious(q);e.moveToPosition(a&&v(a)?a:d,CKEDITOR.POSITION_BEFORE_START);}else{f.range.setStartAt(h,CKEDITOR.POSITION_AFTER_START);f.range.setEnd(b.startContainer,b.startOffset);if((a=f.previous())&&a.type==CKEDITOR.NODE_ELEMENT&&(a.getName()in r||a.is("li"))){if(!a.is("li")){f.range.selectNodeContents(a);f.reset();f.evaluator=C;a=f.previous();}d=a;e.moveToElementEditEnd(d);}}if(d){y(c,e,b);j.cancel();}else if((e=k.contains(r))&&b.checkBoundaryOfElement(e,CKEDITOR.START)){d=e.getFirst(q);if(b.checkBoundaryOfElement(d,CKEDITOR.START)){a=e.getPrevious(q);if(w(d)){if(a){b.moveToElementEditEnd(a);b.select();}}else c.execCommand("outdent");j.cancel();}}}else if(d=k.contains("li")){f.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END);h=(k=d.getLast(q))&&C(k)?k:d;d=0;if((a=f.next())&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in r&&a.equals(k)){d=1;a=f.next();}else b.checkBoundaryOfElement(h,CKEDITOR.END)&&(d=1);if(d&&a){b=b.clone();b.moveToElementEditStart(a);y(c,e,b);j.cancel();}}else{f.range.setEndAt(h,CKEDITOR.POSITION_BEFORE_END);if((a=f.next())&&a.type==CKEDITOR.NODE_ELEMENT&&a.is(r)){a=a.getFirst(q);if(k.block&&b.checkStartOfBlock()&&b.checkEndOfBlock()){k.block.remove();b.moveToElementEditStart(a);b.select();}else if(w(a)){b.moveToElementEditStart(a);b.select();}else{b=b.clone();b.moveToElementEditStart(a);y(c,e,b);}j.cancel();}}setTimeout(function(){c.selectionChange(1);});}}}));}});})();(function(){CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function init(a){if(!a.blockless){var b;b=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]"});b=a.addCommand("numberedListStyle",b);a.addFeature(b);CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js");b=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}"});b=a.addCommand("bulletedListStyle",b);a.addFeature(b);CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js");a.addMenuGroup("list",108);a.addMenuItems({numberedlist:{label:a.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:a.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}});a.contextMenu.addListener(function(a){if(!a||a.isReadOnly())return null;for(;a;){var b=a.getName();if("ol"==b)return{numberedlist:CKEDITOR.TRISTATE_OFF};if("ul"==b)return{bulletedlist:CKEDITOR.TRISTATE_OFF};a=a.getParent();}return null;});}}};CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle);})();(function(){function Q(a,c,d){return m(c)&&m(d)&&d.equals(c.getNext(function(a){return!(z(a)||A(a)||p(a));}));}function u(a){this.upper=a[0];this.lower=a[1];this.set.apply(this,a.slice(2));}function J(a){var c=a.element;if(c&&m(c)&&(c=c.getAscendant(a.triggers,!0))&&a.editable.contains(c)){var d=K(c);if("true"==d.getAttribute("contenteditable"))return c;if(d.is(a.triggers))return d;}return null;}function ga(a,c,d){o(a,c);o(a,d);a=c.size.bottom;d=d.size.top;return a&&d?0|(a+d)/2:a||d;}function r(a,c,d){return c=c[d?"getPrevious":"getNext"](function(b){return b&&b.type==CKEDITOR.NODE_TEXT&&!z(b)||m(b)&&!p(b)&&!v(a,b);});}function K(a,c){if(a.data("cke-editable"))return null;for(c||(a=a.getParent());a&&!a.data("cke-editable");){if(a.hasAttribute("contenteditable"))return a;a=a.getParent();}return null;}function ha(a){var c=a.doc,d=B('<span contenteditable="false" style="'+L+"position:absolute;border-top:1px dashed "+a.boxColor+'"></span>',c),b=this.path+"images/"+(n.hidpi?"hidpi/":"")+"icon"+(a.rtl?"-rtl":"")+".png";q(d,{attach:function attach(){this.wrap.getParent()||this.wrap.appendTo(a.editable,!0);return this;},lineChildren:[q(B('<span title="'+a.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',c),{base:L+"height:17px;width:17px;"+(a.rtl?"left":"right")+":17px;background:url("+b+") center no-repeat "+a.boxColor+";cursor:pointer;"+(n.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(n.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px",1),"top:-17px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px 2px 0px 0px",1),"top:-1px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","0px 0px 2px 2px",1)]}),q(B(R,c),{base:S+"left:0px;border-left-color:"+a.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),q(B(R,c),{base:S+"right:0px;border-right-color:"+a.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function detach(){this.wrap.getParent()&&this.wrap.remove();return this;},mouseNear:function mouseNear(){o(a,this);var b=a.holdDistance,c=this.size;return c&&a.mouse.y>c.top-b&&a.mouse.y<c.bottom+b&&a.mouse.x>c.left-b&&a.mouse.x<c.right+b?!0:!1;},place:function place(){var b=a.view,c=a.editable,d=a.trigger,i=d.upper,h=d.lower,j=i||h,l=j.getParent(),k={};this.trigger=d;i&&o(a,i,!0);h&&o(a,h,!0);o(a,l,!0);a.inInlineMode&&C(a,!0);l.equals(c)?(k.left=b.scroll.x,k.right=-b.scroll.x,k.width=""):(k.left=j.size.left-j.size.margin.left+b.scroll.x-(a.inInlineMode?b.editable.left+b.editable.border.left:0),k.width=j.size.outerWidth+j.size.margin.left+j.size.margin.right+b.scroll.x,k.right="");i&&h?k.top=i.size.margin.bottom===h.size.margin.top?0|i.size.bottom+i.size.margin.bottom/2:i.size.margin.bottom<h.size.margin.top?i.size.bottom+i.size.margin.bottom:i.size.bottom+i.size.margin.bottom-h.size.margin.top:i?h||(k.top=i.size.bottom+i.size.margin.bottom):k.top=h.size.top-h.size.margin.top;d.is(x)||k.top>b.scroll.y-15&&k.top<b.scroll.y+5?(k.top=a.inInlineMode?0:b.scroll.y,this.look(x)):d.is(y)||k.top>b.pane.bottom-5&&k.top<b.pane.bottom+15?(k.top=a.inInlineMode?b.editable.height+b.editable.padding.top+b.editable.padding.bottom:b.pane.bottom-1,this.look(y)):(a.inInlineMode&&(k.top-=b.editable.top+b.editable.border.top),this.look(s));a.inInlineMode&&(k.top--,k.top+=b.editable.scroll.top,k.left+=b.editable.scroll.left);for(var T in k){k[T]=CKEDITOR.tools.cssLength(k[T]);}this.setStyles(k);},look:function look(a){if(this.oldLook!=a){for(var b=this.lineChildren.length,c;b--;){(c=this.lineChildren[b]).setAttribute("style",c.base+c.looks[0|a/2]);}this.oldLook=a;}},wrap:new M("span",a.doc)});for(c=d.lineChildren.length;c--;){d.lineChildren[c].appendTo(d);}d.look(s);d.appendTo(d.wrap);d.unselectable();d.lineChildren[0].on("mouseup",function(b){d.detach();N(a,function(b){var c=a.line.trigger;b[c.is(D)?"insertBefore":"insertAfter"](c.is(D)?c.lower:c.upper);},!0);a.editor.focus();!n.ie&&a.enterMode!=CKEDITOR.ENTER_BR&&a.hotNode.scrollIntoView();b.data.preventDefault(!0);});d.on("mousedown",function(a){a.data.preventDefault(!0);});a.line=d;}function N(a,c,d){var b=new CKEDITOR.dom.range(a.doc),e=a.editor,f;n.ie&&a.enterMode==CKEDITOR.ENTER_BR?f=a.doc.createText(E):(f=(f=K(a.element,!0))&&f.data("cke-enter-mode")||a.enterMode,f=new M(F[f],a.doc),f.is("br")||a.doc.createText(E).appendTo(f));d&&e.fire("saveSnapshot");c(f);b.moveToPosition(f,CKEDITOR.POSITION_AFTER_START);e.getSelection().selectRanges([b]);a.hotNode=f;d&&e.fire("saveSnapshot");}function U(a,c){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function d(b){var d=n.ie&&9>n.version?" ":E,f=a.hotNode&&a.hotNode.getText()==d&&a.element.equals(a.hotNode)&&a.lastCmdDirection===!!c;N(a,function(d){f&&a.hotNode&&a.hotNode.remove();d[c?"insertAfter":"insertBefore"](b);d.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!c});a.lastCmdDirection=!!c;});!n.ie&&a.enterMode!=CKEDITOR.ENTER_BR&&a.hotNode.scrollIntoView();a.line.detach();}return function(b){var b=b.getSelection().getStartElement(),e,b=b.getAscendant(V,1);if(!W(a,b)&&b&&!b.equals(a.editable)&&!b.contains(a.editable)){if((e=K(b))&&"false"==e.getAttribute("contenteditable"))b=e;a.element=b;e=r(a,b,!c);var f;m(e)&&e.is(a.triggers)&&e.is(ia)&&(!r(a,e,!c)||(f=r(a,e,!c))&&m(f)&&f.is(a.triggers))?d(e):(f=J(a,b),m(f)&&(r(a,f,!c)?(b=r(a,f,!c))&&m(b)&&b.is(a.triggers)&&d(f):d(f)));}};}()};}function v(a,c){if(!c||!(c.type==CKEDITOR.NODE_ELEMENT&&c.$))return!1;var d=a.line;return d.wrap.equals(c)||d.wrap.contains(c);}function m(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.$;}function p(a){if(!m(a))return!1;var c;if(!(c=X(a)))m(a)?(c={left:1,right:1,center:1},c=!(!c[a.getComputedStyle("float")]&&!c[a.getAttribute("align")])):c=!1;return c;}function X(a){return!!{absolute:1,fixed:1}[a.getComputedStyle("position")];}function G(a,c){return m(c)?c.is(a.triggers):null;}function W(a,c){if(!c)return!1;for(var d=c.getParents(1),b=d.length;b--;){for(var e=a.tabuList.length;e--;){if(d[b].hasAttribute(a.tabuList[e]))return!0;}}return!1;}function ja(a,c,d){c=c[d?"getLast":"getFirst"](function(b){return a.isRelevant(b)&&!b.is(ka);});if(!c)return!1;o(a,c);return d?c.size.top>a.mouse.y:c.size.bottom<a.mouse.y;}function Y(a){var c=a.editable,d=a.mouse,b=a.view,e=a.triggerOffset;C(a);var f=d.y>(a.inInlineMode?b.editable.top+b.editable.height/2:Math.min(b.editable.height,b.pane.height)/2),c=c[f?"getLast":"getFirst"](function(a){return!(z(a)||A(a));});if(!c)return null;v(a,c)&&(c=a.line.wrap[f?"getPrevious":"getNext"](function(a){return!(z(a)||A(a));}));if(!m(c)||p(c)||!G(a,c))return null;o(a,c);return!f&&0<=c.size.top&&0<d.y&&d.y<c.size.top+e?(a=a.inInlineMode||0===b.scroll.y?x:s,new u([null,c,D,H,a])):f&&c.size.bottom<=b.pane.height&&d.y>c.size.bottom-e&&d.y<b.pane.height?(a=a.inInlineMode||c.size.bottom>b.pane.height-e&&c.size.bottom<b.pane.height?y:s,new u([c,null,Z,H,a])):null;}function $(a){var c=a.mouse,d=a.view,b=a.triggerOffset,e=J(a);if(!e)return null;o(a,e);var b=Math.min(b,0|e.size.outerHeight/2),f=[],g,i;if(c.y>e.size.top-1&&c.y<e.size.top+b)i=!1;else if(c.y>e.size.bottom-b&&c.y<e.size.bottom+1)i=!0;else return null;if(p(e)||ja(a,e,i)||e.getParent().is(aa))return null;var h=r(a,e,!i);if(h){if(h&&h.type==CKEDITOR.NODE_TEXT)return null;if(m(h)){if(p(h)||!G(a,h)||h.getParent().is(aa))return null;f=[h,e][i?"reverse":"concat"]().concat([O,H]);}}else e.equals(a.editable[i?"getLast":"getFirst"](a.isRelevant))?(C(a),i&&c.y>e.size.bottom-b&&c.y<d.pane.height&&e.size.bottom>d.pane.height-b&&e.size.bottom<d.pane.height?g=y:0<c.y&&c.y<e.size.top+b&&(g=x)):g=s,f=[null,e][i?"reverse":"concat"]().concat([i?Z:D,H,g,e.equals(a.editable[i?"getLast":"getFirst"](a.isRelevant))?i?y:x:s]);return 0 in f?new u(f):null;}function P(a,c,d,b){for(var e=function(){var b=n.ie?c.$.currentStyle:a.win.$.getComputedStyle(c.$,"");return n.ie?function(a){return b[CKEDITOR.tools.cssStyleToDomStyle(a)];}:function(a){return b.getPropertyValue(a);};}(),f=c.getDocumentPosition(),g={},i={},h={},j={},l=t.length;l--;){g[t[l]]=parseInt(e("border-"+t[l]+"-width"),10)||0,h[t[l]]=parseInt(e("padding-"+t[l]),10)||0,i[t[l]]=parseInt(e("margin-"+t[l]),10)||0;}(!d||b)&&I(a,b);j.top=f.y-(d?0:a.view.scroll.y);j.left=f.x-(d?0:a.view.scroll.x);j.outerWidth=c.$.offsetWidth;j.outerHeight=c.$.offsetHeight;j.height=j.outerHeight-(h.top+h.bottom+g.top+g.bottom);j.width=j.outerWidth-(h.left+h.right+g.left+g.right);j.bottom=j.top+j.outerHeight;j.right=j.left+j.outerWidth;a.inInlineMode&&(j.scroll={top:c.$.scrollTop,left:c.$.scrollLeft});return q({border:g,padding:h,margin:i,ignoreScroll:d},j,!0);}function o(a,c,d){if(!m(c))return c.size=null;if(c.size){if(c.size.ignoreScroll==d&&c.size.date>new Date()-ba)return null;}else c.size={};return q(c.size,P(a,c,d),{date:+new Date()},!0);}function C(a,c){a.view.editable=P(a,a.editable,c,!0);}function I(a,c){a.view||(a.view={});var d=a.view;if(c||!(d&&d.date>new Date()-ba)){var b=a.win,d=b.getScrollPosition(),b=b.getViewPaneSize();q(a.view,{scroll:{x:d.x,y:d.y,width:a.doc.$.documentElement.scrollWidth-b.width,height:a.doc.$.documentElement.scrollHeight-b.height},pane:{width:b.width,height:b.height,bottom:b.height+d.y},date:+new Date()},!0);}}function la(a,c,d,b){for(var e=b,f=b,g=0,i=!1,h=!1,j=a.view.pane.height,l=a.mouse;l.y+g<j&&0<l.y-g;){i||(i=c(e,b));h||(h=c(f,b));!i&&0<l.y-g&&(e=d(a,{x:l.x,y:l.y-g}));!h&&l.y+g<j&&(f=d(a,{x:l.x,y:l.y+g}));if(i&&h)break;g+=2;}return new u([e,f,null,null]);}CKEDITOR.plugins.add("magicline",{init:function init(a){var c=a.config,d=c.magicline_triggerOffset||30,b={editor:a,enterMode:c.enterMode,triggerOffset:d,holdDistance:0|d*(c.magicline_holdDistance||0.5),boxColor:c.magicline_color||"#ff0000",rtl:"rtl"==c.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(c.magicline_tabuList||[]),triggers:c.magicline_everywhere?V:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},e,f,g;b.isRelevant=function(a){return m(a)&&!v(b,a)&&!p(a);};a.on("contentDom",function(){var d=a.editable(),h=a.document,j=a.window;q(b,{editable:d,inInlineMode:d.isInline(),doc:h,win:j,hotNode:null},!0);b.boundary=b.inInlineMode?b.editable:b.doc.getDocumentElement();d.is(w.$inline)||(b.inInlineMode&&!X(d)&&d.setStyles({position:"relative",top:null,left:null}),ha.call(this,b),I(b),d.attachListener(a,"beforeUndoImage",function(){b.line.detach();}),d.attachListener(a,"beforeGetData",function(){b.line.wrap.getParent()&&(b.line.detach(),a.once("getData",function(){b.line.attach();},null,null,1E3));},null,null,0),d.attachListener(b.inInlineMode?h:h.getWindow().getFrame(),"mouseout",function(c){if("wysiwyg"==a.mode)if(b.inInlineMode){var d=c.data.$.clientX,c=c.data.$.clientY;I(b);C(b,!0);var e=b.view.editable,f=b.view.scroll;if(!(d>e.left-f.x&&d<e.right-f.x)||!(c>e.top-f.y&&c<e.bottom-f.y))clearTimeout(g),g=null,b.line.detach();}else clearTimeout(g),g=null,b.line.detach();}),d.attachListener(d,"keyup",function(){b.hiddenMode=0;}),d.attachListener(d,"keydown",function(c){if("wysiwyg"==a.mode)switch(c=c.data.getKeystroke(),a.getSelection().getStartElement(),c){case 2228240:case 16:b.hiddenMode=1,b.line.detach();}}),d.attachListener(b.inInlineMode?d:h,"mousemove",function(c){f=!0;if(!("wysiwyg"!=a.mode||a.readOnly||g)){var d={x:c.data.$.clientX,y:c.data.$.clientY};g=setTimeout(function(){b.mouse=d;g=b.trigger=null;I(b);if(f&&!b.hiddenMode&&a.focusManager.hasFocus&&!b.line.mouseNear()&&(b.element=ca(b,!0)))(b.trigger=Y(b)||$(b)||da(b))&&!W(b,b.trigger.upper||b.trigger.lower)?b.line.attach().place():(b.trigger=null,b.line.detach()),f=!1;},30);}}),d.attachListener(j,"scroll",function(){"wysiwyg"==a.mode&&(b.line.detach(),n.webkit&&(b.hiddenMode=1,clearTimeout(e),e=setTimeout(function(){b.mouseDown||(b.hiddenMode=0);},50)));}),d.attachListener(ea?h:j,"mousedown",function(){"wysiwyg"==a.mode&&(b.line.detach(),b.hiddenMode=1,b.mouseDown=1);}),d.attachListener(ea?h:j,"mouseup",function(){b.hiddenMode=0;b.mouseDown=0;}),a.addCommand("accessPreviousSpace",U(b)),a.addCommand("accessNextSpace",U(b,!0)),a.setKeystroke([[c.magicline_keystrokePrevious,"accessPreviousSpace"],[c.magicline_keystrokeNext,"accessNextSpace"]]),a.on("loadSnapshot",function(){var c,d,e,f;for(f in{p:1,br:1,div:1}){c=a.document.getElementsByTag(f);for(e=c.count();e--;){if((d=c.getItem(e)).data("cke-magicline-hot")){b.hotNode=d;b.lastCmdDirection="true"===d.data("cke-magicline-dir")?!0:!1;return;}}}}),this.backdoor={accessFocusSpace:N,boxTrigger:u,isLine:v,getAscendantTrigger:J,getNonEmptyNeighbour:r,getSize:P,that:b,triggerEdge:$,triggerEditable:Y,triggerExpand:da});},this);}});var q=CKEDITOR.tools.extend,M=CKEDITOR.dom.element,B=M.createFromHtml,n=CKEDITOR.env,ea=CKEDITOR.env.ie&&9>CKEDITOR.env.version,w=CKEDITOR.dtd,F={},D=128,Z=64,O=32,H=16,fa=8,x=4,y=2,s=1,E=" ",aa=w.$listItem,ka=w.$tableContent,ia=q({},w.$nonEditable,w.$empty),V=w.$block,ba=100,L="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",S=L+"border-color:transparent;display:block;border-style:solid;",R="<span>"+E+"</span>";F[CKEDITOR.ENTER_BR]="br";F[CKEDITOR.ENTER_P]="p";F[CKEDITOR.ENTER_DIV]="div";u.prototype={set:function set(a,c,d){this.properties=a+c+(d||s);return this;},is:function is(a){return(this.properties&a)==a;}};var ca=function(){function a(a,d){var b=a.$.elementFromPoint(d.x,d.y);return b&&b.nodeType?new CKEDITOR.dom.element(b):null;}return function(c,d,b){if(!c.mouse)return null;var e=c.doc,f=c.line.wrap,b=b||c.mouse,g=a(e,b);d&&v(c,g)&&(f.hide(),g=a(e,b),f.show());return!g||!(g.type==CKEDITOR.NODE_ELEMENT&&g.$)||n.ie&&9>n.version&&!c.boundary.equals(g)&&!c.boundary.contains(g)?null:g;};}(),z=CKEDITOR.dom.walker.whitespaces(),A=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),da=function(){function a(a){var b=a.element,e,f,g;if(!m(b)||b.contains(a.editable)||b.isReadOnly())return null;g=la(a,function(a,b){return!b.equals(a);},function(a,b){return ca(a,!0,b);},b);e=g.upper;f=g.lower;if(Q(a,e,f))return g.set(O,fa);if(e&&b.contains(e))for(;!e.getParent().equals(b);){e=e.getParent();}else e=b.getFirst(function(b){return c(a,b);});if(f&&b.contains(f))for(;!f.getParent().equals(b);){f=f.getParent();}else f=b.getLast(function(b){return c(a,b);});if(!e||!f)return null;o(a,e);o(a,f);if(!(a.mouse.y>e.size.top&&a.mouse.y<f.size.bottom))return null;for(var b=Number.MAX_VALUE,i,h,j,l;f&&!f.equals(e)&&(h=e.getNext(a.isRelevant));){i=Math.abs(ga(a,e,h)-a.mouse.y),i<b&&(b=i,j=e,l=h),e=h,o(a,e);}if(!j||!l||!(a.mouse.y>j.size.top&&a.mouse.y<l.size.bottom))return null;g.upper=j;g.lower=l;return g.set(O,fa);}function c(a,b){return!(b&&b.type==CKEDITOR.NODE_TEXT||A(b)||p(b)||v(a,b)||b.type==CKEDITOR.NODE_ELEMENT&&b.$&&b.is("br"));}return function(c){var b=a(c),e;if(e=b){e=b.upper;var f=b.lower;e=!e||!f||p(f)||p(e)||f.equals(e)||e.equals(f)||f.contains(e)||e.contains(f)?!1:G(c,e)&&G(c,f)&&Q(c,e,f)?!0:!1;}return e?b:null;};}(),t=["top","left","right","bottom"];})();CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51;CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52;(function(){function l(a){if(!a||a.type!=CKEDITOR.NODE_ELEMENT||"form"!=a.getName())return[];for(var e=[],f=["style","className"],b=0;b<f.length;b++){var d=a.$.elements.namedItem(f[b]);d&&(d=new CKEDITOR.dom.element(d),e.push([d,d.nextSibling]),d.remove());}return e;}function o(a,e){if(a&&!(a.type!=CKEDITOR.NODE_ELEMENT||"form"!=a.getName())&&0<e.length)for(var f=e.length-1;0<=f;f--){var b=e[f][0],d=e[f][1];d?b.insertBefore(d):b.appendTo(a);}}function n(a,e){var f=l(a),b={},d=a.$;e||(b["class"]=d.className||"",d.className="");b.inline=d.style.cssText||"";e||(d.style.cssText="position: static; overflow: visible");o(f);return b;}function p(a,e){var f=l(a),b=a.$;"class"in e&&(b.className=e["class"]);"inline"in e&&(b.style.cssText=e.inline);o(f);}function q(a){if(!a.editable().isInline()){var e=CKEDITOR.instances,f;for(f in e){var b=e[f];"wysiwyg"==b.mode&&!b.readOnly&&(b=b.document.getBody(),b.setAttribute("contentEditable",!1),b.setAttribute("contentEditable",!0));}a.editable().hasFocus&&(a.toolbox.focus(),a.focus());}}CKEDITOR.plugins.add("maximize",{init:function init(a){function e(){var b=d.getViewPaneSize();a.resize(b.width,b.height,null,!0);}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var f=a.lang,b=CKEDITOR.document,d=b.getWindow(),j,k,m,l=CKEDITOR.TRISTATE_OFF;a.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function exec(){var h=a.container.getChild(1),g=a.ui.space("contents");if("wysiwyg"==a.mode){var c=a.getSelection();j=c&&c.getRanges();k=d.getScrollPosition();}else{var i=a.editable().$;j=!CKEDITOR.env.ie&&[i.selectionStart,i.selectionEnd];k=[i.scrollLeft,i.scrollTop];}if(this.state==CKEDITOR.TRISTATE_OFF){d.on("resize",e);m=d.getScrollPosition();for(c=a.container;c=c.getParent();){c.setCustomData("maximize_saved_styles",n(c)),c.setStyle("z-index",a.config.baseFloatZIndex-5);}g.setCustomData("maximize_saved_styles",n(g,!0));h.setCustomData("maximize_saved_styles",n(h,!0));g={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0};b.getDocumentElement().setStyles(g);!CKEDITOR.env.gecko&&b.getDocumentElement().setStyle("position","fixed");(!CKEDITOR.env.gecko||!CKEDITOR.env.quirks)&&b.getBody().setStyles(g);CKEDITOR.env.ie?setTimeout(function(){d.$.scrollTo(0,0);},0):d.$.scrollTo(0,0);h.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute");h.$.offsetLeft;h.setStyles({"z-index":a.config.baseFloatZIndex-5,left:"0px",top:"0px"});h.addClass("cke_maximized");e();g=h.getDocumentPosition();h.setStyles({left:-1*g.x+"px",top:-1*g.y+"px"});CKEDITOR.env.gecko&&q(a);}else if(this.state==CKEDITOR.TRISTATE_ON){d.removeListener("resize",e);g=[g,h];for(c=0;c<g.length;c++){p(g[c],g[c].getCustomData("maximize_saved_styles")),g[c].removeCustomData("maximize_saved_styles");}for(c=a.container;c=c.getParent();){p(c,c.getCustomData("maximize_saved_styles")),c.removeCustomData("maximize_saved_styles");}CKEDITOR.env.ie?setTimeout(function(){d.$.scrollTo(m.x,m.y);},0):d.$.scrollTo(m.x,m.y);h.removeClass("cke_maximized");CKEDITOR.env.webkit&&(h.setStyle("display","inline"),setTimeout(function(){h.setStyle("display","block");},0));a.fire("resize");}this.toggleState();if(c=this.uiItems[0])g=this.state==CKEDITOR.TRISTATE_OFF?f.maximize.maximize:f.maximize.minimize,c=CKEDITOR.document.getById(c._.id),c.getChild(1).setHtml(g),c.setAttribute("title",g),c.setAttribute("href",'javascript:void("'+g+'");');"wysiwyg"==a.mode?j?(CKEDITOR.env.gecko&&q(a),a.getSelection().selectRanges(j),(i=a.getSelection().getStartElement())&&i.scrollIntoView(!0)):d.$.scrollTo(k.x,k.y):(j&&(i.selectionStart=j[0],i.selectionEnd=j[1]),i.scrollLeft=k[0],i.scrollTop=k[1]);j=k=null;l=this.state;a.fire("maximize",this.state);},canUndo:!1});a.ui.addButton&&a.ui.addButton("Maximize",{label:f.maximize.maximize,command:"maximize",toolbar:"tools,10"});a.on("mode",function(){var b=a.getCommand("maximize");b.setState(b.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:l);},null,null,100);}}});})();CKEDITOR.plugins.add("newpage",{init:function init(a){a.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function exec(b){var a=this;b.setData(b.config.newpage_html||"",function(){b.focus();setTimeout(function(){b.fire("afterCommandExec",{name:"newpage",command:a});b.selectionChange();},200);});},async:!0});a.ui.addButton&&a.ui.addButton("NewPage",{label:a.lang.newpage.toolbar,command:"newpage",toolbar:"document,20"});}});(function(){function e(a){return{"aria-label":a,"class":"cke_pagebreak",contenteditable:"false","data-cke-display-name":"pagebreak","data-cke-pagebreak":1,style:"page-break-after: always",title:a};}CKEDITOR.plugins.add("pagebreak",{requires:"fakeobjects",onLoad:function onLoad(){var a=("background:url("+CKEDITOR.getUrl(this.path+"images/pagebreak.gif")+") no-repeat center center;clear:both;width:100%;border-top:#999 1px dotted;border-bottom:#999 1px dotted;padding:0;height:5px;cursor:default;").replace(/;/g," !important;");CKEDITOR.addCss("div.cke_pagebreak{"+a+"}");},init:function init(a){a.blockless||(a.addCommand("pagebreak",CKEDITOR.plugins.pagebreakCmd),a.ui.addButton&&a.ui.addButton("PageBreak",{label:a.lang.pagebreak.toolbar,command:"pagebreak",toolbar:"insert,70"}),CKEDITOR.env.webkit&&a.on("contentDom",function(){a.document.on("click",function(b){b=b.data.getTarget();b.is("div")&&b.hasClass("cke_pagebreak")&&a.getSelection().selectElement(b);});}));},afterInit:function afterInit(a){function b(f){CKEDITOR.tools.extend(f.attributes,e(a.lang.pagebreak.alt),!0);f.children.length=0;}var c=a.dataProcessor,g=c&&c.dataFilter,c=c&&c.htmlFilter,h=/page-break-after\s*:\s*always/i,i=/display\s*:\s*none/i;c&&c.addRules({attributes:{"class":function _class(a,b){var c=a.replace("cke_pagebreak","");if(c!=a){var d=CKEDITOR.htmlParser.fragment.fromHtml('<span style="display: none;">&nbsp;</span>').children[0];b.children.length=0;b.add(d);d=b.attributes;delete d["aria-label"];delete d.contenteditable;delete d.title;}return c;}}},{applyToAll:!0,priority:5});g&&g.addRules({elements:{div:function div(a){if(a.attributes["data-cke-pagebreak"])b(a);else if(h.test(a.attributes.style)){var c=a.children[0];c&&"span"==c.name&&i.test(c.attributes.style)&&b(a);}}}});}});CKEDITOR.plugins.pagebreakCmd={exec:function exec(a){var b=a.document.createElement("div",{attributes:e(a.lang.pagebreak.alt)});a.insertElement(b);},context:"div",allowedContent:{div:{styles:"!page-break-after"},span:{match:function match(a){return(a=a.parent)&&"div"==a.name&&a.styles["page-break-after"];},styles:"display"}},requiredContent:"div{page-break-after}"};})();(function(){var c={canUndo:!1,async:!0,exec:function exec(a){a.getClipboardData({title:a.lang.pastetext.title},function(b){b&&a.fire("paste",{type:"text",dataValue:b.dataValue});a.fire("afterCommandExec",{name:"pastetext",command:c,returnValue:!!b});});}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function init(a){a.addCommand("pastetext",c);a.ui.addButton&&a.ui.addButton("PasteText",{label:a.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"});if(a.config.forcePasteAsPlainText)a.on("beforePaste",function(a){"html"!=a.data.type&&(a.data.type="text");});a.on("pasteState",function(b){a.getCommand("pastetext").setState(b.data);});}});})();(function(){function h(a,d,f){var b=CKEDITOR.cleanWord;b?f():(a=CKEDITOR.getUrl(a.config.pasteFromWordCleanupFile||d+"filter/default.js"),CKEDITOR.scriptLoader.load(a,f,null,!0));return!b;}function i(a){a.data.type="html";}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function init(a){var d=0,f=this.path;a.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function exec(a){var e=this;d=1;a.once("beforePaste",i);a.getClipboardData({title:a.lang.pastefromword.title},function(c){c&&a.fire("paste",{type:"html",dataValue:c.dataValue});a.fire("afterCommandExec",{name:"pastefromword",command:e,returnValue:!!c});});}});a.ui.addButton&&a.ui.addButton("PasteFromWord",{label:a.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"});a.on("pasteState",function(b){a.getCommand("pastefromword").setState(b.data);});a.on("paste",function(b){var e=b.data,c=e.dataValue;if(c&&(d||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(c))){var g=h(a,f,function(){if(g)a.fire("paste",e);else if(!a.config.pasteFromWordPromptCleanup||d||confirm(a.lang.pastefromword.confirmCleanup))e.dataValue=CKEDITOR.cleanWord(c,a);});g&&b.cancel();}},null,null,3);}});})();(function(){var h,i={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function exec(a){var g,b=a.config,f=b.baseHref?'<base href="'+b.baseHref+'"/>':"";if(b.fullPage)g=a.getData().replace(/<head>/,"$&"+f).replace(/[^>]*(?=<\/title>)/,"$& &mdash; "+a.lang.preview.preview);else{var b="<body ",d=a.document&&a.document.getBody();d&&(d.getAttribute("id")&&(b+='id="'+d.getAttribute("id")+'" '),d.getAttribute("class")&&(b+='class="'+d.getAttribute("class")+'" '));g=a.config.docType+'<html dir="'+a.config.contentsLangDirection+'"><head>'+f+"<title>"+a.lang.preview.preview+"</title>"+CKEDITOR.tools.buildStyleHtml(a.config.contentsCss)+"</head>"+(b+">")+a.getData()+"</body></html>";}f=640;b=420;d=80;try{var c=window.screen,f=Math.round(0.8*c.width),b=Math.round(0.7*c.height),d=Math.round(0.1*c.width);}catch(i){}if(!1===a.fire("contentPreview",a={dataValue:g}))return!1;var c="",e;CKEDITOR.env.ie&&(window._cke_htmlToLoad=a.dataValue,e="javascript:void( (function(){document.open();"+("("+CKEDITOR.tools.fixDomain+")();").replace(/\/\/.*?\n/g,"").replace(/parent\./g,"window.opener.")+"document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad = null;})() )",c="");CKEDITOR.env.gecko&&(window._cke_htmlToLoad=a.dataValue,c=h+"preview.html");c=window.open(c,null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+f+",height="+b+",left="+d);CKEDITOR.env.ie&&c&&(c.location=e);!CKEDITOR.env.ie&&!CKEDITOR.env.gecko&&(e=c.document,e.open(),e.write(a.dataValue),e.close());return!0;}};CKEDITOR.plugins.add("preview",{init:function init(a){a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(h=this.path,a.addCommand("preview",i),a.ui.addButton&&a.ui.addButton("Preview",{label:a.lang.preview.preview,command:"preview",toolbar:"document,40"}));}});})();CKEDITOR.plugins.add("print",{init:function init(a){a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(a.addCommand("print",CKEDITOR.plugins.print),a.ui.addButton&&a.ui.addButton("Print",{label:a.lang.print.toolbar,command:"print",toolbar:"document,50"}));}});CKEDITOR.plugins.print={exec:function exec(a){CKEDITOR.env.gecko?a.window.$.print():a.document.$.execCommand("Print");},canUndo:!1,readOnly:1,modes:{wysiwyg:1}};CKEDITOR.plugins.add("removeformat",{init:function init(a){a.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat);a.ui.addButton&&a.ui.addButton("RemoveFormat",{label:a.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"});}});CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function exec(a){for(var h=a._.removeFormatRegex||(a._.removeFormatRegex=RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),e=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),f=CKEDITOR.plugins.removeformat.filter,k=a.getSelection().getRanges(),l=k.createIterator(),m=function m(a){return a.type==CKEDITOR.NODE_ELEMENT;},c;c=l.getNextRange();){c.collapsed||c.enlarge(CKEDITOR.ENLARGE_ELEMENT);var j=c.createBookmark(),b=j.startNode,d=j.endNode,i=function i(b){for(var c=a.elementPath(b),e=c.elements,d=1,g;(g=e[d])&&!g.equals(c.block)&&!g.equals(c.blockLimit);d++){h.test(g.getName())&&f(a,g)&&b.breakParent(g);}};i(b);if(d){i(d);for(b=b.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);b&&!b.equals(d);){if(b.isReadOnly()){if(b.getPosition(d)&CKEDITOR.POSITION_CONTAINS)break;b=b.getNext(m);}else i=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),!("img"==b.getName()&&b.data("cke-realelement"))&&f(a,b)&&(h.test(b.getName())?b.remove(1):(b.removeAttributes(e),a.fire("removeFormatCleanup",b))),b=i;}}c.moveToBookmark(j);}a.forceNextSelectionCheck();a.getSelection().selectRanges(k);}}},filter:function filter(a,h){for(var e=a._.removeFormatFilters||[],f=0;f<e.length;f++){if(!1===e[f](h))return!1;}return!0;}};CKEDITOR.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormatFilters||(this._.removeFormatFilters=[]);this._.removeFormatFilters.push(a);};CKEDITOR.config.removeFormatTags="b,big,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var";CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign";(function(){var b={readOnly:1,exec:function exec(a){if(a.fire("save")&&(a=a.element.$.form))try{a.submit();}catch(b){a.submit.click&&a.submit.click();}}};CKEDITOR.plugins.add("save",{init:function init(a){a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.addCommand("save",b).modes={wysiwyg:!!a.element.$.form},a.ui.addButton&&a.ui.addButton("Save",{label:a.lang.save.toolbar,command:"save",toolbar:"document,10"}));}});})();(function(){CKEDITOR.plugins.add("selectall",{init:function init(b){b.addCommand("selectAll",{modes:{wysiwyg:1,source:1},exec:function exec(a){var b=a.editable();if(b.is("textarea"))a=b.$,CKEDITOR.env.ie?a.createTextRange().execCommand("SelectAll"):(a.selectionStart=0,a.selectionEnd=a.value.length),a.focus();else{if(b.is("body"))a.document.$.execCommand("SelectAll",!1,null);else{var c=a.createRange();c.selectNodeContents(b);c.select();}a.forceNextSelectionCheck();a.selectionChange();}},canUndo:!1});b.ui.addButton&&b.ui.addButton("SelectAll",{label:b.lang.selectall.toolbar,command:"selectAll",toolbar:"selection,10"});}});})();(function(){var i={readOnly:1,preserveState:!0,editorFocus:!1,exec:function exec(a){this.toggleState();this.refresh(a);},refresh:function refresh(a){if(a.document){var c=this.state==CKEDITOR.TRISTATE_ON&&(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE||a.focusManager.hasFocus)?"attachClass":"removeClass";a.editable()[c]("cke_show_blocks");}}};CKEDITOR.plugins.add("showblocks",{onLoad:function onLoad(){var a="p div pre address blockquote h1 h2 h3 h4 h5 h6".split(" "),c,b,e,f,i=CKEDITOR.getUrl(this.path),j=!(CKEDITOR.env.ie&&9>CKEDITOR.env.version),g=j?":not([contenteditable=false]):not(.cke_show_blocks_off)":"",d,h;for(c=b=e=f="";d=a.pop();){h=a.length?",":"",c+=".cke_show_blocks "+d+g+h,e+=".cke_show_blocks.cke_contents_ltr "+d+g+h,f+=".cke_show_blocks.cke_contents_rtl "+d+g+h,b+=".cke_show_blocks "+d+g+"{background-image:url("+i+"images/block_"+d+".png)}";}CKEDITOR.addCss((c+"{background-repeat:no-repeat;border:1px dotted gray;padding-top:8px}").concat(b,e+"{background-position:top left;padding-left:8px}",f+"{background-position:top right;padding-right:8px}"));j||CKEDITOR.addCss(".cke_show_blocks [contenteditable=false],.cke_show_blocks .cke_show_blocks_off{border:none;padding-top:0;background-image:none}.cke_show_blocks.cke_contents_rtl [contenteditable=false],.cke_show_blocks.cke_contents_rtl .cke_show_blocks_off{padding-right:0}.cke_show_blocks.cke_contents_ltr [contenteditable=false],.cke_show_blocks.cke_contents_ltr .cke_show_blocks_off{padding-left:0}");},init:function init(a){function c(){b.refresh(a);}if(!a.blockless){var b=a.addCommand("showblocks",i);b.canUndo=!1;a.config.startupOutlineBlocks&&b.setState(CKEDITOR.TRISTATE_ON);a.ui.addButton&&a.ui.addButton("ShowBlocks",{label:a.lang.showblocks.toolbar,command:"showblocks",toolbar:"tools,20"});a.on("mode",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a);});a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(a.on("focus",c),a.on("blur",c));a.on("contentDom",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a);});}}});})();(function(){var f={preserveState:!0,editorFocus:!1,readOnly:1,exec:function exec(a){this.toggleState();this.refresh(a);},refresh:function refresh(a){if(a.document){var b=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";a.editable()[b]("cke_show_borders");}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function onLoad(){var a;a=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders ");CKEDITOR.addCss(a);},init:function init(a){var b=a.addCommand("showborders",f);b.canUndo=!1;!1!==a.config.startupShowBorders&&b.setState(CKEDITOR.TRISTATE_ON);a.on("mode",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a);},null,null,100);a.on("contentDom",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(a);});a.on("removeFormatCleanup",function(d){d=d.data;a.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&d.is("table")&&(!d.hasAttribute("border")||0>=parseInt(d.getAttribute("border"),10))&&d.addClass("cke_show_border");});},afterInit:function afterInit(a){var b=a.dataProcessor,a=b&&b.dataFilter,b=b&&b.htmlFilter;a&&a.addRules({elements:{table:function table(a){var a=a.attributes,b=a["class"],c=parseInt(a.border,10);if((!c||0>=c)&&(!b||-1==b.indexOf("cke_show_border")))a["class"]=(b||"")+" cke_show_border";}}});b&&b.addRules({elements:{table:function table(a){var a=a.attributes,b=a["class"];b&&(a["class"]=b.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""));}}});}});CKEDITOR.on("dialogDefinition",function(a){var b=a.data.name;if("table"==b||"tableProperties"==b)if(a=a.data.definition,b=a.getContents("info").get("txtBorder"),b.commit=CKEDITOR.tools.override(b.commit,function(a){return function(b,c){a.apply(this,arguments);var e=parseInt(this.getValue(),10);c[!e||0>=e?"addClass":"removeClass"]("cke_show_border");};}),a=(a=a.getContents("advanced"))&&a.get("advCSSClasses"))a.setup=CKEDITOR.tools.override(a.setup,function(a){return function(){a.apply(this,arguments);this.setValue(this.getValue().replace(/cke_show_border/,""));};}),a.commit=CKEDITOR.tools.override(a.commit,function(a){return function(b,c){a.apply(this,arguments);parseInt(c.getAttribute("border"),10)||c.addClass("cke_show_border");};});});})();(function(){CKEDITOR.plugins.add("sourcearea",{init:function init(a){function d(){var a=e&&this.equals(CKEDITOR.document.getActive());this.hide();this.setStyle("height",this.getParent().$.clientHeight+"px");this.setStyle("width",this.getParent().$.clientWidth+"px");this.show();a&&this.focus();}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var f=CKEDITOR.plugins.sourcearea;a.addMode("source",function(e){var b=a.ui.space("contents").getDocument().createElement("textarea");b.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",a.config.sourceAreaTabSize||4)));b.setAttribute("dir","ltr");b.addClass("cke_source cke_reset cke_enable_context_menu");a.ui.space("contents").append(b);b=a.editable(new c(a,b));b.setData(a.getData(1));CKEDITOR.env.ie&&(b.attachListener(a,"resize",d,b),b.attachListener(CKEDITOR.document.getWindow(),"resize",d,b),CKEDITOR.tools.setTimeout(d,0,b));a.fire("ariaWidget",this);e();});a.addCommand("source",f.commands.source);a.ui.addButton&&a.ui.addButton("Source",{label:a.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"});a.on("mode",function(){a.getCommand("source").setState("source"==a.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);});var e=CKEDITOR.env.ie&&9==CKEDITOR.env.version;}}});var c=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function setData(a){this.setValue(a);this.status="ready";this.editor.fire("dataReady");},getData:function getData(){return this.getValue();},insertHtml:function insertHtml(){},insertElement:function insertElement(){},insertText:function insertText(){},setReadOnly:function setReadOnly(a){this[(a?"set":"remove")+"Attribute"]("readOnly","readonly");},detach:function detach(){c.baseProto.detach.call(this);this.clearCustomData();this.remove();}}});})();CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function exec(c){"wysiwyg"==c.mode&&c.fire("saveSnapshot");c.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);c.setMode("source"==c.mode?"wysiwyg":"source");},canUndo:!1}}};CKEDITOR.plugins.add("specialchar",{availableLangs:{ar:1,bg:1,ca:1,cs:1,cy:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ku:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function init(a){var c=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js");a.addCommand("specialchar",{exec:function exec(){var b=a.langCode,b=c.availableLangs[b]?b:c.availableLangs[b.replace(/-.*/,"")]?b.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+b+".js"),function(){CKEDITOR.tools.extend(a.lang.specialchar,c.langEntries[b]);a.openDialog("specialchar");});},modes:{wysiwyg:1},canUndo:!1});a.ui.addButton&&a.ui.addButton("SpecialChar",{label:a.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"});}});CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" ");CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",init:function init(a){var d=this,c=CKEDITOR.plugins.scayt;this.bindEvents(a);this.parseConfig(a);this.addRule(a);CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js"));this.addMenuItems(a);var b=a.lang.scayt,f=CKEDITOR.env;a.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:b.text_title,title:b.text_title,modes:{wysiwyg:!(f.ie&&(8>f.version||f.quirks))},toolbar:"spellchecker,20",refresh:function refresh(){var b=a.ui.instances.Scayt.getState();a.scayt&&(b=c.state[a.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);a.fire("scaytButtonState",b);},onRender:function onRender(){var c=this;a.on("scaytButtonState",function(a){void 0!==_typeof(a.data)&&c.setState(a.data);});},onMenu:function onMenu(){var b=a.scayt;a.getMenuItem("scaytToggle").label=a.lang.scayt[b&&c.state[a.name]?"btn_disable":"btn_enable"];b={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:a.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};a.config.scayt_uiTabs[0]||delete b.scaytOptions;a.config.scayt_uiTabs[1]||delete b.scaytLangs;a.config.scayt_uiTabs[2]||delete b.scaytDict;return b;}});a.contextMenu&&a.addMenuItems&&(a.contextMenu.addListener(function(){var c=a.scayt,b;if(c){var h=c.getSelectionNode();if(h=h?h.getAttribute(c.getNodeAttribute()):h)b=d.menuGenerator(a,h,d),c.showBanner("."+a.contextMenu._.definition.panel.className.split(" ").join(" ."));}return b;}),a.contextMenu._.onHide=CKEDITOR.tools.override(a.contextMenu._.onHide,function(c){return function(){var b=a.scayt;b&&b.hideBanner();return c.apply(this);};}));},addMenuItems:function addMenuItems(a){var d=this,c=CKEDITOR.plugins.scayt;a.addMenuGroup("scaytButton");var b=a.config.scayt_contextMenuItemsOrder.split("|");if(b&&b.length)for(var f=0;f<b.length;f++){a.addMenuGroup("scayt_"+b[f],f-10);}b={scaytToggle:{label:a.lang.scayt.btn_enable,group:"scaytButton",onClick:function onClick(){var b=a.scayt;c.state[a.name]=!c.state[a.name];!0===c.state[a.name]?b||c.createScayt(a):b&&c.destroy(a);}},scaytAbout:{label:a.lang.scayt.btn_about,group:"scaytButton",onClick:function onClick(){a.scayt.tabToOpen="about";a.lockSelection();a.openDialog(d.dialogName);}},scaytOptions:{label:a.lang.scayt.btn_options,group:"scaytButton",onClick:function onClick(){a.scayt.tabToOpen="options";a.lockSelection();a.openDialog(d.dialogName);}},scaytLangs:{label:a.lang.scayt.btn_langs,group:"scaytButton",onClick:function onClick(){a.scayt.tabToOpen="langs";a.lockSelection();a.openDialog(d.dialogName);}},scaytDict:{label:a.lang.scayt.btn_dictionaries,group:"scaytButton",onClick:function onClick(){a.scayt.tabToOpen="dictionaries";a.lockSelection();a.openDialog(d.dialogName);}}};a.plugins.wsc&&(b.WSC={label:a.lang.wsc.toolbar,group:"scaytButton",onClick:function onClick(){var c=CKEDITOR.plugins.scayt,b=a.scayt,d=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.container.getText():a.document.getBody().getText();(d=d.replace(/\s/g,""))?(b&&c.state[a.name]&&b.setMarkupPaused&&b.setMarkupPaused(!0),a.lockSelection(),a.execCommand("checkspell")):alert("Nothing to check!");}});a.addMenuItems(b);},bindEvents:function bindEvents(a){var d=CKEDITOR.plugins.scayt,c=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE;CKEDITOR.on("dialogDefinition",function(a){if("scaytDialog"===a.data.name)a.data.definition.dialog.on("cancel",function(){return!1;},this,null,-1);});var b=function b(){a.scayt&&d.destroy(a);},f=function f(){d.state[a.name]&&!a.readOnly&&d.createScayt(a);},g=function g(){c?(a.on("blur",b),a.on("focus",f),a.focusManager.hasFocus&&f()):f();};a.on("contentDom",g);a.on("beforeCommandExec",function(c){if(c.data.name in d.options.disablingCommandExec&&"wysiwyg"==a.mode){if(c=a.scayt)d.destroy(a),a.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED);}else if("bold"===c.data.name||"italic"===c.data.name||"underline"===c.data.name||"strike"===c.data.name||"subscript"===c.data.name||"superscript"===c.data.name)if(c=a.scayt)c.removeMarkupInSelectionNode(),c.fire("startSpellCheck");});a.on("beforeSetMode",function(c){if("source"==c.data&&(c=a.scayt))d.destroy(a),a.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED);});a.on("afterCommandExec",function(c){var b;if("wysiwyg"==a.mode&&("undo"==c.data.name||"redo"==c.data.name))(b=a.scayt)&&setTimeout(function(){b.fire("startSpellCheck");},250);});a.on("readOnly",function(c){var b;c&&(b=a.scayt,!0===c.editor.readOnly?b&&b.fire("removeMarkupInDocument",{}):b?b.fire("startSpellCheck"):"wysiwyg"==c.editor.mode&&!0===d.state[c.editor.name]&&(d.createScayt(a),c.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)));});a.on("beforeDestroy",b);a.on("setData",function(){b();a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&g();},this,null,50);a.on("insertElement",function(){var c=a.scayt;c&&(c.removeMarkupInSelectionNode(),c.fire("startSpellCheck"));},this,null,50);a.on("insertHtml",function(){var c=a.scayt;c&&(c.removeMarkupInSelectionNode(),c.fire("startSpellCheck"));},this,null,50);a.on("scaytDialogShown",function(c){c.data.selectPage(a.scayt.tabToOpen);});},parseConfig:function parseConfig(a){var d=CKEDITOR.plugins.scayt;d.replaceOldOptionsNames(a.config);"boolean"!==typeof a.config.scayt_autoStartup&&(a.config.scayt_autoStartup=!1);d.state[a.name]=a.config.scayt_autoStartup;a.config.scayt_contextCommands||(a.config.scayt_contextCommands="ignore|ignoreall|add");a.config.scayt_contextMenuItemsOrder||(a.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control");a.config.scayt_sLang||(a.config.scayt_sLang="en_US");if(void 0===a.config.scayt_maxSuggestions||"number"!=typeof a.config.scayt_maxSuggestions||0>a.config.scayt_maxSuggestions)a.config.scayt_maxSuggestions=5;if(void 0===a.config.scayt_customDictionaryIds||"string"!==typeof a.config.scayt_customDictionaryIds)a.config.scayt_customDictionaryIds="";if(void 0===a.config.scayt_userDictionaryName||"string"!==typeof a.config.scayt_userDictionaryName)a.config.scayt_userDictionaryName=null;if("string"===typeof a.config.scayt_uiTabs&&3===a.config.scayt_uiTabs.split(",").length){var c=[],b=[];a.config.scayt_uiTabs=a.config.scayt_uiTabs.split(",");CKEDITOR.tools.search(a.config.scayt_uiTabs,function(a){if(Number(a)===1||Number(a)===0){b.push(true);c.push(Number(a));}else b.push(false);});a.config.scayt_uiTabs=null===CKEDITOR.tools.search(b,!1)?c:[1,1,1];}else a.config.scayt_uiTabs=[1,1,1];"string"!=typeof a.config.scayt_serviceProtocol&&(a.config.scayt_serviceProtocol=null);"string"!=typeof a.config.scayt_serviceHost&&(a.config.scayt_serviceHost=null);"string"!=typeof a.config.scayt_servicePort&&(a.config.scayt_servicePort=null);"string"!=typeof a.config.scayt_servicePath&&(a.config.scayt_servicePath=null);a.config.scayt_moreSuggestions||(a.config.scayt_moreSuggestions="on");"string"!==typeof a.config.scayt_customerId&&(a.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2");"string"!==typeof a.config.scayt_srcUrl&&(d=document.location.protocol,d=-1!=d.search(/https?:/)?d:"http:",a.config.scayt_srcUrl=d+"//svc.webspellchecker.net/spellcheck31/lf/scayt3/ckscayt/ckscayt.js");"boolean"!==typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0);"boolean"!==typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0);},addRule:function addRule(a){var d=a.dataProcessor,c=d&&d.htmlFilter,b=a._.elementsPath&&a._.elementsPath.filters,d=d&&d.dataFilter,f=a.addRemoveFormatFilter,g=function g(c){var b=CKEDITOR.plugins.scayt;if(a.scayt&&c.hasAttribute(b.options.data_attribute_name))return!1;},e=function e(c){var b=CKEDITOR.plugins.scayt,d=!0;a.scayt&&c.hasAttribute(b.options.data_attribute_name)&&(d=!1);return d;};b&&b.push(g);d&&d.addRules({elements:{span:function span(c){var b=CKEDITOR.plugins.scayt;b&&b.state[a.name]&&c.classes&&CKEDITOR.tools.search(c.classes,b.options.misspelled_word_class)&&(c.classes&&c.parent.type===CKEDITOR.NODE_DOCUMENT_FRAGMENT?(delete c.attributes.style,delete c.name):delete c.classes[CKEDITOR.tools.indexOf(c.classes,b.options.misspelled_word_class)]);return c;}}});c&&c.addRules({elements:{span:function span(c){var b=CKEDITOR.plugins.scayt;b&&b.state[a.name]&&c.hasClass(b.options.misspelled_word_class)&&c.attributes[b.options.data_attribute_name]&&(c.removeClass(b.options.misspelled_word_class),delete c.attributes[b.options.data_attribute_name],delete c.name);return c;}}});f&&f.call(a,e);},scaytMenuDefinition:function scaytMenuDefinition(a){var d=this,a=a.scayt;return{scayt_ignore:{label:a.getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function exec(a){a.scayt.ignoreWord();}},scayt_ignoreall:{label:a.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function exec(a){a.scayt.ignoreAllWords();}},scayt_add:{label:a.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function exec(a){var b=a.scayt;setTimeout(function(){b.addWordToUserDictionary();},10);}},option:{label:a.getLocal("btn_options"),group:"scayt_control",order:4,exec:function exec(a){a.scayt.tabToOpen="options";a.lockSelection();a.openDialog(d.dialogName);},verification:function verification(a){return 1==a.config.scayt_uiTabs[0]?!0:!1;}},language:{label:a.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function exec(a){a.scayt.tabToOpen="langs";a.lockSelection();a.openDialog(d.dialogName);},verification:function verification(a){return 1==a.config.scayt_uiTabs[1]?!0:!1;}},dictionary:{label:a.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function exec(a){a.scayt.tabToOpen="dictionaries";a.lockSelection();a.openDialog(d.dialogName);},verification:function verification(a){return 1==a.config.scayt_uiTabs[2]?!0:!1;}},about:{label:a.getLocal("btn_about"),group:"scayt_control",order:7,exec:function exec(a){a.scayt.tabToOpen="about";a.lockSelection();a.openDialog(d.dialogName);}}};},buildSuggestionMenuItems:function buildSuggestionMenuItems(a,d){var c={},b={},f=a.scayt;if(0<d.length&&"no_any_suggestions"!==d[0])for(var g=0;g<d.length;g++){var e="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[g].replace(" ","_");a.addCommand(e,this.createCommand(CKEDITOR.plugins.scayt.suggestions[g]));g<a.config.scayt_maxSuggestions?(a.addMenuItem(e,{label:d[g],command:e,group:"scayt_suggest",order:g+1}),c[e]=CKEDITOR.TRISTATE_OFF):(a.addMenuItem(e,{label:d[g],command:e,group:"scayt_moresuggest",order:g+1}),b[e]=CKEDITOR.TRISTATE_OFF,"on"===a.config.scayt_moreSuggestions&&(a.addMenuItem("scayt_moresuggest",{label:f.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function getItems(){return b;}}),c.scayt_moresuggest=CKEDITOR.TRISTATE_OFF));}else c.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,a.addCommand("no_scayt_suggest",{exec:function exec(){}}),a.addMenuItem("no_scayt_suggest",{label:f.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return c;},menuGenerator:function menuGenerator(a,d){var c=a.scayt,b=this.scaytMenuDefinition(a),f={},g=a.config.scayt_contextCommands.split("|");c.fire("getSuggestionsList",{lang:c.getLang(),word:d});f=this.buildSuggestionMenuItems(a,CKEDITOR.plugins.scayt.suggestions);if("off"==a.config.scayt_contextCommands)return f;for(var e in b){-1==CKEDITOR.tools.indexOf(g,e.replace("scayt_",""))&&"all"!=a.config.scayt_contextCommands||(f[e]=CKEDITOR.TRISTATE_OFF,"function"===typeof b[e].verification&&!b[e].verification(a)&&delete f[e],a.addCommand(e,{exec:b[e].exec}),a.addMenuItem(e,{label:a.lang.scayt[b[e].label]||b[e].label,command:e,group:b[e].group,order:b[e].order}));}return f;},createCommand:function createCommand(a){return{exec:function exec(d){d.scayt.replaceSelectionNode({word:a});}};}});CKEDITOR.plugins.scayt={state:{},suggestions:[],loadingHelper:{loadOrder:[]},isLoading:!1,options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},replaceOldOptionsNames:function replaceOldOptionsNames(a){for(var d in a){d in this.backCompatibilityMap&&(a[this.backCompatibilityMap[d]]=a[d],delete a[d]);}},createScayt:function createScayt(a){var d=this;this.loadScaytLibrary(a,function(a){var b={lang:a.config.scayt_sLang,container:"BODY"==a.editable().$.nodeName?a.document.getWindow().$.frameElement:a.editable().$,customDictionary:a.config.scayt_customDictionaryIds,userDictionaryName:a.config.scayt_userDictionaryName,localization:a.langCode,customer_id:a.config.scayt_customerId,data_attribute_name:d.options.data_attribute_name,misspelled_word_class:d.options.misspelled_word_class};a.config.scayt_serviceProtocol&&(b.service_protocol=a.config.scayt_serviceProtocol);a.config.scayt_serviceHost&&(b.service_host=a.config.scayt_serviceHost);a.config.scayt_servicePort&&(b.service_port=a.config.scayt_servicePort);a.config.scayt_servicePath&&(b.service_path=a.config.scayt_servicePath);b=new SCAYT.CKSCAYT(b,function(){},function(){});b.subscribe("suggestionListSend",function(a){for(var b={},c=[],d=0;d<a.suggestionList.length;d++){if(!b[a.suggestionList[d]]){b[a.suggestionList[d]]=a.suggestionList[d];c.push(a.suggestionList[d]);}}CKEDITOR.plugins.scayt.suggestions=c;});a.scayt=b;a.fire("scaytButtonState",a.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON);});},destroy:function destroy(a){a.scayt&&a.scayt.destroy();delete a.scayt;a.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF);},loadScaytLibrary:function loadScaytLibrary(a,d){var c=this;"undefined"===typeof window.SCAYT||"function"!==typeof window.SCAYT.CKSCAYT?(this.loadingHelper[a.name]=d,this.loadingHelper.loadOrder.push(a.name),CKEDITOR.scriptLoader.load(a.config.scayt_srcUrl,function(){var a;CKEDITOR.fireOnce("scaytReady");for(var d=0;d<c.loadingHelper.loadOrder.length;d++){a=c.loadingHelper.loadOrder[d];if("function"===typeof c.loadingHelper[a])c.loadingHelper[a](CKEDITOR.instances[a]);delete c.loadingHelper[a];}c.loadingHelper.loadOrder=[];})):window.SCAYT&&"function"===typeof window.SCAYT.CKSCAYT&&(CKEDITOR.fireOnce("scaytReady"),a.scayt||"function"===typeof d&&d(a));}};CKEDITOR.on("scaytReady",function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty){var a=CKEDITOR.editor.prototype;a.checkDirty=CKEDITOR.tools.override(a.checkDirty,function(a){return function(){var b=null,d=this.scayt;if(!CKEDITOR.plugins.scayt||!CKEDITOR.plugins.scayt.state[this.name]||!this.scayt)b=a.call(this);else if(b="ready"==this.status)var g=d.removeMarkupFromString(this.getSnapshot()),d=d.removeMarkupFromString(this._.previousValue),b=b&&d!==g;return b;};});a.resetDirty=CKEDITOR.tools.override(a.resetDirty,function(a){return function(){var b=this.scayt;!CKEDITOR.plugins.scayt||!CKEDITOR.plugins.scayt.state[this.name]||!this.scayt?a.call(this):this._.previousValue=b.removeMarkupFromString(this.getSnapshot());};});}if(!0===CKEDITOR.config.scayt_handleUndoRedo){var a=CKEDITOR.plugins.undo.Image.prototype,d="function"==typeof a.equalsContent?"equalsContent":"equals";a[d]=CKEDITOR.tools.override(a[d],function(a){return function(b){var d=b.editor.scayt,g=this.contents,e=b.contents,h=null;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state[b.editor.name]&&b.editor.scayt&&(this.contents=d.removeMarkupFromString(g)||"",b.contents=d.removeMarkupFromString(e)||"");h=a.apply(this,arguments);this.contents=g;b.contents=e;return h;};});}});(function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function init(c){var j=c.config,g=c.lang.stylescombo,f={},i=[],k=[];c.on("stylesSet",function(b){if(b=b.data.styles){for(var a,h,d,e=0,l=b.length;e<l;e++){if(a=b[e],!(c.blockless&&a.element in CKEDITOR.dtd.$block)&&(h=a.name,a=new CKEDITOR.style(a),!c.filter.customConfig||c.filter.check(a)))a._name=h,a._.enterMode=j.enterMode,a._.type=d=a.assignedTo||a.type,a._.weight=e+1E3*(d==CKEDITOR.STYLE_OBJECT?1:d==CKEDITOR.STYLE_BLOCK?2:3),f[h]=a,i.push(a),k.push(a);}i.sort(function(a,b){return a._.weight-b._.weight;});}});c.ui.addRichCombo("Styles",{label:g.label,title:g.panelTitle,toolbar:"styles,10",allowedContent:k,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(j.contentsCss),multiSelect:!0,attributes:{"aria-label":g.panelTitle}},init:function init(){var b,a,c,d,e,f;e=0;for(f=i.length;e<f;e++){b=i[e],a=b._name,d=b._.type,d!=c&&(this.startGroup(g["panelTitle"+d]),c=d),this.add(a,b.type==CKEDITOR.STYLE_OBJECT?a:b.buildPreview(),a);}this.commit();},onClick:function onClick(b){c.focus();c.fire("saveSnapshot");var b=f[b],a=c.elementPath();c[b.checkActive(a,c)?"removeStyle":"applyStyle"](b);c.fire("saveSnapshot");},onRender:function onRender(){c.on("selectionChange",function(b){for(var a=this.getValue(),b=b.data.path.elements,h=0,d=b.length,e;h<d;h++){e=b[h];for(var g in f){if(f[g].checkElementRemovable(e,!0,c)){g!=a&&this.setValue(g);return;}}}this.setValue("");},this);},onOpen:function onOpen(){var b=c.getSelection().getSelectedElement(),b=c.elementPath(b),a=[0,0,0,0];this.showAll();this.unmarkAll();for(var h in f){var d=f[h],e=d._.type;d.checkApplicable(b,c,c.activeFilter)?a[e]++:this.hideItem(h);d.checkActive(b,c)&&this.mark(h);}a[CKEDITOR.STYLE_BLOCK]||this.hideGroup(g["panelTitle"+CKEDITOR.STYLE_BLOCK]);a[CKEDITOR.STYLE_INLINE]||this.hideGroup(g["panelTitle"+CKEDITOR.STYLE_INLINE]);a[CKEDITOR.STYLE_OBJECT]||this.hideGroup(g["panelTitle"+CKEDITOR.STYLE_OBJECT]);},refresh:function refresh(){var b=c.elementPath();if(b){for(var a in f){if(f[a].checkApplicable(b,c,c.activeFilter))return;}this.setState(CKEDITOR.TRISTATE_DISABLED);}},reset:function reset(){f={};i=[];}});}});})();(function(){function i(c){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function exec(d){if(d.editable().hasFocus){var e=d.getSelection(),b;if(b=new CKEDITOR.dom.elementPath(e.getCommonAncestor(),e.root).contains({td:1,th:1},1)){var e=d.createRange(),a=CKEDITOR.tools.tryThese(function(){var a=b.getParent().$.cells[b.$.cellIndex+(c?-1:1)];a.parentNode.parentNode;return a;},function(){var a=b.getParent(),a=a.getAscendant("table").$.rows[a.$.rowIndex+(c?-1:1)];return a.cells[c?a.cells.length-1:0];});if(!a&&!c){for(var f=b.getAscendant("table").$,a=b.getParent().$.cells,f=new CKEDITOR.dom.element(f.insertRow(-1),d.document),g=0,h=a.length;g<h;g++){f.append(new CKEDITOR.dom.element(a[g],d.document).clone(!1,!1)).appendBogus();}e.moveToElementEditStart(f);}else if(a)a=new CKEDITOR.dom.element(a),e.moveToElementEditStart(a),(!e.checkStartOfBlock()||!e.checkEndOfBlock())&&e.selectNodeContents(a);else return!0;e.select(!0);return!0;}}return!1;}};}var h={editorFocus:!1,modes:{wysiwyg:1,source:1}},g={exec:function exec(c){c.container.focusNext(!0,c.tabIndex);}},f={exec:function exec(c){c.container.focusPrevious(!0,c.tabIndex);}};CKEDITOR.plugins.add("tab",{init:function init(c){for(var d=!1!==c.config.enableTabKeyTools,e=c.config.tabSpaces||0,b="";e--;){b+=" ";}if(b)c.on("key",function(a){9==a.data.keyCode&&(c.insertHtml(b),a.cancel());});if(d)c.on("key",function(a){(9==a.data.keyCode&&c.execCommand("selectNextCell")||a.data.keyCode==CKEDITOR.SHIFT+9&&c.execCommand("selectPreviousCell"))&&a.cancel();});c.addCommand("blur",CKEDITOR.tools.extend(g,h));c.addCommand("blurBack",CKEDITOR.tools.extend(f,h));c.addCommand("selectNextCell",i());c.addCommand("selectPreviousCell",i(!0));}});})();CKEDITOR.dom.element.prototype.focusNext=function(i,h){var g=void 0===h?this.getTabIndex():h,f,c,d,e,b,a;if(0>=g)for(b=this.getNextSourceNode(i,CKEDITOR.NODE_ELEMENT);b;){if(b.isVisible()&&0===b.getTabIndex()){d=b;break;}b=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);}else for(b=this.getDocument().getBody().getFirst();b=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!f)if(!c&&b.equals(this)){if(c=!0,i){if(!(b=b.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;f=1;}}else c&&!this.contains(b)&&(f=1);if(b.isVisible()&&!(0>(a=b.getTabIndex()))){if(f&&a==g){d=b;break;}a>g&&(!d||!e||a<e)?(d=b,e=a):!d&&0===a&&(d=b,e=a);}}d&&d.focus();};CKEDITOR.dom.element.prototype.focusPrevious=function(i,h){for(var g=void 0===h?this.getTabIndex():h,f,c,d,e=0,b,a=this.getDocument().getBody().getLast();a=a.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!f)if(!c&&a.equals(this)){if(c=!0,i){if(!(a=a.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;f=1;}}else c&&!this.contains(a)&&(f=1);if(a.isVisible()&&!(0>(b=a.getTabIndex())))if(0>=g){if(f&&0===b){d=a;break;}b>e&&(d=a,e=b);}else{if(f&&b==g){d=a;break;}if(b<g&&(!d||b>e))d=a,e=b;}}d&&d.focus();};CKEDITOR.plugins.add("table",{requires:"dialog",init:function init(a){function e(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function refresh(a,f){this.setState(f.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);}});}if(!a.blockless){var c=a.lang.table;a.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(a.plugins.dialogadvtab?"table"+a.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]}));a.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",e()));a.addCommand("tableDelete",e({exec:function exec(a){var b=a.elementPath().contains("table",1);if(b){var d=b.getParent(),c=a.editable();1==d.getChildCount()&&!d.is("td","th")&&!d.equals(c)&&(b=d);a=a.createRange();a.moveToPosition(b,CKEDITOR.POSITION_BEFORE_START);b.remove();a.select();}}}));a.ui.addButton&&a.ui.addButton("Table",{label:c.toolbar,command:"table",toolbar:"insert,30"});CKEDITOR.dialog.add("table",this.path+"dialogs/table.js");CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js");a.addMenuItems&&a.addMenuItems({table:{label:c.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:c.deleteTable,command:"tableDelete",group:"table",order:1}});a.on("doubleclick",function(a){a.data.element.is("table")&&(a.data.dialog="tableProperties");});a.contextMenu&&a.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF};});}}});(function(){function p(e){function d(a){!(0<b.length)&&a.type==CKEDITOR.NODE_ELEMENT&&y.test(a.getName())&&!a.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(c,a,"selected_cell",!0),b.push(a));}for(var e=e.getRanges(),b=[],c={},a=0;a<e.length;a++){var f=e[a];if(f.collapsed)f=f.getCommonAncestor(),(f=f.getAscendant("td",!0)||f.getAscendant("th",!0))&&b.push(f);else{var f=new CKEDITOR.dom.walker(f),g;for(f.guard=d;g=f.next();){if(g.type!=CKEDITOR.NODE_ELEMENT||!g.is(CKEDITOR.dtd.table))if((g=g.getAscendant("td",!0)||g.getAscendant("th",!0))&&!g.getCustomData("selected_cell"))CKEDITOR.dom.element.setMarker(c,g,"selected_cell",!0),b.push(g);}}}CKEDITOR.dom.element.clearAllMarkers(c);return b;}function o(e,d){for(var b=p(e),c=b[0],a=c.getAscendant("table"),c=c.getDocument(),f=b[0].getParent(),g=f.$.rowIndex,b=b[b.length-1],h=b.getParent().$.rowIndex+b.$.rowSpan-1,b=new CKEDITOR.dom.element(a.$.rows[h]),g=d?g:h,f=d?f:b,b=CKEDITOR.tools.buildTableMap(a),a=b[g],g=d?b[g-1]:b[g+1],b=b[0].length,c=c.createElement("tr"),h=0;a[h]&&h<b;h++){var i;1<a[h].rowSpan&&g&&a[h]==g[h]?(i=a[h],i.rowSpan+=1):(i=new CKEDITOR.dom.element(a[h]).clone(),i.removeAttribute("rowSpan"),i.appendBogus(),c.append(i),i=i.$);h+=i.colSpan-1;}d?c.insertBefore(f):c.insertAfter(f);}function q(e){if(e instanceof CKEDITOR.dom.selection){for(var d=p(e),b=d[0].getAscendant("table"),c=CKEDITOR.tools.buildTableMap(b),e=d[0].getParent().$.rowIndex,d=d[d.length-1],a=d.getParent().$.rowIndex+d.$.rowSpan-1,d=[],f=e;f<=a;f++){for(var g=c[f],h=new CKEDITOR.dom.element(b.$.rows[f]),i=0;i<g.length;i++){var j=new CKEDITOR.dom.element(g[i]),l=j.getParent().$.rowIndex;1==j.$.rowSpan?j.remove():(j.$.rowSpan-=1,l==f&&(l=c[f+1],l[i-1]?j.insertAfter(new CKEDITOR.dom.element(l[i-1])):new CKEDITOR.dom.element(b.$.rows[f+1]).append(j,1)));i+=j.$.colSpan-1;}d.push(h);}c=b.$.rows;b=new CKEDITOR.dom.element(c[a+1]||(0<e?c[e-1]:null)||b.$.parentNode);for(f=d.length;0<=f;f--){q(d[f]);}return b;}e instanceof CKEDITOR.dom.element&&(b=e.getAscendant("table"),1==b.$.rows.length?b.remove():e.remove());return null;}function r(e,d){for(var b=d?Infinity:0,c=0;c<e.length;c++){var a;a=e[c];for(var f=d,g=a.getParent().$.cells,h=0,i=0;i<g.length;i++){var j=g[i],h=h+(f?1:j.colSpan);if(j==a.$)break;}a=h-1;if(d?a<b:a>b)b=a;}return b;}function k(e,d){for(var b=p(e),c=b[0].getAscendant("table"),a=r(b,1),b=r(b),a=d?a:b,f=CKEDITOR.tools.buildTableMap(c),c=[],b=[],g=f.length,h=0;h<g;h++){c.push(f[h][a]),b.push(d?f[h][a-1]:f[h][a+1]);}for(h=0;h<g;h++){c[h]&&(1<c[h].colSpan&&b[h]==c[h]?(a=c[h],a.colSpan+=1):(a=new CKEDITOR.dom.element(c[h]).clone(),a.removeAttribute("colSpan"),a.appendBogus(),a[d?"insertBefore":"insertAfter"].call(a,new CKEDITOR.dom.element(c[h])),a=a.$),h+=a.rowSpan-1);}}function u(e,d){var b=e.getStartElement();if(b=b.getAscendant("td",1)||b.getAscendant("th",1)){var c=b.clone();c.appendBogus();d?c.insertBefore(b):c.insertAfter(b);}}function t(e){if(e instanceof CKEDITOR.dom.selection){var e=p(e),d=e[0]&&e[0].getAscendant("table"),b;a:{var c=0;b=e.length-1;for(var a={},f,g;f=e[c++];){CKEDITOR.dom.element.setMarker(a,f,"delete_cell",!0);}for(c=0;f=e[c++];){if((g=f.getPrevious())&&!g.getCustomData("delete_cell")||(g=f.getNext())&&!g.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(a);b=g;break a;}}CKEDITOR.dom.element.clearAllMarkers(a);g=e[0].getParent();(g=g.getPrevious())?b=g.getLast():(g=e[b].getParent(),b=(g=g.getNext())?g.getChild(0):null);}for(g=e.length-1;0<=g;g--){t(e[g]);}b?m(b,!0):d&&d.remove();}else e instanceof CKEDITOR.dom.element&&(d=e.getParent(),1==d.getChildCount()?d.remove():e.remove());}function m(e,d){var b=e.getDocument(),c=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(c.focus(),b.focus());b=new CKEDITOR.dom.range(b);if(!b["moveToElementEdit"+(d?"End":"Start")](e))b.selectNodeContents(e),b.collapse(d?!1:!0);b.select(!0);}function v(e,d,b){e=e[d];if("undefined"==typeof b)return e;for(d=0;e&&d<e.length;d++){if(b.is&&e[d]==b.$)return d;if(d==b)return new CKEDITOR.dom.element(e[d]);}return b.is?-1:null;}function s(e,d,b){var c=p(e),a;if((d?1!=c.length:2>c.length)||(a=e.getCommonAncestor())&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))return!1;var f,e=c[0];a=e.getAscendant("table");var g=CKEDITOR.tools.buildTableMap(a),h=g.length,i=g[0].length,j=e.getParent().$.rowIndex,l=v(g,j,e);if(d){var n;try{var m=parseInt(e.getAttribute("rowspan"),10)||1;f=parseInt(e.getAttribute("colspan"),10)||1;n=g["up"==d?j-m:"down"==d?j+m:j]["left"==d?l-f:"right"==d?l+f:l];}catch(z){return!1;}if(!n||e.$==n)return!1;c["up"==d||"left"==d?"unshift":"push"](new CKEDITOR.dom.element(n));}for(var d=e.getDocument(),o=j,m=n=0,q=!b&&new CKEDITOR.dom.documentFragment(d),s=0,d=0;d<c.length;d++){f=c[d];var k=f.getParent(),t=f.getFirst(),r=f.$.colSpan,u=f.$.rowSpan,k=k.$.rowIndex,w=v(g,k,f),s=s+r*u,m=Math.max(m,w-l+r);n=Math.max(n,k-j+u);if(!b){r=f;(u=r.getBogus())&&u.remove();r.trim();if(f.getChildren().count()){if(k!=o&&t&&(!t.isBlockBoundary||!t.isBlockBoundary({br:1})))(o=q.getLast(CKEDITOR.dom.walker.whitespaces(!0)))&&(!o.is||!o.is("br"))&&q.append("br");f.moveChildren(q);}d?f.remove():f.setHtml("");}o=k;}if(b)return n*m==s;q.moveChildren(e);e.appendBogus();m>=i?e.removeAttribute("rowSpan"):e.$.rowSpan=n;n>=h?e.removeAttribute("colSpan"):e.$.colSpan=m;b=new CKEDITOR.dom.nodeList(a.$.rows);c=b.count();for(d=c-1;0<=d;d--){a=b.getItem(d),a.$.cells.length||(a.remove(),c++);}return e;}function w(e,d){var b=p(e);if(1<b.length)return!1;if(d)return!0;var b=b[0],c=b.getParent(),a=c.getAscendant("table"),f=CKEDITOR.tools.buildTableMap(a),g=c.$.rowIndex,h=v(f,g,b),i=b.$.rowSpan,j;if(1<i){j=Math.ceil(i/2);for(var i=Math.floor(i/2),c=g+j,a=new CKEDITOR.dom.element(a.$.rows[c]),f=v(f,c),l,c=b.clone(),g=0;g<f.length;g++){if(l=f[g],l.parentNode==a.$&&g>h){c.insertBefore(new CKEDITOR.dom.element(l));break;}else l=null;}l||a.append(c);}else{i=j=1;a=c.clone();a.insertAfter(c);a.append(c=b.clone());l=v(f,g);for(h=0;h<l.length;h++){l[h].rowSpan++;}}c.appendBogus();b.$.rowSpan=j;c.$.rowSpan=i;1==j&&b.removeAttribute("rowSpan");1==i&&c.removeAttribute("rowSpan");return c;}function x(e,d){var b=p(e);if(1<b.length)return!1;if(d)return!0;var b=b[0],c=b.getParent(),a=c.getAscendant("table"),a=CKEDITOR.tools.buildTableMap(a),f=v(a,c.$.rowIndex,b),g=b.$.colSpan;if(1<g)c=Math.ceil(g/2),g=Math.floor(g/2);else{for(var g=c=1,h=[],i=0;i<a.length;i++){var j=a[i];h.push(j[f]);1<j[f].rowSpan&&(i+=j[f].rowSpan-1);}for(a=0;a<h.length;a++){h[a].colSpan++;}}a=b.clone();a.insertAfter(b);a.appendBogus();b.$.colSpan=c;a.$.colSpan=g;1==c&&b.removeAttribute("colSpan");1==g&&a.removeAttribute("colSpan");return a;}var y=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function init(e){function d(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function refresh(a,b){this.setState(b.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);}});}function b(a,b){var c=e.addCommand(a,b);e.addFeature(c);}var c=e.lang.table;b("cellProperties",new CKEDITOR.dialogCommand("cellProperties",d({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table"})));CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js");b("rowDelete",d({requiredContent:"table",exec:function exec(a){a=a.getSelection();m(q(a));}}));b("rowInsertBefore",d({requiredContent:"table",exec:function exec(a){a=a.getSelection();o(a,!0);}}));b("rowInsertAfter",d({requiredContent:"table",exec:function exec(a){a=a.getSelection();o(a);}}));b("columnDelete",d({requiredContent:"table",exec:function exec(a){for(var a=a.getSelection(),a=p(a),b=a[0],c=a[a.length-1],a=b.getAscendant("table"),d=CKEDITOR.tools.buildTableMap(a),e,j,l=[],n=0,o=d.length;n<o;n++){for(var k=0,q=d[n].length;k<q;k++){d[n][k]==b.$&&(e=k),d[n][k]==c.$&&(j=k);}}for(n=e;n<=j;n++){for(k=0;k<d.length;k++){c=d[k],b=new CKEDITOR.dom.element(a.$.rows[k]),c=new CKEDITOR.dom.element(c[n]),c.$&&(1==c.$.colSpan?c.remove():c.$.colSpan-=1,k+=c.$.rowSpan-1,b.$.cells.length||l.push(b));}}j=a.$.rows[0]&&a.$.rows[0].cells;e=new CKEDITOR.dom.element(j[e]||(e?j[e-1]:a.$.parentNode));l.length==o&&a.remove();e&&m(e,!0);}}));b("columnInsertBefore",d({requiredContent:"table",exec:function exec(a){a=a.getSelection();k(a,!0);}}));b("columnInsertAfter",d({requiredContent:"table",exec:function exec(a){a=a.getSelection();k(a);}}));b("cellDelete",d({requiredContent:"table",exec:function exec(a){a=a.getSelection();t(a);}}));b("cellMerge",d({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function exec(a){m(s(a.getSelection()),!0);}}));b("cellMergeRight",d({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function exec(a){m(s(a.getSelection(),"right"),!0);}}));b("cellMergeDown",d({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function exec(a){m(s(a.getSelection(),"down"),!0);}}));b("cellVerticalSplit",d({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function exec(a){m(w(a.getSelection()));}}));b("cellHorizontalSplit",d({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function exec(a){m(x(a.getSelection()));}}));b("cellInsertBefore",d({requiredContent:"table",exec:function exec(a){a=a.getSelection();u(a,!0);}}));b("cellInsertAfter",d({requiredContent:"table",exec:function exec(a){a=a.getSelection();u(a);}}));e.addMenuItems&&e.addMenuItems({tablecell:{label:c.cell.menu,group:"tablecell",order:1,getItems:function getItems(){var a=e.getSelection(),b=p(a);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:s(a,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:s(a,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:s(a,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:w(a,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:x(a,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<b.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};}},tablecell_insertBefore:{label:c.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:c.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:c.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:c.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:c.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:c.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:c.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:c.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:c.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:c.row.menu,group:"tablerow",order:1,getItems:function getItems(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF};}},tablerow_insertBefore:{label:c.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:c.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:c.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:c.column.menu,group:"tablecolumn",order:1,getItems:function getItems(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF};}},tablecolumn_insertBefore:{label:c.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:c.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:c.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}});e.contextMenu&&e.contextMenu.addListener(function(a,b,c){return(a=c.contains({td:1,th:1},1))&&!a.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null;});},getSelectedCells:p};CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools);})();CKEDITOR.tools.buildTableMap=function(p){for(var p=p.$.rows,o=-1,q=[],r=0;r<p.length;r++){o++;!q[o]&&(q[o]=[]);for(var k=-1,u=0;u<p[r].cells.length;u++){var t=p[r].cells[u];for(k++;q[o][k];){k++;}for(var m=isNaN(t.colSpan)?1:t.colSpan,t=isNaN(t.rowSpan)?1:t.rowSpan,v=0;v<t;v++){q[o+v]||(q[o+v]=[]);for(var s=0;s<m;s++){q[o+v][k+s]=p[r].cells[u];}}k+=m-1;}}return q;};(function(){var h=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],j={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function init(a){function b(a){c.enabled&&!1!==a.data.command.canUndo&&c.save();}function d(){c.enabled=a.readOnly?!1:"wysiwyg"==a.mode;c.onChange();}var c=a.undoManager=new k(a),e=c.editingHandler=new l(c),f=a.addCommand("undo",{exec:function exec(){c.undo()&&(a.selectionChange(),this.fire("afterUndo"));},startDisabled:!0,canUndo:!1}),g=a.addCommand("redo",{exec:function exec(){c.redo()&&(a.selectionChange(),this.fire("afterRedo"));},startDisabled:!0,canUndo:!1});a.setKeystroke([[h[0],"undo"],[h[1],"redo"],[h[2],"redo"]]);c.onChange=function(){f.setState(c.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);g.setState(c.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);};a.on("beforeCommandExec",b);a.on("afterCommandExec",b);a.on("saveSnapshot",function(a){c.save(a.data&&a.data.contentOnly);});a.on("contentDom",e.attachListeners,e);a.on("instanceReady",function(){a.fire("saveSnapshot");});a.on("beforeModeUnload",function(){"wysiwyg"==a.mode&&c.save(!0);});a.on("mode",d);a.on("readOnly",d);a.ui.addButton&&(a.ui.addButton("Undo",{label:a.lang.undo.undo,command:"undo",toolbar:"undo,10"}),a.ui.addButton("Redo",{label:a.lang.undo.redo,command:"redo",toolbar:"undo,20"}));a.resetUndo=function(){c.reset();a.fire("saveSnapshot");};a.on("updateSnapshot",function(){c.currentImage&&c.update();});a.on("lockSnapshot",function(a){a=a.data;c.lock(a&&a.dontUpdate,a&&a.forceUpdate);});a.on("unlockSnapshot",c.unlock,c);}});CKEDITOR.plugins.undo={};var k=CKEDITOR.plugins.undo.UndoManager=function(a){this.editor=a;this.reset();};k.prototype={keyGroupsEnum:{PRINTABLE:0,FUNCTIONAL:1},strokesRecorded:[0,0],navigationKeyCodes:{37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},previousKeyGroup:-1,type:function type(a){var b=this.keyGroupsEnum,a=j[a]?b.FUNCTIONAL:b.PRINTABLE,d=this.strokesRecorded[a]+1,c=a!==this.previousKeyGroup,e=25<=d,b=a==b.FUNCTIONAL?b.PRINTABLE:b.FUNCTIONAL;this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange());if(c&&-1!==this.previousKeyGroup||e)c?(this.strokesRecorded[b]=0,this.save(!1,this.editingHandler.lastKeydownImage,!1)||this.snapshots.splice(this.index+1,this.snapshots.length-this.index-1)):(d=0,this.editor.fire("saveSnapshot"),this.typing=!0);this.strokesRecorded[a]=d;this.previousKeyGroup=a;this.editor.fire("change");},reset:function reset(){this.snapshots=[];this.index=-1;this.limit=this.editor.config.undoStackSize||20;this.currentImage=null;this.hasRedo=this.hasUndo=!1;this.locked=null;this.resetType();},resetType:function resetType(){this.strokesRecorded=[0,0];this.typing=!1;this.previousKeyGroup=-1;},refreshState:function refreshState(){this.hasUndo=!!this.getNextImage(!0);this.hasRedo=!!this.getNextImage(!1);this.resetType();this.onChange();},save:function save(a,b,d){var c=this.editor;if(this.locked||"ready"!=c.status||"wysiwyg"!=c.mode)return!1;var e=c.editable();if(!e||"ready"!=e.status)return!1;e=this.snapshots;b||(b=new g(c));if(!1===b.contents)return!1;if(this.currentImage)if(b.equalsContent(this.currentImage)){if(a||b.equalsSelection(this.currentImage))return!1;}else!1!==d&&c.fire("change");e.splice(this.index+1,e.length-this.index-1);e.length==this.limit&&e.shift();this.index=e.push(b)-1;this.currentImage=b;!1!==d&&this.refreshState();return!0;},restoreImage:function restoreImage(a){var b=this.editor,d;a.bookmarks&&(b.focus(),d=b.getSelection());this.locked={level:999};this.editor.loadSnapshot(a.contents);a.bookmarks?d.selectBookmarks(a.bookmarks):CKEDITOR.env.ie&&(d=this.editor.document.getBody().$.createTextRange(),d.collapse(!0),d.select());this.locked=null;this.index=a.index;this.currentImage=this.snapshots[this.index];this.update();this.refreshState();b.fire("change");},getNextImage:function getNextImage(a){var b=this.snapshots,d=this.currentImage,c;if(d)if(a)for(c=this.index-1;0<=c;c--){if(a=b[c],!d.equalsContent(a))return a.index=c,a;}else for(c=this.index+1;c<b.length;c++){if(a=b[c],!d.equalsContent(a))return a.index=c,a;}return null;},redoable:function redoable(){return this.enabled&&this.hasRedo;},undoable:function undoable(){return this.enabled&&this.hasUndo;},undo:function undo(){if(this.undoable()){this.save(!0);var a=this.getNextImage(!0);if(a)return this.restoreImage(a),!0;}return!1;},redo:function redo(){if(this.redoable()&&(this.save(!0),this.redoable())){var a=this.getNextImage(!1);if(a)return this.restoreImage(a),!0;}return!1;},update:function update(a){if(!this.locked){a||(a=new g(this.editor));for(var b=this.index,d=this.snapshots;0<b&&this.currentImage.equalsContent(d[b-1]);){b-=1;}d.splice(b,this.index-b+1,a);this.index=b;this.currentImage=a;}},updateSelection:function updateSelection(a){if(!this.snapshots.length)return!1;var b=this.snapshots,d=b[b.length-1];return d.equalsContent(a)&&!d.equalsSelection(a)?(this.currentImage=b[b.length-1]=a,!0):!1;},lock:function lock(a,b){if(this.locked)this.locked.level++;else if(a)this.locked={level:1};else{var d=null;if(b)d=!0;else{var c=new g(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(c)&&(d=c);}this.locked={update:d,level:1};}},unlock:function unlock(){if(this.locked&&! --this.locked.level){var a=this.locked.update;this.locked=null;if(!0===a)this.update();else if(a){var b=new g(this.editor,!0);a.equalsContent(b)||this.update();}}},isNavigationKey:function isNavigationKey(a){return!!this.navigationKeyCodes[a];}};var g=CKEDITOR.plugins.undo.Image=function(a,b){this.editor=a;a.fire("beforeUndoImage");var d=a.getSnapshot();CKEDITOR.env.ie&&d&&(d=d.replace(/\s+data-cke-expando=".*?"/g,""));this.contents=d;b||(this.bookmarks=(d=d&&a.getSelection())&&d.createBookmarks2(!0));a.fire("afterUndoImage");},m=/\b(?:href|src|name)="[^"]*?"/gi;g.prototype={equalsContent:function equalsContent(a){var b=this.contents,a=a.contents;if(CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks))b=b.replace(m,""),a=a.replace(m,"");return b!=a?!1:!0;},equalsSelection:function equalsSelection(a){var b=this.bookmarks,a=a.bookmarks;if(b||a){if(!b||!a||b.length!=a.length)return!1;for(var d=0;d<b.length;d++){var c=b[d],e=a[d];if(c.startOffset!=e.startOffset||c.endOffset!=e.endOffset||!CKEDITOR.tools.arrayCompare(c.start,e.start)||!CKEDITOR.tools.arrayCompare(c.end,e.end))return!1;}}return!0;}};var f=0,i=!1,n=function n(){i=!0;},l=CKEDITOR.plugins.undo.NativeEditingHandler=function(a){this.undoManager=a;};l.prototype={onKeydown:function onKeydown(a){if(-1<CKEDITOR.tools.indexOf(h,a.data.getKeystroke()))a.data.preventDefault();else{var a=a.data.getKey(),b=this.undoManager;this.lastKeydownImage=new g(b.editor);if(b.isNavigationKey(a)&&(b.strokesRecorded[0]||b.strokesRecorded[1]))b.save(!1,this.lastKeydownImage),b.resetType();}},onInput:function onInput(){f+=1;i&&(f-=1,i=!1);},onKeyup:function onKeyup(a){var b=this.undoManager,a=a.data.getKey(),d=b.editor;if(CKEDITOR.env.ie&&a in j&&this.lastKeydownImage){if(this.lastKeydownImage.equalsContent(new g(d,!0)))return;f+=1;}if(0<f)f-=1,b.type(a);else if(b.isNavigationKey(a))this.onNavigationKey(!0);},onNavigationKey:function onNavigationKey(a){var b=this.undoManager;(a||!b.save(!0,null,!1))&&b.updateSelection(new g(b.editor));b.resetType();},resetCounter:function resetCounter(){f=0;},attachListeners:function attachListeners(){var a=this.undoManager.editor.editable(),b=this;a.attachListener(a,"keydown",b.onKeydown,b);a.attachListener(a,CKEDITOR.env.ie?"keypress":"input",b.onInput,b);a.attachListener(a,"keyup",b.onKeyup,b);a.attachListener(a,"paste",n);a.attachListener(a,"drop",n);a.attachListener(a,"click",function(){b.onNavigationKey();});}};})();CKEDITOR.config.wsc_removeGlobalVariable=!0;CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function parseApi(a){a.config.wsc_onFinish="function"===typeof a.config.wsc_onFinish?a.config.wsc_onFinish:function(){};a.config.wsc_onClose="function"===typeof a.config.wsc_onClose?a.config.wsc_onClose:function(){};},parseConfig:function parseConfig(a){a.config.wsc_customerId=a.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk";a.config.wsc_customDictionaryIds=a.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"";a.config.wsc_userDictionaryName=a.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"";a.config.wsc_customLoaderScript=a.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript;CKEDITOR.config.wsc_cmd=a.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell";CKEDITOR.config.wsc_version=CKEDITOR.version+" | %Rev%";},init:function init(a){var b=CKEDITOR.env;this.parseConfig(a);this.parseApi(a);a.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname&&!(b.ie&&(8>b.version||b.quirks))};"undefined"==typeof a.plugins.scayt&&a.ui.addButton&&a.ui.addButton("SpellChecker",{label:a.lang.wsc.toolbar,click:function click(a){var b=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.container.getText():a.document.getBody().getText();(b=b.replace(/\s/g,""))?a.execCommand("checkspell"):alert("Nothing to check!");},toolbar:"spellchecker,10"});CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"));}});CKEDITOR.config.plugins='dialogui,dialog,about,a11yhelp,dialogadvtab,basicstyles,bidi,blockquote,clipboard,button,panelbutton,panel,floatpanel,colorbutton,colordialog,templates,menu,contextmenu,div,resize,toolbar,elementspath,enterkey,entities,popup,filebrowser,find,fakeobjects,flash,floatingspace,listblock,richcombo,font,forms,format,horizontalrule,htmlwriter,iframe,wysiwygarea,image,indent,indentblock,indentlist,smiley,justify,menubutton,language,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastetext,pastefromword,preview,print,removeformat,save,selectall,showblocks,showborders,sourcearea,specialchar,scayt,stylescombo,tab,table,tabletools,undo,wsc';CKEDITOR.config.skin='moono';(function(){var setIcons=function setIcons(icons,strip){var path=CKEDITOR.getUrl('plugins/'+strip);icons=icons.split(',');for(var i=0;i<icons.length;i++){CKEDITOR.skin.icons[icons[i]]={path:path,offset:-icons[++i],bgsize:icons[++i]};}};if(CKEDITOR.env.hidpi)setIcons('about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,bgcolor,384,,textcolor,408,,templates-rtl,432,,templates,456,,creatediv,480,,find-rtl,504,,find,528,,replace,552,,flash,576,,button,600,,checkbox,624,,form,648,,hiddenfield,672,,imagebutton,696,,radio,720,,select-rtl,744,,select,768,,textarea-rtl,792,,textarea,816,,textfield-rtl,840,,textfield,864,,horizontalrule,888,,iframe,912,,image,936,,indent-rtl,960,,indent,984,,outdent-rtl,1008,,outdent,1032,,smiley,1056,,justifyblock,1080,,justifycenter,1104,,justifyleft,1128,,justifyright,1152,,language,1176,,anchor-rtl,1200,,anchor,1224,,link,1248,,unlink,1272,,bulletedlist-rtl,1296,,bulletedlist,1320,,numberedlist-rtl,1344,,numberedlist,1368,,maximize,1392,,newpage-rtl,1416,,newpage,1440,,pagebreak-rtl,1464,,pagebreak,1488,,pastetext-rtl,1512,,pastetext,1536,,pastefromword-rtl,1560,,pastefromword,1584,,preview-rtl,1608,,preview,1632,,print,1656,,removeformat,1680,,save,1704,,selectall,1728,,showblocks-rtl,1752,,showblocks,1776,,source-rtl,1800,,source,1824,,specialchar,1848,,scayt,1872,,table,1896,,redo-rtl,1920,,redo,1944,,undo-rtl,1968,,undo,1992,,spellchecker,2016,','icons_hidpi.png');else setIcons('about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,bgcolor,384,auto,textcolor,408,auto,templates-rtl,432,auto,templates,456,auto,creatediv,480,auto,find-rtl,504,auto,find,528,auto,replace,552,auto,flash,576,auto,button,600,auto,checkbox,624,auto,form,648,auto,hiddenfield,672,auto,imagebutton,696,auto,radio,720,auto,select-rtl,744,auto,select,768,auto,textarea-rtl,792,auto,textarea,816,auto,textfield-rtl,840,auto,textfield,864,auto,horizontalrule,888,auto,iframe,912,auto,image,936,auto,indent-rtl,960,auto,indent,984,auto,outdent-rtl,1008,auto,outdent,1032,auto,smiley,1056,auto,justifyblock,1080,auto,justifycenter,1104,auto,justifyleft,1128,auto,justifyright,1152,auto,language,1176,auto,anchor-rtl,1200,auto,anchor,1224,auto,link,1248,auto,unlink,1272,auto,bulletedlist-rtl,1296,auto,bulletedlist,1320,auto,numberedlist-rtl,1344,auto,numberedlist,1368,auto,maximize,1392,auto,newpage-rtl,1416,auto,newpage,1440,auto,pagebreak-rtl,1464,auto,pagebreak,1488,auto,pastetext-rtl,1512,auto,pastetext,1536,auto,pastefromword-rtl,1560,auto,pastefromword,1584,auto,preview-rtl,1608,auto,preview,1632,auto,print,1656,auto,removeformat,1680,auto,save,1704,auto,selectall,1728,auto,showblocks-rtl,1752,auto,showblocks,1776,auto,source-rtl,1800,auto,source,1824,auto,specialchar,1848,auto,scayt,1872,auto,table,1896,auto,redo-rtl,1920,auto,redo,1944,auto,undo-rtl,1968,auto,undo,1992,auto,spellchecker,2016,auto','icons.png');})();CKEDITOR.lang.languages={"af":1,"sq":1,"ar":1,"eu":1,"bn":1,"bs":1,"bg":1,"ca":1,"zh-cn":1,"zh":1,"hr":1,"cs":1,"da":1,"nl":1,"en":1,"en-au":1,"en-ca":1,"en-gb":1,"eo":1,"et":1,"fo":1,"fi":1,"fr":1,"fr-ca":1,"gl":1,"ka":1,"de":1,"el":1,"gu":1,"he":1,"hi":1,"hu":1,"is":1,"id":1,"it":1,"ja":1,"km":1,"ko":1,"ku":1,"lv":1,"lt":1,"mk":1,"ms":1,"mn":1,"no":1,"nb":1,"fa":1,"pl":1,"pt-br":1,"pt":1,"ro":1,"ru":1,"sr":1,"sr-latn":1,"si":1,"sk":1,"sl":1,"es":1,"sv":1,"tt":1,"th":1,"tr":1,"ug":1,"uk":1,"vi":1,"cy":1};})();/*
Copyright (c) 2003-2014, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.md or http://ckeditor.com/license
*/(function(a){CKEDITOR.config.jqueryOverrideVal="undefined"==typeof CKEDITOR.config.jqueryOverrideVal?!0:CKEDITOR.config.jqueryOverrideVal;"undefined"!=typeof a&&(a.extend(a.fn,{ckeditorGet:function ckeditorGet(){var a=this.eq(0).data("ckeditorInstance");if(!a)throw"CKEditor is not initialized yet, use ckeditor() with a callback.";return a;},ckeditor:function ckeditor(g,d){if(!CKEDITOR.env.isCompatible)throw Error("The environment is incompatible.");if(!a.isFunction(g))var k=d,d=g,g=k;var i=[],d=d||{};this.each(function(){var b=a(this),c=b.data("ckeditorInstance"),f=b.data("_ckeditorInstanceLock"),h=this,j=new a.Deferred();i.push(j.promise());if(c&&!f)g&&g.apply(c,[this]),j.resolve();else if(f)c.once("instanceReady",function(){setTimeout(function(){c.element?(c.element.$==h&&g&&g.apply(c,[h]),j.resolve()):setTimeout(arguments.callee,100);},0);},null,null,9999);else{if(d.autoUpdateElement||"undefined"==typeof d.autoUpdateElement&&CKEDITOR.config.autoUpdateElement)d.autoUpdateElementJquery=!0;d.autoUpdateElement=!1;b.data("_ckeditorInstanceLock",!0);c=a(this).is("textarea")?CKEDITOR.replace(h,d):CKEDITOR.inline(h,d);b.data("ckeditorInstance",c);c.on("instanceReady",function(d){var e=d.editor;setTimeout(function(){if(e.element){d.removeListener();e.on("dataReady",function(){b.trigger("dataReady.ckeditor",[e]);});e.on("setData",function(a){b.trigger("setData.ckeditor",[e,a.data]);});e.on("getData",function(a){b.trigger("getData.ckeditor",[e,a.data]);},999);e.on("destroy",function(){b.trigger("destroy.ckeditor",[e]);});e.on("save",function(){a(h.form).submit();return!1;},null,null,20);if(e.config.autoUpdateElementJquery&&b.is("textarea")&&a(h.form).length){var c=function c(){b.ckeditor(function(){e.updateElement();});};a(h.form).submit(c);a(h.form).bind("form-pre-serialize",c);b.bind("destroy.ckeditor",function(){a(h.form).unbind("submit",c);a(h.form).unbind("form-pre-serialize",c);});}e.on("destroy",function(){b.removeData("ckeditorInstance");});b.removeData("_ckeditorInstanceLock");b.trigger("instanceReady.ckeditor",[e]);g&&g.apply(e,[h]);j.resolve();}else setTimeout(arguments.callee,100);},0);},null,null,9999);}});var f=new a.Deferred();this.promise=f.promise();a.when.apply(this,i).then(function(){f.resolve();});this.editor=this.eq(0).data("ckeditorInstance");return this;}}),CKEDITOR.config.jqueryOverrideVal&&(a.fn.val=CKEDITOR.tools.override(a.fn.val,function(g){return function(d){if(arguments.length){var k=this,i=[],f=this.each(function(){var b=a(this),c=b.data("ckeditorInstance");if(b.is("textarea")&&c){var f=new a.Deferred();c.setData(d,function(){f.resolve();});i.push(f.promise());return!0;}return g.call(b,d);});if(i.length){var b=new a.Deferred();a.when.apply(this,i).done(function(){b.resolveWith(k);});return b.promise();}return f;}var f=a(this).eq(0),c=f.data("ckeditorInstance");return f.is("textarea")&&c?c.getData():g.call(f);};})));})(window.jQuery);

/***/ }),

/***/ "./Resources/assets/js/transaction/config.js":
/*!***************************************************!*\
  !*** ./Resources/assets/js/transaction/config.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * @license Copyright (c) 2003-2013, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.html or http://ckeditor.com/license
 */
CKEDITOR.editorConfig = function (config) {// Define changes to default configuration here. For example:
  // config.language = 'fr';
  // config.uiColor = '#AADC6E';
};

/***/ }),

/***/ "./Resources/assets/js/transaction/firebase-app.js":
/*!*********************************************************!*\
  !*** ./Resources/assets/js/transaction/firebase-app.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(setImmediate, global) {var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

!function (t, e) {
  "object" == ( false ? undefined : _typeof(exports)) && "undefined" != typeof module ? module.exports = e() :  true ? !(__WEBPACK_AMD_DEFINE_FACTORY__ = (e),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)) : undefined;
}(this, function () {
  "use strict";

  !function (t) {
    if (!t.fetch) {
      var e = {
        searchParams: "URLSearchParams" in t,
        iterable: "Symbol" in t && "iterator" in Symbol,
        blob: "FileReader" in t && "Blob" in t && function () {
          try {
            return new Blob(), !0;
          } catch (t) {
            return !1;
          }
        }(),
        formData: "FormData" in t,
        arrayBuffer: "ArrayBuffer" in t
      };
      if (e.arrayBuffer) var r = ["[object Int8Array]", "[object Uint8Array]", "[object Uint8ClampedArray]", "[object Int16Array]", "[object Uint16Array]", "[object Int32Array]", "[object Uint32Array]", "[object Float32Array]", "[object Float64Array]"],
          n = function n(t) {
        return t && DataView.prototype.isPrototypeOf(t);
      },
          o = ArrayBuffer.isView || function (t) {
        return t && r.indexOf(Object.prototype.toString.call(t)) > -1;
      };
      f.prototype.append = function (t, e) {
        t = a(t), e = u(e);
        var r = this.map[t];
        this.map[t] = r ? r + "," + e : e;
      }, f.prototype["delete"] = function (t) {
        delete this.map[a(t)];
      }, f.prototype.get = function (t) {
        return t = a(t), this.has(t) ? this.map[t] : null;
      }, f.prototype.has = function (t) {
        return this.map.hasOwnProperty(a(t));
      }, f.prototype.set = function (t, e) {
        this.map[a(t)] = u(e);
      }, f.prototype.forEach = function (t, e) {
        for (var r in this.map) {
          this.map.hasOwnProperty(r) && t.call(e, this.map[r], r, this);
        }
      }, f.prototype.keys = function () {
        var t = [];
        return this.forEach(function (e, r) {
          t.push(r);
        }), c(t);
      }, f.prototype.values = function () {
        var t = [];
        return this.forEach(function (e) {
          t.push(e);
        }), c(t);
      }, f.prototype.entries = function () {
        var t = [];
        return this.forEach(function (e, r) {
          t.push([r, e]);
        }), c(t);
      }, e.iterable && (f.prototype[Symbol.iterator] = f.prototype.entries);
      var i = ["DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT"];
      v.prototype.clone = function () {
        return new v(this, {
          body: this._bodyInit
        });
      }, y.call(v.prototype), y.call(m.prototype), m.prototype.clone = function () {
        return new m(this._bodyInit, {
          status: this.status,
          statusText: this.statusText,
          headers: new f(this.headers),
          url: this.url
        });
      }, m.error = function () {
        var t = new m(null, {
          status: 0,
          statusText: ""
        });
        return t.type = "error", t;
      };
      var s = [301, 302, 303, 307, 308];
      m.redirect = function (t, e) {
        if (-1 === s.indexOf(e)) throw new RangeError("Invalid status code");
        return new m(null, {
          status: e,
          headers: {
            location: t
          }
        });
      }, t.Headers = f, t.Request = v, t.Response = m, t.fetch = function (t, r) {
        return new Promise(function (n, o) {
          var i = new v(t, r),
              s = new XMLHttpRequest();
          s.onload = function () {
            var t,
                e,
                r = {
              status: s.status,
              statusText: s.statusText,
              headers: (t = s.getAllResponseHeaders() || "", e = new f(), t.replace(/\r?\n[\t ]+/g, " ").split(/\r?\n/).forEach(function (t) {
                var r = t.split(":"),
                    n = r.shift().trim();

                if (n) {
                  var o = r.join(":").trim();
                  e.append(n, o);
                }
              }), e)
            };
            r.url = "responseURL" in s ? s.responseURL : r.headers.get("X-Request-URL");
            var o = "response" in s ? s.response : s.responseText;
            n(new m(o, r));
          }, s.onerror = function () {
            o(new TypeError("Network request failed"));
          }, s.ontimeout = function () {
            o(new TypeError("Network request failed"));
          }, s.open(i.method, i.url, !0), "include" === i.credentials ? s.withCredentials = !0 : "omit" === i.credentials && (s.withCredentials = !1), "responseType" in s && e.blob && (s.responseType = "blob"), i.headers.forEach(function (t, e) {
            s.setRequestHeader(e, t);
          }), s.send(void 0 === i._bodyInit ? null : i._bodyInit);
        });
      }, t.fetch.polyfill = !0;
    }

    function a(t) {
      if ("string" != typeof t && (t = String(t)), /[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t)) throw new TypeError("Invalid character in header field name");
      return t.toLowerCase();
    }

    function u(t) {
      return "string" != typeof t && (t = String(t)), t;
    }

    function c(t) {
      var r = {
        next: function next() {
          var e = t.shift();
          return {
            done: void 0 === e,
            value: e
          };
        }
      };
      return e.iterable && (r[Symbol.iterator] = function () {
        return r;
      }), r;
    }

    function f(t) {
      this.map = {}, t instanceof f ? t.forEach(function (t, e) {
        this.append(e, t);
      }, this) : Array.isArray(t) ? t.forEach(function (t) {
        this.append(t[0], t[1]);
      }, this) : t && Object.getOwnPropertyNames(t).forEach(function (e) {
        this.append(e, t[e]);
      }, this);
    }

    function h(t) {
      if (t.bodyUsed) return Promise.reject(new TypeError("Already read"));
      t.bodyUsed = !0;
    }

    function l(t) {
      return new Promise(function (e, r) {
        t.onload = function () {
          e(t.result);
        }, t.onerror = function () {
          r(t.error);
        };
      });
    }

    function p(t) {
      var e = new FileReader(),
          r = l(e);
      return e.readAsArrayBuffer(t), r;
    }

    function d(t) {
      if (t.slice) return t.slice(0);
      var e = new Uint8Array(t.byteLength);
      return e.set(new Uint8Array(t)), e.buffer;
    }

    function y() {
      return this.bodyUsed = !1, this._initBody = function (t) {
        if (this._bodyInit = t, t) {
          if ("string" == typeof t) this._bodyText = t;else if (e.blob && Blob.prototype.isPrototypeOf(t)) this._bodyBlob = t;else if (e.formData && FormData.prototype.isPrototypeOf(t)) this._bodyFormData = t;else if (e.searchParams && URLSearchParams.prototype.isPrototypeOf(t)) this._bodyText = t.toString();else if (e.arrayBuffer && e.blob && n(t)) this._bodyArrayBuffer = d(t.buffer), this._bodyInit = new Blob([this._bodyArrayBuffer]);else {
            if (!e.arrayBuffer || !ArrayBuffer.prototype.isPrototypeOf(t) && !o(t)) throw new Error("unsupported BodyInit type");
            this._bodyArrayBuffer = d(t);
          }
        } else this._bodyText = "";
        this.headers.get("content-type") || ("string" == typeof t ? this.headers.set("content-type", "text/plain;charset=UTF-8") : this._bodyBlob && this._bodyBlob.type ? this.headers.set("content-type", this._bodyBlob.type) : e.searchParams && URLSearchParams.prototype.isPrototypeOf(t) && this.headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8"));
      }, e.blob && (this.blob = function () {
        var t = h(this);
        if (t) return t;
        if (this._bodyBlob) return Promise.resolve(this._bodyBlob);
        if (this._bodyArrayBuffer) return Promise.resolve(new Blob([this._bodyArrayBuffer]));
        if (this._bodyFormData) throw new Error("could not read FormData body as blob");
        return Promise.resolve(new Blob([this._bodyText]));
      }, this.arrayBuffer = function () {
        return this._bodyArrayBuffer ? h(this) || Promise.resolve(this._bodyArrayBuffer) : this.blob().then(p);
      }), this.text = function () {
        var t,
            e,
            r,
            n = h(this);
        if (n) return n;
        if (this._bodyBlob) return t = this._bodyBlob, e = new FileReader(), r = l(e), e.readAsText(t), r;
        if (this._bodyArrayBuffer) return Promise.resolve(function (t) {
          for (var e = new Uint8Array(t), r = new Array(e.length), n = 0; n < e.length; n++) {
            r[n] = String.fromCharCode(e[n]);
          }

          return r.join("");
        }(this._bodyArrayBuffer));
        if (this._bodyFormData) throw new Error("could not read FormData body as text");
        return Promise.resolve(this._bodyText);
      }, e.formData && (this.formData = function () {
        return this.text().then(b);
      }), this.json = function () {
        return this.text().then(JSON.parse);
      }, this;
    }

    function v(t, e) {
      var r,
          n,
          o = (e = e || {}).body;

      if (t instanceof v) {
        if (t.bodyUsed) throw new TypeError("Already read");
        this.url = t.url, this.credentials = t.credentials, e.headers || (this.headers = new f(t.headers)), this.method = t.method, this.mode = t.mode, o || null == t._bodyInit || (o = t._bodyInit, t.bodyUsed = !0);
      } else this.url = String(t);

      if (this.credentials = e.credentials || this.credentials || "omit", !e.headers && this.headers || (this.headers = new f(e.headers)), this.method = (r = e.method || this.method || "GET", n = r.toUpperCase(), i.indexOf(n) > -1 ? n : r), this.mode = e.mode || this.mode || null, this.referrer = null, ("GET" === this.method || "HEAD" === this.method) && o) throw new TypeError("Body not allowed for GET or HEAD requests");

      this._initBody(o);
    }

    function b(t) {
      var e = new FormData();
      return t.trim().split("&").forEach(function (t) {
        if (t) {
          var r = t.split("="),
              n = r.shift().replace(/\+/g, " "),
              o = r.join("=").replace(/\+/g, " ");
          e.append(decodeURIComponent(n), decodeURIComponent(o));
        }
      }), e;
    }

    function m(t, e) {
      e || (e = {}), this.type = "default", this.status = void 0 === e.status ? 200 : e.status, this.ok = this.status >= 200 && this.status < 300, this.statusText = "statusText" in e ? e.statusText : "OK", this.headers = new f(e.headers), this.url = e.url || "", this._initBody(t);
    }
  }("undefined" != typeof self ? self : void 0);
  var t = setTimeout;

  function e() {}

  function r(t) {
    if (!(this instanceof r)) throw new TypeError("Promises must be constructed via new");
    if ("function" != typeof t) throw new TypeError("not a function");
    this._state = 0, this._handled = !1, this._value = void 0, this._deferreds = [], a(t, this);
  }

  function n(t, e) {
    for (; 3 === t._state;) {
      t = t._value;
    }

    0 !== t._state ? (t._handled = !0, r._immediateFn(function () {
      var r = 1 === t._state ? e.onFulfilled : e.onRejected;

      if (null !== r) {
        var n;

        try {
          n = r(t._value);
        } catch (t) {
          return void i(e.promise, t);
        }

        o(e.promise, n);
      } else (1 === t._state ? o : i)(e.promise, t._value);
    })) : t._deferreds.push(e);
  }

  function o(t, e) {
    try {
      if (e === t) throw new TypeError("A promise cannot be resolved with itself.");

      if (e && ("object" == _typeof(e) || "function" == typeof e)) {
        var n = e.then;
        if (e instanceof r) return t._state = 3, t._value = e, void s(t);
        if ("function" == typeof n) return void a((o = n, u = e, function () {
          o.apply(u, arguments);
        }), t);
      }

      t._state = 1, t._value = e, s(t);
    } catch (e) {
      i(t, e);
    }

    var o, u;
  }

  function i(t, e) {
    t._state = 2, t._value = e, s(t);
  }

  function s(t) {
    2 === t._state && 0 === t._deferreds.length && r._immediateFn(function () {
      t._handled || r._unhandledRejectionFn(t._value);
    });

    for (var e = 0, o = t._deferreds.length; e < o; e++) {
      n(t, t._deferreds[e]);
    }

    t._deferreds = null;
  }

  function a(t, e) {
    var r = !1;

    try {
      t(function (t) {
        r || (r = !0, o(e, t));
      }, function (t) {
        r || (r = !0, i(e, t));
      });
    } catch (t) {
      if (r) return;
      r = !0, i(e, t);
    }
  }

  r.prototype["catch"] = function (t) {
    return this.then(null, t);
  }, r.prototype.then = function (t, r) {
    var o = new this.constructor(e);
    return n(this, new function (t, e, r) {
      this.onFulfilled = "function" == typeof t ? t : null, this.onRejected = "function" == typeof e ? e : null, this.promise = r;
    }(t, r, o)), o;
  }, r.prototype["finally"] = function (t) {
    var e = this.constructor;
    return this.then(function (r) {
      return e.resolve(t()).then(function () {
        return r;
      });
    }, function (r) {
      return e.resolve(t()).then(function () {
        return e.reject(r);
      });
    });
  }, r.all = function (t) {
    return new r(function (e, r) {
      if (!t || void 0 === t.length) throw new TypeError("Promise.all accepts an array");
      var n = Array.prototype.slice.call(t);
      if (0 === n.length) return e([]);
      var o = n.length;

      function i(t, s) {
        try {
          if (s && ("object" == _typeof(s) || "function" == typeof s)) {
            var a = s.then;
            if ("function" == typeof a) return void a.call(s, function (e) {
              i(t, e);
            }, r);
          }

          n[t] = s, 0 == --o && e(n);
        } catch (t) {
          r(t);
        }
      }

      for (var s = 0; s < n.length; s++) {
        i(s, n[s]);
      }
    });
  }, r.resolve = function (t) {
    return t && "object" == _typeof(t) && t.constructor === r ? t : new r(function (e) {
      e(t);
    });
  }, r.reject = function (t) {
    return new r(function (e, r) {
      r(t);
    });
  }, r.race = function (t) {
    return new r(function (e, r) {
      for (var n = 0, o = t.length; n < o; n++) {
        t[n].then(e, r);
      }
    });
  }, r._immediateFn = "function" == typeof setImmediate && function (t) {
    setImmediate(t);
  } || function (e) {
    t(e, 0);
  }, r._unhandledRejectionFn = function (t) {
    "undefined" != typeof console && console && console.warn("Possible Unhandled Promise Rejection:", t);
  };

  var u = function () {
    if ("undefined" != typeof self) return self;
    if ("undefined" != typeof window) return window;
    if ("undefined" != typeof global) return global;
    throw new Error("unable to locate global object");
  }();

  function c(t, e) {
    return t(e = {
      exports: {}
    }, e.exports), e.exports;
  }

  u.Promise || (u.Promise = r);

  var f = c(function (t) {
    var e = t.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
    "number" == typeof __g && (__g = e);
  }),
      h = c(function (t) {
    var e = t.exports = {
      version: "2.5.5"
    };
    "number" == typeof __e && (__e = e);
  }),
      l = (h.version, function (t) {
    return "object" == _typeof(t) ? null !== t : "function" == typeof t;
  }),
      p = function p(t) {
    if (!l(t)) throw TypeError(t + " is not an object!");
    return t;
  },
      d = function d(t) {
    try {
      return !!t();
    } catch (t) {
      return !0;
    }
  },
      y = !d(function () {
    return 7 != Object.defineProperty({}, "a", {
      get: function get() {
        return 7;
      }
    }).a;
  }),
      v = f.document,
      b = l(v) && l(v.createElement),
      m = function m(t) {
    return b ? v.createElement(t) : {};
  },
      _ = !y && !d(function () {
    return 7 != Object.defineProperty(m("div"), "a", {
      get: function get() {
        return 7;
      }
    }).a;
  }),
      g = function g(t, e) {
    if (!l(t)) return t;
    var r, n;
    if (e && "function" == typeof (r = t.toString) && !l(n = r.call(t))) return n;
    if ("function" == typeof (r = t.valueOf) && !l(n = r.call(t))) return n;
    if (!e && "function" == typeof (r = t.toString) && !l(n = r.call(t))) return n;
    throw TypeError("Can't convert object to primitive value");
  },
      w = Object.defineProperty,
      O = {
    f: y ? Object.defineProperty : function (t, e, r) {
      if (p(t), e = g(e, !0), p(r), _) try {
        return w(t, e, r);
      } catch (t) {}
      if ("get" in r || "set" in r) throw TypeError("Accessors not supported!");
      return "value" in r && (t[e] = r.value), t;
    }
  },
      S = function S(t, e) {
    return {
      enumerable: !(1 & t),
      configurable: !(2 & t),
      writable: !(4 & t),
      value: e
    };
  },
      E = y ? function (t, e, r) {
    return O.f(t, e, S(1, r));
  } : function (t, e, r) {
    return t[e] = r, t;
  },
      A = {}.hasOwnProperty,
      j = function j(t, e) {
    return A.call(t, e);
  },
      P = 0,
      T = Math.random(),
      k = function k(t) {
    return "Symbol(".concat(void 0 === t ? "" : t, ")_", (++P + T).toString(36));
  },
      x = c(function (t) {
    var e = k("src"),
        r = Function.toString,
        n = ("" + r).split("toString");
    h.inspectSource = function (t) {
      return r.call(t);
    }, (t.exports = function (t, r, o, i) {
      var s = "function" == typeof o;
      s && (j(o, "name") || E(o, "name", r)), t[r] !== o && (s && (j(o, e) || E(o, e, t[r] ? "" + t[r] : n.join(String(r)))), t === f ? t[r] = o : i ? t[r] ? t[r] = o : E(t, r, o) : (delete t[r], E(t, r, o)));
    })(Function.prototype, "toString", function () {
      return "function" == typeof this && this[e] || r.call(this);
    });
  }),
      F = function F(t, e, r) {
    if (function (t) {
      if ("function" != typeof t) throw TypeError(t + " is not a function!");
    }(t), void 0 === e) return t;

    switch (r) {
      case 1:
        return function (r) {
          return t.call(e, r);
        };

      case 2:
        return function (r, n) {
          return t.call(e, r, n);
        };

      case 3:
        return function (r, n, o) {
          return t.call(e, r, n, o);
        };
    }

    return function () {
      return t.apply(e, arguments);
    };
  },
      L = function L(t, e, r) {
    var n,
        o,
        i,
        s,
        a = t & L.F,
        u = t & L.G,
        c = t & L.S,
        l = t & L.P,
        p = t & L.B,
        d = u ? f : c ? f[e] || (f[e] = {}) : (f[e] || {}).prototype,
        y = u ? h : h[e] || (h[e] = {}),
        v = y.prototype || (y.prototype = {});

    for (n in u && (r = e), r) {
      i = ((o = !a && d && void 0 !== d[n]) ? d : r)[n], s = p && o ? F(i, f) : l && "function" == typeof i ? F(Function.call, i) : i, d && x(d, n, i, t & L.U), y[n] != i && E(y, n, s), l && v[n] != i && (v[n] = i);
    }
  };

  f.core = h, L.F = 1, L.G = 2, L.S = 4, L.P = 8, L.B = 16, L.W = 32, L.U = 64, L.R = 128;

  var N = L,
      D = {}.toString,
      I = function I(t) {
    return D.call(t).slice(8, -1);
  },
      R = Object("z").propertyIsEnumerable(0) ? Object : function (t) {
    return "String" == I(t) ? t.split("") : Object(t);
  },
      B = function B(t) {
    if (void 0 == t) throw TypeError("Can't call method on  " + t);
    return t;
  },
      C = function C(t) {
    return Object(B(t));
  },
      U = Math.ceil,
      M = Math.floor,
      z = function z(t) {
    return isNaN(t = +t) ? 0 : (t > 0 ? M : U)(t);
  },
      G = Math.min,
      W = function W(t) {
    return t > 0 ? G(z(t), 9007199254740991) : 0;
  },
      H = Array.isArray || function (t) {
    return "Array" == I(t);
  },
      V = f["__core-js_shared__"] || (f["__core-js_shared__"] = {}),
      q = function q(t) {
    return V[t] || (V[t] = {});
  },
      K = c(function (t) {
    var e = q("wks"),
        r = f.Symbol,
        n = "function" == typeof r;
    (t.exports = function (t) {
      return e[t] || (e[t] = n && r[t] || (n ? r : k)("Symbol." + t));
    }).store = e;
  }),
      $ = K("species"),
      J = function J(t, e) {
    return new (function (t) {
      var e;
      return H(t) && ("function" != typeof (e = t.constructor) || e !== Array && !H(e.prototype) || (e = void 0), l(e) && null === (e = e[$]) && (e = void 0)), void 0 === e ? Array : e;
    }(t))(e);
  },
      Y = function Y(t, e) {
    var r = 1 == t,
        n = 2 == t,
        o = 3 == t,
        i = 4 == t,
        s = 6 == t,
        a = 5 == t || s,
        u = e || J;
    return function (e, c, f) {
      for (var h, l, p = C(e), d = R(p), y = F(c, f, 3), v = W(d.length), b = 0, m = r ? u(e, v) : n ? u(e, 0) : void 0; v > b; b++) {
        if ((a || b in d) && (l = y(h = d[b], b, p), t)) if (r) m[b] = l;else if (l) switch (t) {
          case 3:
            return !0;

          case 5:
            return h;

          case 6:
            return b;

          case 2:
            m.push(h);
        } else if (i) return !1;
      }

      return s ? -1 : o || i ? i : m;
    };
  },
      X = K("unscopables"),
      Q = Array.prototype;

  void 0 == Q[X] && E(Q, X, {});

  var Z = function Z(t) {
    Q[X][t] = !0;
  },
      tt = Y(5),
      et = !0;

  "find" in [] && Array(1).find(function () {
    et = !1;
  }), N(N.P + N.F * et, "Array", {
    find: function find(t) {
      return tt(this, t, arguments.length > 1 ? arguments[1] : void 0);
    }
  }), Z("find");
  h.Array.find;
  var rt = Y(6),
      nt = !0;
  "findIndex" in [] && Array(1).findIndex(function () {
    nt = !1;
  }), N(N.P + N.F * nt, "Array", {
    findIndex: function findIndex(t) {
      return rt(this, t, arguments.length > 1 ? arguments[1] : void 0);
    }
  }), Z("findIndex");
  h.Array.findIndex;

  var ot,
      it = function it(t) {
    return R(B(t));
  },
      st = Math.max,
      at = Math.min,
      ut = q("keys"),
      ct = function ct(t) {
    return ut[t] || (ut[t] = k(t));
  },
      ft = (ot = !1, function (t, e, r) {
    var n,
        o = it(t),
        i = W(o.length),
        s = function (t, e) {
      return (t = z(t)) < 0 ? st(t + e, 0) : at(t, e);
    }(r, i);

    if (ot && e != e) {
      for (; i > s;) {
        if ((n = o[s++]) != n) return !0;
      }
    } else for (; i > s; s++) {
      if ((ot || s in o) && o[s] === e) return ot || s || 0;
    }

    return !ot && -1;
  }),
      ht = ct("IE_PROTO"),
      lt = function lt(t, e) {
    var r,
        n = it(t),
        o = 0,
        i = [];

    for (r in n) {
      r != ht && j(n, r) && i.push(r);
    }

    for (; e.length > o;) {
      j(n, r = e[o++]) && (~ft(i, r) || i.push(r));
    }

    return i;
  },
      pt = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),
      dt = Object.keys || function (t) {
    return lt(t, pt);
  },
      yt = {
    f: Object.getOwnPropertySymbols
  },
      vt = {
    f: {}.propertyIsEnumerable
  },
      bt = Object.assign,
      mt = !bt || d(function () {
    var t = {},
        e = {},
        r = Symbol(),
        n = "abcdefghijklmnopqrst";
    return t[r] = 7, n.split("").forEach(function (t) {
      e[t] = t;
    }), 7 != bt({}, t)[r] || Object.keys(bt({}, e)).join("") != n;
  }) ? function (t, e) {
    for (var r = C(t), n = arguments.length, o = 1, i = yt.f, s = vt.f; n > o;) {
      for (var a, u = R(arguments[o++]), c = i ? dt(u).concat(i(u)) : dt(u), f = c.length, h = 0; f > h;) {
        s.call(u, a = c[h++]) && (r[a] = u[a]);
      }
    }

    return r;
  } : bt;

  N(N.S + N.F, "Object", {
    assign: mt
  });
  h.Object.assign;

  var _t = K("match"),
      gt = function gt(t, e, r) {
    if (l(n = e) && (void 0 !== (o = n[_t]) ? o : "RegExp" == I(n))) throw TypeError("String#" + r + " doesn't accept regex!");
    var n, o;
    return String(B(t));
  },
      wt = K("match"),
      Ot = "".startsWith;

  N(N.P + N.F * function (t) {
    var e = /./;

    try {
      "/./"[t](e);
    } catch (r) {
      try {
        return e[wt] = !1, !"/./"[t](e);
      } catch (t) {}
    }

    return !0;
  }("startsWith"), "String", {
    startsWith: function startsWith(t) {
      var e = gt(this, t, "startsWith"),
          r = W(Math.min(arguments.length > 1 ? arguments[1] : void 0, e.length)),
          n = String(t);
      return Ot ? Ot.call(e, n, r) : e.slice(r, r + n.length) === n;
    }
  });
  h.String.startsWith;
  N(N.P, "String", {
    repeat: function repeat(t) {
      var e = String(B(this)),
          r = "",
          n = z(t);
      if (n < 0 || n == 1 / 0) throw RangeError("Count can't be negative");

      for (; n > 0; (n >>>= 1) && (e += e)) {
        1 & n && (r += e);
      }

      return r;
    }
  });
  h.String.repeat;

  var St = c(function (t) {
    var e = k("meta"),
        r = O.f,
        n = 0,
        o = Object.isExtensible || function () {
      return !0;
    },
        i = !d(function () {
      return o(Object.preventExtensions({}));
    }),
        s = function s(t) {
      r(t, e, {
        value: {
          i: "O" + ++n,
          w: {}
        }
      });
    },
        a = t.exports = {
      KEY: e,
      NEED: !1,
      fastKey: function fastKey(t, r) {
        if (!l(t)) return "symbol" == _typeof(t) ? t : ("string" == typeof t ? "S" : "P") + t;

        if (!j(t, e)) {
          if (!o(t)) return "F";
          if (!r) return "E";
          s(t);
        }

        return t[e].i;
      },
      getWeak: function getWeak(t, r) {
        if (!j(t, e)) {
          if (!o(t)) return !0;
          if (!r) return !1;
          s(t);
        }

        return t[e].w;
      },
      onFreeze: function onFreeze(t) {
        return i && a.NEED && o(t) && !j(t, e) && s(t), t;
      }
    };
  }),
      Et = (St.KEY, St.NEED, St.fastKey, St.getWeak, St.onFreeze, O.f),
      At = K("toStringTag"),
      jt = function jt(t, e, r) {
    t && !j(t = r ? t : t.prototype, At) && Et(t, At, {
      configurable: !0,
      value: e
    });
  },
      Pt = {
    f: K
  },
      Tt = O.f,
      kt = function kt(t) {
    var e = h.Symbol || (h.Symbol = f.Symbol || {});
    "_" == t.charAt(0) || t in e || Tt(e, t, {
      value: Pt.f(t)
    });
  },
      xt = y ? Object.defineProperties : function (t, e) {
    p(t);

    for (var r, n = dt(e), o = n.length, i = 0; o > i;) {
      O.f(t, r = n[i++], e[r]);
    }

    return t;
  },
      Ft = f.document,
      Lt = Ft && Ft.documentElement,
      Nt = ct("IE_PROTO"),
      Dt = function Dt() {},
      _It = function It() {
    var t,
        e = m("iframe"),
        r = pt.length;

    for (e.style.display = "none", Lt.appendChild(e), e.src = "javascript:", (t = e.contentWindow.document).open(), t.write("<script>document.F=Object<\/script>"), t.close(), _It = t.F; r--;) {
      delete _It.prototype[pt[r]];
    }

    return _It();
  },
      Rt = Object.create || function (t, e) {
    var r;
    return null !== t ? (Dt.prototype = p(t), r = new Dt(), Dt.prototype = null, r[Nt] = t) : r = _It(), void 0 === e ? r : xt(r, e);
  },
      Bt = pt.concat("length", "prototype"),
      Ct = {
    f: Object.getOwnPropertyNames || function (t) {
      return lt(t, Bt);
    }
  },
      Ut = Ct.f,
      Mt = {}.toString,
      zt = "object" == (typeof window === "undefined" ? "undefined" : _typeof(window)) && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [],
      Gt = {
    f: function f(t) {
      return zt && "[object Window]" == Mt.call(t) ? function (t) {
        try {
          return Ut(t);
        } catch (t) {
          return zt.slice();
        }
      }(t) : Ut(it(t));
    }
  },
      Wt = Object.getOwnPropertyDescriptor,
      Ht = {
    f: y ? Wt : function (t, e) {
      if (t = it(t), e = g(e, !0), _) try {
        return Wt(t, e);
      } catch (t) {}
      if (j(t, e)) return S(!vt.f.call(t, e), t[e]);
    }
  },
      Vt = St.KEY,
      qt = Ht.f,
      Kt = O.f,
      $t = Gt.f,
      _Jt = f.Symbol,
      Yt = f.JSON,
      Xt = Yt && Yt.stringify,
      Qt = K("_hidden"),
      Zt = K("toPrimitive"),
      te = {}.propertyIsEnumerable,
      ee = q("symbol-registry"),
      re = q("symbols"),
      ne = q("op-symbols"),
      oe = Object.prototype,
      ie = "function" == typeof _Jt,
      se = f.QObject,
      ae = !se || !se.prototype || !se.prototype.findChild,
      ue = y && d(function () {
    return 7 != Rt(Kt({}, "a", {
      get: function get() {
        return Kt(this, "a", {
          value: 7
        }).a;
      }
    })).a;
  }) ? function (t, e, r) {
    var n = qt(oe, e);
    n && delete oe[e], Kt(t, e, r), n && t !== oe && Kt(oe, e, n);
  } : Kt,
      ce = function ce(t) {
    var e = re[t] = Rt(_Jt.prototype);
    return e._k = t, e;
  },
      fe = ie && "symbol" == _typeof(_Jt.iterator) ? function (t) {
    return "symbol" == _typeof(t);
  } : function (t) {
    return t instanceof _Jt;
  },
      he = function he(t, e, r) {
    return t === oe && he(ne, e, r), p(t), e = g(e, !0), p(r), j(re, e) ? (r.enumerable ? (j(t, Qt) && t[Qt][e] && (t[Qt][e] = !1), r = Rt(r, {
      enumerable: S(0, !1)
    })) : (j(t, Qt) || Kt(t, Qt, S(1, {})), t[Qt][e] = !0), ue(t, e, r)) : Kt(t, e, r);
  },
      le = function le(t, e) {
    p(t);

    for (var r, n = function (t) {
      var e = dt(t),
          r = yt.f;
      if (r) for (var n, o = r(t), i = vt.f, s = 0; o.length > s;) {
        i.call(t, n = o[s++]) && e.push(n);
      }
      return e;
    }(e = it(e)), o = 0, i = n.length; i > o;) {
      he(t, r = n[o++], e[r]);
    }

    return t;
  },
      pe = function pe(t) {
    var e = te.call(this, t = g(t, !0));
    return !(this === oe && j(re, t) && !j(ne, t)) && (!(e || !j(this, t) || !j(re, t) || j(this, Qt) && this[Qt][t]) || e);
  },
      de = function de(t, e) {
    if (t = it(t), e = g(e, !0), t !== oe || !j(re, e) || j(ne, e)) {
      var r = qt(t, e);
      return !r || !j(re, e) || j(t, Qt) && t[Qt][e] || (r.enumerable = !0), r;
    }
  },
      ye = function ye(t) {
    for (var e, r = $t(it(t)), n = [], o = 0; r.length > o;) {
      j(re, e = r[o++]) || e == Qt || e == Vt || n.push(e);
    }

    return n;
  },
      ve = function ve(t) {
    for (var e, r = t === oe, n = $t(r ? ne : it(t)), o = [], i = 0; n.length > i;) {
      !j(re, e = n[i++]) || r && !j(oe, e) || o.push(re[e]);
    }

    return o;
  };

  ie || (x((_Jt = function Jt() {
    if (this instanceof _Jt) throw TypeError("Symbol is not a constructor!");

    var t = k(arguments.length > 0 ? arguments[0] : void 0),
        e = function e(r) {
      this === oe && e.call(ne, r), j(this, Qt) && j(this[Qt], t) && (this[Qt][t] = !1), ue(this, t, S(1, r));
    };

    return y && ae && ue(oe, t, {
      configurable: !0,
      set: e
    }), ce(t);
  }).prototype, "toString", function () {
    return this._k;
  }), Ht.f = de, O.f = he, Ct.f = Gt.f = ye, vt.f = pe, yt.f = ve, y && x(oe, "propertyIsEnumerable", pe, !0), Pt.f = function (t) {
    return ce(K(t));
  }), N(N.G + N.W + N.F * !ie, {
    Symbol: _Jt
  });

  for (var be = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), me = 0; be.length > me;) {
    K(be[me++]);
  }

  for (var _e = dt(K.store), ge = 0; _e.length > ge;) {
    kt(_e[ge++]);
  }

  N(N.S + N.F * !ie, "Symbol", {
    "for": function _for(t) {
      return j(ee, t += "") ? ee[t] : ee[t] = _Jt(t);
    },
    keyFor: function keyFor(t) {
      if (!fe(t)) throw TypeError(t + " is not a symbol!");

      for (var e in ee) {
        if (ee[e] === t) return e;
      }
    },
    useSetter: function useSetter() {
      ae = !0;
    },
    useSimple: function useSimple() {
      ae = !1;
    }
  }), N(N.S + N.F * !ie, "Object", {
    create: function create(t, e) {
      return void 0 === e ? Rt(t) : le(Rt(t), e);
    },
    defineProperty: he,
    defineProperties: le,
    getOwnPropertyDescriptor: de,
    getOwnPropertyNames: ye,
    getOwnPropertySymbols: ve
  }), Yt && N(N.S + N.F * (!ie || d(function () {
    var t = _Jt();

    return "[null]" != Xt([t]) || "{}" != Xt({
      a: t
    }) || "{}" != Xt(Object(t));
  })), "JSON", {
    stringify: function stringify(t) {
      for (var e, r, n = [t], o = 1; arguments.length > o;) {
        n.push(arguments[o++]);
      }

      if (r = e = n[1], (l(e) || void 0 !== t) && !fe(t)) return H(e) || (e = function e(t, _e2) {
        if ("function" == typeof r && (_e2 = r.call(this, t, _e2)), !fe(_e2)) return _e2;
      }), n[1] = e, Xt.apply(Yt, n);
    }
  }), _Jt.prototype[Zt] || E(_Jt.prototype, Zt, _Jt.prototype.valueOf), jt(_Jt, "Symbol"), jt(Math, "Math", !0), jt(f.JSON, "JSON", !0);
  var we = K("toStringTag"),
      Oe = "Arguments" == I(function () {
    return arguments;
  }()),
      Se = {};
  Se[K("toStringTag")] = "z", Se + "" != "[object z]" && x(Object.prototype, "toString", function () {
    return "[object " + (void 0 === (t = this) ? "Undefined" : null === t ? "Null" : "string" == typeof (r = function (t, e) {
      try {
        return t[e];
      } catch (t) {}
    }(e = Object(t), we)) ? r : Oe ? I(e) : "Object" == (n = I(e)) && "function" == typeof e.callee ? "Arguments" : n) + "]";
    var t, e, r, n;
  }, !0), kt("asyncIterator"), kt("observable");
  h.Symbol;
  var Ee = {},
      Ae = {};
  E(Ae, K("iterator"), function () {
    return this;
  });

  var je,
      Pe = function Pe(t, e, r) {
    t.prototype = Rt(Ae, {
      next: S(1, r)
    }), jt(t, e + " Iterator");
  },
      Te = ct("IE_PROTO"),
      ke = Object.prototype,
      xe = Object.getPrototypeOf || function (t) {
    return t = C(t), j(t, Te) ? t[Te] : "function" == typeof t.constructor && t instanceof t.constructor ? t.constructor.prototype : t instanceof Object ? ke : null;
  },
      Fe = K("iterator"),
      Le = !([].keys && "next" in [].keys()),
      Ne = function Ne() {
    return this;
  },
      De = function De(t, e, r, n, o, i, s) {
    Pe(r, e, n);

    var a,
        u,
        c,
        f = function f(t) {
      if (!Le && t in d) return d[t];

      switch (t) {
        case "keys":
        case "values":
          return function () {
            return new r(this, t);
          };
      }

      return function () {
        return new r(this, t);
      };
    },
        h = e + " Iterator",
        l = "values" == o,
        p = !1,
        d = t.prototype,
        y = d[Fe] || d["@@iterator"] || o && d[o],
        v = y || f(o),
        b = o ? l ? f("entries") : v : void 0,
        m = "Array" == e && d.entries || y;

    if (m && (c = xe(m.call(new t()))) !== Object.prototype && c.next && (jt(c, h, !0), "function" != typeof c[Fe] && E(c, Fe, Ne)), l && y && "values" !== y.name && (p = !0, v = function v() {
      return y.call(this);
    }), (Le || p || !d[Fe]) && E(d, Fe, v), Ee[e] = v, Ee[h] = Ne, o) if (a = {
      values: l ? v : f("values"),
      keys: i ? v : f("keys"),
      entries: b
    }, s) for (u in a) {
      u in d || x(d, u, a[u]);
    } else N(N.P + N.F * (Le || p), e, a);
    return a;
  },
      Ie = (je = !0, function (t, e) {
    var r,
        n,
        o = String(B(t)),
        i = z(e),
        s = o.length;
    return i < 0 || i >= s ? je ? "" : void 0 : (r = o.charCodeAt(i)) < 55296 || r > 56319 || i + 1 === s || (n = o.charCodeAt(i + 1)) < 56320 || n > 57343 ? je ? o.charAt(i) : r : je ? o.slice(i, i + 2) : n - 56320 + (r - 55296 << 10) + 65536;
  });

  De(String, "String", function (t) {
    this._t = String(t), this._i = 0;
  }, function () {
    var t,
        e = this._t,
        r = this._i;
    return r >= e.length ? {
      value: void 0,
      done: !0
    } : (t = Ie(e, r), this._i += t.length, {
      value: t,
      done: !1
    });
  });

  var Re = function Re(t, e) {
    return {
      value: e,
      done: !!t
    };
  },
      Be = De(Array, "Array", function (t, e) {
    this._t = it(t), this._i = 0, this._k = e;
  }, function () {
    var t = this._t,
        e = this._k,
        r = this._i++;
    return !t || r >= t.length ? (this._t = void 0, Re(1)) : Re(0, "keys" == e ? r : "values" == e ? t[r] : [r, t[r]]);
  }, "values");

  Ee.Arguments = Ee.Array, Z("keys"), Z("values"), Z("entries");

  for (var Ce = K("iterator"), Ue = K("toStringTag"), Me = Ee.Array, ze = {
    CSSRuleList: !0,
    CSSStyleDeclaration: !1,
    CSSValueList: !1,
    ClientRectList: !1,
    DOMRectList: !1,
    DOMStringList: !1,
    DOMTokenList: !0,
    DataTransferItemList: !1,
    FileList: !1,
    HTMLAllCollection: !1,
    HTMLCollection: !1,
    HTMLFormElement: !1,
    HTMLSelectElement: !1,
    MediaList: !0,
    MimeTypeArray: !1,
    NamedNodeMap: !1,
    NodeList: !0,
    PaintRequestList: !1,
    Plugin: !1,
    PluginArray: !1,
    SVGLengthList: !1,
    SVGNumberList: !1,
    SVGPathSegList: !1,
    SVGPointList: !1,
    SVGStringList: !1,
    SVGTransformList: !1,
    SourceBufferList: !1,
    StyleSheetList: !0,
    TextTrackCueList: !1,
    TextTrackList: !1,
    TouchList: !1
  }, Ge = dt(ze), We = 0; We < Ge.length; We++) {
    var He,
        Ve = Ge[We],
        qe = ze[Ve],
        Ke = f[Ve],
        $e = Ke && Ke.prototype;
    if ($e && ($e[Ce] || E($e, Ce, Me), $e[Ue] || E($e, Ue, Ve), Ee[Ve] = Me, qe)) for (He in Be) {
      $e[He] || x($e, He, Be[He], !0);
    }
  }

  Pt.f("iterator");

  var Je = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function (t, e) {
    t.__proto__ = e;
  } || function (t, e) {
    for (var r in e) {
      e.hasOwnProperty(r) && (t[r] = e[r]);
    }
  };

  function Ye(t, e) {
    if (!(e instanceof Object)) return e;

    switch (e.constructor) {
      case Date:
        return new Date(e.getTime());

      case Object:
        void 0 === t && (t = {});
        break;

      case Array:
        t = [];
        break;

      default:
        return e;
    }

    for (var r in e) {
      e.hasOwnProperty(r) && (t[r] = Ye(t[r], e[r]));
    }

    return t;
  }

  function Xe(t, e, r) {
    t[e] = r;
  }

  var Qe = "FirebaseError",
      Ze = Error.captureStackTrace,
      tr = function () {
    return function (t, e) {
      if (this.code = t, this.message = e, Ze) Ze(this, er.prototype.create);else try {
        throw Error.apply(this, arguments);
      } catch (t) {
        this.name = Qe, Object.defineProperty(this, "stack", {
          get: function get() {
            return t.stack;
          }
        });
      }
    };
  }();

  tr.prototype = Object.create(Error.prototype), tr.prototype.constructor = tr, tr.prototype.name = Qe;

  var er = function () {
    function t(t, e, r) {
      this.service = t, this.serviceName = e, this.errors = r, this.pattern = /\{\$([^}]+)}/g;
    }

    return t.prototype.create = function (t, e) {
      void 0 === e && (e = {});
      var r,
          n = this.errors[t],
          o = this.service + "/" + t;
      r = void 0 === n ? "Error" : n.replace(this.pattern, function (t, r) {
        var n = e[r];
        return void 0 !== n ? n.toString() : "<" + r + "?>";
      }), r = this.serviceName + ": " + r + " (" + o + ").";
      var i = new tr(o, r);

      for (var s in e) {
        e.hasOwnProperty(s) && "_" !== s.slice(-1) && (i[s] = e[s]);
      }

      return i;
    }, t;
  }();

  !function (t) {
    function e() {
      var e = t.call(this) || this;
      e.chain_ = [], e.buf_ = [], e.W_ = [], e.pad_ = [], e.inbuf_ = 0, e.total_ = 0, e.blockSize = 64, e.pad_[0] = 128;

      for (var r = 1; r < e.blockSize; ++r) {
        e.pad_[r] = 0;
      }

      return e.reset(), e;
    }

    (function (t, e) {
      function r() {
        this.constructor = t;
      }

      Je(t, e), t.prototype = null === e ? Object.create(e) : (r.prototype = e.prototype, new r());
    })(e, t), e.prototype.reset = function () {
      this.chain_[0] = 1732584193, this.chain_[1] = 4023233417, this.chain_[2] = 2562383102, this.chain_[3] = 271733878, this.chain_[4] = 3285377520, this.inbuf_ = 0, this.total_ = 0;
    }, e.prototype.compress_ = function (t, e) {
      e || (e = 0);
      var r = this.W_;
      if ("string" == typeof t) for (var n = 0; n < 16; n++) {
        r[n] = t.charCodeAt(e) << 24 | t.charCodeAt(e + 1) << 16 | t.charCodeAt(e + 2) << 8 | t.charCodeAt(e + 3), e += 4;
      } else for (n = 0; n < 16; n++) {
        r[n] = t[e] << 24 | t[e + 1] << 16 | t[e + 2] << 8 | t[e + 3], e += 4;
      }

      for (n = 16; n < 80; n++) {
        var o = r[n - 3] ^ r[n - 8] ^ r[n - 14] ^ r[n - 16];
        r[n] = 4294967295 & (o << 1 | o >>> 31);
      }

      var i,
          s,
          a = this.chain_[0],
          u = this.chain_[1],
          c = this.chain_[2],
          f = this.chain_[3],
          h = this.chain_[4];

      for (n = 0; n < 80; n++) {
        n < 40 ? n < 20 ? (i = f ^ u & (c ^ f), s = 1518500249) : (i = u ^ c ^ f, s = 1859775393) : n < 60 ? (i = u & c | f & (u | c), s = 2400959708) : (i = u ^ c ^ f, s = 3395469782);
        o = (a << 5 | a >>> 27) + i + h + s + r[n] & 4294967295;
        h = f, f = c, c = 4294967295 & (u << 30 | u >>> 2), u = a, a = o;
      }

      this.chain_[0] = this.chain_[0] + a & 4294967295, this.chain_[1] = this.chain_[1] + u & 4294967295, this.chain_[2] = this.chain_[2] + c & 4294967295, this.chain_[3] = this.chain_[3] + f & 4294967295, this.chain_[4] = this.chain_[4] + h & 4294967295;
    }, e.prototype.update = function (t, e) {
      if (null != t) {
        void 0 === e && (e = t.length);

        for (var r = e - this.blockSize, n = 0, o = this.buf_, i = this.inbuf_; n < e;) {
          if (0 == i) for (; n <= r;) {
            this.compress_(t, n), n += this.blockSize;
          }

          if ("string" == typeof t) {
            for (; n < e;) {
              if (o[i] = t.charCodeAt(n), ++n, ++i == this.blockSize) {
                this.compress_(o), i = 0;
                break;
              }
            }
          } else for (; n < e;) {
            if (o[i] = t[n], ++n, ++i == this.blockSize) {
              this.compress_(o), i = 0;
              break;
            }
          }
        }

        this.inbuf_ = i, this.total_ += e;
      }
    }, e.prototype.digest = function () {
      var t = [],
          e = 8 * this.total_;
      this.inbuf_ < 56 ? this.update(this.pad_, 56 - this.inbuf_) : this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));

      for (var r = this.blockSize - 1; r >= 56; r--) {
        this.buf_[r] = 255 & e, e /= 256;
      }

      this.compress_(this.buf_);
      var n = 0;

      for (r = 0; r < 5; r++) {
        for (var o = 24; o >= 0; o -= 8) {
          t[n] = this.chain_[r] >> o & 255, ++n;
        }
      }

      return t;
    };
  }(function () {
    return function () {
      this.blockSize = -1;
    };
  }());

  function rr(t, e) {
    var r = new nr(t, e);
    return r.subscribe.bind(r);
  }

  var nr = function () {
    function t(t, e) {
      var r = this;
      this.observers = [], this.unsubscribes = [], this.observerCount = 0, this.task = Promise.resolve(), this.finalized = !1, this.onNoObservers = e, this.task.then(function () {
        t(r);
      })["catch"](function (t) {
        r.error(t);
      });
    }

    return t.prototype.next = function (t) {
      this.forEachObserver(function (e) {
        e.next(t);
      });
    }, t.prototype.error = function (t) {
      this.forEachObserver(function (e) {
        e.error(t);
      }), this.close(t);
    }, t.prototype.complete = function () {
      this.forEachObserver(function (t) {
        t.complete();
      }), this.close();
    }, t.prototype.subscribe = function (t, e, r) {
      var n,
          o = this;
      if (void 0 === t && void 0 === e && void 0 === r) throw new Error("Missing Observer.");
      void 0 === (n = function (t, e) {
        if ("object" != _typeof(t) || null === t) return !1;

        for (var r = 0, n = e; r < n.length; r++) {
          var o = n[r];
          if (o in t && "function" == typeof t[o]) return !0;
        }

        return !1;
      }(t, ["next", "error", "complete"]) ? t : {
        next: t,
        error: e,
        complete: r
      }).next && (n.next = or), void 0 === n.error && (n.error = or), void 0 === n.complete && (n.complete = or);
      var i = this.unsubscribeOne.bind(this, this.observers.length);
      return this.finalized && this.task.then(function () {
        try {
          o.finalError ? n.error(o.finalError) : n.complete();
        } catch (t) {}
      }), this.observers.push(n), i;
    }, t.prototype.unsubscribeOne = function (t) {
      void 0 !== this.observers && void 0 !== this.observers[t] && (delete this.observers[t], this.observerCount -= 1, 0 === this.observerCount && void 0 !== this.onNoObservers && this.onNoObservers(this));
    }, t.prototype.forEachObserver = function (t) {
      if (!this.finalized) for (var e = 0; e < this.observers.length; e++) {
        this.sendOne(e, t);
      }
    }, t.prototype.sendOne = function (t, e) {
      var r = this;
      this.task.then(function () {
        if (void 0 !== r.observers && void 0 !== r.observers[t]) try {
          e(r.observers[t]);
        } catch (t) {
          "undefined" != typeof console && console.error && console.error(t);
        }
      });
    }, t.prototype.close = function (t) {
      var e = this;
      this.finalized || (this.finalized = !0, void 0 !== t && (this.finalError = t), this.task.then(function () {
        e.observers = void 0, e.onNoObservers = void 0;
      }));
    }, t;
  }();

  function or() {}

  var ir = function ir(t, e) {
    return Object.prototype.hasOwnProperty.call(t, e);
  },
      sr = "[DEFAULT]",
      ar = [],
      ur = function () {
    function t(t, e, r) {
      this.firebase_ = r, this.isDeleted_ = !1, this.services_ = {}, this.name_ = e.name, this._automaticDataCollectionEnabled = e.automaticDataCollectionEnabled || !1, this.options_ = Ye(void 0, t), this.INTERNAL = {
        getUid: function getUid() {
          return null;
        },
        getToken: function getToken() {
          return Promise.resolve(null);
        },
        addAuthTokenListener: function addAuthTokenListener(t) {
          ar.push(t), setTimeout(function () {
            return t(null);
          }, 0);
        },
        removeAuthTokenListener: function removeAuthTokenListener(t) {
          ar = ar.filter(function (e) {
            return e !== t;
          });
        }
      };
    }

    return Object.defineProperty(t.prototype, "automaticDataCollectionEnabled", {
      get: function get() {
        return this.checkDestroyed_(), this._automaticDataCollectionEnabled;
      },
      set: function set(t) {
        this.checkDestroyed_(), this._automaticDataCollectionEnabled = t;
      },
      enumerable: !0,
      configurable: !0
    }), Object.defineProperty(t.prototype, "name", {
      get: function get() {
        return this.checkDestroyed_(), this.name_;
      },
      enumerable: !0,
      configurable: !0
    }), Object.defineProperty(t.prototype, "options", {
      get: function get() {
        return this.checkDestroyed_(), this.options_;
      },
      enumerable: !0,
      configurable: !0
    }), t.prototype["delete"] = function () {
      var t = this;
      return new Promise(function (e) {
        t.checkDestroyed_(), e();
      }).then(function () {
        t.firebase_.INTERNAL.removeApp(t.name_);
        var e = [];
        return Object.keys(t.services_).forEach(function (r) {
          Object.keys(t.services_[r]).forEach(function (n) {
            e.push(t.services_[r][n]);
          });
        }), Promise.all(e.map(function (t) {
          return t.INTERNAL["delete"]();
        }));
      }).then(function () {
        t.isDeleted_ = !0, t.services_ = {};
      });
    }, t.prototype._getService = function (t, e) {
      if (void 0 === e && (e = sr), this.checkDestroyed_(), this.services_[t] || (this.services_[t] = {}), !this.services_[t][e]) {
        var r = e !== sr ? e : void 0,
            n = this.firebase_.INTERNAL.factories[t](this, this.extendApp.bind(this), r);
        this.services_[t][e] = n;
      }

      return this.services_[t][e];
    }, t.prototype.extendApp = function (t) {
      var e = this;
      Ye(this, t), t.INTERNAL && t.INTERNAL.addAuthTokenListener && (ar.forEach(function (t) {
        e.INTERNAL.addAuthTokenListener(t);
      }), ar = []);
    }, t.prototype.checkDestroyed_ = function () {
      this.isDeleted_ && cr("app-deleted", {
        name: this.name_
      });
    }, t;
  }();

  function cr(t, e) {
    throw fr.create(t, e);
  }

  ur.prototype.name && ur.prototype.options || ur.prototype["delete"] || console.log("dc");
  var fr = new er("app", "Firebase", {
    "no-app": "No Firebase App '{$name}' has been created - call Firebase App.initializeApp()",
    "bad-app-name": "Illegal App name: '{$name}",
    "duplicate-app": "Firebase App named '{$name}' already exists",
    "app-deleted": "Firebase App named '{$name}' already deleted",
    "duplicate-service": "Firebase service named '{$name}' already registered",
    "sa-not-supported": "Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain",
    "invalid-app-argument": "firebase.{$name}() takes either no argument or a Firebase App instance."
  });
  return function t() {
    var e = {},
        r = {},
        n = {},
        o = {
      __esModule: !0,
      initializeApp: function initializeApp(t, r) {
        if (void 0 === r && (r = {}), "object" != _typeof(r) || null === r) {
          var n = r;
          r = {
            name: n
          };
        }

        var i = r;
        void 0 === i.name && (i.name = sr);
        var s = i.name;
        "string" == typeof s && s || cr("bad-app-name", {
          name: s + ""
        }), ir(e, s) && cr("duplicate-app", {
          name: s
        });
        var u = new ur(t, i, o);
        return e[s] = u, a(u, "create"), u;
      },
      app: i,
      apps: null,
      Promise: Promise,
      SDK_VERSION: "5.0.4",
      INTERNAL: {
        registerService: function registerService(t, e, a, u, c) {
          r[t] && cr("duplicate-service", {
            name: t
          }), r[t] = e, u && (n[t] = u, s().forEach(function (t) {
            u("create", t);
          }));

          var f = function f(e) {
            return void 0 === e && (e = i()), "function" != typeof e[t] && cr("invalid-app-argument", {
              name: t
            }), e[t]();
          };

          return void 0 !== a && Ye(f, a), o[t] = f, ur.prototype[t] = function () {
            for (var e = [], r = 0; r < arguments.length; r++) {
              e[r] = arguments[r];
            }

            return this._getService.bind(this, t).apply(this, c ? e : []);
          }, f;
        },
        createFirebaseNamespace: t,
        extendNamespace: function extendNamespace(t) {
          Ye(o, t);
        },
        createSubscribe: rr,
        ErrorFactory: er,
        removeApp: function removeApp(t) {
          a(e[t], "delete"), delete e[t];
        },
        factories: r,
        useAsService: u,
        Promise: Promise,
        deepExtend: Ye
      }
    };

    function i(t) {
      return ir(e, t = t || sr) || cr("no-app", {
        name: t
      }), e[t];
    }

    function s() {
      return Object.keys(e).map(function (t) {
        return e[t];
      });
    }

    function a(t, e) {
      Object.keys(r).forEach(function (r) {
        var o = u(t, r);
        null !== o && n[o] && n[o](e, t);
      });
    }

    function u(t, e) {
      if ("serverAuth" === e) return null;
      var r = e;
      return t.options, r;
    }

    return Xe(o, "default", o), Object.defineProperty(o, "apps", {
      get: s
    }), Xe(i, "App", ur), o;
  }();
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../node_modules/timers-browserify/main.js */ "./node_modules/timers-browserify/main.js").setImmediate, __webpack_require__(/*! ./../../../../node_modules/webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./Resources/assets/js/transaction/firebase-auth.js":
/*!**********************************************************!*\
  !*** ./Resources/assets/js/transaction/firebase-auth.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

!function (t, e) {
  "use strict";

  try {
    e = e && e.hasOwnProperty("default") ? e["default"] : e;
    var n = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
    (function () {
      var t,
          n = e["default"],
          i = i || {},
          r = this;

      function o(t) {
        return "string" == typeof t;
      }

      function a(t) {
        return "boolean" == typeof t;
      }

      function s() {}

      function u(t) {
        var e = _typeof(t);

        if ("object" == e) {
          if (!t) return "null";
          if (t instanceof Array) return "array";
          if (t instanceof Object) return e;
          var n = Object.prototype.toString.call(t);
          if ("[object Window]" == n) return "object";
          if ("[object Array]" == n || "number" == typeof t.length && void 0 !== t.splice && void 0 !== t.propertyIsEnumerable && !t.propertyIsEnumerable("splice")) return "array";
          if ("[object Function]" == n || void 0 !== t.call && void 0 !== t.propertyIsEnumerable && !t.propertyIsEnumerable("call")) return "function";
        } else if ("function" == e && void 0 === t.call) return "object";

        return e;
      }

      function c(t) {
        return null === t;
      }

      function h(t) {
        return "array" == u(t);
      }

      function f(t) {
        var e = u(t);
        return "array" == e || "object" == e && "number" == typeof t.length;
      }

      function l(t) {
        return "function" == u(t);
      }

      function d(t) {
        var e = _typeof(t);

        return "object" == e && null != t || "function" == e;
      }

      var p = "closure_uid_" + (1e9 * Math.random() >>> 0),
          v = 0;

      function m(t, e, n) {
        return t.call.apply(t.bind, arguments);
      }

      function g(t, e, n) {
        if (!t) throw Error();

        if (2 < arguments.length) {
          var i = Array.prototype.slice.call(arguments, 2);
          return function () {
            var n = Array.prototype.slice.call(arguments);
            return Array.prototype.unshift.apply(n, i), t.apply(e, n);
          };
        }

        return function () {
          return t.apply(e, arguments);
        };
      }

      function b(t, e, n) {
        return (b = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? m : g).apply(null, arguments);
      }

      function y(t, e) {
        var n = Array.prototype.slice.call(arguments, 1);
        return function () {
          var e = n.slice();
          return e.push.apply(e, arguments), t.apply(this, e);
        };
      }

      var w = Date.now || function () {
        return +new Date();
      };

      function I(t, e) {
        function n() {}

        n.prototype = e.prototype, t.lb = e.prototype, t.prototype = new n(), t.prototype.constructor = t, t.cd = function (t, n, i) {
          for (var r = Array(arguments.length - 2), o = 2; o < arguments.length; o++) {
            r[o - 2] = arguments[o];
          }

          return e.prototype[n].apply(t, r);
        };
      }

      function T(t) {
        t.prototype.then = t.prototype.then, t.prototype.$goog_Thenable = !0;
      }

      function A(t) {
        if (!t) return !1;

        try {
          return !!t.$goog_Thenable;
        } catch (t) {
          return !1;
        }
      }

      function E(t) {
        if (Error.captureStackTrace) Error.captureStackTrace(this, E);else {
          var e = Error().stack;
          e && (this.stack = e);
        }
        t && (this.message = String(t));
      }

      function S(t, e) {
        for (var n = "", i = (t = t.split("%s")).length - 1, r = 0; r < i; r++) {
          n += t[r] + (r < e.length ? e[r] : "%s");
        }

        E.call(this, n + t[i]);
      }

      function k(t, e) {
        throw new S("Failure" + (t ? ": " + t : ""), Array.prototype.slice.call(arguments, 1));
      }

      function N(t, e) {
        this.c = t, this.f = e, this.b = 0, this.a = null;
      }

      function _(t, e) {
        t.f(e), 100 > t.b && (t.b++, e.next = t.a, t.a = e);
      }

      function O() {
        this.b = this.a = null;
      }

      I(E, Error), E.prototype.name = "CustomError", I(S, E), S.prototype.name = "AssertionError", N.prototype.get = function () {
        if (0 < this.b) {
          this.b--;
          var t = this.a;
          this.a = t.next, t.next = null;
        } else t = this.c();

        return t;
      };
      var P = new N(function () {
        return new C();
      }, function (t) {
        t.reset();
      });

      function R() {
        var t = pt,
            e = null;
        return t.a && (e = t.a, t.a = t.a.next, t.a || (t.b = null), e.next = null), e;
      }

      function C() {
        this.next = this.b = this.a = null;
      }

      O.prototype.add = function (t, e) {
        var n = P.get();
        n.set(t, e), this.b ? this.b.next = n : this.a = n, this.b = n;
      }, C.prototype.set = function (t, e) {
        this.a = t, this.b = e, this.next = null;
      }, C.prototype.reset = function () {
        this.next = this.b = this.a = null;
      };
      var D = Array.prototype.indexOf ? function (t, e) {
        return Array.prototype.indexOf.call(t, e, void 0);
      } : function (t, e) {
        if (o(t)) return o(e) && 1 == e.length ? t.indexOf(e, 0) : -1;

        for (var n = 0; n < t.length; n++) {
          if (n in t && t[n] === e) return n;
        }

        return -1;
      },
          L = Array.prototype.forEach ? function (t, e, n) {
        Array.prototype.forEach.call(t, e, n);
      } : function (t, e, n) {
        for (var i = t.length, r = o(t) ? t.split("") : t, a = 0; a < i; a++) {
          a in r && e.call(n, r[a], a, t);
        }
      };
      var x = Array.prototype.map ? function (t, e) {
        return Array.prototype.map.call(t, e, void 0);
      } : function (t, e) {
        for (var n = t.length, i = Array(n), r = o(t) ? t.split("") : t, a = 0; a < n; a++) {
          a in r && (i[a] = e.call(void 0, r[a], a, t));
        }

        return i;
      },
          M = Array.prototype.some ? function (t, e) {
        return Array.prototype.some.call(t, e, void 0);
      } : function (t, e) {
        for (var n = t.length, i = o(t) ? t.split("") : t, r = 0; r < n; r++) {
          if (r in i && e.call(void 0, i[r], r, t)) return !0;
        }

        return !1;
      };

      function j(t, e) {
        return 0 <= D(t, e);
      }

      function U(t, e) {
        var n;
        return (n = 0 <= (e = D(t, e))) && Array.prototype.splice.call(t, e, 1), n;
      }

      function V(t, e) {
        !function (t, e) {
          var n = t.length,
              i = o(t) ? t.split("") : t;

          for (--n; 0 <= n; --n) {
            n in i && e.call(void 0, i[n], n, t);
          }
        }(t, function (n, i) {
          e.call(void 0, n, i, t) && 1 == Array.prototype.splice.call(t, i, 1).length && 0;
        });
      }

      function F(t) {
        return Array.prototype.concat.apply([], arguments);
      }

      function K(t) {
        var e = t.length;

        if (0 < e) {
          for (var n = Array(e), i = 0; i < e; i++) {
            n[i] = t[i];
          }

          return n;
        }

        return [];
      }

      function H(t, e) {
        for (var n = t.split("%s"), i = "", r = Array.prototype.slice.call(arguments, 1); r.length && 1 < n.length;) {
          i += n.shift() + r.shift();
        }

        return i + n.join("%s");
      }

      var q = String.prototype.trim ? function (t) {
        return t.trim();
      } : function (t) {
        return /^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1];
      };

      function W(t) {
        return Z.test(t) ? (-1 != t.indexOf("&") && (t = t.replace(B, "&amp;")), -1 != t.indexOf("<") && (t = t.replace(X, "&lt;")), -1 != t.indexOf(">") && (t = t.replace(z, "&gt;")), -1 != t.indexOf('"') && (t = t.replace(J, "&quot;")), -1 != t.indexOf("'") && (t = t.replace(Y, "&#39;")), -1 != t.indexOf("\0") && (t = t.replace($, "&#0;")), t) : t;
      }

      var G,
          B = /&/g,
          X = /</g,
          z = />/g,
          J = /"/g,
          Y = /'/g,
          $ = /\x00/g,
          Z = /[\x00&<>"']/;

      function Q(t, e) {
        return -1 != t.indexOf(e);
      }

      function tt(t, e) {
        return t < e ? -1 : t > e ? 1 : 0;
      }

      t: {
        var et = r.navigator;

        if (et) {
          var nt = et.userAgent;

          if (nt) {
            G = nt;
            break t;
          }
        }

        G = "";
      }

      function it(t) {
        return Q(G, t);
      }

      function rt(t, e) {
        for (var n in t) {
          e.call(void 0, t[n], n, t);
        }
      }

      function ot(t) {
        for (var e in t) {
          return !1;
        }

        return !0;
      }

      function at(t) {
        var e,
            n = {};

        for (e in t) {
          n[e] = t[e];
        }

        return n;
      }

      var st,
          ut,
          ct = "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");

      function ht(t, e) {
        for (var n, i, r = 1; r < arguments.length; r++) {
          for (n in i = arguments[r]) {
            t[n] = i[n];
          }

          for (var o = 0; o < ct.length; o++) {
            n = ct[o], Object.prototype.hasOwnProperty.call(i, n) && (t[n] = i[n]);
          }
        }
      }

      function ft(t) {
        r.setTimeout(function () {
          throw t;
        }, 0);
      }

      function lt(t, e) {
        ut || function () {
          if (r.Promise && r.Promise.resolve) {
            var t = r.Promise.resolve(void 0);

            ut = function ut() {
              t.then(vt);
            };
          } else ut = function ut() {
            var t = vt;
            !l(r.setImmediate) || r.Window && r.Window.prototype && !it("Edge") && r.Window.prototype.setImmediate == r.setImmediate ? (st || (st = function () {
              var t = r.MessageChannel;

              if (void 0 === t && "undefined" != typeof window && window.postMessage && window.addEventListener && !it("Presto") && (t = function t() {
                var t = document.createElement("IFRAME");
                t.style.display = "none", t.src = "", document.documentElement.appendChild(t);
                var e = t.contentWindow;
                (t = e.document).open(), t.write(""), t.close();
                var n = "callImmediate" + Math.random(),
                    i = "file:" == e.location.protocol ? "*" : e.location.protocol + "//" + e.location.host;
                t = b(function (t) {
                  "*" != i && t.origin != i || t.data != n || this.port1.onmessage();
                }, this), e.addEventListener("message", t, !1), this.port1 = {}, this.port2 = {
                  postMessage: function postMessage() {
                    e.postMessage(n, i);
                  }
                };
              }), void 0 !== t && !it("Trident") && !it("MSIE")) {
                var e = new t(),
                    n = {},
                    i = n;
                return e.port1.onmessage = function () {
                  if (void 0 !== n.next) {
                    var t = (n = n.next).tb;
                    n.tb = null, t();
                  }
                }, function (t) {
                  i.next = {
                    tb: t
                  }, i = i.next, e.port2.postMessage(0);
                };
              }

              return "undefined" != typeof document && "onreadystatechange" in document.createElement("SCRIPT") ? function (t) {
                var e = document.createElement("SCRIPT");
                e.onreadystatechange = function () {
                  e.onreadystatechange = null, e.parentNode.removeChild(e), e = null, t(), t = null;
                }, document.documentElement.appendChild(e);
              } : function (t) {
                r.setTimeout(t, 0);
              };
            }()), st(t)) : r.setImmediate(t);
          };
        }(), dt || (ut(), dt = !0), pt.add(t, e);
      }

      var dt = !1,
          pt = new O();

      function vt() {
        for (var t; t = R();) {
          try {
            t.a.call(t.b);
          } catch (t) {
            ft(t);
          }

          _(P, t);
        }

        dt = !1;
      }

      function mt(t, e) {
        if (this.a = gt, this.i = void 0, this.f = this.b = this.c = null, this.g = this.h = !1, t != s) try {
          var n = this;
          t.call(e, function (t) {
            _t(n, bt, t);
          }, function (t) {
            if (!(t instanceof xt)) try {
              if (t instanceof Error) throw t;
              throw Error("Promise rejected.");
            } catch (t) {}

            _t(n, yt, t);
          });
        } catch (t) {
          _t(this, yt, t);
        }
      }

      var gt = 0,
          bt = 2,
          yt = 3;

      function wt() {
        this.next = this.f = this.b = this.g = this.a = null, this.c = !1;
      }

      wt.prototype.reset = function () {
        this.f = this.b = this.g = this.a = null, this.c = !1;
      };

      var It = new N(function () {
        return new wt();
      }, function (t) {
        t.reset();
      });

      function Tt(t, e, n) {
        var i = It.get();
        return i.g = t, i.b = e, i.f = n, i;
      }

      function At(t) {
        if (t instanceof mt) return t;
        var e = new mt(s);
        return _t(e, bt, t), e;
      }

      function Et(t) {
        return new mt(function (e, n) {
          n(t);
        });
      }

      function St(t, e, n) {
        Ot(t, e, n, null) || lt(y(e, t));
      }

      function kt(t, e) {
        t.b || t.a != bt && t.a != yt || Pt(t), t.f ? t.f.next = e : t.b = e, t.f = e;
      }

      function Nt(t, e, n, i) {
        var r = Tt(null, null, null);
        return r.a = new mt(function (t, o) {
          r.g = e ? function (n) {
            try {
              var r = e.call(i, n);
              t(r);
            } catch (t) {
              o(t);
            }
          } : t, r.b = n ? function (e) {
            try {
              var r = n.call(i, e);
              void 0 === r && e instanceof xt ? o(e) : t(r);
            } catch (t) {
              o(t);
            }
          } : o;
        }), r.a.c = t, kt(t, r), r.a;
      }

      function _t(t, e, n) {
        t.a == gt && (t === n && (e = yt, n = new TypeError("Promise cannot resolve to itself")), t.a = 1, Ot(n, t.Lc, t.Mc, t) || (t.i = n, t.a = e, t.c = null, Pt(t), e != yt || n instanceof xt || function (t, e) {
          t.g = !0, lt(function () {
            t.g && Lt.call(null, e);
          });
        }(t, n)));
      }

      function Ot(t, e, n, i) {
        if (t instanceof mt) return kt(t, Tt(e || s, n || null, i)), !0;
        if (A(t)) return t.then(e, n, i), !0;
        if (d(t)) try {
          var r = t.then;
          if (l(r)) return function (t, e, n, i, r) {
            function o(t) {
              a || (a = !0, i.call(r, t));
            }

            var a = !1;

            try {
              e.call(t, function (t) {
                a || (a = !0, n.call(r, t));
              }, o);
            } catch (t) {
              o(t);
            }
          }(t, r, e, n, i), !0;
        } catch (t) {
          return n.call(i, t), !0;
        }
        return !1;
      }

      function Pt(t) {
        t.h || (t.h = !0, lt(t.Ub, t));
      }

      function Rt(t) {
        var e = null;
        return t.b && (e = t.b, t.b = e.next, e.next = null), t.b || (t.f = null), e;
      }

      function Ct(t, e, n, i) {
        if (n == yt && e.b && !e.c) for (; t && t.g; t = t.c) {
          t.g = !1;
        }
        if (e.a) e.a.c = null, Dt(e, n, i);else try {
          e.c ? e.g.call(e.f) : Dt(e, n, i);
        } catch (t) {
          Lt.call(null, t);
        }

        _(It, e);
      }

      function Dt(t, e, n) {
        e == bt ? t.g.call(t.f, n) : t.b && t.b.call(t.f, n);
      }

      mt.prototype.then = function (t, e, n) {
        return Nt(this, l(t) ? t : null, l(e) ? e : null, n);
      }, T(mt), (t = mt.prototype).ia = function (t, e) {
        return (t = Tt(t, t, e)).c = !0, kt(this, t), this;
      }, t.s = function (t, e) {
        return Nt(this, null, t, e);
      }, t.cancel = function (t) {
        this.a == gt && lt(function () {
          !function t(e, n) {
            if (e.a == gt) if (e.c) {
              var i = e.c;

              if (i.b) {
                for (var r = 0, o = null, a = null, s = i.b; s && (s.c || (r++, s.a == e && (o = s), !(o && 1 < r))); s = s.next) {
                  o || (a = s);
                }

                o && (i.a == gt && 1 == r ? t(i, n) : (a ? ((r = a).next == i.f && (i.f = r), r.next = r.next.next) : Rt(i), Ct(i, o, yt, n)));
              }

              e.c = null;
            } else _t(e, yt, n);
          }(this, new xt(t));
        }, this);
      }, t.Lc = function (t) {
        this.a = gt, _t(this, bt, t);
      }, t.Mc = function (t) {
        this.a = gt, _t(this, yt, t);
      }, t.Ub = function () {
        for (var t; t = Rt(this);) {
          Ct(this, t, this.a, this.i);
        }

        this.h = !1;
      };
      var Lt = ft;

      function xt(t) {
        E.call(this, t);
      }

      function Mt() {
        0 != jt && (Ut[this[p] || (this[p] = ++v)] = this), this.pa = this.pa, this.ja = this.ja;
      }

      I(xt, E), xt.prototype.name = "cancel";
      var jt = 0,
          Ut = {};

      function Vt(t) {
        if (!t.pa && (t.pa = !0, t.ua(), 0 != jt)) {
          var e = t[p] || (t[p] = ++v);
          if (0 != jt && t.ja && 0 < t.ja.length) throw Error(t + " did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");
          delete Ut[e];
        }
      }

      function Ft(t) {
        return Ft[" "](t), t;
      }

      Mt.prototype.pa = !1, Mt.prototype.ua = function () {
        if (this.ja) for (; this.ja.length;) {
          this.ja.shift()();
        }
      }, Ft[" "] = s;
      var Kt,
          Ht,
          qt = it("Opera"),
          Wt = it("Trident") || it("MSIE"),
          Gt = it("Edge"),
          Bt = Gt || Wt,
          Xt = it("Gecko") && !(Q(G.toLowerCase(), "webkit") && !it("Edge")) && !(it("Trident") || it("MSIE")) && !it("Edge"),
          zt = Q(G.toLowerCase(), "webkit") && !it("Edge");

      function Jt() {
        var t = r.document;
        return t ? t.documentMode : void 0;
      }

      t: {
        var Yt = "",
            $t = (Ht = G, Xt ? /rv:([^\);]+)(\)|;)/.exec(Ht) : Gt ? /Edge\/([\d\.]+)/.exec(Ht) : Wt ? /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ht) : zt ? /WebKit\/(\S+)/.exec(Ht) : qt ? /(?:Version)[ \/]?(\S+)/.exec(Ht) : void 0);

        if ($t && (Yt = $t ? $t[1] : ""), Wt) {
          var Zt = Jt();

          if (null != Zt && Zt > parseFloat(Yt)) {
            Kt = String(Zt);
            break t;
          }
        }

        Kt = Yt;
      }

      var Qt,
          te = {};

      function ee(t) {
        return function (t, e) {
          var n = te;
          return Object.prototype.hasOwnProperty.call(n, t) ? n[t] : n[t] = e(t);
        }(t, function () {
          for (var e = 0, n = q(String(Kt)).split("."), i = q(String(t)).split("."), r = Math.max(n.length, i.length), o = 0; 0 == e && o < r; o++) {
            var a = n[o] || "",
                s = i[o] || "";

            do {
              if (a = /(\d*)(\D*)(.*)/.exec(a) || ["", "", "", ""], s = /(\d*)(\D*)(.*)/.exec(s) || ["", "", "", ""], 0 == a[0].length && 0 == s[0].length) break;
              e = tt(0 == a[1].length ? 0 : parseInt(a[1], 10), 0 == s[1].length ? 0 : parseInt(s[1], 10)) || tt(0 == a[2].length, 0 == s[2].length) || tt(a[2], s[2]), a = a[3], s = s[3];
            } while (0 == e);
          }

          return 0 <= e;
        });
      }

      var ne = r.document;
      Qt = ne && Wt ? Jt() || ("CSS1Compat" == ne.compatMode ? parseInt(Kt, 10) : 5) : void 0;

      var ie = Object.freeze || function (t) {
        return t;
      },
          re = !Wt || 9 <= Number(Qt),
          oe = Wt && !ee("9"),
          ae = function () {
        if (!r.addEventListener || !Object.defineProperty) return !1;
        var t = !1,
            e = Object.defineProperty({}, "passive", {
          get: function get() {
            t = !0;
          }
        });
        return r.addEventListener("test", s, e), r.removeEventListener("test", s, e), t;
      }();

      function se(t, e) {
        this.type = t, this.b = this.target = e, this.Gb = !0;
      }

      function ue(t, e) {
        if (se.call(this, t ? t.type : ""), this.relatedTarget = this.b = this.target = null, this.button = this.screenY = this.screenX = this.clientY = this.clientX = 0, this.key = "", this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1, this.pointerId = 0, this.pointerType = "", this.a = null, t) {
          var n = this.type = t.type,
              i = t.changedTouches ? t.changedTouches[0] : null;

          if (this.target = t.target || t.srcElement, this.b = e, e = t.relatedTarget) {
            if (Xt) {
              t: {
                try {
                  Ft(e.nodeName);
                  var r = !0;
                  break t;
                } catch (t) {}

                r = !1;
              }

              r || (e = null);
            }
          } else "mouseover" == n ? e = t.fromElement : "mouseout" == n && (e = t.toElement);

          this.relatedTarget = e, null === i ? (this.clientX = void 0 !== t.clientX ? t.clientX : t.pageX, this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY, this.screenX = t.screenX || 0, this.screenY = t.screenY || 0) : (this.clientX = void 0 !== i.clientX ? i.clientX : i.pageX, this.clientY = void 0 !== i.clientY ? i.clientY : i.pageY, this.screenX = i.screenX || 0, this.screenY = i.screenY || 0), this.button = t.button, this.key = t.key || "", this.ctrlKey = t.ctrlKey, this.altKey = t.altKey, this.shiftKey = t.shiftKey, this.metaKey = t.metaKey, this.pointerId = t.pointerId || 0, this.pointerType = o(t.pointerType) ? t.pointerType : ce[t.pointerType] || "", this.a = t, t.defaultPrevented && this.preventDefault();
        }
      }

      se.prototype.preventDefault = function () {
        this.Gb = !1;
      }, I(ue, se);
      var ce = ie({
        2: "touch",
        3: "pen",
        4: "mouse"
      });
      ue.prototype.preventDefault = function () {
        ue.lb.preventDefault.call(this);
        var t = this.a;
        if (t.preventDefault) t.preventDefault();else if (t.returnValue = !1, oe) try {
          (t.ctrlKey || 112 <= t.keyCode && 123 >= t.keyCode) && (t.keyCode = -1);
        } catch (t) {}
      }, ue.prototype.f = function () {
        return this.a;
      };
      var he = "closure_listenable_" + (1e6 * Math.random() | 0),
          fe = 0;

      function le(t) {
        t.na = !0, t.listener = null, t.proxy = null, t.src = null, t.La = null;
      }

      function de(t) {
        this.src = t, this.a = {}, this.b = 0;
      }

      function pe(t, e) {
        var n = e.type;
        n in t.a && U(t.a[n], e) && (le(e), 0 == t.a[n].length && (delete t.a[n], t.b--));
      }

      function ve(t, e, n, i) {
        for (var r = 0; r < t.length; ++r) {
          var o = t[r];
          if (!o.na && o.listener == e && o.capture == !!n && o.La == i) return r;
        }

        return -1;
      }

      de.prototype.add = function (t, e, n, i, r) {
        var o = t.toString();
        (t = this.a[o]) || (t = this.a[o] = [], this.b++);
        var a = ve(t, e, i, r);
        return -1 < a ? (e = t[a], n || (e.Ia = !1)) : ((e = new function (t, e, n, i, r) {
          this.listener = t, this.proxy = null, this.src = e, this.type = n, this.capture = !!i, this.La = r, this.key = ++fe, this.na = this.Ia = !1;
        }(e, this.src, o, !!i, r)).Ia = n, t.push(e)), e;
      };

      var me = "closure_lm_" + (1e6 * Math.random() | 0),
          ge = {};

      function be(t, e, n, i, r) {
        if (i && i.once) we(t, e, n, i, r);else if (h(e)) for (var o = 0; o < e.length; o++) {
          be(t, e[o], n, i, r);
        } else n = Oe(n), t && t[he] ? Re(t, e, n, d(i) ? !!i.capture : !!i, r) : ye(t, e, n, !1, i, r);
      }

      function ye(t, e, n, i, r, o) {
        if (!e) throw Error("Invalid event type");
        var a = d(r) ? !!r.capture : !!r,
            s = Ne(t);
        if (s || (t[me] = s = new de(t)), !(n = s.add(e, n, i, a, o)).proxy) if (i = function () {
          var t = ke,
              e = re ? function (n) {
            return t.call(e.src, e.listener, n);
          } : function (n) {
            if (!(n = t.call(e.src, e.listener, n))) return n;
          };
          return e;
        }(), n.proxy = i, i.src = t, i.listener = n, t.addEventListener) ae || (r = a), void 0 === r && (r = !1), t.addEventListener(e.toString(), i, r);else if (t.attachEvent) t.attachEvent(Ae(e.toString()), i);else {
          if (!t.addListener || !t.removeListener) throw Error("addEventListener and attachEvent are unavailable.");
          t.addListener(i);
        }
      }

      function we(t, e, n, i, r) {
        if (h(e)) for (var o = 0; o < e.length; o++) {
          we(t, e[o], n, i, r);
        } else n = Oe(n), t && t[he] ? Ce(t, e, n, d(i) ? !!i.capture : !!i, r) : ye(t, e, n, !0, i, r);
      }

      function Ie(t, e, n, i, r) {
        if (h(e)) for (var o = 0; o < e.length; o++) {
          Ie(t, e[o], n, i, r);
        } else i = d(i) ? !!i.capture : !!i, n = Oe(n), t && t[he] ? (t = t.m, (e = String(e).toString()) in t.a && -1 < (n = ve(o = t.a[e], n, i, r)) && (le(o[n]), Array.prototype.splice.call(o, n, 1), 0 == o.length && (delete t.a[e], t.b--))) : t && (t = Ne(t)) && (e = t.a[e.toString()], t = -1, e && (t = ve(e, n, i, r)), (n = -1 < t ? e[t] : null) && Te(n));
      }

      function Te(t) {
        if ("number" != typeof t && t && !t.na) {
          var e = t.src;
          if (e && e[he]) pe(e.m, t);else {
            var n = t.type,
                i = t.proxy;
            e.removeEventListener ? e.removeEventListener(n, i, t.capture) : e.detachEvent ? e.detachEvent(Ae(n), i) : e.addListener && e.removeListener && e.removeListener(i), (n = Ne(e)) ? (pe(n, t), 0 == n.b && (n.src = null, e[me] = null)) : le(t);
          }
        }
      }

      function Ae(t) {
        return t in ge ? ge[t] : ge[t] = "on" + t;
      }

      function Ee(t, e, n, i) {
        var r = !0;
        if ((t = Ne(t)) && (e = t.a[e.toString()])) for (e = e.concat(), t = 0; t < e.length; t++) {
          var o = e[t];
          o && o.capture == n && !o.na && (o = Se(o, i), r = r && !1 !== o);
        }
        return r;
      }

      function Se(t, e) {
        var n = t.listener,
            i = t.La || t.src;
        return t.Ia && Te(t), n.call(i, e);
      }

      function ke(t, e) {
        if (t.na) return !0;

        if (!re) {
          if (!e) t: {
            e = ["window", "event"];

            for (var n = r, i = 0; i < e.length; i++) {
              if (null == (n = n[e[i]])) {
                e = null;
                break t;
              }
            }

            e = n;
          }

          if (e = new ue(i = e, this), n = !0, !(0 > i.keyCode || void 0 != i.returnValue)) {
            t: {
              var o = !1;
              if (0 == i.keyCode) try {
                i.keyCode = -1;
                break t;
              } catch (t) {
                o = !0;
              }
              (o || void 0 == i.returnValue) && (i.returnValue = !0);
            }

            for (i = [], o = e.b; o; o = o.parentNode) {
              i.push(o);
            }

            for (t = t.type, o = i.length - 1; 0 <= o; o--) {
              e.b = i[o];
              var a = Ee(i[o], t, !0, e);
              n = n && a;
            }

            for (o = 0; o < i.length; o++) {
              e.b = i[o], a = Ee(i[o], t, !1, e), n = n && a;
            }
          }

          return n;
        }

        return Se(t, new ue(e, this));
      }

      function Ne(t) {
        return (t = t[me]) instanceof de ? t : null;
      }

      var _e = "__closure_events_fn_" + (1e9 * Math.random() >>> 0);

      function Oe(t) {
        return l(t) ? t : (t[_e] || (t[_e] = function (e) {
          return t.handleEvent(e);
        }), t[_e]);
      }

      function Pe() {
        Mt.call(this), this.m = new de(this), this.Nb = this, this.Ua = null;
      }

      function Re(t, e, n, i, r) {
        t.m.add(String(e), n, !1, i, r);
      }

      function Ce(t, e, n, i, r) {
        t.m.add(String(e), n, !0, i, r);
      }

      function De(t, e, n, i) {
        if (!(e = t.m.a[String(e)])) return !0;
        e = e.concat();

        for (var r = !0, o = 0; o < e.length; ++o) {
          var a = e[o];

          if (a && !a.na && a.capture == n) {
            var s = a.listener,
                u = a.La || a.src;
            a.Ia && pe(t.m, a), r = !1 !== s.call(u, i) && r;
          }
        }

        return r && 0 != i.Gb;
      }

      function Le(t, e, n) {
        if (l(t)) n && (t = b(t, n));else {
          if (!t || "function" != typeof t.handleEvent) throw Error("Invalid listener argument");
          t = b(t.handleEvent, t);
        }
        return 2147483647 < Number(e) ? -1 : r.setTimeout(t, e || 0);
      }

      function xe(t) {
        var e = null;
        return new mt(function (n, i) {
          -1 == (e = Le(function () {
            n(void 0);
          }, t)) && i(Error("Failed to schedule timer."));
        }).s(function (t) {
          throw r.clearTimeout(e), t;
        });
      }

      function Me(t) {
        if (t.S && "function" == typeof t.S) return t.S();
        if (o(t)) return t.split("");

        if (f(t)) {
          for (var e = [], n = t.length, i = 0; i < n; i++) {
            e.push(t[i]);
          }

          return e;
        }

        for (i in e = [], n = 0, t) {
          e[n++] = t[i];
        }

        return e;
      }

      function je(t) {
        if (t.U && "function" == typeof t.U) return t.U();

        if (!t.S || "function" != typeof t.S) {
          if (f(t) || o(t)) {
            var e = [];
            t = t.length;

            for (var n = 0; n < t; n++) {
              e.push(n);
            }

            return e;
          }

          for (var i in e = [], n = 0, t) {
            e[n++] = i;
          }

          return e;
        }
      }

      function Ue(t, e) {
        this.b = {}, this.a = [], this.c = 0;
        var n = arguments.length;

        if (1 < n) {
          if (n % 2) throw Error("Uneven number of arguments");

          for (var i = 0; i < n; i += 2) {
            this.set(arguments[i], arguments[i + 1]);
          }
        } else if (t) if (t instanceof Ue) for (n = t.U(), i = 0; i < n.length; i++) {
          this.set(n[i], t.get(n[i]));
        } else for (i in t) {
          this.set(i, t[i]);
        }
      }

      function Ve(t) {
        if (t.c != t.a.length) {
          for (var e = 0, n = 0; e < t.a.length;) {
            var i = t.a[e];
            Fe(t.b, i) && (t.a[n++] = i), e++;
          }

          t.a.length = n;
        }

        if (t.c != t.a.length) {
          var r = {};

          for (n = e = 0; e < t.a.length;) {
            Fe(r, i = t.a[e]) || (t.a[n++] = i, r[i] = 1), e++;
          }

          t.a.length = n;
        }
      }

      function Fe(t, e) {
        return Object.prototype.hasOwnProperty.call(t, e);
      }

      I(Pe, Mt), Pe.prototype[he] = !0, Pe.prototype.addEventListener = function (t, e, n, i) {
        be(this, t, e, n, i);
      }, Pe.prototype.removeEventListener = function (t, e, n, i) {
        Ie(this, t, e, n, i);
      }, Pe.prototype.dispatchEvent = function (t) {
        var e,
            n = this.Ua;
        if (n) for (e = []; n; n = n.Ua) {
          e.push(n);
        }
        n = this.Nb;
        var i = t.type || t;
        if (o(t)) t = new se(t, n);else if (t instanceof se) t.target = t.target || n;else {
          var r = t;
          ht(t = new se(i, n), r);
        }
        if (r = !0, e) for (var a = e.length - 1; 0 <= a; a--) {
          var s = t.b = e[a];
          r = De(s, i, !0, t) && r;
        }
        if (r = De(s = t.b = n, i, !0, t) && r, r = De(s, i, !1, t) && r, e) for (a = 0; a < e.length; a++) {
          r = De(s = t.b = e[a], i, !1, t) && r;
        }
        return r;
      }, Pe.prototype.ua = function () {
        if (Pe.lb.ua.call(this), this.m) {
          var t,
              e = this.m;

          for (t in e.a) {
            for (var n = e.a[t], i = 0; i < n.length; i++) {
              le(n[i]);
            }

            delete e.a[t], e.b--;
          }
        }

        this.Ua = null;
      }, (t = Ue.prototype).S = function () {
        Ve(this);

        for (var t = [], e = 0; e < this.a.length; e++) {
          t.push(this.b[this.a[e]]);
        }

        return t;
      }, t.U = function () {
        return Ve(this), this.a.concat();
      }, t.clear = function () {
        this.b = {}, this.c = this.a.length = 0;
      }, t.get = function (t, e) {
        return Fe(this.b, t) ? this.b[t] : e;
      }, t.set = function (t, e) {
        Fe(this.b, t) || (this.c++, this.a.push(t)), this.b[t] = e;
      }, t.forEach = function (t, e) {
        for (var n = this.U(), i = 0; i < n.length; i++) {
          var r = n[i],
              o = this.get(r);
          t.call(e, o, r, this);
        }
      };
      var Ke = /^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;

      function He(t, e) {
        if (this.b = this.m = this.c = "", this.i = null, this.h = this.g = "", this.f = !1, t instanceof He) {
          this.f = void 0 !== e ? e : t.f, qe(this, t.c), this.m = t.m, this.b = t.b, We(this, t.i), this.g = t.g, e = t.a;
          var n = new on();
          n.c = e.c, e.a && (n.a = new Ue(e.a), n.b = e.b), Ge(this, n), this.h = t.h;
        } else t && (n = String(t).match(Ke)) ? (this.f = !!e, qe(this, n[1] || "", !0), this.m = Ye(n[2] || ""), this.b = Ye(n[3] || "", !0), We(this, n[4]), this.g = Ye(n[5] || "", !0), Ge(this, n[6] || "", !0), this.h = Ye(n[7] || "")) : (this.f = !!e, this.a = new on(null, this.f));
      }

      function qe(t, e, n) {
        t.c = n ? Ye(e, !0) : e, t.c && (t.c = t.c.replace(/:$/, ""));
      }

      function We(t, e) {
        if (e) {
          if (e = Number(e), isNaN(e) || 0 > e) throw Error("Bad port number " + e);
          t.i = e;
        } else t.i = null;
      }

      function Ge(t, e, n) {
        e instanceof on ? (t.a = e, function (t, e) {
          e && !t.f && (an(t), t.c = null, t.a.forEach(function (t, e) {
            var n = e.toLowerCase();
            e != n && (un(this, e), hn(this, n, t));
          }, t)), t.f = e;
        }(t.a, t.f)) : (n || (e = $e(e, nn)), t.a = new on(e, t.f));
      }

      function Be(t, e, n) {
        t.a.set(e, n);
      }

      function Xe(t, e) {
        return t.a.get(e);
      }

      function ze(t) {
        return t instanceof He ? new He(t) : new He(t, void 0);
      }

      function Je(t, e) {
        var n = new He(null, void 0);
        return qe(n, "https"), t && (n.b = t), e && (n.g = e), n;
      }

      function Ye(t, e) {
        return t ? e ? decodeURI(t.replace(/%25/g, "%2525")) : decodeURIComponent(t) : "";
      }

      function $e(t, e, n) {
        return o(t) ? (t = encodeURI(t).replace(e, Ze), n && (t = t.replace(/%25([0-9a-fA-F]{2})/g, "%$1")), t) : null;
      }

      function Ze(t) {
        return "%" + ((t = t.charCodeAt(0)) >> 4 & 15).toString(16) + (15 & t).toString(16);
      }

      He.prototype.toString = function () {
        var t = [],
            e = this.c;
        e && t.push($e(e, Qe, !0), ":");
        var n = this.b;
        return (n || "file" == e) && (t.push("//"), (e = this.m) && t.push($e(e, Qe, !0), "@"), t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g, "%$1")), null != (n = this.i) && t.push(":", String(n))), (n = this.g) && (this.b && "/" != n.charAt(0) && t.push("/"), t.push($e(n, "/" == n.charAt(0) ? en : tn, !0))), (n = this.a.toString()) && t.push("?", n), (n = this.h) && t.push("#", $e(n, rn)), t.join("");
      };

      var Qe = /[#\/\?@]/g,
          tn = /[#\?:]/g,
          en = /[#\?]/g,
          nn = /[#\?@]/g,
          rn = /#/g;

      function on(t, e) {
        this.b = this.a = null, this.c = t || null, this.f = !!e;
      }

      function an(t) {
        t.a || (t.a = new Ue(), t.b = 0, t.c && function (t, e) {
          if (t) {
            t = t.split("&");

            for (var n = 0; n < t.length; n++) {
              var i = t[n].indexOf("="),
                  r = null;

              if (0 <= i) {
                var o = t[n].substring(0, i);
                r = t[n].substring(i + 1);
              } else o = t[n];

              e(o, r ? decodeURIComponent(r.replace(/\+/g, " ")) : "");
            }
          }
        }(t.c, function (e, n) {
          t.add(decodeURIComponent(e.replace(/\+/g, " ")), n);
        }));
      }

      function sn(t) {
        var e = je(t);
        if (void 0 === e) throw Error("Keys are undefined");
        var n = new on(null, void 0);
        t = Me(t);

        for (var i = 0; i < e.length; i++) {
          var r = e[i],
              o = t[i];
          h(o) ? hn(n, r, o) : n.add(r, o);
        }

        return n;
      }

      function un(t, e) {
        an(t), e = fn(t, e), Fe(t.a.b, e) && (t.c = null, t.b -= t.a.get(e).length, Fe((t = t.a).b, e) && (delete t.b[e], t.c--, t.a.length > 2 * t.c && Ve(t)));
      }

      function cn(t, e) {
        return an(t), e = fn(t, e), Fe(t.a.b, e);
      }

      function hn(t, e, n) {
        un(t, e), 0 < n.length && (t.c = null, t.a.set(fn(t, e), K(n)), t.b += n.length);
      }

      function fn(t, e) {
        return e = String(e), t.f && (e = e.toLowerCase()), e;
      }

      (t = on.prototype).add = function (t, e) {
        an(this), this.c = null, t = fn(this, t);
        var n = this.a.get(t);
        return n || this.a.set(t, n = []), n.push(e), this.b += 1, this;
      }, t.clear = function () {
        this.a = this.c = null, this.b = 0;
      }, t.forEach = function (t, e) {
        an(this), this.a.forEach(function (n, i) {
          L(n, function (n) {
            t.call(e, n, i, this);
          }, this);
        }, this);
      }, t.U = function () {
        an(this);

        for (var t = this.a.S(), e = this.a.U(), n = [], i = 0; i < e.length; i++) {
          for (var r = t[i], o = 0; o < r.length; o++) {
            n.push(e[i]);
          }
        }

        return n;
      }, t.S = function (t) {
        an(this);
        var e = [];
        if (o(t)) cn(this, t) && (e = F(e, this.a.get(fn(this, t))));else {
          t = this.a.S();

          for (var n = 0; n < t.length; n++) {
            e = F(e, t[n]);
          }
        }
        return e;
      }, t.set = function (t, e) {
        return an(this), this.c = null, cn(this, t = fn(this, t)) && (this.b -= this.a.get(t).length), this.a.set(t, [e]), this.b += 1, this;
      }, t.get = function (t, e) {
        return 0 < (t = t ? this.S(t) : []).length ? String(t[0]) : e;
      }, t.toString = function () {
        if (this.c) return this.c;
        if (!this.a) return "";

        for (var t = [], e = this.a.U(), n = 0; n < e.length; n++) {
          var i = e[n],
              r = encodeURIComponent(String(i));
          i = this.S(i);

          for (var o = 0; o < i.length; o++) {
            var a = r;
            "" !== i[o] && (a += "=" + encodeURIComponent(String(i[o]))), t.push(a);
          }
        }

        return this.c = t.join("&");
      };
      var ln = !Wt || 9 <= Number(Qt);

      function dn() {
        this.a = "", this.b = vn;
      }

      function pn(t) {
        return t instanceof dn && t.constructor === dn && t.b === vn ? t.a : (k("expected object of type Const, got '" + t + "'"), "type_error:Const");
      }

      dn.prototype.ma = !0, dn.prototype.la = function () {
        return this.a;
      }, dn.prototype.toString = function () {
        return "Const{" + this.a + "}";
      };
      var vn = {};

      function mn(t) {
        var e = new dn();
        return e.a = t, e;
      }

      function gn() {
        this.a = "", this.b = Tn;
      }

      function bn(t) {
        return t instanceof gn && t.constructor === gn && t.b === Tn ? t.a : (k("expected object of type TrustedResourceUrl, got '" + t + "' of type " + u(t)), "type_error:TrustedResourceUrl");
      }

      function yn(t, e) {
        var n = pn(t);
        if (!In.test(n)) throw Error("Invalid TrustedResourceUrl format: " + n);
        return function (t) {
          var e = new gn();
          return e.a = t, e;
        }(t = n.replace(wn, function (t, i) {
          if (!Object.prototype.hasOwnProperty.call(e, i)) throw Error('Found marker, "' + i + '", in format string, "' + n + '", but no valid label mapping found in args: ' + JSON.stringify(e));
          return (t = e[i]) instanceof dn ? pn(t) : encodeURIComponent(String(t));
        }));
      }

      mn(""), gn.prototype.ma = !0, gn.prototype.la = function () {
        return this.a;
      }, gn.prototype.toString = function () {
        return "TrustedResourceUrl{" + this.a + "}";
      };
      var wn = /%{(\w+)}/g,
          In = /^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,
          Tn = {};

      function An() {
        this.a = "", this.b = Nn;
      }

      function En(t) {
        return t instanceof An && t.constructor === An && t.b === Nn ? t.a : (k("expected object of type SafeUrl, got '" + t + "' of type " + u(t)), "type_error:SafeUrl");
      }

      An.prototype.ma = !0, An.prototype.la = function () {
        return this.a;
      }, An.prototype.toString = function () {
        return "SafeUrl{" + this.a + "}";
      };
      var Sn = /^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;

      function kn(t) {
        return t instanceof An ? t : (t = t.ma ? t.la() : String(t), Sn.test(t) || (t = "about:invalid#zClosurez"), _n(t));
      }

      var Nn = {};

      function _n(t) {
        var e = new An();
        return e.a = t, e;
      }

      function On() {
        this.a = "", this.b = Pn;
      }

      _n("about:blank"), On.prototype.ma = !0, On.prototype.la = function () {
        return this.a;
      }, On.prototype.toString = function () {
        return "SafeHtml{" + this.a + "}";
      };
      var Pn = {};

      function Rn(t) {
        var e = new On();
        return e.a = t, e;
      }

      function Cn(t) {
        var e = document;
        return o(t) ? e.getElementById(t) : t;
      }

      function Dn(t, e) {
        rt(e, function (e, n) {
          e && e.ma && (e = e.la()), "style" == n ? t.style.cssText = e : "class" == n ? t.className = e : "for" == n ? t.htmlFor = e : Ln.hasOwnProperty(n) ? t.setAttribute(Ln[n], e) : 0 == n.lastIndexOf("aria-", 0) || 0 == n.lastIndexOf("data-", 0) ? t.setAttribute(n, e) : t[n] = e;
        });
      }

      Rn("<!DOCTYPE html>"), Rn(""), Rn("<br>");
      var Ln = {
        cellpadding: "cellPadding",
        cellspacing: "cellSpacing",
        colspan: "colSpan",
        frameborder: "frameBorder",
        height: "height",
        maxlength: "maxLength",
        nonce: "nonce",
        role: "role",
        rowspan: "rowSpan",
        type: "type",
        usemap: "useMap",
        valign: "vAlign",
        width: "width"
      };

      function xn(t, e, n) {
        var i = arguments,
            r = document,
            a = String(i[0]),
            s = i[1];

        if (!ln && s && (s.name || s.type)) {
          if (a = ["<", a], s.name && a.push(' name="', W(s.name), '"'), s.type) {
            a.push(' type="', W(s.type), '"');
            var u = {};
            ht(u, s), delete u.type, s = u;
          }

          a.push(">"), a = a.join("");
        }

        return a = r.createElement(a), s && (o(s) ? a.className = s : h(s) ? a.className = s.join(" ") : Dn(a, s)), 2 < i.length && function (t, e, n) {
          function i(n) {
            n && e.appendChild(o(n) ? t.createTextNode(n) : n);
          }

          for (var r = 2; r < n.length; r++) {
            var a = n[r];
            !f(a) || d(a) && 0 < a.nodeType ? i(a) : L(Mn(a) ? K(a) : a, i);
          }
        }(r, a, i), a;
      }

      function Mn(t) {
        if (t && "number" == typeof t.length) {
          if (d(t)) return "function" == typeof t.item || "string" == typeof t.item;
          if (l(t)) return "function" == typeof t.item;
        }

        return !1;
      }

      function jn(t) {
        var e = [];
        return function t(e, n, i) {
          if (null == n) i.push("null");else {
            if ("object" == _typeof(n)) {
              if (h(n)) {
                var r = n;
                n = r.length, i.push("[");

                for (var o = "", a = 0; a < n; a++) {
                  i.push(o), t(e, r[a], i), o = ",";
                }

                return void i.push("]");
              }

              if (!(n instanceof String || n instanceof Number || n instanceof Boolean)) {
                for (r in i.push("{"), o = "", n) {
                  Object.prototype.hasOwnProperty.call(n, r) && "function" != typeof (a = n[r]) && (i.push(o), Fn(r, i), i.push(":"), t(e, a, i), o = ",");
                }

                return void i.push("}");
              }

              n = n.valueOf();
            }

            switch (_typeof(n)) {
              case "string":
                Fn(n, i);
                break;

              case "number":
                i.push(isFinite(n) && !isNaN(n) ? String(n) : "null");
                break;

              case "boolean":
                i.push(String(n));
                break;

              case "function":
                i.push("null");
                break;

              default:
                throw Error("Unknown type: " + _typeof(n));
            }
          }
        }(new function () {}(), t, e), e.join("");
      }

      var Un = {
        '"': '\\"',
        "\\": "\\\\",
        "/": "\\/",
        "\b": "\\b",
        "\f": "\\f",
        "\n": "\\n",
        "\r": "\\r",
        "\t": "\\t",
        "\v": "\\u000b"
      },
          Vn = /\uffff/.test("￿") ? /[\\"\x00-\x1f\x7f-\uffff]/g : /[\\"\x00-\x1f\x7f-\xff]/g;

      function Fn(t, e) {
        e.push('"', t.replace(Vn, function (t) {
          var e = Un[t];
          return e || (e = "\\u" + (65536 | t.charCodeAt(0)).toString(16).substr(1), Un[t] = e), e;
        }), '"');
      }

      function Kn() {
        var t = oi();
        return Wt && !!Qt && 11 == Qt || /Edge\/\d+/.test(t);
      }

      function Hn() {
        return r.window && r.window.location.href || self && self.location && self.location.href || "";
      }

      function qn(t, e) {
        e = e || r.window;
        var n = "about:blank";
        t && (n = En(kn(t))), e.location.href = n;
      }

      function Wn(t) {
        return !!((t = (t || oi()).toLowerCase()).match(/android/) || t.match(/webos/) || t.match(/iphone|ipad|ipod/) || t.match(/blackberry/) || t.match(/windows phone/) || t.match(/iemobile/));
      }

      function Gn(t) {
        t = t || r.window;

        try {
          t.close();
        } catch (t) {}
      }

      function Bn(t, e, n) {
        var i = Math.floor(1e9 * Math.random()).toString();
        e = e || 500, n = n || 600;
        var r = (window.screen.availHeight - n) / 2,
            o = (window.screen.availWidth - e) / 2;

        for (a in e = {
          width: e,
          height: n,
          top: 0 < r ? r : 0,
          left: 0 < o ? o : 0,
          location: !0,
          resizable: !0,
          statusbar: !0,
          toolbar: !1
        }, n = oi().toLowerCase(), i && (e.target = i, Q(n, "crios/") && (e.target = "_blank")), ni(oi()) == ti && (t = t || "http://localhost", e.scrollbars = !0), n = t || "", (t = e) || (t = {}), i = window, e = n instanceof An ? n : kn(void 0 !== n.href ? n.href : String(n)), n = t.target || n.target, r = [], t) {
          switch (a) {
            case "width":
            case "height":
            case "top":
            case "left":
              r.push(a + "=" + t[a]);
              break;

            case "target":
            case "noopener":
            case "noreferrer":
              break;

            default:
              r.push(a + "=" + (t[a] ? 1 : 0));
          }
        }

        var a = r.join(",");
        if ((it("iPhone") && !it("iPod") && !it("iPad") || it("iPad") || it("iPod")) && i.navigator && i.navigator.standalone && n && "_self" != n ? (a = i.document.createElement("A"), e instanceof An || e instanceof An || (e = e.ma ? e.la() : String(e), Sn.test(e) || (e = "about:invalid#zClosurez"), e = _n(e)), a.href = En(e), a.setAttribute("target", n), t.noreferrer && a.setAttribute("rel", "noreferrer"), (t = document.createEvent("MouseEvent")).initMouseEvent("click", !0, !0, i, 1), a.dispatchEvent(t), a = {}) : t.noreferrer ? (a = i.open("", n, a), t = En(e), a && (Bt && Q(t, ";") && (t = "'" + t.replace(/'/g, "%27") + "'"), a.opener = null, mn("b/12014412, meta tag with sanitized URL"), t = Rn(t = '<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url=' + W(t) + '">'), a.document.write(function (t) {
          return t instanceof On && t.constructor === On && t.b === Pn ? t.a : (k("expected object of type SafeHtml, got '" + t + "' of type " + u(t)), "type_error:SafeHtml");
        }(t)), a.document.close())) : (a = i.open(En(e), n, a)) && t.noopener && (a.opener = null), a) try {
          a.focus();
        } catch (t) {}
        return a;
      }

      var Xn = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;

      function zn() {
        var t = null;
        return new mt(function (e) {
          "complete" == r.document.readyState ? e() : (t = function t() {
            e();
          }, we(window, "load", t));
        }).s(function (e) {
          throw Ie(window, "load", t), e;
        });
      }

      function Jn(t) {
        return t = t || oi(), !("file:" !== hi() || !t.toLowerCase().match(/iphone|ipad|ipod|android/));
      }

      function Yn() {
        var t = r.window;

        try {
          return !(!t || t == t.top);
        } catch (t) {
          return !1;
        }
      }

      function $n() {
        return "object" != _typeof(r.window) && "function" == typeof r.importScripts;
      }

      function Zn() {
        return n.INTERNAL.hasOwnProperty("reactNative") ? "ReactNative" : n.INTERNAL.hasOwnProperty("node") ? "Node" : $n() ? "Worker" : "Browser";
      }

      function Qn() {
        var t = Zn();
        return "ReactNative" === t || "Node" === t;
      }

      var ti = "Firefox",
          ei = "Chrome";

      function ni(t) {
        var e = t.toLowerCase();
        return Q(e, "opera/") || Q(e, "opr/") || Q(e, "opios/") ? "Opera" : Q(e, "iemobile") ? "IEMobile" : Q(e, "msie") || Q(e, "trident/") ? "IE" : Q(e, "edge/") ? "Edge" : Q(e, "firefox/") ? ti : Q(e, "silk/") ? "Silk" : Q(e, "blackberry") ? "Blackberry" : Q(e, "webos") ? "Webos" : !Q(e, "safari/") || Q(e, "chrome/") || Q(e, "crios/") || Q(e, "android") ? !Q(e, "chrome/") && !Q(e, "crios/") || Q(e, "edge/") ? Q(e, "android") ? "Android" : (t = t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/)) && 2 == t.length ? t[1] : "Other" : ei : "Safari";
      }

      var ii = {
        Sc: "FirebaseCore-web",
        Uc: "FirebaseUI-web"
      };

      function ri(t, e) {
        e = e || [];
        var n,
            i = [],
            r = {};

        for (n in ii) {
          r[ii[n]] = !0;
        }

        for (n = 0; n < e.length; n++) {
          void 0 !== r[e[n]] && (delete r[e[n]], i.push(e[n]));
        }

        return i.sort(), (e = i).length || (e = ["FirebaseCore-web"]), "Browser" === (i = Zn()) ? i = ni(r = oi()) : "Worker" === i && (i = ni(r = oi()) + "-" + i), i + "/JsCore/" + t + "/" + e.join(",");
      }

      function oi() {
        return r.navigator && r.navigator.userAgent || "";
      }

      function ai(t, e) {
        t = t.split("."), e = e || r;

        for (var n = 0; n < t.length && "object" == _typeof(e) && null != e; n++) {
          e = e[t[n]];
        }

        return n != t.length && (e = void 0), e;
      }

      function si() {
        try {
          var t = r.localStorage,
              e = vi();
          if (t) return t.setItem(e, "1"), t.removeItem(e), !Kn() || !!r.indexedDB;
        } catch (t) {
          return $n() && !!r.indexedDB;
        }

        return !1;
      }

      function ui() {
        return (ci() || "chrome-extension:" === hi() || Jn()) && !Qn() && si() && !$n();
      }

      function ci() {
        return "http:" === hi() || "https:" === hi();
      }

      function hi() {
        return r.location && r.location.protocol || null;
      }

      function fi(t) {
        return !Wn(t = t || oi()) && ni(t) != ti;
      }

      function li(t) {
        return void 0 === t ? null : jn(t);
      }

      function di(t) {
        var e,
            n = {};

        for (e in t) {
          t.hasOwnProperty(e) && null !== t[e] && void 0 !== t[e] && (n[e] = t[e]);
        }

        return n;
      }

      function pi(t) {
        if (null !== t) return JSON.parse(t);
      }

      function vi(t) {
        return t || Math.floor(1e9 * Math.random()).toString();
      }

      function mi(t) {
        return "Safari" != ni(t = t || oi()) && !t.toLowerCase().match(/iphone|ipad|ipod/);
      }

      function gi() {
        var t = r.___jsl;
        if (t && t.H) for (var e in t.H) {
          if (t.H[e].r = t.H[e].r || [], t.H[e].L = t.H[e].L || [], t.H[e].r = t.H[e].L.concat(), t.CP) for (var n = 0; n < t.CP.length; n++) {
            t.CP[n] = null;
          }
        }
      }

      function bi(t, e) {
        if (t > e) throw Error("Short delay should be less than long delay!");
        this.a = t, this.c = e, t = oi(), e = Zn(), this.b = Wn(t) || "ReactNative" === e;
      }

      function yi() {
        var t = r.document;
        return !t || void 0 === t.visibilityState || "visible" == t.visibilityState;
      }

      function wi(t) {
        try {
          var e = new Date(parseInt(t, 10));
          if (!isNaN(e.getTime()) && !/[^0-9]/.test(t)) return e.toUTCString();
        } catch (t) {}

        return null;
      }

      function Ii() {
        return !(!ai("fireauth.oauthhelper", r) && !ai("fireauth.iframe", r));
      }

      bi.prototype.get = function () {
        var t = r.navigator;
        return !t || "boolean" != typeof t.onLine || !ci() && "chrome-extension:" !== hi() && void 0 === t.connection || t.onLine ? this.b ? this.c : this.a : Math.min(5e3, this.a);
      };

      var Ti,
          Ai = {};

      function Ei(t) {
        Ai[t] || (Ai[t] = !0, "undefined" != typeof console && "function" == typeof console.warn && console.warn(t));
      }

      try {
        var Si = {};
        Object.defineProperty(Si, "abcd", {
          configurable: !0,
          enumerable: !0,
          value: 1
        }), Object.defineProperty(Si, "abcd", {
          configurable: !0,
          enumerable: !0,
          value: 2
        }), Ti = 2 == Si.abcd;
      } catch (Ht) {
        Ti = !1;
      }

      function ki(t, e, n) {
        Ti ? Object.defineProperty(t, e, {
          configurable: !0,
          enumerable: !0,
          value: n
        }) : t[e] = n;
      }

      function Ni(t, e) {
        if (e) for (var n in e) {
          e.hasOwnProperty(n) && ki(t, n, e[n]);
        }
      }

      function _i(t) {
        var e = {};
        return Ni(e, t), e;
      }

      function Oi(t) {
        var e = t;
        if ("object" == _typeof(t) && null != t) for (var n in e = "length" in t ? [] : {}, t) {
          ki(e, n, Oi(t[n]));
        }
        return e;
      }

      var Pi = "EMAIL_SIGNIN",
          Ri = "email",
          Ci = "newEmail",
          Di = "requestType",
          Li = "email",
          xi = "fromEmail",
          Mi = "data",
          ji = "operation";

      function Ui(t, e) {
        this.code = Fi + t, this.message = e || Ki[t] || "";
      }

      function Vi(t) {
        var e = t && t.code;
        return e ? new Ui(e.substring(Fi.length), t.message) : null;
      }

      I(Ui, Error), Ui.prototype.D = function () {
        return {
          code: this.code,
          message: this.message
        };
      }, Ui.prototype.toJSON = function () {
        return this.D();
      };
      var Fi = "auth/",
          Ki = {
        "argument-error": "",
        "app-not-authorized": "This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",
        "app-not-installed": "The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",
        "captcha-check-failed": "The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",
        "code-expired": "The SMS code has expired. Please re-send the verification code to try again.",
        "cordova-not-ready": "Cordova framework is not ready.",
        "cors-unsupported": "This browser is not supported.",
        "credential-already-in-use": "This credential is already associated with a different user account.",
        "custom-token-mismatch": "The custom token corresponds to a different audience.",
        "requires-recent-login": "This operation is sensitive and requires recent authentication. Log in again before retrying this request.",
        "dynamic-link-not-activated": "Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",
        "email-already-in-use": "The email address is already in use by another account.",
        "expired-action-code": "The action code has expired. ",
        "cancelled-popup-request": "This operation has been cancelled due to another conflicting popup being opened.",
        "internal-error": "An internal error has occurred.",
        "invalid-app-credential": "The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",
        "invalid-app-id": "The mobile app identifier is not registed for the current project.",
        "invalid-user-token": "This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",
        "invalid-auth-event": "An internal error has occurred.",
        "invalid-verification-code": "The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.",
        "invalid-continue-uri": "The continue URL provided in the request is invalid.",
        "invalid-cordova-configuration": "The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",
        "invalid-custom-token": "The custom token format is incorrect. Please check the documentation.",
        "invalid-email": "The email address is badly formatted.",
        "invalid-api-key": "Your API key is invalid, please check you have copied it correctly.",
        "invalid-cert-hash": "The SHA-1 certificate hash provided is invalid.",
        "invalid-credential": "The supplied auth credential is malformed or has expired.",
        "invalid-persistence-type": "The specified persistence type is invalid. It can only be local, session or none.",
        "invalid-message-payload": "The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",
        "invalid-oauth-provider": "EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",
        "invalid-oauth-client-id": "The OAuth client ID provided is either invalid or does not match the specified API key.",
        "unauthorized-domain": "This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",
        "invalid-action-code": "The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",
        "wrong-password": "The password is invalid or the user does not have a password.",
        "invalid-phone-number": "The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",
        "invalid-recipient-email": "The email corresponding to this action failed to send as the provided recipient email address is invalid.",
        "invalid-sender": "The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",
        "invalid-verification-id": "The verification ID used to create the phone auth credential is invalid.",
        "missing-android-pkg-name": "An Android Package Name must be provided if the Android App is required to be installed.",
        "auth-domain-config-required": "Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",
        "missing-app-credential": "The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",
        "missing-verification-code": "The phone auth credential was created with an empty SMS verification code.",
        "missing-continue-uri": "A continue URL must be provided in the request.",
        "missing-iframe-start": "An internal error has occurred.",
        "missing-ios-bundle-id": "An iOS Bundle ID must be provided if an App Store ID is provided.",
        "missing-phone-number": "To send verification codes, provide a phone number for the recipient.",
        "missing-verification-id": "The phone auth credential was created with an empty verification ID.",
        "app-deleted": "This instance of FirebaseApp has been deleted.",
        "account-exists-with-different-credential": "An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",
        "network-request-failed": "A network error (such as timeout, interrupted connection or unreachable host) has occurred.",
        "no-auth-event": "An internal error has occurred.",
        "no-such-provider": "User was not linked to an account with the given provider.",
        "null-user": "A null user object was provided as the argument for an operation which requires a non-null user object.",
        "operation-not-allowed": "The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",
        "operation-not-supported-in-this-environment": 'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',
        "popup-blocked": "Unable to establish a connection with the popup. It may have been blocked by the browser.",
        "popup-closed-by-user": "The popup has been closed by the user before finalizing the operation.",
        "provider-already-linked": "User can only be linked to one identity for the given provider.",
        "quota-exceeded": "The project's quota for this operation has been exceeded.",
        "redirect-cancelled-by-user": "The redirect operation has been cancelled by the user before finalizing.",
        "redirect-operation-pending": "A redirect sign-in operation is already pending.",
        timeout: "The operation has timed out.",
        "user-token-expired": "The user's credential is no longer valid. The user must sign in again.",
        "too-many-requests": "We have blocked all requests from this device due to unusual activity. Try again later.",
        "unauthorized-continue-uri": "The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",
        "unsupported-persistence-type": "The current environment does not support the specified persistence type.",
        "user-cancelled": "User did not grant your application the permissions it requested.",
        "user-not-found": "There is no user record corresponding to this identifier. The user may have been deleted.",
        "user-disabled": "The user account has been disabled by an administrator.",
        "user-mismatch": "The supplied credentials do not correspond to the previously signed in user.",
        "user-signed-out": "",
        "weak-password": "The password must be 6 characters long or more.",
        "web-storage-unsupported": "This browser is not supported or 3rd party cookies and data may be disabled."
      };

      function Hi(t) {
        var e = t[Bi];
        if (void 0 === e) throw new Ui("missing-continue-uri");
        if ("string" != typeof e || "string" == typeof e && !e.length) throw new Ui("invalid-continue-uri");
        this.h = e, this.b = this.a = null, this.g = !1;
        var n = t[qi];

        if (n && "object" == _typeof(n)) {
          e = n[Ji];
          var i = n[Xi];

          if (n = n[zi], "string" == typeof e && e.length) {
            if (this.a = e, void 0 !== i && "boolean" != typeof i) throw new Ui("argument-error", Xi + " property must be a boolean when specified.");
            if (this.g = !!i, void 0 !== n && ("string" != typeof n || "string" == typeof n && !n.length)) throw new Ui("argument-error", zi + " property must be a non empty string when specified.");
            this.b = n || null;
          } else {
            if (void 0 !== e) throw new Ui("argument-error", Ji + " property must be a non empty string when specified.");
            if (void 0 !== i || void 0 !== n) throw new Ui("missing-android-pkg-name");
          }
        } else if (void 0 !== n) throw new Ui("argument-error", qi + " property must be a non null object when specified.");

        if (this.f = null, (e = t[Gi]) && "object" == _typeof(e)) {
          if ("string" == typeof (e = e[Yi]) && e.length) this.f = e;else if (void 0 !== e) throw new Ui("argument-error", Yi + " property must be a non empty string when specified.");
        } else if (void 0 !== e) throw new Ui("argument-error", Gi + " property must be a non null object when specified.");

        if (void 0 !== (t = t[Wi]) && "boolean" != typeof t) throw new Ui("argument-error", Wi + " property must be a boolean when specified.");
        this.c = !!t;
      }

      var qi = "android",
          Wi = "handleCodeInApp",
          Gi = "iOS",
          Bi = "url",
          Xi = "installApp",
          zi = "minimumVersion",
          Ji = "packageName",
          Yi = "bundleId";

      function $i(t) {
        var e = {};

        for (var n in e.continueUrl = t.h, e.canHandleCodeInApp = t.c, (e.androidPackageName = t.a) && (e.androidMinimumVersion = t.b, e.androidInstallApp = t.g), e.iOSBundleId = t.f, e) {
          null === e[n] && delete e[n];
        }

        return e;
      }

      var Zi = null,
          Qi = null;

      function tr(t) {
        var e = "";
        return function (t, e) {
          function n(e) {
            for (; i < t.length;) {
              var n = t.charAt(i++),
                  r = Qi[n];
              if (null != r) return r;
              if (!/^[\s\xa0]*$/.test(n)) throw Error("Unknown base64 encoding at char: " + n);
            }

            return e;
          }

          !function () {
            if (!Zi) {
              Zi = {}, Qi = {};

              for (var t = 0; 65 > t; t++) {
                Zi[t] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t), Qi[Zi[t]] = t, 62 <= t && (Qi["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)] = t);
              }
            }
          }();

          for (var i = 0;;) {
            var r = n(-1),
                o = n(0),
                a = n(64),
                s = n(64);
            if (64 === s && -1 === r) break;
            e(r << 2 | o >> 4), 64 != a && (e(o << 4 & 240 | a >> 2), 64 != s && e(a << 6 & 192 | s));
          }
        }(t, function (t) {
          e += String.fromCharCode(t);
        }), e;
      }

      function er(t) {
        this.c = t.sub, this.a = t.provider_id || t.firebase && t.firebase.sign_in_provider || null, this.b = !!t.is_anonymous || "anonymous" == this.a;
      }

      function nr(t) {
        return (t = ir(t)) && t.sub && t.iss && t.aud && t.exp ? new er(t) : null;
      }

      function ir(t) {
        if (!t) return null;
        if (3 != (t = t.split(".")).length) return null;

        for (var e = (4 - (t = t[1]).length % 4) % 4, n = 0; n < e; n++) {
          t += ".";
        }

        try {
          return JSON.parse(tr(t));
        } catch (t) {}

        return null;
      }

      er.prototype.f = function () {
        return this.b;
      };

      var rr = "oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),
          or = ["client_id", "response_type", "scope", "redirect_uri", "state"],
          ar = {
        Tc: {
          Ma: "locale",
          Ba: 500,
          Aa: 600,
          Na: "facebook.com",
          eb: or
        },
        Vc: {
          Ma: null,
          Ba: 500,
          Aa: 620,
          Na: "github.com",
          eb: or
        },
        Wc: {
          Ma: "hl",
          Ba: 515,
          Aa: 680,
          Na: "google.com",
          eb: or
        },
        bd: {
          Ma: "lang",
          Ba: 485,
          Aa: 705,
          Na: "twitter.com",
          eb: rr
        }
      };

      function sr(t) {
        for (var e in ar) {
          if (ar[e].Na == t) return ar[e];
        }

        return null;
      }

      function ur(t) {
        var e = {};
        e["facebook.com"] = dr, e["google.com"] = vr, e["github.com"] = pr, e["twitter.com"] = mr;
        var n = t && t[hr];

        try {
          if (n) return e[n] ? new e[n](t) : new lr(t);
          if (void 0 !== t[cr]) return new fr(t);
        } catch (t) {}

        return null;
      }

      var cr = "idToken",
          hr = "providerId";

      function fr(t) {
        var e = t[hr];

        if (!e && t[cr]) {
          var n = nr(t[cr]);
          n && n.a && (e = n.a);
        }

        if (!e) throw Error("Invalid additional user info!");
        "anonymous" != e && "custom" != e || (e = null), n = !1, void 0 !== t.isNewUser ? n = !!t.isNewUser : "identitytoolkit#SignupNewUserResponse" === t.kind && (n = !0), ki(this, "providerId", e), ki(this, "isNewUser", n);
      }

      function lr(t) {
        fr.call(this, t), ki(this, "profile", Oi((t = pi(t.rawUserInfo || "{}")) || {}));
      }

      function dr(t) {
        if (lr.call(this, t), "facebook.com" != this.providerId) throw Error("Invalid provider ID!");
      }

      function pr(t) {
        if (lr.call(this, t), "github.com" != this.providerId) throw Error("Invalid provider ID!");
        ki(this, "username", this.profile && this.profile.login || null);
      }

      function vr(t) {
        if (lr.call(this, t), "google.com" != this.providerId) throw Error("Invalid provider ID!");
      }

      function mr(t) {
        if (lr.call(this, t), "twitter.com" != this.providerId) throw Error("Invalid provider ID!");
        ki(this, "username", t.screenName || null);
      }

      function gr(t) {
        var e = ze(t),
            n = Xe(e, "link"),
            i = Xe(ze(n), "link");
        return Xe(ze(e = Xe(e, "deep_link_id")), "link") || e || i || n || t;
      }

      function br(t, e) {
        return t.then(function (t) {
          if (t[Zo]) {
            var n = nr(t[Zo]);
            if (!n || e != n.c) throw new Ui("user-mismatch");
            return t;
          }

          throw new Ui("user-mismatch");
        }).s(function (t) {
          throw t && t.code && t.code == Fi + "user-not-found" ? new Ui("user-mismatch") : t;
        });
      }

      function yr(t, e, n) {
        if (e.idToken || e.accessToken) e.idToken && ki(this, "idToken", e.idToken), e.accessToken && ki(this, "accessToken", e.accessToken);else {
          if (!e.oauthToken || !e.oauthTokenSecret) throw new Ui("internal-error", "failed to construct a credential");
          ki(this, "accessToken", e.oauthToken), ki(this, "secret", e.oauthTokenSecret);
        }
        ki(this, "providerId", t), ki(this, "signInMethod", n);
      }

      function wr(t) {
        var e = {};
        return t.idToken && (e.id_token = t.idToken), t.accessToken && (e.access_token = t.accessToken), t.secret && (e.oauth_token_secret = t.secret), e.providerId = t.providerId, {
          postBody: sn(e).toString(),
          requestUri: "http://localhost"
        };
      }

      function Ir(t, e) {
        this.Ac = e || [], Ni(this, {
          providerId: t,
          isOAuthProvider: !0
        }), this.vb = {}, this.$a = (sr(t) || {}).Ma || null, this.Ya = null;
      }

      function Tr(t) {
        Ir.call(this, t, or), this.a = [];
      }

      function Ar() {
        Tr.call(this, "facebook.com");
      }

      function Er(t) {
        if (!t) throw new Ui("argument-error", "credential failed: expected 1 argument (the OAuth access token).");
        var e = t;
        return d(t) && (e = t.accessToken), new Ar().credential(null, e);
      }

      function Sr() {
        Tr.call(this, "github.com");
      }

      function kr(t) {
        if (!t) throw new Ui("argument-error", "credential failed: expected 1 argument (the OAuth access token).");
        var e = t;
        return d(t) && (e = t.accessToken), new Sr().credential(null, e);
      }

      function Nr() {
        Tr.call(this, "google.com"), this.ta("profile");
      }

      function _r(t, e) {
        var n = t;
        return d(t) && (n = t.idToken, e = t.accessToken), new Nr().credential(n, e);
      }

      function Or() {
        Ir.call(this, "twitter.com", rr);
      }

      function Pr(t, e) {
        var n = t;
        if (d(n) || (n = {
          oauthToken: t,
          oauthTokenSecret: e
        }), !n.oauthToken || !n.oauthTokenSecret) throw new Ui("argument-error", "credential failed: expected 2 arguments (the OAuth access token and secret).");
        return new yr("twitter.com", n, "twitter.com");
      }

      function Rr(t, e, n) {
        this.a = t, this.b = e, ki(this, "providerId", "password"), ki(this, "signInMethod", n === Cr.EMAIL_LINK_SIGN_IN_METHOD ? Cr.EMAIL_LINK_SIGN_IN_METHOD : Cr.EMAIL_PASSWORD_SIGN_IN_METHOD);
      }

      function Cr() {
        Ni(this, {
          providerId: "password",
          isOAuthProvider: !1
        });
      }

      function Dr(t, e) {
        if (!(e = Lr(e))) throw new Ui("argument-error", "Invalid email link!");
        return new Rr(t, e, Cr.EMAIL_LINK_SIGN_IN_METHOD);
      }

      function Lr(t) {
        var e = Xe((t = new function (t) {
          this.a = ze(t);
        }(t = gr(t))).a, "oobCode") || null;
        return "signIn" === (Xe(t.a, "mode") || null) && e ? e : null;
      }

      function xr(t) {
        if (!(t.Sa && t.Ra || t.Fa && t.$)) throw new Ui("internal-error");
        this.a = t, ki(this, "providerId", "phone"), ki(this, "signInMethod", "phone");
      }

      function Mr(t) {
        return t.a.Fa && t.a.$ ? {
          temporaryProof: t.a.Fa,
          phoneNumber: t.a.$
        } : {
          sessionInfo: t.a.Sa,
          code: t.a.Ra
        };
      }

      function jr(t) {
        try {
          this.a = t || n.auth();
        } catch (t) {
          throw new Ui("argument-error", "Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().");
        }

        Ni(this, {
          providerId: "phone",
          isOAuthProvider: !1
        });
      }

      function Ur(t, e) {
        if (!t) throw new Ui("missing-verification-id");
        if (!e) throw new Ui("missing-verification-code");
        return new xr({
          Sa: t,
          Ra: e
        });
      }

      function Vr(t) {
        if (t.temporaryProof && t.phoneNumber) return new xr({
          Fa: t.temporaryProof,
          $: t.phoneNumber
        });
        var e = t && t.providerId;
        if (!e || "password" === e) return null;
        var n = t && t.oauthAccessToken,
            i = t && t.oauthTokenSecret;
        t = t && t.oauthIdToken;

        try {
          switch (e) {
            case "google.com":
              return _r(t, n);

            case "facebook.com":
              return Er(n);

            case "github.com":
              return kr(n);

            case "twitter.com":
              return Pr(n, i);

            default:
              return new Tr(e).credential(t, n);
          }
        } catch (t) {
          return null;
        }
      }

      function Fr(t) {
        if (!t.isOAuthProvider) throw new Ui("invalid-oauth-provider");
      }

      function Kr(t, e, n, i, r) {
        if (this.b = t, this.c = e || null, this.f = n || null, this.g = i || null, this.a = r || null, !this.f && !this.a) throw new Ui("invalid-auth-event");
        if (this.f && this.a) throw new Ui("invalid-auth-event");
        if (this.f && !this.g) throw new Ui("invalid-auth-event");
      }

      function Hr(t) {
        return (t = t || {}).type ? new Kr(t.type, t.eventId, t.urlResponse, t.sessionId, t.error && Vi(t.error)) : null;
      }

      function qr() {
        this.b = null, this.a = [];
      }

      I(lr, fr), I(dr, lr), I(pr, lr), I(vr, lr), I(mr, lr), yr.prototype.ya = function (t) {
        return va(t, wr(this));
      }, yr.prototype.c = function (t, e) {
        var n = wr(this);
        return n.idToken = e, ma(t, n);
      }, yr.prototype.f = function (t, e) {
        return br(ga(t, wr(this)), e);
      }, yr.prototype.D = function () {
        var t = {
          providerId: this.providerId,
          signInMethod: this.signInMethod
        };
        return this.idToken && (t.oauthIdToken = this.idToken), this.accessToken && (t.oauthAccessToken = this.accessToken), this.secret && (t.oauthTokenSecret = this.secret), t;
      }, Ir.prototype.Da = function (t) {
        return this.vb = at(t), this;
      }, I(Tr, Ir), Tr.prototype.ta = function (t) {
        return j(this.a, t) || this.a.push(t), this;
      }, Tr.prototype.Ab = function () {
        return K(this.a);
      }, Tr.prototype.credential = function (t, e) {
        if (!t && !e) throw new Ui("argument-error", "credential failed: must provide the ID token and/or the access token.");
        return new yr(this.providerId, {
          idToken: t || null,
          accessToken: e || null
        }, this.providerId);
      }, I(Ar, Tr), ki(Ar, "PROVIDER_ID", "facebook.com"), ki(Ar, "FACEBOOK_SIGN_IN_METHOD", "facebook.com"), I(Sr, Tr), ki(Sr, "PROVIDER_ID", "github.com"), ki(Sr, "GITHUB_SIGN_IN_METHOD", "github.com"), I(Nr, Tr), ki(Nr, "PROVIDER_ID", "google.com"), ki(Nr, "GOOGLE_SIGN_IN_METHOD", "google.com"), I(Or, Ir), ki(Or, "PROVIDER_ID", "twitter.com"), ki(Or, "TWITTER_SIGN_IN_METHOD", "twitter.com"), Rr.prototype.ya = function (t) {
        return this.signInMethod == Cr.EMAIL_LINK_SIGN_IN_METHOD ? Ba(t, Sa, {
          email: this.a,
          oobCode: this.b
        }) : Ba(t, Ha, {
          email: this.a,
          password: this.b
        });
      }, Rr.prototype.c = function (t, e) {
        return this.signInMethod == Cr.EMAIL_LINK_SIGN_IN_METHOD ? Ba(t, ka, {
          idToken: e,
          email: this.a,
          oobCode: this.b
        }) : Ba(t, Ma, {
          idToken: e,
          email: this.a,
          password: this.b
        });
      }, Rr.prototype.f = function (t, e) {
        return br(this.ya(t), e);
      }, Rr.prototype.D = function () {
        return {
          email: this.a,
          password: this.b,
          signInMethod: this.signInMethod
        };
      }, Ni(Cr, {
        PROVIDER_ID: "password"
      }), Ni(Cr, {
        EMAIL_LINK_SIGN_IN_METHOD: "emailLink"
      }), Ni(Cr, {
        EMAIL_PASSWORD_SIGN_IN_METHOD: "password"
      }), xr.prototype.ya = function (t) {
        return t.Ta(Mr(this));
      }, xr.prototype.c = function (t, e) {
        var n = Mr(this);
        return n.idToken = e, Ba(t, Wa, n);
      }, xr.prototype.f = function (t, e) {
        var n = Mr(this);
        return n.operation = "REAUTH", br(t = Ba(t, Ga, n), e);
      }, xr.prototype.D = function () {
        var t = {
          providerId: "phone"
        };
        return this.a.Sa && (t.verificationId = this.a.Sa), this.a.Ra && (t.verificationCode = this.a.Ra), this.a.Fa && (t.temporaryProof = this.a.Fa), this.a.$ && (t.phoneNumber = this.a.$), t;
      }, jr.prototype.Ta = function (t, e) {
        var n = this.a.b;
        return At(e.verify()).then(function (i) {
          if (!o(i)) throw new Ui("argument-error", "An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");

          switch (e.type) {
            case "recaptcha":
              return function (t, e) {
                return Ba(t, La, e);
              }(n, {
                phoneNumber: t,
                recaptchaToken: i
              }).then(function (t) {
                return "function" == typeof e.reset && e.reset(), t;
              }, function (t) {
                throw "function" == typeof e.reset && e.reset(), t;
              });

            default:
              throw new Ui("argument-error", 'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');
          }
        });
      }, Ni(jr, {
        PROVIDER_ID: "phone"
      }), Ni(jr, {
        PHONE_SIGN_IN_METHOD: "phone"
      }), Kr.prototype.D = function () {
        return {
          type: this.b,
          eventId: this.c,
          urlResponse: this.f,
          sessionId: this.g,
          error: this.a && this.a.D()
        };
      };
      var Wr = null;

      function Gr(t) {
        var e = "unauthorized-domain",
            n = void 0,
            i = ze(t);
        t = i.b, "chrome-extension" == (i = i.c) ? n = H("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.", t) : "http" == i || "https" == i ? n = H("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.", t) : e = "operation-not-supported-in-this-environment", Ui.call(this, e, n);
      }

      function Br(t, e, n) {
        Ui.call(this, t, n), (t = e || {}).wb && ki(this, "email", t.wb), t.$ && ki(this, "phoneNumber", t.$), t.credential && ki(this, "credential", t.credential);
      }

      function Xr(t) {
        if (t.code) {
          var e = t.code || "";
          0 == e.indexOf(Fi) && (e = e.substring(Fi.length));
          var n = {
            credential: Vr(t)
          };
          if (t.email) n.wb = t.email;else {
            if (!t.phoneNumber) return new Ui(e, t.message || void 0);
            n.$ = t.phoneNumber;
          }
          return new Br(e, n, t.message);
        }

        return null;
      }

      qr.prototype.subscribe = function (t) {
        var e = this;
        this.a.push(t), this.b || (this.b = function (t) {
          for (var n = 0; n < e.a.length; n++) {
            e.a[n](t);
          }
        }, "function" == typeof (t = ai("universalLinks.subscribe", r)) && t(null, this.b));
      }, qr.prototype.unsubscribe = function (t) {
        V(this.a, function (e) {
          return e == t;
        });
      }, I(Gr, Ui), I(Br, Ui), Br.prototype.D = function () {
        var t = {
          code: this.code,
          message: this.message
        };
        this.email && (t.email = this.email), this.phoneNumber && (t.phoneNumber = this.phoneNumber);
        var e = this.credential && this.credential.D();
        return e && ht(t, e), t;
      }, Br.prototype.toJSON = function () {
        return this.D();
      };
      var zr,
          Jr = /^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;

      function Yr() {}

      function $r(t) {
        return t.c || (t.c = t.b());
      }

      function Zr() {}

      function Qr(t) {
        if (!t.f && "undefined" == typeof XMLHttpRequest && "undefined" != typeof ActiveXObject) {
          for (var e = ["MSXML2.XMLHTTP.6.0", "MSXML2.XMLHTTP.3.0", "MSXML2.XMLHTTP", "Microsoft.XMLHTTP"], n = 0; n < e.length; n++) {
            var i = e[n];

            try {
              return new ActiveXObject(i), t.f = i;
            } catch (t) {}
          }

          throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");
        }

        return t.f;
      }

      function to() {}

      function eo() {
        this.a = new XDomainRequest(), this.readyState = 0, this.onreadystatechange = null, this.responseText = "", this.status = -1, this.statusText = "", this.a.onload = b(this.bc, this), this.a.onerror = b(this.Bb, this), this.a.onprogress = b(this.cc, this), this.a.ontimeout = b(this.fc, this);
      }

      function no(t, e) {
        t.readyState = e, t.onreadystatechange && t.onreadystatechange();
      }

      function io(t, e, n) {
        this.reset(t, e, n, void 0, void 0);
      }

      function ro(t) {
        this.f = t, this.b = this.c = this.a = null;
      }

      function oo(t, e) {
        this.name = t, this.value = e;
      }

      Yr.prototype.c = null, I(Zr, Yr), Zr.prototype.a = function () {
        var t = Qr(this);
        return t ? new ActiveXObject(t) : new XMLHttpRequest();
      }, Zr.prototype.b = function () {
        var t = {};
        return Qr(this) && (t[0] = !0, t[1] = !0), t;
      }, zr = new Zr(), I(to, Yr), to.prototype.a = function () {
        var t = new XMLHttpRequest();
        if ("withCredentials" in t) return t;
        if ("undefined" != typeof XDomainRequest) return new eo();
        throw Error("Unsupported browser");
      }, to.prototype.b = function () {
        return {};
      }, (t = eo.prototype).open = function (t, e, n) {
        if (null != n && !n) throw Error("Only async requests are supported.");
        this.a.open(t, e);
      }, t.send = function (t) {
        if (t) {
          if ("string" != typeof t) throw Error("Only string data is supported");
          this.a.send(t);
        } else this.a.send();
      }, t.abort = function () {
        this.a.abort();
      }, t.setRequestHeader = function () {}, t.getResponseHeader = function (t) {
        return "content-type" == t.toLowerCase() ? this.a.contentType : "";
      }, t.bc = function () {
        this.status = 200, this.responseText = this.a.responseText, no(this, 4);
      }, t.Bb = function () {
        this.status = 500, this.responseText = "", no(this, 4);
      }, t.fc = function () {
        this.Bb();
      }, t.cc = function () {
        this.status = 200, no(this, 1);
      }, t.getAllResponseHeaders = function () {
        return "content-type: " + this.a.contentType;
      }, io.prototype.a = null, io.prototype.reset = function (t, e, n, i, r) {
        delete this.a;
      }, oo.prototype.toString = function () {
        return this.name;
      };
      var ao = new oo("SEVERE", 1e3),
          so = new oo("WARNING", 900),
          uo = new oo("CONFIG", 700),
          co = new oo("FINE", 500);

      ro.prototype.log = function (t, e, n) {
        if (t.value >= function t(e) {
          return e.c ? e.c : e.a ? t(e.a) : (k("Root logger has no level set."), null);
        }(this).value) for (l(e) && (e = e()), t = new io(t, String(e), this.f), n && (t.a = n), n = this; n;) {
          n = n.a;
        }
      };

      var ho = {},
          fo = null;

      function lo(t) {
        var e;

        if (fo || (fo = new ro(""), ho[""] = fo, fo.c = uo), !(e = ho[t])) {
          e = new ro(t);
          var n = t.lastIndexOf("."),
              i = t.substr(n + 1);
          (n = lo(t.substr(0, n))).b || (n.b = {}), n.b[i] = e, e.a = n, ho[t] = e;
        }

        return e;
      }

      function po(t, e) {
        t && t.log(co, e, void 0);
      }

      function vo(t) {
        this.f = t;
      }

      function mo(t) {
        Pe.call(this), this.i = t, this.readyState = go, this.status = 0, this.responseText = this.statusText = "", this.onreadystatechange = null, this.g = new Headers(), this.b = null, this.h = "GET", this.c = "", this.a = !1, this.f = lo("goog.net.FetchXmlHttp");
      }

      I(vo, Yr), vo.prototype.a = function () {
        return new mo(this.f);
      }, vo.prototype.b = function (t) {
        return function () {
          return t;
        };
      }({}), I(mo, Pe);
      var go = 0;

      function bo(t) {
        t.onreadystatechange && t.onreadystatechange.call(t);
      }

      function yo(t) {
        Pe.call(this), this.headers = new Ue(), this.C = t || null, this.c = !1, this.w = this.a = null, this.h = this.N = this.l = "", this.f = this.I = this.i = this.G = !1, this.g = 0, this.u = null, this.o = wo, this.v = this.O = !1;
      }

      (t = mo.prototype).open = function (t, e) {
        if (this.readyState != go) throw this.abort(), Error("Error reopening a connection");
        this.h = t, this.c = e, this.readyState = 1, bo(this);
      }, t.send = function (t) {
        if (1 != this.readyState) throw this.abort(), Error("need to call open() first. ");
        this.a = !0;
        var e = {
          headers: this.g,
          method: this.h,
          credentials: void 0,
          cache: void 0
        };
        t && (e.body = t), this.i.fetch(new Request(this.c, e)).then(this.ec.bind(this), this.Cb.bind(this));
      }, t.abort = function () {
        this.responseText = "", this.g = new Headers(), this.status = 0, 1 <= this.readyState && this.a && 4 != this.readyState && (this.readyState = 4, this.a = !1, bo(this)), this.readyState = go;
      }, t.ec = function (t) {
        this.a && (this.b || (this.b = t.headers, this.readyState = 2, bo(this)), this.a && (this.readyState = 3, bo(this), this.a && t.text().then(this.dc.bind(this, t), this.Cb.bind(this))));
      }, t.dc = function (t, e) {
        this.a && (this.status = t.status, this.statusText = t.statusText, this.responseText = e, this.readyState = 4, bo(this));
      }, t.Cb = function (t) {
        var e = this.f;
        e && e.log(so, "Failed to fetch url " + this.c, t instanceof Error ? t : Error(t)), this.a && (this.readyState = 4, bo(this));
      }, t.setRequestHeader = function (t, e) {
        this.g.append(t, e);
      }, t.getResponseHeader = function (t) {
        return this.b ? this.b.get(t.toLowerCase()) || "" : ((t = this.f) && t.log(so, "Attempting to get response header but no headers have been received for url: " + this.c, void 0), "");
      }, t.getAllResponseHeaders = function () {
        if (!this.b) {
          var t = this.f;
          return t && t.log(so, "Attempting to get all response headers but no headers have been received for url: " + this.c, void 0), "";
        }

        t = [];

        for (var e = this.b.entries(), n = e.next(); !n.done;) {
          n = n.value, t.push(n[0] + ": " + n[1]), n = e.next();
        }

        return t.join("\r\n");
      }, I(yo, Pe);
      var wo = "";
      yo.prototype.b = lo("goog.net.XhrIo");
      var Io = /^https?$/i,
          To = ["POST", "PUT"];

      function Ao(t, e, n, i, a) {
        if (t.a) throw Error("[goog.net.XhrIo] Object is active with another request=" + t.l + "; newUri=" + e);
        n = n ? n.toUpperCase() : "GET", t.l = e, t.h = "", t.N = n, t.G = !1, t.c = !0, t.a = t.C ? t.C.a() : zr.a(), t.w = t.C ? $r(t.C) : $r(zr), t.a.onreadystatechange = b(t.Fb, t);

        try {
          po(t.b, Co(t, "Opening Xhr")), t.I = !0, t.a.open(n, String(e), !0), t.I = !1;
        } catch (e) {
          return po(t.b, Co(t, "Error opening Xhr: " + e.message)), void So(t, e);
        }

        e = i || "";
        var s = new Ue(t.headers);
        a && function (t, e) {
          if (t.forEach && "function" == typeof t.forEach) t.forEach(e, void 0);else if (f(t) || o(t)) L(t, e, void 0);else for (var n = je(t), i = Me(t), r = i.length, a = 0; a < r; a++) {
            e.call(void 0, i[a], n && n[a], t);
          }
        }(a, function (t, e) {
          s.set(e, t);
        }), a = function (t) {
          t: {
            for (var e = Eo, n = t.length, i = o(t) ? t.split("") : t, r = 0; r < n; r++) {
              if (r in i && e.call(void 0, i[r], r, t)) {
                e = r;
                break t;
              }
            }

            e = -1;
          }

          return 0 > e ? null : o(t) ? t.charAt(e) : t[e];
        }(s.U()), i = r.FormData && e instanceof r.FormData, !j(To, n) || a || i || s.set("Content-Type", "application/x-www-form-urlencoded;charset=utf-8"), s.forEach(function (t, e) {
          this.a.setRequestHeader(e, t);
        }, t), t.o && (t.a.responseType = t.o), "withCredentials" in t.a && t.a.withCredentials !== t.O && (t.a.withCredentials = t.O);

        try {
          Oo(t), 0 < t.g && (t.v = function (t) {
            return Wt && ee(9) && "number" == typeof t.timeout && void 0 !== t.ontimeout;
          }(t.a), po(t.b, Co(t, "Will abort after " + t.g + "ms if incomplete, xhr2 " + t.v)), t.v ? (t.a.timeout = t.g, t.a.ontimeout = b(t.Ga, t)) : t.u = Le(t.Ga, t.g, t)), po(t.b, Co(t, "Sending request")), t.i = !0, t.a.send(e), t.i = !1;
        } catch (e) {
          po(t.b, Co(t, "Send error: " + e.message)), So(t, e);
        }
      }

      function Eo(t) {
        return "content-type" == t.toLowerCase();
      }

      function So(t, e) {
        t.c = !1, t.a && (t.f = !0, t.a.abort(), t.f = !1), t.h = e, ko(t), _o(t);
      }

      function ko(t) {
        t.G || (t.G = !0, t.dispatchEvent("complete"), t.dispatchEvent("error"));
      }

      function No(t) {
        if (t.c && void 0 !== i) if (t.w[1] && 4 == Po(t) && 2 == Ro(t)) po(t.b, Co(t, "Local request error detected and ignored"));else if (t.i && 4 == Po(t)) Le(t.Fb, 0, t);else if (t.dispatchEvent("readystatechange"), 4 == Po(t)) {
          po(t.b, Co(t, "Request complete")), t.c = !1;

          try {
            var e,
                n = Ro(t);

            t: switch (n) {
              case 200:
              case 201:
              case 202:
              case 204:
              case 206:
              case 304:
              case 1223:
                var o = !0;
                break t;

              default:
                o = !1;
            }

            if (!(e = o)) {
              var a;

              if (a = 0 === n) {
                var s = String(t.l).match(Ke)[1] || null;

                if (!s && r.self && r.self.location) {
                  var u = r.self.location.protocol;
                  s = u.substr(0, u.length - 1);
                }

                a = !Io.test(s ? s.toLowerCase() : "");
              }

              e = a;
            }

            if (e) t.dispatchEvent("complete"), t.dispatchEvent("success");else {
              try {
                var c = 2 < Po(t) ? t.a.statusText : "";
              } catch (e) {
                po(t.b, "Can not get status: " + e.message), c = "";
              }

              t.h = c + " [" + Ro(t) + "]", ko(t);
            }
          } finally {
            _o(t);
          }
        }
      }

      function _o(t, e) {
        if (t.a) {
          Oo(t);
          var n = t.a,
              i = t.w[0] ? s : null;
          t.a = null, t.w = null, e || t.dispatchEvent("ready");

          try {
            n.onreadystatechange = i;
          } catch (e) {
            (t = t.b) && t.log(ao, "Problem encountered resetting onreadystatechange: " + e.message, void 0);
          }
        }
      }

      function Oo(t) {
        t.a && t.v && (t.a.ontimeout = null), t.u && (r.clearTimeout(t.u), t.u = null);
      }

      function Po(t) {
        return t.a ? t.a.readyState : 0;
      }

      function Ro(t) {
        try {
          return 2 < Po(t) ? t.a.status : -1;
        } catch (t) {
          return -1;
        }
      }

      function Co(t, e) {
        return e + " [" + t.N + " " + t.l + " " + Ro(t) + "]";
      }

      function Do(t, e) {
        this.g = [], this.v = t, this.u = e || null, this.f = this.a = !1, this.c = void 0, this.l = this.w = this.i = !1, this.h = 0, this.b = null, this.m = 0;
      }

      function Lo(t, e, n) {
        t.a = !0, t.c = n, t.f = !e, Uo(t);
      }

      function xo(t) {
        if (t.a) {
          if (!t.l) throw new Vo(t);
          t.l = !1;
        }
      }

      function Mo(t, e, n, i) {
        t.g.push([e, n, i]), t.a && Uo(t);
      }

      function jo(t) {
        return M(t.g, function (t) {
          return l(t[1]);
        });
      }

      function Uo(t) {
        if (t.h && t.a && jo(t)) {
          var e = t.h,
              n = Ho[e];
          n && (r.clearTimeout(n.a), delete Ho[e]), t.h = 0;
        }

        t.b && (t.b.m--, delete t.b), e = t.c;

        for (var i = n = !1; t.g.length && !t.i;) {
          var o = t.g.shift(),
              a = o[0],
              s = o[1];
          if (o = o[2], a = t.f ? s : a) try {
            var u = a.call(o || t.u, e);
            void 0 !== u && (t.f = t.f && (u == e || u instanceof Error), t.c = e = u), (A(e) || "function" == typeof r.Promise && e instanceof r.Promise) && (i = !0, t.i = !0);
          } catch (i) {
            e = i, t.f = !0, jo(t) || (n = !0);
          }
        }

        t.c = e, i && (u = b(t.o, t, !0), i = b(t.o, t, !1), e instanceof Do ? (Mo(e, u, i), e.w = !0) : e.then(u, i)), n && (e = new Ko(e), Ho[e.a] = e, t.h = e.a);
      }

      function Vo() {
        E.call(this);
      }

      function Fo() {
        E.call(this);
      }

      function Ko(t) {
        this.a = r.setTimeout(b(this.c, this), 0), this.b = t;
      }

      (t = yo.prototype).Ga = function () {
        void 0 !== i && this.a && (this.h = "Timed out after " + this.g + "ms, aborting", po(this.b, Co(this, this.h)), this.dispatchEvent("timeout"), this.abort(8));
      }, t.abort = function () {
        this.a && this.c && (po(this.b, Co(this, "Aborting")), this.c = !1, this.f = !0, this.a.abort(), this.f = !1, this.dispatchEvent("complete"), this.dispatchEvent("abort"), _o(this));
      }, t.ua = function () {
        this.a && (this.c && (this.c = !1, this.f = !0, this.a.abort(), this.f = !1), _o(this, !0)), yo.lb.ua.call(this);
      }, t.Fb = function () {
        this.pa || (this.I || this.i || this.f ? No(this) : this.tc());
      }, t.tc = function () {
        No(this);
      }, t.getResponse = function () {
        try {
          if (!this.a) return null;
          if ("response" in this.a) return this.a.response;

          switch (this.o) {
            case wo:
            case "text":
              return this.a.responseText;

            case "arraybuffer":
              if ("mozResponseArrayBuffer" in this.a) return this.a.mozResponseArrayBuffer;
          }

          var t = this.b;
          return t && t.log(ao, "Response type " + this.o + " is not supported on this browser", void 0), null;
        } catch (t) {
          return po(this.b, "Can not get response: " + t.message), null;
        }
      }, Do.prototype.cancel = function (t) {
        if (this.a) this.c instanceof Do && this.c.cancel();else {
          if (this.b) {
            var e = this.b;
            delete this.b, t ? e.cancel(t) : (e.m--, 0 >= e.m && e.cancel());
          }

          this.v ? this.v.call(this.u, this) : this.l = !0, this.a || (t = new Fo(this), xo(this), Lo(this, !1, t));
        }
      }, Do.prototype.o = function (t, e) {
        this.i = !1, Lo(this, t, e);
      }, Do.prototype.C = function () {
        xo(this), Lo(this, !0, null);
      }, Do.prototype.then = function (t, e, n) {
        var i,
            r,
            o = new mt(function (t, e) {
          i = t, r = e;
        });
        return Mo(this, i, function (t) {
          t instanceof Fo ? o.cancel() : r(t);
        }), o.then(t, e, n);
      }, T(Do), I(Vo, E), Vo.prototype.message = "Deferred has already fired", Vo.prototype.name = "AlreadyCalledError", I(Fo, E), Fo.prototype.message = "Deferred was canceled", Fo.prototype.name = "CanceledError", Ko.prototype.c = function () {
        throw delete Ho[this.a], this.b;
      };
      var Ho = {};

      function qo(t) {
        var e = {},
            n = e.document || document,
            i = bn(t),
            r = document.createElement("SCRIPT"),
            o = {
          Hb: r,
          Ga: void 0
        },
            a = new Do(Wo, o),
            s = null,
            u = null != e.timeout ? e.timeout : 5e3;
        return 0 < u && (s = window.setTimeout(function () {
          Go(r, !0);
          var t = new zo(Xo, "Timeout reached for loading script " + i);
          xo(a), Lo(a, !1, t);
        }, u), o.Ga = s), r.onload = r.onreadystatechange = function () {
          r.readyState && "loaded" != r.readyState && "complete" != r.readyState || (Go(r, e.dd || !1, s), a.C());
        }, r.onerror = function () {
          Go(r, !0, s);
          var t = new zo(Bo, "Error while loading script " + i);
          xo(a), Lo(a, !1, t);
        }, ht(o = e.attributes || {}, {
          type: "text/javascript",
          charset: "UTF-8"
        }), Dn(r, o), r.src = bn(t), function (t) {
          var e;
          return (e = (t || document).getElementsByTagName("HEAD")) && 0 != e.length ? e[0] : t.documentElement;
        }(n).appendChild(r), a;
      }

      function Wo() {
        if (this && this.Hb) {
          var t = this.Hb;
          t && "SCRIPT" == t.tagName && Go(t, !0, this.Ga);
        }
      }

      function Go(t, e, n) {
        null != n && r.clearTimeout(n), t.onload = s, t.onerror = s, t.onreadystatechange = s, e && window.setTimeout(function () {
          t && t.parentNode && t.parentNode.removeChild(t);
        }, 0);
      }

      var Bo = 0,
          Xo = 1;

      function zo(t, e) {
        var n = "Jsloader error (code #" + t + ")";
        e && (n += ": " + e), E.call(this, n), this.code = t;
      }

      function Jo(t) {
        this.f = t;
      }

      function Yo(t, e, i) {
        if (this.b = t, t = e || {}, this.i = t.secureTokenEndpoint || "https://securetoken.googleapis.com/v1/token", this.m = t.secureTokenTimeout || Qo, this.f = at(t.secureTokenHeaders || ta), this.g = t.firebaseEndpoint || "https://www.googleapis.com/identitytoolkit/v3/relyingparty/", this.h = t.firebaseTimeout || ea, this.a = at(t.firebaseHeaders || na), i && (this.a["X-Client-Version"] = i, this.f["X-Client-Version"] = i), i = "Node" == Zn(), !(i = r.XMLHttpRequest || i && n.INTERNAL.node && n.INTERNAL.node.XMLHttpRequest) && !$n()) throw new Ui("internal-error", "The XMLHttpRequest compatibility library was not found.");
        this.c = void 0, $n() ? this.c = new vo(self) : Qn() ? this.c = new Jo(i) : this.c = new to();
      }

      I(zo, E), I(Jo, Yr), Jo.prototype.a = function () {
        return new this.f();
      }, Jo.prototype.b = function () {
        return {};
      };
      var $o,
          Zo = "idToken",
          Qo = new bi(3e4, 6e4),
          ta = {
        "Content-Type": "application/x-www-form-urlencoded"
      },
          ea = new bi(3e4, 6e4),
          na = {
        "Content-Type": "application/json"
      };

      function ia(t, e) {
        e ? t.a["X-Firebase-Locale"] = e : delete t.a["X-Firebase-Locale"];
      }

      function ra(t, e) {
        e ? (t.a["X-Client-Version"] = e, t.f["X-Client-Version"] = e) : (delete t.a["X-Client-Version"], delete t.f["X-Client-Version"]);
      }

      function oa(t, e, n, i, o, a, s) {
        (function () {
          var t = oi();
          return !((t = ni(t) != ei ? null : (t = t.match(/\sChrome\/(\d+)/i)) && 2 == t.length ? parseInt(t[1], 10) : null) && 30 > t || Wt && Qt && !(9 < Qt));
        })() || $n() ? t = b(t.o, t) : ($o || ($o = new mt(function (t, e) {
          !function (t, e) {
            if (((window.gapi || {}).client || {}).request) t();else {
              r[sa] = function () {
                ((window.gapi || {}).client || {}).request ? t() : e(Error("CORS_UNSUPPORTED"));
              };

              var n = yn(aa, {
                onload: sa
              });
              !function (t, e) {
                Mo(t, null, e, void 0);
              }(qo(n), function () {
                e(Error("CORS_UNSUPPORTED"));
              });
            }
          }(t, e);
        })), t = b(t.l, t)), t(e, n, i, o, a, s);
      }

      Yo.prototype.o = function (t, e, n, i, o, a) {
        if ($n() && (void 0 === r.fetch || void 0 === r.Headers || void 0 === r.Request)) throw new Ui("operation-not-supported-in-this-environment", "fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");
        var s = new yo(this.c);

        if (a) {
          s.g = Math.max(0, a);
          var u = setTimeout(function () {
            s.dispatchEvent("timeout");
          }, a);
        }

        Re(s, "complete", function () {
          u && clearTimeout(u);
          var t = null;

          try {
            t = JSON.parse(function (t) {
              try {
                return t.a ? t.a.responseText : "";
              } catch (e) {
                return po(t.b, "Can not get responseText: " + e.message), "";
              }
            }(this)) || null;
          } catch (e) {
            t = null;
          }

          e && e(t);
        }), Ce(s, "ready", function () {
          u && clearTimeout(u), Vt(this);
        }), Ce(s, "timeout", function () {
          u && clearTimeout(u), Vt(this), e && e(null);
        }), Ao(s, t, n, i, o);
      };

      var aa = mn("https://apis.google.com/js/client.js?onload=%{onload}"),
          sa = "__fcb" + Math.floor(1e6 * Math.random()).toString();

      function ua(t) {
        if (!Jr.test(t.email)) throw new Ui("invalid-email");
      }

      function ca(t) {
        "email" in t && ua(t);
      }

      function ha(t) {
        if (!t[Zo]) throw new Ui("internal-error");
      }

      function fa(t) {
        if (t.phoneNumber || t.temporaryProof) {
          if (!t.phoneNumber || !t.temporaryProof) throw new Ui("internal-error");
        } else {
          if (!t.sessionInfo) throw new Ui("missing-verification-id");
          if (!t.code) throw new Ui("missing-verification-code");
        }
      }

      Yo.prototype.l = function (t, e, n, i, r) {
        var o = this;
        $o.then(function () {
          window.gapi.client.setApiKey(o.b);
          var a = window.gapi.auth.getToken();
          window.gapi.auth.setToken(null), window.gapi.client.request({
            path: t,
            method: n,
            body: i,
            headers: r,
            authType: "none",
            callback: function callback(t) {
              window.gapi.auth.setToken(a), e && e(t);
            }
          });
        }).s(function (t) {
          e && e({
            error: {
              message: t && t.message || "CORS_UNSUPPORTED"
            }
          });
        });
      }, Yo.prototype.Pa = function () {
        return Ba(this, ja, {});
      }, Yo.prototype.mb = function (t, e) {
        return Ba(this, xa, {
          idToken: t,
          email: e
        });
      }, Yo.prototype.nb = function (t, e) {
        return Ba(this, Ma, {
          idToken: t,
          password: e
        });
      };
      var la = {
        displayName: "DISPLAY_NAME",
        photoUrl: "PHOTO_URL"
      };

      function da(t) {
        if (!t.requestUri || !t.sessionId && !t.postBody) throw new Ui("internal-error");
      }

      function pa(t) {
        var e = null;
        if (t.needConfirmation ? (t.code = "account-exists-with-different-credential", e = Xr(t)) : "FEDERATED_USER_ID_ALREADY_LINKED" == t.errorMessage ? (t.code = "credential-already-in-use", e = Xr(t)) : "EMAIL_EXISTS" == t.errorMessage ? (t.code = "email-already-in-use", e = Xr(t)) : t.errorMessage && (e = Xa(t.errorMessage)), e) throw e;
        if (!t[Zo]) throw new Ui("internal-error");
      }

      function va(t, e) {
        return e.returnIdpCredential = !0, Ba(t, Ua, e);
      }

      function ma(t, e) {
        return e.returnIdpCredential = !0, Ba(t, Fa, e);
      }

      function ga(t, e) {
        return e.returnIdpCredential = !0, e.autoCreate = !1, Ba(t, Va, e);
      }

      function ba(t) {
        if (!t.oobCode) throw new Ui("invalid-action-code");
      }

      (t = Yo.prototype).ob = function (t, e) {
        var n = {
          idToken: t
        },
            i = [];
        return rt(la, function (t, r) {
          var o = e[r];
          null === o ? i.push(t) : r in e && (n[r] = o);
        }), i.length && (n.deleteAttribute = i), Ba(this, xa, n);
      }, t.hb = function (t, e) {
        return ht(t = {
          requestType: "PASSWORD_RESET",
          email: t
        }, e), Ba(this, Pa, t);
      }, t.ib = function (t, e) {
        return ht(t = {
          requestType: "EMAIL_SIGNIN",
          email: t
        }, e), Ba(this, _a, t);
      }, t.gb = function (t, e) {
        return ht(t = {
          requestType: "VERIFY_EMAIL",
          idToken: t
        }, e), Ba(this, Oa, t);
      }, t.Ta = function (t) {
        return Ba(this, qa, t);
      }, t.Xa = function (t, e) {
        return Ba(this, Da, {
          oobCode: t,
          newPassword: e
        });
      }, t.Ja = function (t) {
        return Ba(this, wa, {
          oobCode: t
        });
      }, t.Va = function (t) {
        return Ba(this, ya, {
          oobCode: t
        });
      };
      var ya = {
        endpoint: "setAccountInfo",
        B: ba,
        da: "email"
      },
          wa = {
        endpoint: "resetPassword",
        B: ba,
        J: function J(t) {
          var e = t.requestType;
          if (!e || !t.email && "EMAIL_SIGNIN" != e) throw new Ui("internal-error");
        }
      },
          Ia = {
        endpoint: "signupNewUser",
        B: function B(t) {
          if (ua(t), !t.password) throw new Ui("weak-password");
        },
        J: ha,
        R: !0
      },
          Ta = {
        endpoint: "createAuthUri"
      },
          Aa = {
        endpoint: "deleteAccount",
        T: ["idToken"]
      },
          Ea = {
        endpoint: "setAccountInfo",
        T: ["idToken", "deleteProvider"],
        B: function B(t) {
          if (!h(t.deleteProvider)) throw new Ui("internal-error");
        }
      },
          Sa = {
        endpoint: "emailLinkSignin",
        T: ["email", "oobCode"],
        B: ua,
        J: ha,
        R: !0
      },
          ka = {
        endpoint: "emailLinkSignin",
        T: ["idToken", "email", "oobCode"],
        B: ua,
        J: ha,
        R: !0
      },
          Na = {
        endpoint: "getAccountInfo"
      },
          _a = {
        endpoint: "getOobConfirmationCode",
        T: ["requestType"],
        B: function B(t) {
          if ("EMAIL_SIGNIN" != t.requestType) throw new Ui("internal-error");
          ua(t);
        },
        da: "email"
      },
          Oa = {
        endpoint: "getOobConfirmationCode",
        T: ["idToken", "requestType"],
        B: function B(t) {
          if ("VERIFY_EMAIL" != t.requestType) throw new Ui("internal-error");
        },
        da: "email"
      },
          Pa = {
        endpoint: "getOobConfirmationCode",
        T: ["requestType"],
        B: function B(t) {
          if ("PASSWORD_RESET" != t.requestType) throw new Ui("internal-error");
          ua(t);
        },
        da: "email"
      },
          Ra = {
        rb: !0,
        endpoint: "getProjectConfig",
        Eb: "GET"
      },
          Ca = {
        rb: !0,
        endpoint: "getRecaptchaParam",
        Eb: "GET",
        J: function J(t) {
          if (!t.recaptchaSiteKey) throw new Ui("internal-error");
        }
      },
          Da = {
        endpoint: "resetPassword",
        B: ba,
        da: "email"
      },
          La = {
        endpoint: "sendVerificationCode",
        T: ["phoneNumber", "recaptchaToken"],
        da: "sessionInfo"
      },
          xa = {
        endpoint: "setAccountInfo",
        T: ["idToken"],
        B: ca,
        R: !0
      },
          Ma = {
        endpoint: "setAccountInfo",
        T: ["idToken"],
        B: function B(t) {
          if (ca(t), !t.password) throw new Ui("weak-password");
        },
        J: ha,
        R: !0
      },
          ja = {
        endpoint: "signupNewUser",
        J: ha,
        R: !0
      },
          Ua = {
        endpoint: "verifyAssertion",
        B: da,
        J: pa,
        R: !0
      },
          Va = {
        endpoint: "verifyAssertion",
        B: da,
        J: function J(t) {
          if (t.errorMessage && "USER_NOT_FOUND" == t.errorMessage) throw new Ui("user-not-found");
          if (t.errorMessage) throw Xa(t.errorMessage);
          if (!t[Zo]) throw new Ui("internal-error");
        },
        R: !0
      },
          Fa = {
        endpoint: "verifyAssertion",
        B: function B(t) {
          if (da(t), !t.idToken) throw new Ui("internal-error");
        },
        J: pa,
        R: !0
      },
          Ka = {
        endpoint: "verifyCustomToken",
        B: function B(t) {
          if (!t.token) throw new Ui("invalid-custom-token");
        },
        J: ha,
        R: !0
      },
          Ha = {
        endpoint: "verifyPassword",
        B: function B(t) {
          if (ua(t), !t.password) throw new Ui("wrong-password");
        },
        J: ha,
        R: !0
      },
          qa = {
        endpoint: "verifyPhoneNumber",
        B: fa,
        J: ha
      },
          Wa = {
        endpoint: "verifyPhoneNumber",
        B: function B(t) {
          if (!t.idToken) throw new Ui("internal-error");
          fa(t);
        },
        J: function J(t) {
          if (t.temporaryProof) throw t.code = "credential-already-in-use", Xr(t);
          ha(t);
        }
      },
          Ga = {
        Tb: {
          USER_NOT_FOUND: "user-not-found"
        },
        endpoint: "verifyPhoneNumber",
        B: fa,
        J: ha
      };

      function Ba(t, e, n) {
        if (!function (t, e) {
          if (!e || !e.length) return !0;
          if (!t) return !1;

          for (var n = 0; n < e.length; n++) {
            var i = t[e[n]];
            if (void 0 === i || null === i || "" === i) return !1;
          }

          return !0;
        }(n, e.T)) return Et(new Ui("internal-error"));
        var i,
            r = e.Eb || "POST";
        return At(n).then(e.B).then(function () {
          return e.R && (n.returnSecureToken = !0), function (t, e, n, i, r, o) {
            var a = ze(t.g + e);
            Be(a, "key", t.b), o && Be(a, "cb", w().toString());
            var s = "GET" == n;
            if (s) for (var u in i) {
              i.hasOwnProperty(u) && Be(a, u, i[u]);
            }
            return new mt(function (e, o) {
              oa(t, a.toString(), function (t) {
                t ? t.error ? o(za(t, r || {})) : e(t) : o(new Ui("network-request-failed"));
              }, n, s ? void 0 : jn(di(i)), t.a, t.h.get());
            });
          }(t, e.endpoint, r, n, e.Tb, e.rb || !1);
        }).then(function (t) {
          return i = t;
        }).then(e.J).then(function () {
          if (!e.da) return i;
          if (!(e.da in i)) throw new Ui("internal-error");
          return i[e.da];
        });
      }

      function Xa(t) {
        return za({
          error: {
            errors: [{
              message: t
            }],
            code: 400,
            message: t
          }
        });
      }

      function za(t, e) {
        var n = (t.error && t.error.errors && t.error.errors[0] || {}).reason || "",
            i = {
          keyInvalid: "invalid-api-key",
          ipRefererBlocked: "app-not-authorized"
        };
        if (n = i[n] ? new Ui(i[n]) : null) return n;

        for (var r in n = t.error && t.error.message || "", ht(i = {
          INVALID_CUSTOM_TOKEN: "invalid-custom-token",
          CREDENTIAL_MISMATCH: "custom-token-mismatch",
          MISSING_CUSTOM_TOKEN: "internal-error",
          INVALID_IDENTIFIER: "invalid-email",
          MISSING_CONTINUE_URI: "internal-error",
          INVALID_EMAIL: "invalid-email",
          INVALID_PASSWORD: "wrong-password",
          USER_DISABLED: "user-disabled",
          MISSING_PASSWORD: "internal-error",
          EMAIL_EXISTS: "email-already-in-use",
          PASSWORD_LOGIN_DISABLED: "operation-not-allowed",
          INVALID_IDP_RESPONSE: "invalid-credential",
          FEDERATED_USER_ID_ALREADY_LINKED: "credential-already-in-use",
          INVALID_MESSAGE_PAYLOAD: "invalid-message-payload",
          INVALID_RECIPIENT_EMAIL: "invalid-recipient-email",
          INVALID_SENDER: "invalid-sender",
          EMAIL_NOT_FOUND: "user-not-found",
          EXPIRED_OOB_CODE: "expired-action-code",
          INVALID_OOB_CODE: "invalid-action-code",
          MISSING_OOB_CODE: "internal-error",
          CREDENTIAL_TOO_OLD_LOGIN_AGAIN: "requires-recent-login",
          INVALID_ID_TOKEN: "invalid-user-token",
          TOKEN_EXPIRED: "user-token-expired",
          USER_NOT_FOUND: "user-token-expired",
          CORS_UNSUPPORTED: "cors-unsupported",
          DYNAMIC_LINK_NOT_ACTIVATED: "dynamic-link-not-activated",
          INVALID_APP_ID: "invalid-app-id",
          TOO_MANY_ATTEMPTS_TRY_LATER: "too-many-requests",
          WEAK_PASSWORD: "weak-password",
          OPERATION_NOT_ALLOWED: "operation-not-allowed",
          USER_CANCELLED: "user-cancelled",
          CAPTCHA_CHECK_FAILED: "captcha-check-failed",
          INVALID_APP_CREDENTIAL: "invalid-app-credential",
          INVALID_CODE: "invalid-verification-code",
          INVALID_PHONE_NUMBER: "invalid-phone-number",
          INVALID_SESSION_INFO: "invalid-verification-id",
          INVALID_TEMPORARY_PROOF: "invalid-credential",
          MISSING_APP_CREDENTIAL: "missing-app-credential",
          MISSING_CODE: "missing-verification-code",
          MISSING_PHONE_NUMBER: "missing-phone-number",
          MISSING_SESSION_INFO: "missing-verification-id",
          QUOTA_EXCEEDED: "quota-exceeded",
          SESSION_EXPIRED: "code-expired",
          INVALID_CONTINUE_URI: "invalid-continue-uri",
          MISSING_ANDROID_PACKAGE_NAME: "missing-android-pkg-name",
          MISSING_IOS_BUNDLE_ID: "missing-ios-bundle-id",
          UNAUTHORIZED_DOMAIN: "unauthorized-continue-uri",
          INVALID_OAUTH_CLIENT_ID: "invalid-oauth-client-id",
          INVALID_CERT_HASH: "invalid-cert-hash"
        }, e || {}), e = (e = n.match(/^[^\s]+\s*:\s*(.*)$/)) && 1 < e.length ? e[1] : void 0, i) {
          if (0 === n.indexOf(r)) return new Ui(i[r], e);
        }

        return !e && t && (e = li(t)), new Ui("internal-error", e);
      }

      var Ja,
          Ya = {
        Yc: {
          Za: "https://www.googleapis.com/identitytoolkit/v3/relyingparty/",
          fb: "https://securetoken.googleapis.com/v1/token",
          id: "p"
        },
        $c: {
          Za: "https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",
          fb: "https://staging-securetoken.sandbox.googleapis.com/v1/token",
          id: "s"
        },
        ad: {
          Za: "https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",
          fb: "https://test-securetoken.sandbox.googleapis.com/v1/token",
          id: "t"
        }
      };

      function $a(t) {
        for (var e in Ya) {
          if (Ya[e].id === t) return {
            firebaseEndpoint: (t = Ya[e]).Za,
            secureTokenEndpoint: t.fb
          };
        }

        return null;
      }

      function Za(t) {
        this.b = t, this.a = null, this.bb = function (t) {
          return (is || (is = new mt(function (t, e) {
            function n() {
              gi(), ai("gapi.load")("gapi.iframes", {
                callback: t,
                ontimeout: function ontimeout() {
                  gi(), e(Error("Network Error"));
                },
                timeout: es.get()
              });
            }

            if (ai("gapi.iframes.Iframe")) t();else if (ai("gapi.load")) n();else {
              var i = "__iframefcb" + Math.floor(1e6 * Math.random()).toString();
              r[i] = function () {
                ai("gapi.load") ? n() : e(Error("Network Error"));
              }, At(qo(i = yn(ts, {
                onload: i
              }))).s(function () {
                e(Error("Network Error"));
              });
            }
          }).s(function (t) {
            throw is = null, t;
          }))).then(function () {
            return new mt(function (e, n) {
              ai("gapi.iframes.getContext")().open({
                where: document.body,
                url: t.b,
                messageHandlersFilter: ai("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),
                attributes: {
                  style: {
                    position: "absolute",
                    top: "-100px",
                    width: "1px",
                    height: "1px"
                  }
                },
                dontclear: !0
              }, function (i) {
                function r() {
                  clearTimeout(o), e();
                }

                t.a = i, t.a.restyle({
                  setHideOnLeave: !1
                });
                var o = setTimeout(function () {
                  n(Error("Network Error"));
                }, ns.get());
                i.ping(r).then(r, function () {
                  n(Error("Network Error"));
                });
              });
            });
          });
        }(this);
      }

      Ja = $a("__EID__") ? "__EID__" : void 0;
      var Qa,
          ts = mn("https://apis.google.com/js/api.js?onload=%{onload}"),
          es = new bi(3e4, 6e4),
          ns = new bi(5e3, 15e3),
          is = null;

      function rs(t, e, n) {
        this.i = t, this.g = e, this.h = n, this.f = null, this.a = Je(this.i, "/__/auth/iframe"), Be(this.a, "apiKey", this.g), Be(this.a, "appName", this.h), this.b = null, this.c = [];
      }

      function os(t, e, n, i, r) {
        this.o = t, this.l = e, this.c = n, this.m = i, this.h = this.g = this.i = null, this.a = r, this.f = null;
      }

      function as(t) {
        try {
          return n.app(t).auth().xa();
        } catch (t) {
          return [];
        }
      }

      function ss(t, e, n, i, r) {
        this.l = t, this.f = e, this.b = n, this.c = i || null, this.h = r || null, this.o = this.u = this.v = null, this.g = [], this.m = this.a = null;
      }

      function us(t) {
        var e = Hn();
        return function (t) {
          return Ba(t, Ra, {}).then(function (t) {
            return t.authorizedDomains || [];
          });
        }(t).then(function (t) {
          t: {
            var n = ze(e),
                i = n.c;
            n = n.b;

            for (var r = 0; r < t.length; r++) {
              var o = t[r],
                  a = n,
                  s = i;

              if (0 == o.indexOf("chrome-extension://") ? a = ze(o).b == a && "chrome-extension" == s : "http" != s && "https" != s ? a = !1 : Xn.test(o) ? a = a == o : (o = o.split(".").join("\\."), a = new RegExp("^(.+\\." + o + "|" + o + ")$", "i").test(a)), a) {
                t = !0;
                break t;
              }
            }

            t = !1;
          }

          if (!t) throw new Gr(Hn());
        });
      }

      function cs(t) {
        return t.m ? t.m : (t.m = zn().then(function () {
          if (!t.u) {
            var e = t.c,
                n = t.h,
                i = as(t.b),
                r = new rs(t.l, t.f, t.b);
            r.f = e, r.b = n, r.c = K(i || []), t.u = r.toString();
          }

          t.i = new Za(t.u), function (t) {
            if (!t.i) throw Error("IfcHandler must be initialized!");
            !function (t, e) {
              t.bb.then(function () {
                t.a.register("authEvent", e, ai("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"));
              });
            }(t.i, function (e) {
              var n = {};

              if (e && e.authEvent) {
                var i = !1;

                for (e = Hr(e.authEvent), n = 0; n < t.g.length; n++) {
                  i = t.g[n](e) || i;
                }

                return (n = {}).status = i ? "ACK" : "ERROR", At(n);
              }

              return n.status = "ERROR", At(n);
            });
          }(t);
        }), t.m);
      }

      function hs(t) {
        return t.o || (t.v = t.c ? ri(t.c, as(t.b)) : null, t.o = new Yo(t.f, $a(t.h), t.v)), t.o;
      }

      function fs(t, e, n, i, r, o, a, s, u, c) {
        return (t = new os(t, e, n, i, r)).i = o, t.g = a, t.h = s, t.b = at(u || null), t.f = c, t.toString();
      }

      function ls(t) {
        if (this.a = t || n.INTERNAL.reactNative && n.INTERNAL.reactNative.AsyncStorage, !this.a) throw new Ui("internal-error", "The React Native compatibility library was not found.");
        this.type = "asyncStorage";
      }

      function ds() {
        if (!ms()) throw new Ui("web-storage-unsupported");
        this.f = {}, this.a = [], this.b = 0, this.g = r.indexedDB, this.type = "indexedDB";
      }

      function ps(t) {
        return new mt(function (e, n) {
          var i = t.g.open("firebaseLocalStorageDb", 1);
          i.onerror = function (t) {
            try {
              t.preventDefault();
            } catch (t) {}

            n(Error(t.target.error));
          }, i.onupgradeneeded = function (t) {
            t = t.target.result;

            try {
              t.createObjectStore("firebaseLocalStorage", {
                keyPath: "fbase_key"
              });
            } catch (t) {
              n(t);
            }
          }, i.onsuccess = function (i) {
            (i = i.target.result).objectStoreNames.contains("firebaseLocalStorage") ? e(i) : function (t) {
              return new mt(function (e, n) {
                var i = t.g.deleteDatabase("firebaseLocalStorageDb");
                i.onsuccess = function () {
                  e();
                }, i.onerror = function (t) {
                  n(Error(t.target.error));
                };
              });
            }(t).then(function () {
              return ps(t);
            }).then(function (t) {
              e(t);
            }).s(function (t) {
              n(t);
            });
          };
        });
      }

      function vs(t) {
        return t.h || (t.h = ps(t)), t.h;
      }

      function ms() {
        try {
          return !!r.indexedDB;
        } catch (t) {
          return !1;
        }
      }

      function gs(t) {
        return t.objectStore("firebaseLocalStorage");
      }

      function bs(t, e) {
        return t.transaction(["firebaseLocalStorage"], e ? "readwrite" : "readonly");
      }

      function ys(t) {
        return new mt(function (e, n) {
          t.onsuccess = function (t) {
            t && t.target ? e(t.target.result) : e();
          }, t.onerror = function (t) {
            n(Error(t.target.errorCode));
          };
        });
      }

      function ws(t) {
        var e = this,
            n = null;
        this.a = [], this.type = "indexedDB", this.c = t, this.b = At().then(function () {
          return ms() ? (Qa || (Qa = new ds()), (n = Qa).set("__sak", "!").then(function () {
            return n.get("__sak");
          }).then(function (t) {
            if ("!" !== t) throw Error("indexedDB not supported!");
            return n.P("__sak");
          }).then(function () {
            return n;
          }).s(function () {
            return e.c;
          })) : e.c;
        }).then(function (t) {
          return e.type = t.type, t.Y(function (t) {
            L(e.a, function (e) {
              e(t);
            });
          }), t;
        });
      }

      function Is() {
        this.a = {}, this.type = "inMemory";
      }

      function Ts() {
        if (!function () {
          var t = "Node" == Zn();
          if (!(t = As() || t && n.INTERNAL.node && n.INTERNAL.node.localStorage)) return !1;

          try {
            return t.setItem("__sak", "1"), t.removeItem("__sak"), !0;
          } catch (t) {
            return !1;
          }
        }()) {
          if ("Node" == Zn()) throw new Ui("internal-error", "The LocalStorage compatibility library was not found.");
          throw new Ui("web-storage-unsupported");
        }

        this.a = As() || n.INTERNAL.node.localStorage, this.type = "localStorage";
      }

      function As() {
        try {
          var t = r.localStorage,
              e = vi();
          return t && (t.setItem(e, "1"), t.removeItem(e)), t;
        } catch (t) {
          return null;
        }
      }

      function Es() {
        this.type = "nullStorage";
      }

      function Ss() {
        if (!function () {
          var t = "Node" == Zn();
          if (!(t = ks() || t && n.INTERNAL.node && n.INTERNAL.node.sessionStorage)) return !1;

          try {
            return t.setItem("__sak", "1"), t.removeItem("__sak"), !0;
          } catch (t) {
            return !1;
          }
        }()) {
          if ("Node" == Zn()) throw new Ui("internal-error", "The SessionStorage compatibility library was not found.");
          throw new Ui("web-storage-unsupported");
        }

        this.a = ks() || n.INTERNAL.node.sessionStorage, this.type = "sessionStorage";
      }

      function ks() {
        try {
          var t = r.sessionStorage,
              e = vi();
          return t && (t.setItem(e, "1"), t.removeItem(e)), t;
        } catch (t) {
          return null;
        }
      }

      rs.prototype.toString = function () {
        return this.f ? Be(this.a, "v", this.f) : un(this.a.a, "v"), this.b ? Be(this.a, "eid", this.b) : un(this.a.a, "eid"), this.c.length ? Be(this.a, "fw", this.c.join(",")) : un(this.a.a, "fw"), this.a.toString();
      }, os.prototype.toString = function () {
        var t = Je(this.o, "/__/auth/handler");

        if (Be(t, "apiKey", this.l), Be(t, "appName", this.c), Be(t, "authType", this.m), this.a.isOAuthProvider) {
          var e = this.a;

          try {
            var i = n.app(this.c).auth().ea();
          } catch (t) {
            i = null;
          }

          for (var r in e.Ya = i, Be(t, "providerId", this.a.providerId), i = di((e = this.a).vb)) {
            i[r] = i[r].toString();
          }

          r = e.Ac, i = at(i);

          for (var o = 0; o < r.length; o++) {
            var a = r[o];
            a in i && delete i[a];
          }

          e.$a && e.Ya && !i[e.$a] && (i[e.$a] = e.Ya), ot(i) || Be(t, "customParameters", li(i));
        }

        if ("function" == typeof this.a.Ab && (e = this.a.Ab()).length && Be(t, "scopes", e.join(",")), this.i ? Be(t, "redirectUrl", this.i) : un(t.a, "redirectUrl"), this.g ? Be(t, "eventId", this.g) : un(t.a, "eventId"), this.h ? Be(t, "v", this.h) : un(t.a, "v"), this.b) for (var s in this.b) {
          this.b.hasOwnProperty(s) && !Xe(t, s) && Be(t, s, this.b[s]);
        }
        return this.f ? Be(t, "eid", this.f) : un(t.a, "eid"), (s = as(this.c)).length && Be(t, "fw", s.join(",")), t.toString();
      }, (t = ss.prototype).Ea = function (t, e, n) {
        var i = new Ui("popup-closed-by-user"),
            r = new Ui("web-storage-unsupported"),
            o = this,
            a = !1;
        return this.ga().then(function () {
          (function (t) {
            var e = {
              type: "webStorageSupport"
            };
            return cs(t).then(function () {
              return function (t, e) {
                return t.bb.then(function () {
                  return new mt(function (n) {
                    t.a.send(e.type, e, n, ai("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"));
                  });
                });
              }(t.i, e);
            }).then(function (t) {
              if (t && t.length && void 0 !== t[0].webStorageSupport) return t[0].webStorageSupport;
              throw Error();
            });
          })(o).then(function (n) {
            n || (t && Gn(t), e(r), a = !0);
          });
        }).s(function () {}).then(function () {
          if (!a) return function (t) {
            return new mt(function (e) {
              return function n() {
                xe(2e3).then(function () {
                  if (t && !t.closed) return n();
                  e();
                });
              }();
            });
          }(t);
        }).then(function () {
          if (!a) return xe(n).then(function () {
            e(i);
          });
        });
      }, t.Ib = function () {
        var t = oi();
        return !fi(t) && !mi(t);
      }, t.Db = function () {
        return !1;
      }, t.zb = function (t, e, n, i, r, o, a) {
        if (!t) return Et(new Ui("popup-blocked"));
        if (a && !fi()) return this.ga().s(function (e) {
          Gn(t), r(e);
        }), i(), At();
        this.a || (this.a = us(hs(this)));
        var s = this;
        return this.a.then(function () {
          var e = s.ga().s(function (e) {
            throw Gn(t), r(e), e;
          });
          return i(), e;
        }).then(function () {
          (Fr(n), a) || qn(fs(s.l, s.f, s.b, e, n, null, o, s.c, void 0, s.h), t);
        }).s(function (t) {
          throw "auth/network-request-failed" == t.code && (s.a = null), t;
        });
      }, t.Ca = function (t, e, n) {
        this.a || (this.a = us(hs(this)));
        var i = this;
        return this.a.then(function () {
          Fr(e), qn(fs(i.l, i.f, i.b, t, e, Hn(), n, i.c, void 0, i.h));
        }).s(function (t) {
          throw "auth/network-request-failed" == t.code && (i.a = null), t;
        });
      }, t.ga = function () {
        var t = this;
        return cs(this).then(function () {
          return t.i.bb;
        }).s(function () {
          throw t.a = null, new Ui("network-request-failed");
        });
      }, t.Mb = function () {
        return !0;
      }, t.va = function (t) {
        this.g.push(t);
      }, t.Ka = function (t) {
        V(this.g, function (e) {
          return e == t;
        });
      }, (t = ls.prototype).get = function (t) {
        return At(this.a.getItem(t)).then(function (t) {
          return t && pi(t);
        });
      }, t.set = function (t, e) {
        return At(this.a.setItem(t, li(e)));
      }, t.P = function (t) {
        return At(this.a.removeItem(t));
      }, t.Y = function () {}, t.ca = function () {}, (t = ds.prototype).set = function (t, e) {
        var n,
            i = !1,
            r = this;
        return vs(this).then(function (e) {
          return ys((e = gs(bs(n = e, !0))).get(t));
        }).then(function (o) {
          var a = gs(bs(n, !0));
          return o ? (o.value = e, ys(a.put(o))) : (r.b++, i = !0, (o = {}).fbase_key = t, o.value = e, ys(a.add(o)));
        }).then(function () {
          r.f[t] = e;
        }).ia(function () {
          i && r.b--;
        });
      }, t.get = function (t) {
        return vs(this).then(function (e) {
          return ys(gs(bs(e, !1)).get(t));
        }).then(function (t) {
          return t && t.value;
        });
      }, t.P = function (t) {
        var e = !1,
            n = this;
        return vs(this).then(function (i) {
          return e = !0, n.b++, ys(gs(bs(i, !0))["delete"](t));
        }).then(function () {
          delete n.f[t];
        }).ia(function () {
          e && n.b--;
        });
      }, t.Kc = function () {
        var t = this;
        return vs(this).then(function (t) {
          var e = gs(bs(t, !1));
          return e.getAll ? ys(e.getAll()) : new mt(function (t, n) {
            var i = [],
                r = e.openCursor();
            r.onsuccess = function (e) {
              (e = e.target.result) ? (i.push(e.value), e["continue"]()) : t(i);
            }, r.onerror = function (t) {
              n(Error(t.target.errorCode));
            };
          });
        }).then(function (e) {
          var n = {},
              i = [];

          if (0 == t.b) {
            for (i = 0; i < e.length; i++) {
              n[e[i].fbase_key] = e[i].value;
            }

            i = function t(e, n) {
              var i,
                  r = [];

              for (i in e) {
                i in n ? _typeof(e[i]) != _typeof(n[i]) ? r.push(i) : "object" == _typeof(e[i]) && null != e[i] && null != n[i] ? 0 < t(e[i], n[i]).length && r.push(i) : e[i] !== n[i] && r.push(i) : r.push(i);
              }

              for (i in n) {
                i in e || r.push(i);
              }

              return r;
            }(t.f, n), t.f = n;
          }

          return i;
        });
      }, t.Y = function (t) {
        0 == this.a.length && function (t) {
          t.c && t.c.cancel("STOP_EVENT"), function e() {
            t.c = xe(800).then(b(t.Kc, t)).then(function (e) {
              0 < e.length && L(t.a, function (t) {
                t(e);
              });
            }).then(e).s(function (t) {
              "STOP_EVENT" != t.message && e();
            });
            return t.c;
          }();
        }(this), this.a.push(t);
      }, t.ca = function (t) {
        V(this.a, function (e) {
          return e == t;
        }), 0 == this.a.length && this.c && this.c.cancel("STOP_EVENT");
      }, (t = ws.prototype).get = function (t) {
        return this.b.then(function (e) {
          return e.get(t);
        });
      }, t.set = function (t, e) {
        return this.b.then(function (n) {
          return n.set(t, e);
        });
      }, t.P = function (t) {
        return this.b.then(function (e) {
          return e.P(t);
        });
      }, t.Y = function (t) {
        this.a.push(t);
      }, t.ca = function (t) {
        V(this.a, function (e) {
          return e == t;
        });
      }, (t = Is.prototype).get = function (t) {
        return At(this.a[t]);
      }, t.set = function (t, e) {
        return this.a[t] = e, At();
      }, t.P = function (t) {
        return delete this.a[t], At();
      }, t.Y = function () {}, t.ca = function () {}, (t = Ts.prototype).get = function (t) {
        var e = this;
        return At().then(function () {
          return pi(e.a.getItem(t));
        });
      }, t.set = function (t, e) {
        var n = this;
        return At().then(function () {
          var i = li(e);
          null === i ? n.P(t) : n.a.setItem(t, i);
        });
      }, t.P = function (t) {
        var e = this;
        return At().then(function () {
          e.a.removeItem(t);
        });
      }, t.Y = function (t) {
        r.window && be(r.window, "storage", t);
      }, t.ca = function (t) {
        r.window && Ie(r.window, "storage", t);
      }, (t = Es.prototype).get = function () {
        return At(null);
      }, t.set = function () {
        return At();
      }, t.P = function () {
        return At();
      }, t.Y = function () {}, t.ca = function () {}, (t = Ss.prototype).get = function (t) {
        var e = this;
        return At().then(function () {
          return pi(e.a.getItem(t));
        });
      }, t.set = function (t, e) {
        var n = this;
        return At().then(function () {
          var i = li(e);
          null === i ? n.P(t) : n.a.setItem(t, i);
        });
      }, t.P = function (t) {
        var e = this;
        return At().then(function () {
          e.a.removeItem(t);
        });
      }, t.Y = function () {}, t.ca = function () {};

      var Ns,
          _s,
          Os = {
        A: Ts,
        Qa: Ss
      },
          Ps = {
        A: Ts,
        Qa: Ss
      },
          Rs = {
        A: ls,
        Qa: Es
      },
          Cs = {
        A: Ts,
        Qa: Es
      },
          Ds = {
        Xc: "local",
        NONE: "none",
        Zc: "session"
      };

      function Ls() {
        var t = !(mi(oi()) || !Yn()),
            e = fi(),
            n = si();
        this.o = t, this.h = e, this.m = n, this.a = {}, Ns || (Ns = new function () {
          var t = {};
          t.Browser = Os, t.Node = Ps, t.ReactNative = Rs, t.Worker = Cs, this.a = t[Zn()];
        }()), t = Ns;

        try {
          this.g = !Kn() && Ii() || !r.indexedDB ? new t.a.A() : new ws($n() ? new Is() : new t.a.A());
        } catch (t) {
          this.g = new Is(), this.h = !0;
        }

        try {
          this.i = new t.a.Qa();
        } catch (t) {
          this.i = new Is();
        }

        this.l = new Is(), this.f = b(this.Lb, this), this.b = {};
      }

      function xs() {
        return _s || (_s = new Ls()), _s;
      }

      function Ms(t, e) {
        switch (e) {
          case "session":
            return t.i;

          case "none":
            return t.l;

          default:
            return t.g;
        }
      }

      function js(t, e) {
        return "firebase:" + t.name + (e ? ":" + e : "");
      }

      function Us(t, e, n) {
        return n = js(e, n), "local" == e.A && (t.b[n] = null), Ms(t, e.A).P(n);
      }

      function Vs(t) {
        t.c && (clearInterval(t.c), t.c = null);
      }

      (t = Ls.prototype).get = function (t, e) {
        return Ms(this, t.A).get(js(t, e));
      }, t.set = function (t, e, n) {
        var i = js(t, n),
            r = this,
            o = Ms(this, t.A);
        return o.set(i, e).then(function () {
          return o.get(i);
        }).then(function (e) {
          "local" == t.A && (r.b[i] = e);
        });
      }, t.addListener = function (t, e, n) {
        t = js(t, e), this.m && (this.b[t] = r.localStorage.getItem(t)), ot(this.a) && (Ms(this, "local").Y(this.f), this.h || (Kn() || !Ii()) && r.indexedDB || !this.m || function (t) {
          Vs(t), t.c = setInterval(function () {
            for (var e in t.a) {
              var n = r.localStorage.getItem(e),
                  i = t.b[e];
              n != i && (t.b[e] = n, n = new ue({
                type: "storage",
                key: e,
                target: window,
                oldValue: i,
                newValue: n,
                a: !0
              }), t.Lb(n));
            }
          }, 1e3);
        }(this)), this.a[t] || (this.a[t] = []), this.a[t].push(n);
      }, t.removeListener = function (t, e, n) {
        t = js(t, e), this.a[t] && (V(this.a[t], function (t) {
          return t == n;
        }), 0 == this.a[t].length && delete this.a[t]), ot(this.a) && (Ms(this, "local").ca(this.f), Vs(this));
      }, t.Lb = function (t) {
        if (t && t.f) {
          var e = t.a.key;
          if (null == e) for (var n in this.a) {
            var i = this.b[n];
            void 0 === i && (i = null);
            var o = r.localStorage.getItem(n);
            o !== i && (this.b[n] = o, this.Wa(n));
          } else if (0 == e.indexOf("firebase:") && this.a[e]) {
            if (void 0 !== t.a.a ? Ms(this, "local").ca(this.f) : Vs(this), this.o) if (n = r.localStorage.getItem(e), (i = t.a.newValue) !== n) null !== i ? r.localStorage.setItem(e, i) : r.localStorage.removeItem(e);else if (this.b[e] === i && void 0 === t.a.a) return;
            var a = this;
            n = function n() {
              void 0 === t.a.a && a.b[e] === r.localStorage.getItem(e) || (a.b[e] = r.localStorage.getItem(e), a.Wa(e));
            }, Wt && Qt && 10 == Qt && r.localStorage.getItem(e) !== t.a.newValue && t.a.newValue !== t.a.oldValue ? setTimeout(n, 10) : n();
          }
        } else L(t, b(this.Wa, this));
      }, t.Wa = function (t) {
        this.a[t] && L(this.a[t], function (t) {
          t();
        });
      };
      var Fs,
          Ks = {
        name: "authEvent",
        A: "local"
      };

      function Hs(t, e) {
        this.b = -1, this.b = qs, this.f = r.Uint8Array ? new Uint8Array(this.b) : Array(this.b), this.g = this.c = 0, this.a = [], this.i = t, this.h = e, this.m = r.Int32Array ? new Int32Array(64) : Array(64), void 0 !== Fs || (Fs = r.Int32Array ? new Int32Array(Ys) : Ys), this.reset();
      }

      I(Hs, function () {
        this.b = -1;
      });

      for (var qs = 64, Ws = qs - 1, Gs = [], Bs = 0; Bs < Ws; Bs++) {
        Gs[Bs] = 0;
      }

      var Xs = F(128, Gs);

      function zs(t) {
        for (var e = t.f, n = t.m, i = 0, r = 0; r < e.length;) {
          n[i++] = e[r] << 24 | e[r + 1] << 16 | e[r + 2] << 8 | e[r + 3], r = 4 * i;
        }

        for (e = 16; 64 > e; e++) {
          r = 0 | n[e - 15], i = 0 | n[e - 2];
          var o = (0 | n[e - 16]) + ((r >>> 7 | r << 25) ^ (r >>> 18 | r << 14) ^ r >>> 3) | 0,
              a = (0 | n[e - 7]) + ((i >>> 17 | i << 15) ^ (i >>> 19 | i << 13) ^ i >>> 10) | 0;
          n[e] = o + a | 0;
        }

        i = 0 | t.a[0], r = 0 | t.a[1];
        var s = 0 | t.a[2],
            u = 0 | t.a[3],
            c = 0 | t.a[4],
            h = 0 | t.a[5],
            f = 0 | t.a[6];

        for (o = 0 | t.a[7], e = 0; 64 > e; e++) {
          var l = ((i >>> 2 | i << 30) ^ (i >>> 13 | i << 19) ^ (i >>> 22 | i << 10)) + (i & r ^ i & s ^ r & s) | 0;
          a = (o = o + ((c >>> 6 | c << 26) ^ (c >>> 11 | c << 21) ^ (c >>> 25 | c << 7)) | 0) + ((a = (a = c & h ^ ~c & f) + (0 | Fs[e]) | 0) + (0 | n[e]) | 0) | 0, o = f, f = h, h = c, c = u + a | 0, u = s, s = r, r = i, i = a + l | 0;
        }

        t.a[0] = t.a[0] + i | 0, t.a[1] = t.a[1] + r | 0, t.a[2] = t.a[2] + s | 0, t.a[3] = t.a[3] + u | 0, t.a[4] = t.a[4] + c | 0, t.a[5] = t.a[5] + h | 0, t.a[6] = t.a[6] + f | 0, t.a[7] = t.a[7] + o | 0;
      }

      function Js(t, e, n) {
        void 0 === n && (n = e.length);
        var i = 0,
            r = t.c;
        if (o(e)) for (; i < n;) {
          t.f[r++] = e.charCodeAt(i++), r == t.b && (zs(t), r = 0);
        } else {
          if (!f(e)) throw Error("message must be string or array");

          for (; i < n;) {
            var a = e[i++];
            if (!("number" == typeof a && 0 <= a && 255 >= a && a == (0 | a))) throw Error("message must be a byte array");
            t.f[r++] = a, r == t.b && (zs(t), r = 0);
          }
        }
        t.c = r, t.g += n;
      }

      Hs.prototype.reset = function () {
        this.g = this.c = 0, this.a = r.Int32Array ? new Int32Array(this.h) : K(this.h);
      };

      var Ys = [1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298];

      function $s() {
        Hs.call(this, 8, Zs);
      }

      I($s, Hs);
      var Zs = [1779033703, 3144134277, 1013904242, 2773480762, 1359893119, 2600822924, 528734635, 1541459225];

      function Qs(t, e, n, i, r) {
        this.l = t, this.i = e, this.m = n, this.o = i || null, this.u = r || null, this.h = e + ":" + n, this.v = new function () {
          this.a = xs();
        }(), this.g = new function (t) {
          this.a = t, this.b = xs();
        }(this.h), this.f = null, this.b = [], this.a = this.c = null;
      }

      function tu(t) {
        return new Ui("invalid-cordova-configuration", t);
      }

      function eu(t) {
        var e = new $s();
        Js(e, t), t = [];
        var n = 8 * e.g;
        56 > e.c ? Js(e, Xs, 56 - e.c) : Js(e, Xs, e.b - (e.c - 56));

        for (var i = 63; 56 <= i; i--) {
          e.f[i] = 255 & n, n /= 256;
        }

        for (zs(e), i = n = 0; i < e.i; i++) {
          for (var r = 24; 0 <= r; r -= 8) {
            t[n++] = e.a[i] >> r & 255;
          }
        }

        return function (t) {
          return x(t, function (t) {
            return 1 < (t = t.toString(16)).length ? t : "0" + t;
          }).join("");
        }(t);
      }

      function nu(t, e) {
        for (var n = 0; n < t.b.length; n++) {
          try {
            t.b[n](e);
          } catch (t) {}
        }
      }

      function iu(t) {
        return t.f || (t.f = t.ga().then(function () {
          return new mt(function (e) {
            t.va(function n(i) {
              return e(i), t.Ka(n), !1;
            }), function (t) {
              function e(e) {
                i = !0, o && o.cancel(), ru(t).then(function (i) {
                  var r = n;

                  if (i && e && e.url) {
                    var o = null;
                    -1 != (r = gr(e.url)).indexOf("/__/auth/callback") && (o = (o = "object" == _typeof(o = pi(Xe(o = ze(r), "firebaseError") || null)) ? Vi(o) : null) ? new Kr(i.b, i.c, null, null, o) : new Kr(i.b, i.c, r, i.g)), r = o || n;
                  }

                  nu(t, r);
                });
              }

              var n = new Kr("unknown", null, null, null, new Ui("no-auth-event")),
                  i = !1,
                  o = xe(500).then(function () {
                return ru(t).then(function () {
                  i || nu(t, n);
                });
              }),
                  a = r.handleOpenURL;
              r.handleOpenURL = function (t) {
                if (0 == t.toLowerCase().indexOf(ai("BuildInfo.packageName", r).toLowerCase() + "://") && e({
                  url: t
                }), "function" == typeof a) try {
                  a(t);
                } catch (t) {
                  console.error(t);
                }
              }, Wr || (Wr = new qr()), Wr.subscribe(e);
            }(t);
          });
        })), t.f;
      }

      function ru(t) {
        var e = null;
        return function (t) {
          return t.b.get(Ks, t.a).then(function (t) {
            return Hr(t);
          });
        }(t.g).then(function (n) {
          return e = n, Us((n = t.g).b, Ks, n.a);
        }).then(function () {
          return e;
        });
      }

      (t = Qs.prototype).ga = function () {
        return this.za ? this.za : this.za = (Jn(void 0) ? zn().then(function () {
          return new mt(function (t, e) {
            var n = r.document,
                i = setTimeout(function () {
              e(Error("Cordova framework is not ready."));
            }, 1e3);
            n.addEventListener("deviceready", function () {
              clearTimeout(i), t();
            }, !1);
          });
        }) : Et(Error("Cordova must run in an Android or iOS file scheme."))).then(function () {
          if ("function" != typeof ai("universalLinks.subscribe", r)) throw tu("cordova-universal-links-plugin is not installed");
          if (void 0 === ai("BuildInfo.packageName", r)) throw tu("cordova-plugin-buildinfo is not installed");
          if ("function" != typeof ai("cordova.plugins.browsertab.openUrl", r)) throw tu("cordova-plugin-browsertab is not installed");
          if ("function" != typeof ai("cordova.InAppBrowser.open", r)) throw tu("cordova-plugin-inappbrowser is not installed");
        }, function () {
          throw new Ui("cordova-not-ready");
        });
      }, t.Ea = function (t, e) {
        return e(new Ui("operation-not-supported-in-this-environment")), At();
      }, t.zb = function () {
        return Et(new Ui("operation-not-supported-in-this-environment"));
      }, t.Mb = function () {
        return !1;
      }, t.Ib = function () {
        return !0;
      }, t.Db = function () {
        return !0;
      }, t.Ca = function (t, e, n) {
        if (this.c) return Et(new Ui("redirect-operation-pending"));
        var i = this,
            o = r.document,
            a = null,
            s = null,
            u = null,
            c = null;
        return this.c = At().then(function () {
          return Fr(e), iu(i);
        }).then(function () {
          return function (t, e, n, i) {
            var o = function () {
              for (var t = 20, e = []; 0 < t;) {
                e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62 * Math.random()))), t--;
              }

              return e.join("");
            }(),
                a = new Kr(e, i, null, o, new Ui("no-auth-event")),
                s = ai("BuildInfo.packageName", r);

            if ("string" != typeof s) throw new Ui("invalid-cordova-configuration");
            var u = ai("BuildInfo.displayName", r),
                c = {};
            if (oi().toLowerCase().match(/iphone|ipad|ipod/)) c.ibi = s;else {
              if (!oi().toLowerCase().match(/android/)) return Et(new Ui("operation-not-supported-in-this-environment"));
              c.apn = s;
            }
            u && (c.appDisplayName = u), o = eu(o), c.sessionId = o;
            var h = fs(t.l, t.i, t.m, e, n, null, i, t.o, c, t.u);
            return t.ga().then(function () {
              var e = t.h;
              return t.v.a.set(Ks, a.D(), e);
            }).then(function () {
              var e = ai("cordova.plugins.browsertab.isAvailable", r);
              if ("function" != typeof e) throw new Ui("invalid-cordova-configuration");
              var n = null;
              e(function (e) {
                if (e) {
                  if ("function" != typeof (n = ai("cordova.plugins.browsertab.openUrl", r))) throw new Ui("invalid-cordova-configuration");
                  n(h);
                } else {
                  if ("function" != typeof (n = ai("cordova.InAppBrowser.open", r))) throw new Ui("invalid-cordova-configuration");
                  e = !(!(e = oi()).match(/(iPad|iPhone|iPod).*OS 7_\d/i) && !e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)), t.a = n(h, e ? "_blank" : "_system", "location=yes");
                }
              });
            });
          }(i, t, e, n);
        }).then(function () {
          return new mt(function (t, e) {
            s = function s() {
              var e = ai("cordova.plugins.browsertab.close", r);
              return t(), "function" == typeof e && e(), i.a && "function" == typeof i.a.close && (i.a.close(), i.a = null), !1;
            }, i.va(s), u = function u() {
              a || (a = xe(2e3).then(function () {
                e(new Ui("redirect-cancelled-by-user"));
              }));
            }, c = function c() {
              yi() && u();
            }, o.addEventListener("resume", u, !1), oi().toLowerCase().match(/android/) || o.addEventListener("visibilitychange", c, !1);
          }).s(function (t) {
            return ru(i).then(function () {
              throw t;
            });
          });
        }).ia(function () {
          u && o.removeEventListener("resume", u, !1), c && o.removeEventListener("visibilitychange", c, !1), a && a.cancel(), s && i.Ka(s), i.c = null;
        });
      }, t.va = function (t) {
        this.b.push(t), iu(this).s(function (e) {
          "auth/invalid-cordova-configuration" === e.code && (e = new Kr("unknown", null, null, null, new Ui("no-auth-event")), t(e));
        });
      }, t.Ka = function (t) {
        V(this.b, function (e) {
          return e == t;
        });
      };
      var ou = {
        name: "pendingRedirect",
        A: "session"
      };

      function au(t) {
        return Us(t.b, ou, t.a);
      }

      function su(t, e, n) {
        this.v = t, this.m = e, this.l = n, this.h = [], this.f = !1, this.i = b(this.o, this), this.c = new gu(), this.u = new Iu(), this.g = new function (t) {
          this.a = t, this.b = xs();
        }(this.m + ":" + this.l), this.b = {}, this.b.unknown = this.c, this.b.signInViaRedirect = this.c, this.b.linkViaRedirect = this.c, this.b.reauthViaRedirect = this.c, this.b.signInViaPopup = this.u, this.b.linkViaPopup = this.u, this.b.reauthViaPopup = this.u, this.a = uu(this.v, this.m, this.l, Ja);
      }

      function uu(t, e, i, r) {
        var o = n.SDK_VERSION || null;
        return Jn() ? new Qs(t, e, i, o, r) : new ss(t, e, i, o, r);
      }

      function cu(t) {
        t.f || (t.f = !0, t.a.va(t.i));
        var e = t.a;
        return t.a.ga().s(function (n) {
          throw t.a == e && t.reset(), n;
        });
      }

      function hu(t) {
        t.a.Ib() && cu(t).s(function (e) {
          var n = new Kr("unknown", null, null, null, new Ui("operation-not-supported-in-this-environment"));
          pu(e) && t.o(n);
        }), t.a.Db() || bu(t.c);
      }

      su.prototype.reset = function () {
        this.f = !1, this.a.Ka(this.i), this.a = uu(this.v, this.m, this.l);
      }, su.prototype.subscribe = function (t) {
        if (j(this.h, t) || this.h.push(t), !this.f) {
          var e = this;
          (function (t) {
            return t.b.get(ou, t.a).then(function (t) {
              return "pending" == t;
            });
          })(this.g).then(function (t) {
            t ? au(e.g).then(function () {
              cu(e).s(function (t) {
                var n = new Kr("unknown", null, null, null, new Ui("operation-not-supported-in-this-environment"));
                pu(t) && e.o(n);
              });
            }) : hu(e);
          }).s(function () {
            hu(e);
          });
        }
      }, su.prototype.unsubscribe = function (t) {
        V(this.h, function (e) {
          return e == t;
        });
      }, su.prototype.o = function (t) {
        if (!t) throw new Ui("invalid-auth-event");

        for (var e = !1, n = 0; n < this.h.length; n++) {
          var i = this.h[n];

          if (i.sb(t.b, t.c)) {
            (e = this.b[t.b]) && e.h(t, i), e = !0;
            break;
          }
        }

        return bu(this.c), e;
      };
      var fu = new bi(2e3, 1e4),
          lu = new bi(3e4, 6e4);

      function du(t, e, n, i, r, o) {
        return t.a.zb(e, n, i, function () {
          t.f || (t.f = !0, t.a.va(t.i));
        }, function () {
          t.reset();
        }, r, o);
      }

      function pu(t) {
        return !(!t || "auth/cordova-not-ready" != t.code);
      }

      su.prototype.fa = function () {
        return this.c.fa();
      }, su.prototype.Ca = function (t, e, n) {
        var i,
            r = this;
        return function (t) {
          return t.b.set(ou, "pending", t.a);
        }(this.g).then(function () {
          return r.a.Ca(t, e, n).s(function (t) {
            if (pu(t)) throw new Ui("operation-not-supported-in-this-environment");
            return i = t, au(r.g).then(function () {
              throw i;
            });
          }).then(function () {
            return r.a.Mb() ? new mt(function () {}) : au(r.g).then(function () {
              return r.fa();
            }).then(function () {}).s(function () {});
          });
        });
      }, su.prototype.Ea = function (t, e, n, i) {
        return this.a.Ea(n, function (n) {
          t.ha(e, null, n, i);
        }, fu.get());
      };
      var vu = {};

      function mu(t, e, n) {
        var i = e + ":" + n;
        return vu[i] || (vu[i] = new su(t, e, n)), vu[i];
      }

      function gu() {
        this.b = null, this.f = [], this.c = [], this.a = null, this.g = !1;
      }

      function bu(t) {
        t.g || (t.g = !0, wu(t, !1, null, null));
      }

      function yu(t, e) {
        if (t.b = function () {
          return At(e);
        }, t.f.length) for (var n = 0; n < t.f.length; n++) {
          t.f[n](e);
        }
      }

      function wu(t, e, n, i) {
        e ? i ? function (t, e) {
          if (t.b = function () {
            return Et(e);
          }, t.c.length) for (var n = 0; n < t.c.length; n++) {
            t.c[n](e);
          }
        }(t, i) : yu(t, n) : yu(t, {
          user: null
        }), t.f = [], t.c = [];
      }

      function Iu() {}

      function Tu() {
        this.pb = !1, Object.defineProperty(this, "appVerificationDisabled", {
          get: function get() {
            return this.pb;
          },
          set: function set(t) {
            this.pb = t;
          },
          enumerable: !1
        });
      }

      function Au(t, e) {
        this.a = e, ki(this, "verificationId", t);
      }

      function Eu(t, e, n, i) {
        return new jr(t).Ta(e, n).then(function (t) {
          return new Au(t, i);
        });
      }

      function Su(t, e, n) {
        if (this.h = t, this.i = e, this.g = n, this.c = 3e4, this.f = 96e4, this.b = null, this.a = this.c, this.f < this.c) throw Error("Proactive refresh lower bound greater than upper bound!");
      }

      function ku(t) {
        this.f = t, this.b = this.a = null, this.c = 0;
      }

      function Nu(t, e) {
        var n = e[Zo],
            i = e.refreshToken;
        e = _u(e.expiresIn), t.b = n, t.c = e, t.a = i;
      }

      function _u(t) {
        return w() + 1e3 * parseInt(t, 10);
      }

      function Ou(t, e) {
        return function (t, e) {
          return new mt(function (n, i) {
            "refresh_token" == e.grant_type && e.refresh_token || "authorization_code" == e.grant_type && e.code ? oa(t, t.i + "?key=" + encodeURIComponent(t.b), function (t) {
              t ? t.error ? i(za(t)) : t.access_token && t.refresh_token ? n(t) : i(new Ui("internal-error")) : i(new Ui("network-request-failed"));
            }, "POST", sn(e).toString(), t.f, t.m.get()) : i(new Ui("internal-error"));
          });
        }(t.f, e).then(function (e) {
          return t.b = e.access_token, t.c = _u(e.expires_in), t.a = e.refresh_token, {
            accessToken: t.b,
            expirationTime: t.c,
            refreshToken: t.a
          };
        }).s(function (e) {
          throw "auth/user-token-expired" == e.code && (t.a = null), e;
        });
      }

      function Pu(t, e) {
        this.a = t || null, this.b = e || null, Ni(this, {
          lastSignInTime: wi(e || null),
          creationTime: wi(t || null)
        });
      }

      function Ru(t, e) {
        for (var n in se.call(this, t), e) {
          this[n] = e[n];
        }
      }

      function Cu(t, e, i) {
        this.G = [], this.l = t.apiKey, this.o = t.appName, this.u = t.authDomain || null, t = n.SDK_VERSION ? ri(n.SDK_VERSION) : null, this.b = new Yo(this.l, $a(Ja), t), this.h = new ku(this.b), Vu(this, e[Zo]), Nu(this.h, e), ki(this, "refreshToken", this.h.a), Hu(this, i || {}), Pe.call(this), this.I = !1, this.u && ui() && (this.a = mu(this.u, this.l, this.o)), this.N = [], this.i = null, this.w = function (t) {
          return new Su(function () {
            return t.F(!0);
          }, function (t) {
            return !(!t || "auth/network-request-failed" != t.code);
          }, function () {
            var e = t.h.c - w() - 3e5;
            return 0 < e ? e : 0;
          });
        }(this), this.V = b(this.Ha, this);
        var r = this;
        this.ka = null, this.sa = function (t) {
          r.oa(t.g);
        }, this.X = null, this.O = [], this.ra = function (t) {
          Lu(r, t.c);
        }, this.W = null;
      }

      function Du(t, e) {
        t.X && Ie(t.X, "languageCodeChanged", t.sa), (t.X = e) && be(e, "languageCodeChanged", t.sa);
      }

      function Lu(t, e) {
        t.O = e, ra(t.b, n.SDK_VERSION ? ri(n.SDK_VERSION, t.O) : null);
      }

      function xu(t, e) {
        t.W && Ie(t.W, "frameworkChanged", t.ra), (t.W = e) && be(e, "frameworkChanged", t.ra);
      }

      function Mu(t) {
        try {
          return n.app(t.o).auth();
        } catch (e) {
          throw new Ui("internal-error", "No firebase.auth.Auth instance is available for the Firebase App '" + t.o + "'!");
        }
      }

      function ju(t) {
        t.C || t.w.b || (t.w.start(), Ie(t, "tokenChanged", t.V), be(t, "tokenChanged", t.V));
      }

      function Uu(t) {
        Ie(t, "tokenChanged", t.V), t.w.stop();
      }

      function Vu(t, e) {
        t.qa = e, ki(t, "_lat", e);
      }

      function Fu(t) {
        for (var e = [], n = 0; n < t.N.length; n++) {
          e.push(t.N[n](t));
        }

        return function (t) {
          return new mt(function (e) {
            var n = t.length,
                i = [];
            if (n) for (var r = function r(t, _r2, o) {
              n--, i[t] = _r2 ? {
                Zb: !0,
                value: o
              } : {
                Zb: !1,
                reason: o
              }, 0 == n && e(i);
            }, o = 0; o < t.length; o++) {
              St(t[o], y(r, o, !0), y(r, o, !1));
            } else e(i);
          });
        }(e).then(function () {
          return t;
        });
      }

      function Ku(t) {
        t.a && !t.I && (t.I = !0, t.a.subscribe(t));
      }

      function Hu(t, e) {
        Ni(t, {
          uid: e.uid,
          displayName: e.displayName || null,
          photoURL: e.photoURL || null,
          email: e.email || null,
          emailVerified: e.emailVerified || !1,
          phoneNumber: e.phoneNumber || null,
          isAnonymous: e.isAnonymous || !1,
          metadata: new Pu(e.createdAt, e.lastLoginAt),
          providerData: []
        });
      }

      function qu() {}

      function Wu(t) {
        return At().then(function () {
          if (t.C) throw new Ui("app-deleted");
        });
      }

      function Gu(t) {
        return x(t.providerData, function (t) {
          return t.providerId;
        });
      }

      function Bu(t, e) {
        e && (Xu(t, e.providerId), t.providerData.push(e));
      }

      function Xu(t, e) {
        V(t.providerData, function (t) {
          return t.providerId == e;
        });
      }

      function zu(t, e, n) {
        ("uid" != e || n) && t.hasOwnProperty(e) && ki(t, e, n);
      }

      function Ju(t, e) {
        t != e && (Ni(t, {
          uid: e.uid,
          displayName: e.displayName,
          photoURL: e.photoURL,
          email: e.email,
          emailVerified: e.emailVerified,
          phoneNumber: e.phoneNumber,
          isAnonymous: e.isAnonymous,
          providerData: []
        }), e.metadata ? ki(t, "metadata", function (t) {
          return new Pu(t.a, t.b);
        }(e.metadata)) : ki(t, "metadata", new Pu()), L(e.providerData, function (e) {
          Bu(t, e);
        }), function (t, e) {
          t.b = e.b, t.a = e.a, t.c = e.c;
        }(t.h, e.h), ki(t, "refreshToken", t.h.a));
      }

      function Yu(t) {
        return t.F().then(function (e) {
          var n = t.isAnonymous;
          return function (t, e) {
            return Ba(t.b, Na, {
              idToken: e
            }).then(b(t.uc, t));
          }(t, e).then(function () {
            return n || zu(t, "isAnonymous", !1), e;
          });
        });
      }

      function $u(t, e) {
        e[Zo] && t.qa != e[Zo] && (Nu(t.h, e), t.dispatchEvent(new Ru("tokenChanged")), Vu(t, e[Zo]), zu(t, "refreshToken", t.h.a));
      }

      function Zu(t, e) {
        return Yu(t).then(function () {
          if (j(Gu(t), e)) return Fu(t).then(function () {
            throw new Ui("provider-already-linked");
          });
        });
      }

      function Qu(t, e, n) {
        return _i({
          user: t,
          credential: Vr(e),
          additionalUserInfo: e = ur(e),
          operationType: n
        });
      }

      function tc(t, e) {
        return $u(t, e), t.reload().then(function () {
          return t;
        });
      }

      function ec(t, e, i, r, o) {
        if (!ui()) return Et(new Ui("operation-not-supported-in-this-environment"));
        if (t.i && !o) return Et(t.i);
        var a = sr(i.providerId),
            s = vi(t.uid + ":::"),
            u = null;
        (!fi() || Yn()) && t.u && i.isOAuthProvider && (u = fs(t.u, t.l, t.o, e, i, null, s, n.SDK_VERSION || null));
        var c = Bn(u, a && a.Ba, a && a.Aa);
        return r = r().then(function () {
          if (ic(t), !o) return t.F().then(function () {});
        }).then(function () {
          return du(t.a, c, e, i, s, !!u);
        }).then(function () {
          return new mt(function (n, i) {
            t.ha(e, null, new Ui("cancelled-popup-request"), t.g || null), t.f = n, t.v = i, t.g = s, t.c = t.a.Ea(t, e, c, s);
          });
        }).then(function (t) {
          return c && Gn(c), t ? _i(t) : null;
        }).s(function (t) {
          throw c && Gn(c), t;
        }), rc(t, r, o);
      }

      function nc(t, e, n, i, r) {
        if (!ui()) return Et(new Ui("operation-not-supported-in-this-environment"));
        if (t.i && !r) return Et(t.i);
        var o = null,
            a = vi(t.uid + ":::");
        return i = i().then(function () {
          if (ic(t), !r) return t.F().then(function () {});
        }).then(function () {
          return t.aa = a, Fu(t);
        }).then(function (e) {
          return t.ba && (e = (e = t.ba).b.set(ac, t.D(), e.a)), e;
        }).then(function () {
          return t.a.Ca(e, n, a);
        }).s(function (e) {
          if (o = e, t.ba) return sc(t.ba);
          throw o;
        }).then(function () {
          if (o) throw o;
        }), rc(t, i, r);
      }

      function ic(t) {
        if (!t.a || !t.I) {
          if (t.a && !t.I) throw new Ui("internal-error");
          throw new Ui("auth-domain-config-required");
        }
      }

      function rc(t, e, n) {
        var i = function (t, e, n) {
          return t.i && !n ? (e.cancel(), Et(t.i)) : e.s(function (e) {
            throw !e || "auth/user-disabled" != e.code && "auth/user-token-expired" != e.code || (t.i || t.dispatchEvent(new Ru("userInvalidated")), t.i = e), e;
          });
        }(t, e, n);

        return t.G.push(i), i.ia(function () {
          U(t.G, i);
        }), i;
      }

      function oc(t) {
        if (!t.apiKey) return null;
        var e = {
          apiKey: t.apiKey,
          authDomain: t.authDomain,
          appName: t.appName
        },
            n = {};
        if (!(t.stsTokenManager && t.stsTokenManager.accessToken && t.stsTokenManager.expirationTime)) return null;
        n[Zo] = t.stsTokenManager.accessToken, n.refreshToken = t.stsTokenManager.refreshToken || null, n.expiresIn = (t.stsTokenManager.expirationTime - w()) / 1e3;
        var i = new Cu(e, n, t);
        return t.providerData && L(t.providerData, function (t) {
          t && Bu(i, _i(t));
        }), t.redirectEventId && (i.aa = t.redirectEventId), i;
      }

      gu.prototype.reset = function () {
        this.b = null, this.a && (this.a.cancel(), this.a = null);
      }, gu.prototype.h = function (t, e) {
        if (t) {
          this.reset(), this.g = !0;
          var n = t.b,
              i = t.c,
              r = t.a && "auth/web-storage-unsupported" == t.a.code,
              o = t.a && "auth/operation-not-supported-in-this-environment" == t.a.code;
          "unknown" != n || r || o ? t.a ? (wu(this, !0, null, t.a), At()) : e.wa(n, i) ? function (t, e, n) {
            n = n.wa(e.b, e.c);
            var i = e.f,
                r = e.g,
                o = !!e.b.match(/Redirect$/);
            n(i, r).then(function (e) {
              wu(t, o, e, null);
            }).s(function (e) {
              wu(t, o, null, e);
            });
          }(this, t, e) : Et(new Ui("invalid-auth-event")) : (wu(this, !1, null, null), At());
        } else Et(new Ui("invalid-auth-event"));
      }, gu.prototype.fa = function () {
        var t = this;
        return new mt(function (e, n) {
          t.b ? t.b().then(e, n) : (t.f.push(e), t.c.push(n), function (t) {
            var e = new Ui("timeout");
            t.a && t.a.cancel(), t.a = xe(lu.get()).then(function () {
              t.b || wu(t, !0, null, e);
            });
          }(t));
        });
      }, Iu.prototype.h = function (t, e) {
        if (t) {
          var n = t.b,
              i = t.c;
          t.a ? (e.ha(t.b, null, t.a, t.c), At()) : e.wa(n, i) ? function (t, e) {
            var n = t.c,
                i = t.b;
            e.wa(i, n)(t.f, t.g).then(function (t) {
              e.ha(i, t, null, n);
            }).s(function (t) {
              e.ha(i, null, t, n);
            });
          }(t, e) : Et(new Ui("invalid-auth-event"));
        } else Et(new Ui("invalid-auth-event"));
      }, Au.prototype.confirm = function (t) {
        return t = Ur(this.verificationId, t), this.a(t);
      }, Su.prototype.start = function () {
        this.a = this.c, function t(e, n) {
          e.stop();
          e.b = xe(function (t, e) {
            return e ? (t.a = t.c, t.g()) : (e = t.a, t.a *= 2, t.a > t.f && (t.a = t.f), e);
          }(e, n)).then(function () {
            return t = r.document, _e2 = null, yi() || !t ? At() : new mt(function (n) {
              _e2 = function e() {
                yi() && (t.removeEventListener("visibilitychange", _e2, !1), n());
              }, t.addEventListener("visibilitychange", _e2, !1);
            }).s(function (n) {
              throw t.removeEventListener("visibilitychange", _e2, !1), n;
            });

            var t, _e2;
          }).then(function () {
            return e.h();
          }).then(function () {
            t(e, !0);
          }).s(function (n) {
            e.i(n) && t(e, !1);
          });
        }(this, !0);
      }, Su.prototype.stop = function () {
        this.b && (this.b.cancel(), this.b = null);
      }, ku.prototype.D = function () {
        return {
          apiKey: this.f.b,
          refreshToken: this.a,
          accessToken: this.b,
          expirationTime: this.c
        };
      }, ku.prototype.getToken = function (t) {
        return t = !!t, this.b && !this.a ? Et(new Ui("user-token-expired")) : t || !this.b || w() > this.c - 3e4 ? this.a ? Ou(this, {
          grant_type: "refresh_token",
          refresh_token: this.a
        }) : At(null) : At({
          accessToken: this.b,
          expirationTime: this.c,
          refreshToken: this.a
        });
      }, Pu.prototype.D = function () {
        return {
          lastLoginAt: this.b,
          createdAt: this.a
        };
      }, I(Ru, se), I(Cu, Pe), Cu.prototype.oa = function (t) {
        this.ka = t, ia(this.b, t);
      }, Cu.prototype.ea = function () {
        return this.ka;
      }, Cu.prototype.xa = function () {
        return K(this.O);
      }, Cu.prototype.Ha = function () {
        this.w.b && (this.w.stop(), this.w.start());
      }, ki(Cu.prototype, "providerId", "firebase"), (t = Cu.prototype).reload = function () {
        var t = this;
        return rc(this, Wu(this).then(function () {
          return Yu(t).then(function () {
            return Fu(t);
          }).then(qu);
        }));
      }, t.ac = function (t) {
        return this.F(t).then(function (t) {
          return new function (t) {
            var e = ir(t);
            if (!(e && e.exp && e.auth_time && e.iat)) throw new Ui("internal-error", "An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");
            Ni(this, {
              token: t,
              expirationTime: wi(1e3 * e.exp),
              authTime: wi(1e3 * e.auth_time),
              issuedAtTime: wi(1e3 * e.iat),
              signInProvider: e.firebase && e.firebase.sign_in_provider ? e.firebase.sign_in_provider : null,
              claims: e
            });
          }(t);
        });
      }, t.F = function (t) {
        var e = this;
        return rc(this, Wu(this).then(function () {
          return e.h.getToken(t);
        }).then(function (t) {
          if (!t) throw new Ui("internal-error");
          return t.accessToken != e.qa && (Vu(e, t.accessToken), e.dispatchEvent(new Ru("tokenChanged"))), zu(e, "refreshToken", t.refreshToken), t.accessToken;
        }));
      }, t.uc = function (t) {
        if (!(t = t.users) || !t.length) throw new Ui("internal-error");
        Hu(this, {
          uid: (t = t[0]).localId,
          displayName: t.displayName,
          photoURL: t.photoUrl,
          email: t.email,
          emailVerified: !!t.emailVerified,
          phoneNumber: t.phoneNumber,
          lastLoginAt: t.lastLoginAt,
          createdAt: t.createdAt
        });

        for (var e = function (t) {
          return (t = t.providerUserInfo) && t.length ? x(t, function (t) {
            return new function (t, e, n, i, r, o) {
              Ni(this, {
                uid: t,
                displayName: i || null,
                photoURL: r || null,
                email: n || null,
                phoneNumber: o || null,
                providerId: e
              });
            }(t.rawId, t.providerId, t.email, t.displayName, t.photoUrl, t.phoneNumber);
          }) : [];
        }(t), n = 0; n < e.length; n++) {
          Bu(this, e[n]);
        }

        zu(this, "isAnonymous", !(this.email && t.passwordHash || this.providerData && this.providerData.length));
      }, t.cb = function (t) {
        var e = this,
            n = null;
        return rc(this, t.f(this.b, this.uid).then(function (t) {
          return $u(e, t), n = Qu(e, t, "reauthenticate"), e.i = null, e.reload();
        }).then(function () {
          return n;
        }), !0);
      }, t.vc = function (t) {
        return Ei("firebase.User.prototype.reauthenticateWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential instead."), this.cb(t).then(function () {});
      }, t.ab = function (t) {
        var e = this,
            n = null;
        return rc(this, Zu(this, t.providerId).then(function () {
          return e.F();
        }).then(function (n) {
          return t.c(e.b, n);
        }).then(function (t) {
          return n = Qu(e, t, "link"), tc(e, t);
        }).then(function () {
          return n;
        }));
      }, t.mc = function (t) {
        return Ei("firebase.User.prototype.linkWithCredential is deprecated. Please use firebase.User.prototype.linkAndRetrieveDataWithCredential instead."), this.ab(t).then(function (t) {
          return t.user;
        });
      }, t.nc = function (t, e) {
        var n = this;
        return rc(this, Zu(this, "phone").then(function () {
          return Eu(Mu(n), t, e, b(n.ab, n));
        }));
      }, t.wc = function (t, e) {
        var n = this;
        return rc(this, At().then(function () {
          return Eu(Mu(n), t, e, b(n.cb, n));
        }), !0);
      }, t.mb = function (t) {
        var e = this;
        return rc(this, this.F().then(function (n) {
          return e.b.mb(n, t);
        }).then(function (t) {
          return $u(e, t), e.reload();
        }));
      }, t.Pc = function (t) {
        var e = this;
        return rc(this, this.F().then(function (n) {
          return t.c(e.b, n);
        }).then(function (t) {
          return $u(e, t), e.reload();
        }));
      }, t.nb = function (t) {
        var e = this;
        return rc(this, this.F().then(function (n) {
          return e.b.nb(n, t);
        }).then(function (t) {
          return $u(e, t), e.reload();
        }));
      }, t.ob = function (t) {
        if (void 0 === t.displayName && void 0 === t.photoURL) return Wu(this);
        var e = this;
        return rc(this, this.F().then(function (n) {
          return e.b.ob(n, {
            displayName: t.displayName,
            photoUrl: t.photoURL
          });
        }).then(function (t) {
          return $u(e, t), zu(e, "displayName", t.displayName || null), zu(e, "photoURL", t.photoUrl || null), L(e.providerData, function (t) {
            "password" === t.providerId && (ki(t, "displayName", e.displayName), ki(t, "photoURL", e.photoURL));
          }), Fu(e);
        }).then(qu));
      }, t.Nc = function (t) {
        var e = this;
        return rc(this, Yu(this).then(function (n) {
          return j(Gu(e), t) ? function (t, e, n) {
            return Ba(t, Ea, {
              idToken: e,
              deleteProvider: n
            });
          }(e.b, n, [t]).then(function (t) {
            var n = {};
            return L(t.providerUserInfo || [], function (t) {
              n[t.providerId] = !0;
            }), L(Gu(e), function (t) {
              n[t] || Xu(e, t);
            }), n[jr.PROVIDER_ID] || ki(e, "phoneNumber", null), Fu(e);
          }) : Fu(e).then(function () {
            throw new Ui("no-such-provider");
          });
        }));
      }, t["delete"] = function () {
        var t = this;
        return rc(this, this.F().then(function (e) {
          return Ba(t.b, Aa, {
            idToken: e
          });
        }).then(function () {
          t.dispatchEvent(new Ru("userDeleted"));
        })).then(function () {
          for (var e = 0; e < t.G.length; e++) {
            t.G[e].cancel("app-deleted");
          }

          Du(t, null), xu(t, null), t.G = [], t.C = !0, Uu(t), ki(t, "refreshToken", null), t.a && t.a.unsubscribe(t);
        });
      }, t.sb = function (t, e) {
        return !!("linkViaPopup" == t && (this.g || null) == e && this.f || "reauthViaPopup" == t && (this.g || null) == e && this.f || "linkViaRedirect" == t && (this.aa || null) == e || "reauthViaRedirect" == t && (this.aa || null) == e);
      }, t.ha = function (t, e, n, i) {
        "linkViaPopup" != t && "reauthViaPopup" != t || i != (this.g || null) || (n && this.v ? this.v(n) : e && !n && this.f && this.f(e), this.c && (this.c.cancel(), this.c = null), delete this.f, delete this.v);
      }, t.wa = function (t, e) {
        return "linkViaPopup" == t && e == (this.g || null) ? b(this.xb, this) : "reauthViaPopup" == t && e == (this.g || null) ? b(this.yb, this) : "linkViaRedirect" == t && (this.aa || null) == e ? b(this.xb, this) : "reauthViaRedirect" == t && (this.aa || null) == e ? b(this.yb, this) : null;
      }, t.oc = function (t) {
        var e = this;
        return ec(this, "linkViaPopup", t, function () {
          return Zu(e, t.providerId).then(function () {
            return Fu(e);
          });
        }, !1);
      }, t.xc = function (t) {
        return ec(this, "reauthViaPopup", t, function () {
          return At();
        }, !0);
      }, t.pc = function (t) {
        var e = this;
        return nc(this, "linkViaRedirect", t, function () {
          return Zu(e, t.providerId);
        }, !1);
      }, t.yc = function (t) {
        return nc(this, "reauthViaRedirect", t, function () {
          return At();
        }, !0);
      }, t.xb = function (t, e) {
        var n = this;
        this.c && (this.c.cancel(), this.c = null);
        var i = null;
        return rc(this, this.F().then(function (i) {
          return ma(n.b, {
            requestUri: t,
            sessionId: e,
            idToken: i
          });
        }).then(function (t) {
          return i = Qu(n, t, "link"), tc(n, t);
        }).then(function () {
          return i;
        }));
      }, t.yb = function (t, e) {
        var n = this;
        this.c && (this.c.cancel(), this.c = null);
        var i = null;
        return rc(this, At().then(function () {
          return br(ga(n.b, {
            requestUri: t,
            sessionId: e
          }), n.uid);
        }).then(function (t) {
          return i = Qu(n, t, "reauthenticate"), $u(n, t), n.i = null, n.reload();
        }).then(function () {
          return i;
        }), !0);
      }, t.gb = function (t) {
        var e = this,
            n = null;
        return rc(this, this.F().then(function (e) {
          return n = e, void 0 === t || ot(t) ? {} : $i(new Hi(t));
        }).then(function (t) {
          return e.b.gb(n, t);
        }).then(function (t) {
          if (e.email != t) return e.reload();
        }).then(function () {}));
      }, t.toJSON = function () {
        return this.D();
      }, t.D = function () {
        var t = {
          uid: this.uid,
          displayName: this.displayName,
          photoURL: this.photoURL,
          email: this.email,
          emailVerified: this.emailVerified,
          phoneNumber: this.phoneNumber,
          isAnonymous: this.isAnonymous,
          providerData: [],
          apiKey: this.l,
          appName: this.o,
          authDomain: this.u,
          stsTokenManager: this.h.D(),
          redirectEventId: this.aa || null
        };
        return this.metadata && ht(t, this.metadata.D()), L(this.providerData, function (e) {
          t.providerData.push(function (t) {
            var e,
                n = {};

            for (e in t) {
              t.hasOwnProperty(e) && (n[e] = t[e]);
            }

            return n;
          }(e));
        }), t;
      };
      var ac = {
        name: "redirectUser",
        A: "session"
      };

      function sc(t) {
        return Us(t.b, ac, t.a);
      }

      function uc(t) {
        this.a = t, this.b = xs(), this.c = null, this.f = function (t) {
          var e = fc("local"),
              n = fc("session"),
              i = fc("none");
          return function (t, e, n) {
            var i = js(e, n),
                o = Ms(t, e.A);
            return t.get(e, n).then(function (a) {
              var s = null;

              try {
                s = pi(r.localStorage.getItem(i));
              } catch (t) {}

              if (s && !a) return r.localStorage.removeItem(i), t.set(e, s, n);
              s && a && "localStorage" != o.type && r.localStorage.removeItem(i);
            });
          }(t.b, e, t.a).then(function () {
            return t.b.get(n, t.a);
          }).then(function (r) {
            return r ? n : t.b.get(i, t.a).then(function (n) {
              return n ? i : t.b.get(e, t.a).then(function (n) {
                return n ? e : t.b.get(hc, t.a).then(function (t) {
                  return t ? fc(t) : e;
                });
              });
            });
          }).then(function (e) {
            return t.c = e, cc(t, e.A);
          }).s(function () {
            t.c || (t.c = e);
          });
        }(this), this.b.addListener(fc("local"), this.a, b(this.g, this));
      }

      function cc(t, e) {
        var n,
            i = [];

        for (n in Ds) {
          Ds[n] !== e && i.push(Us(t.b, fc(Ds[n]), t.a));
        }

        return i.push(Us(t.b, hc, t.a)), function (t) {
          return new mt(function (e, n) {
            var i = t.length,
                r = [];
            if (i) for (var o = function o(t, n) {
              i--, r[t] = n, 0 == i && e(r);
            }, a = function a(t) {
              n(t);
            }, s = 0; s < t.length; s++) {
              St(t[s], y(o, s), a);
            } else e(r);
          });
        }(i);
      }

      uc.prototype.g = function () {
        var t = this,
            e = fc("local");
        vc(this, function () {
          return At().then(function () {
            return t.c && "local" != t.c.A ? t.b.get(e, t.a) : null;
          }).then(function (n) {
            if (n) return cc(t, "local").then(function () {
              t.c = e;
            });
          });
        });
      };

      var hc = {
        name: "persistence",
        A: "session"
      };

      function fc(t) {
        return {
          name: "authUser",
          A: t
        };
      }

      function lc(t, e) {
        return vc(t, function () {
          return t.b.set(t.c, e.D(), t.a);
        });
      }

      function dc(t) {
        return vc(t, function () {
          return Us(t.b, t.c, t.a);
        });
      }

      function pc(t, e) {
        return vc(t, function () {
          return t.b.get(t.c, t.a).then(function (t) {
            return t && e && (t.authDomain = e), oc(t || {});
          });
        });
      }

      function vc(t, e) {
        return t.f = t.f.then(e, e), t.f;
      }

      function mc(t) {
        if (this.l = !1, ki(this, "settings", new Tu()), ki(this, "app", t), !Ac(this).options || !Ac(this).options.apiKey) throw new Ui("invalid-api-key");
        t = n.SDK_VERSION ? ri(n.SDK_VERSION) : null, this.b = new Yo(Ac(this).options && Ac(this).options.apiKey, $a(Ja), t), this.N = [], this.o = [], this.I = [], this.Pb = n.INTERNAL.createSubscribe(b(this.ic, this)), this.O = void 0, this.Qb = n.INTERNAL.createSubscribe(b(this.jc, this)), Ic(this, null), this.h = new uc(Ac(this).options.apiKey + ":" + Ac(this).name), this.w = new function (t) {
          this.a = t, this.b = xs();
        }(Ac(this).options.apiKey + ":" + Ac(this).name), this.V = Nc(this, function (t) {
          var e = Ac(t).options.authDomain,
              n = function (t) {
            var e = function (t, e) {
              return t.b.get(ac, t.a).then(function (t) {
                return t && e && (t.authDomain = e), oc(t || {});
              });
            }(t.w, Ac(t).options.authDomain).then(function (e) {
              return (t.C = e) && (e.ba = t.w), sc(t.w);
            });

            return Nc(t, e);
          }(t).then(function () {
            return pc(t.h, e);
          }).then(function (e) {
            return e ? (e.ba = t.w, t.C && (t.C.aa || null) == (e.aa || null) ? e : e.reload().then(function () {
              return lc(t.h, e).then(function () {
                return e;
              });
            }).s(function (n) {
              return "auth/network-request-failed" == n.code ? e : dc(t.h);
            })) : null;
          }).then(function (e) {
            Ic(t, e || null);
          });

          return Nc(t, n);
        }(this)), this.i = Nc(this, function (t) {
          return t.V.then(function () {
            return t.fa();
          }).s(function () {}).then(function () {
            if (!t.l) return t.ka();
          }).s(function () {}).then(function () {
            if (!t.l) {
              t.X = !0;
              var e = t.h;
              e.b.addListener(fc("local"), e.a, t.ka);
            }
          });
        }(this)), this.X = !1, this.ka = b(this.Jc, this), this.Ha = b(this.Z, this), this.qa = b(this.Yb, this), this.ra = b(this.gc, this), this.sa = b(this.hc, this), function (t) {
          var e = Ac(t).options.authDomain,
              n = Ac(t).options.apiKey;
          e && ui() && (t.Ob = t.V.then(function () {
            if (!t.l) {
              if (t.a = mu(e, n, Ac(t).name), t.a.subscribe(t), Ec(t) && Ku(Ec(t)), t.C) {
                Ku(t.C);
                var i = t.C;
                i.oa(t.ea()), Du(i, t), Lu(i = t.C, t.G), xu(i, t), t.C = null;
              }

              return t.a;
            }
          }));
        }(this), this.INTERNAL = {}, this.INTERNAL["delete"] = b(this["delete"], this), this.INTERNAL.logFramework = b(this.qc, this), this.u = 0, Pe.call(this), function (t) {
          Object.defineProperty(t, "lc", {
            get: function get() {
              return this.ea();
            },
            set: function set(t) {
              this.oa(t);
            },
            enumerable: !1
          }), t.W = null;
        }(this), this.G = [];
      }

      function gc(t) {
        se.call(this, "languageCodeChanged"), this.g = t;
      }

      function bc(t) {
        se.call(this, "frameworkChanged"), this.c = t;
      }

      function yc(t) {
        return t.Ob || Et(new Ui("auth-domain-config-required"));
      }

      function wc(t, e) {
        var n = {};
        return n.apiKey = Ac(t).options.apiKey, n.authDomain = Ac(t).options.authDomain, n.appName = Ac(t).name, t.V.then(function () {
          return function (t, e, n, i) {
            var r = new Cu(t, e);
            return n && (r.ba = n), i && Lu(r, i), r.reload().then(function () {
              return r;
            });
          }(n, e, t.w, t.xa());
        }).then(function (e) {
          return Ec(t) && e.uid == Ec(t).uid ? (Ju(Ec(t), e), t.Z(e)) : (Ic(t, e), Ku(e), t.Z(e));
        }).then(function () {
          kc(t);
        });
      }

      function Ic(t, e) {
        Ec(t) && (function (t, e) {
          V(t.N, function (t) {
            return t == e;
          });
        }(Ec(t), t.Ha), Ie(Ec(t), "tokenChanged", t.qa), Ie(Ec(t), "userDeleted", t.ra), Ie(Ec(t), "userInvalidated", t.sa), Uu(Ec(t))), e && (e.N.push(t.Ha), be(e, "tokenChanged", t.qa), be(e, "userDeleted", t.ra), be(e, "userInvalidated", t.sa), 0 < t.u && ju(e)), ki(t, "currentUser", e), e && (e.oa(t.ea()), Du(e, t), Lu(e, t.G), xu(e, t));
      }

      function Tc(t, e) {
        var n = null,
            i = null;
        return Nc(t, e.then(function (e) {
          return n = Vr(e), i = ur(e), wc(t, e);
        }).then(function () {
          return _i({
            user: Ec(t),
            credential: n,
            additionalUserInfo: i,
            operationType: "signIn"
          });
        }));
      }

      function Ac(t) {
        return t.app;
      }

      function Ec(t) {
        return t.currentUser;
      }

      function Sc(t) {
        return Ec(t) && Ec(t)._lat || null;
      }

      function kc(t) {
        if (t.X) {
          for (var e = 0; e < t.o.length; e++) {
            t.o[e] && t.o[e](Sc(t));
          }

          if (t.O !== t.getUid() && t.I.length) for (t.O = t.getUid(), e = 0; e < t.I.length; e++) {
            t.I[e] && t.I[e](Sc(t));
          }
        }
      }

      function Nc(t, e) {
        return t.N.push(e), e.ia(function () {
          U(t.N, e);
        }), e;
      }

      function _c() {}

      function Oc() {
        this.a = {}, this.b = 1e12;
      }

      uc.prototype.jb = function (t) {
        var e = null,
            n = this;
        return function (t) {
          var e = new Ui("invalid-persistence-type"),
              n = new Ui("unsupported-persistence-type");

          t: {
            for (i in Ds) {
              if (Ds[i] == t) {
                var i = !0;
                break t;
              }
            }

            i = !1;
          }

          if (!i || "string" != typeof t) throw e;

          switch (Zn()) {
            case "ReactNative":
              if ("session" === t) throw n;
              break;

            case "Node":
              if ("none" !== t) throw n;
              break;

            default:
              if (!si() && "none" !== t) throw n;
          }
        }(t), vc(this, function () {
          return t != n.c.A ? n.b.get(n.c, n.a).then(function (i) {
            return e = i, cc(n, t);
          }).then(function () {
            if (n.c = fc(t), e) return n.b.set(n.c, e, n.a);
          }) : At();
        });
      }, I(mc, Pe), I(gc, se), I(bc, se), (t = mc.prototype).jb = function (t) {
        return Nc(this, t = this.h.jb(t));
      }, t.oa = function (t) {
        this.W === t || this.l || (this.W = t, ia(this.b, this.W), this.dispatchEvent(new gc(this.ea())));
      }, t.ea = function () {
        return this.W;
      }, t.Qc = function () {
        var t = r.navigator;
        this.oa(t && (t.languages && t.languages[0] || t.language || t.userLanguage) || null);
      }, t.qc = function (t) {
        this.G.push(t), ra(this.b, n.SDK_VERSION ? ri(n.SDK_VERSION, this.G) : null), this.dispatchEvent(new bc(this.G));
      }, t.xa = function () {
        return K(this.G);
      }, t.toJSON = function () {
        return {
          apiKey: Ac(this).options.apiKey,
          authDomain: Ac(this).options.authDomain,
          appName: Ac(this).name,
          currentUser: Ec(this) && Ec(this).D()
        };
      }, t.sb = function (t, e) {
        switch (t) {
          case "unknown":
          case "signInViaRedirect":
            return !0;

          case "signInViaPopup":
            return this.g == e && !!this.f;

          default:
            return !1;
        }
      }, t.ha = function (t, e, n, i) {
        "signInViaPopup" == t && this.g == i && (n && this.v ? this.v(n) : e && !n && this.f && this.f(e), this.c && (this.c.cancel(), this.c = null), delete this.f, delete this.v);
      }, t.wa = function (t, e) {
        return "signInViaRedirect" == t || "signInViaPopup" == t && this.g == e && this.f ? b(this.Xb, this) : null;
      }, t.Xb = function (t, e) {
        var n = this;
        t = {
          requestUri: t,
          sessionId: e
        }, this.c && (this.c.cancel(), this.c = null);
        var i = null,
            r = null,
            o = va(n.b, t).then(function (t) {
          return i = Vr(t), r = ur(t), t;
        });
        return Nc(this, t = n.V.then(function () {
          return o;
        }).then(function (t) {
          return wc(n, t);
        }).then(function () {
          return _i({
            user: Ec(n),
            credential: i,
            additionalUserInfo: r,
            operationType: "signIn"
          });
        }));
      }, t.Hc = function (t) {
        if (!ui()) return Et(new Ui("operation-not-supported-in-this-environment"));
        var e = this,
            i = sr(t.providerId),
            r = vi(),
            o = null;
        (!fi() || Yn()) && Ac(this).options.authDomain && t.isOAuthProvider && (o = fs(Ac(this).options.authDomain, Ac(this).options.apiKey, Ac(this).name, "signInViaPopup", t, null, r, n.SDK_VERSION || null));
        var a = Bn(o, i && i.Ba, i && i.Aa);
        return Nc(this, i = yc(this).then(function (e) {
          return du(e, a, "signInViaPopup", t, r, !!o);
        }).then(function () {
          return new mt(function (t, n) {
            e.ha("signInViaPopup", null, new Ui("cancelled-popup-request"), e.g), e.f = t, e.v = n, e.g = r, e.c = e.a.Ea(e, "signInViaPopup", a, r);
          });
        }).then(function (t) {
          return a && Gn(a), t ? _i(t) : null;
        }).s(function (t) {
          throw a && Gn(a), t;
        }));
      }, t.Ic = function (t) {
        if (!ui()) return Et(new Ui("operation-not-supported-in-this-environment"));
        var e = this;
        return Nc(this, yc(this).then(function () {
          return vc(t = e.h, function () {
            return t.b.set(hc, t.c.A, t.a);
          });
          var t;
        }).then(function () {
          return e.a.Ca("signInViaRedirect", t);
        }));
      }, t.fa = function () {
        if (!ui()) return Et(new Ui("operation-not-supported-in-this-environment"));
        var t = this;
        return Nc(this, yc(this).then(function () {
          return t.a.fa();
        }).then(function (t) {
          return t ? _i(t) : null;
        }));
      }, t.Oc = function (t) {
        if (!t) return Et(new Ui("null-user"));
        var e = this,
            n = {};
        n.apiKey = Ac(this).options.apiKey, n.authDomain = Ac(this).options.authDomain, n.appName = Ac(this).name;

        var i = function (t, e, n, i) {
          e = e || {
            apiKey: t.l,
            authDomain: t.u,
            appName: t.o
          };
          var r = t.h,
              o = {};
          return o[Zo] = r.b, o.refreshToken = r.a, o.expiresIn = (r.c - w()) / 1e3, e = new Cu(e, o), n && (e.ba = n), i && Lu(e, i), Ju(e, t), e;
        }(t, n, e.w, e.xa());

        return Nc(this, this.i.then(function () {
          if (Ac(e).options.apiKey != t.l) return i.reload();
        }).then(function () {
          return Ec(e) && t.uid == Ec(e).uid ? (Ju(Ec(e), t), e.Z(t)) : (Ic(e, i), Ku(i), e.Z(i));
        }).then(function () {
          kc(e);
        }));
      }, t.kb = function () {
        var t = this;
        return Nc(this, this.i.then(function () {
          return Ec(t) ? (Ic(t, null), dc(t.h).then(function () {
            kc(t);
          })) : At();
        }));
      }, t.Jc = function () {
        var t = this;
        return pc(this.h, Ac(this).options.authDomain).then(function (e) {
          if (!t.l) {
            var n;

            if (n = Ec(t) && e) {
              n = Ec(t).uid;
              var i = e.uid;
              n = void 0 !== n && null !== n && "" !== n && void 0 !== i && null !== i && "" !== i && n == i;
            }

            if (n) return Ju(Ec(t), e), Ec(t).F();
            (Ec(t) || e) && (Ic(t, e), e && (Ku(e), e.ba = t.w), t.a && t.a.subscribe(t), kc(t));
          }
        });
      }, t.Z = function (t) {
        return lc(this.h, t);
      }, t.Yb = function () {
        kc(this), this.Z(Ec(this));
      }, t.gc = function () {
        this.kb();
      }, t.hc = function () {
        this.kb();
      }, t.ic = function (t) {
        var e = this;
        this.addAuthTokenListener(function () {
          t.next(Ec(e));
        });
      }, t.jc = function (t) {
        var e = this;
        !function (t, e) {
          t.I.push(e), Nc(t, t.i.then(function () {
            !t.l && j(t.I, e) && t.O !== t.getUid() && (t.O = t.getUid(), e(Sc(t)));
          }));
        }(this, function () {
          t.next(Ec(e));
        });
      }, t.sc = function (t, e, i) {
        var r = this;
        return this.X && n.Promise.resolve().then(function () {
          l(t) ? t(Ec(r)) : l(t.next) && t.next(Ec(r));
        }), this.Pb(t, e, i);
      }, t.rc = function (t, e, i) {
        var r = this;
        return this.X && n.Promise.resolve().then(function () {
          r.O = r.getUid(), l(t) ? t(Ec(r)) : l(t.next) && t.next(Ec(r));
        }), this.Qb(t, e, i);
      }, t.$b = function (t) {
        var e = this;
        return Nc(this, this.i.then(function () {
          return Ec(e) ? Ec(e).F(t).then(function (t) {
            return {
              accessToken: t
            };
          }) : null;
        }));
      }, t.Jb = function (t) {
        var e = this;
        return this.i.then(function () {
          return Tc(e, Ba(e.b, Ka, {
            token: t
          }));
        }).then(function (t) {
          var n = t.user;
          return zu(n, "isAnonymous", !1), e.Z(n), t;
        });
      }, t.Bc = function (t) {
        return Ei("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCustomToken is deprecated. Please use firebase.auth.Auth.prototype.signInWithCustomToken instead."), this.Jb(t);
      }, t.Cc = function (t, e) {
        return Ei("firebase.auth.Auth.prototype.signInAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.signInWithEmailAndPassword instead."), this.Kb(t, e);
      }, t.Kb = function (t, e) {
        var n = this;
        return this.i.then(function () {
          return Tc(n, Ba(n.b, Ha, {
            email: t,
            password: e
          }));
        });
      }, t.ub = function (t, e) {
        var n = this;
        return this.i.then(function () {
          return Tc(n, Ba(n.b, Ia, {
            email: t,
            password: e
          }));
        });
      }, t.Sb = function (t, e) {
        return Ei("firebase.auth.Auth.prototype.createUserAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.createUserWithEmailAndPassword instead."), this.ub(t, e);
      }, t.Ec = function (t) {
        return Ei("firebase.auth.Auth.prototype.signInWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential instead."), this.Oa(t).then(function (t) {
          return t.user;
        });
      }, t.Oa = function (t) {
        var e = this;
        return this.i.then(function () {
          return Tc(e, t.ya(e.b));
        });
      }, t.Pa = function () {
        var t = this;
        return this.i.then(function () {
          var e = Ec(t);
          return e && e.isAnonymous ? _i({
            user: e,
            credential: null,
            additionalUserInfo: _i({
              providerId: null,
              isNewUser: !1
            }),
            operationType: "signIn"
          }) : Tc(t, t.b.Pa()).then(function (e) {
            var n = e.user;
            return zu(n, "isAnonymous", !0), t.Z(n), e;
          });
        });
      }, t.Dc = function () {
        return Ei("firebase.auth.Auth.prototype.signInAnonymouslyAndRetrieveData is deprecated. Please use firebase.auth.Auth.prototype.signInAnonymously instead."), this.Pa();
      }, t.getUid = function () {
        return Ec(this) && Ec(this).uid || null;
      }, t.Rb = function (t) {
        this.addAuthTokenListener(t), this.u++, 0 < this.u && Ec(this) && ju(Ec(this));
      }, t.zc = function (t) {
        var e = this;
        L(this.o, function (n) {
          n == t && e.u--;
        }), 0 > this.u && (this.u = 0), 0 == this.u && Ec(this) && Uu(Ec(this)), this.removeAuthTokenListener(t);
      }, t.addAuthTokenListener = function (t) {
        var e = this;
        this.o.push(t), Nc(this, this.i.then(function () {
          e.l || j(e.o, t) && t(Sc(e));
        }));
      }, t.removeAuthTokenListener = function (t) {
        V(this.o, function (e) {
          return e == t;
        });
      }, t["delete"] = function () {
        this.l = !0;

        for (var t = 0; t < this.N.length; t++) {
          this.N[t].cancel("app-deleted");
        }

        return this.N = [], this.h && (t = this.h).b.removeListener(fc("local"), t.a, this.ka), this.a && this.a.unsubscribe(this), n.Promise.resolve();
      }, t.Vb = function (t) {
        return Ei("firebase.auth.Auth.prototype.fetchProvidersForEmail is deprecated. Please use firebase.auth.Auth.prototype.fetchSignInMethodsForEmail instead."), Nc(this, function (t, e) {
          return Ba(t, Ta, {
            identifier: e,
            continueUri: ci() ? Hn() : "http://localhost"
          }).then(function (t) {
            return t.allProviders || [];
          });
        }(this.b, t));
      }, t.Wb = function (t) {
        return Nc(this, function (t, e) {
          return Ba(t, Ta, {
            identifier: e,
            continueUri: ci() ? Hn() : "http://localhost"
          }).then(function (t) {
            return t.signinMethods || [];
          });
        }(this.b, t));
      }, t.kc = function (t) {
        return !!Lr(t);
      }, t.ib = function (t, e) {
        var n = this;
        return Nc(this, At().then(function () {
          var t = new Hi(e);
          if (!t.c) throw new Ui("argument-error", Wi + " must be true when sending sign in link to email");
          return $i(t);
        }).then(function (e) {
          return n.b.ib(t, e);
        }).then(function () {}));
      }, t.Rc = function (t) {
        return this.Ja(t).then(function (t) {
          return t.data.email;
        });
      }, t.Xa = function (t, e) {
        return Nc(this, this.b.Xa(t, e).then(function () {}));
      }, t.Ja = function (t) {
        return Nc(this, this.b.Ja(t).then(function (t) {
          return new function (t) {
            var e = {},
                n = t[Ri],
                i = t[Ci];
            if (!(t = t[Di]) || t != Pi && !n) throw Error("Invalid provider user info!");
            e[xi] = i || null, e[Li] = n || null, ki(this, ji, t), ki(this, Mi, Oi(e));
          }(t);
        }));
      }, t.Va = function (t) {
        return Nc(this, this.b.Va(t).then(function () {}));
      }, t.hb = function (t, e) {
        var n = this;
        return Nc(this, At().then(function () {
          return void 0 === e || ot(e) ? {} : $i(new Hi(e));
        }).then(function (e) {
          return n.b.hb(t, e);
        }).then(function () {}));
      }, t.Gc = function (t, e) {
        return Nc(this, Eu(this, t, e, b(this.Oa, this)));
      }, t.Fc = function (t, e) {
        var n = this;
        return Nc(this, At().then(function () {
          var i = Dr(t, e || Hn());
          return n.Oa(i);
        }));
      }, _c.prototype.render = function () {}, _c.prototype.reset = function () {}, _c.prototype.getResponse = function () {}, _c.prototype.execute = function () {};
      var Pc = null;

      function Rc(t, e) {
        return (e = Cc(e)) && t.a[e] || null;
      }

      function Cc(t) {
        return (t = void 0 === t ? 1e12 : t) ? t.toString() : null;
      }

      function Dc(t, e) {
        this.g = !1, this.c = e, this.a = this.b = null, this.h = "invisible" !== this.c.size, this.f = Cn(t);
        var n = this;
        this.i = function () {
          n.execute();
        }, this.h ? this.execute() : be(this.f, "click", this.i);
      }

      function Lc(t) {
        if (t.g) throw Error("reCAPTCHA mock was already deleted!");
      }

      function xc() {}

      Oc.prototype.render = function (t, e) {
        return this.a[this.b.toString()] = new Dc(t, e), this.b++;
      }, Oc.prototype.reset = function (t) {
        var e = Rc(this, t);
        t = Cc(t), e && t && (e["delete"](), delete this.a[t]);
      }, Oc.prototype.getResponse = function (t) {
        return (t = Rc(this, t)) ? t.getResponse() : null;
      }, Oc.prototype.execute = function (t) {
        (t = Rc(this, t)) && t.execute();
      }, Dc.prototype.getResponse = function () {
        return Lc(this), this.b;
      }, Dc.prototype.execute = function () {
        Lc(this);
        var t = this;
        this.a || (this.a = setTimeout(function () {
          t.b = function () {
            for (var t = 50, e = []; 0 < t;) {
              e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62 * Math.random()))), t--;
            }

            return e.join("");
          }();

          var e = t.c.callback,
              n = t.c["expired-callback"];
          if (e) try {
            e(t.b);
          } catch (t) {}
          t.a = setTimeout(function () {
            if (t.a = null, t.b = null, n) try {
              n();
            } catch (t) {}
            t.h && t.execute();
          }, 6e4);
        }, 500));
      }, Dc.prototype["delete"] = function () {
        Lc(this), this.g = !0, clearTimeout(this.a), this.a = null, Ie(this.f, "click", this.i);
      }, xc.prototype.g = function () {
        return Pc || (Pc = new Oc()), At(Pc);
      }, xc.prototype.c = function () {};
      var Mc = null;

      function jc() {
        this.b = r.grecaptcha ? 1 / 0 : 0, this.f = null, this.a = "__rcb" + Math.floor(1e6 * Math.random()).toString();
      }

      var Uc = mn("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),
          Vc = new bi(3e4, 6e4);
      jc.prototype.g = function (t) {
        var e = this;
        return new mt(function (n, i) {
          var o = setTimeout(function () {
            i(new Ui("network-request-failed"));
          }, Vc.get());
          !r.grecaptcha || t !== e.f && !e.b ? (r[e.a] = function () {
            if (r.grecaptcha) {
              e.f = t;
              var a = r.grecaptcha.render;
              r.grecaptcha.render = function (t, n) {
                return t = a(t, n), e.b++, t;
              }, clearTimeout(o), n(r.grecaptcha);
            } else clearTimeout(o), i(new Ui("internal-error"));

            delete r[e.a];
          }, At(qo(yn(Uc, {
            onload: e.a,
            hl: t || ""
          }))).s(function () {
            clearTimeout(o), i(new Ui("internal-error", "Unable to load external reCAPTCHA dependencies!"));
          })) : (clearTimeout(o), n(r.grecaptcha));
        });
      }, jc.prototype.c = function () {
        this.b--;
      };
      var Fc = null;

      function Kc(t, e, n, i, o, a, s) {
        if (ki(this, "type", "recaptcha"), this.c = this.f = null, this.C = !1, this.l = e, this.g = null, s ? (Mc || (Mc = new xc()), s = Mc) : (Fc || (Fc = new jc()), s = Fc), this.o = s, this.a = n || {
          theme: "light",
          type: "image"
        }, this.h = [], this.a[Wc]) throw new Ui("argument-error", "sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");
        if (this.i = "invisible" === this.a[Gc], !r.document) throw new Ui("operation-not-supported-in-this-environment", "RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");
        if (!Cn(e) || !this.i && Cn(e).hasChildNodes()) throw new Ui("argument-error", "reCAPTCHA container is either not found or already contains inner elements!");
        this.u = new Yo(t, a || null, o || null), this.v = i || function () {
          return null;
        };
        var u = this;
        this.m = [];
        var c = this.a[Hc];

        this.a[Hc] = function (t) {
          if (Bc(u, t), "function" == typeof c) c(t);else if ("string" == typeof c) {
            var e = ai(c, r);
            "function" == typeof e && e(t);
          }
        };

        var h = this.a[qc];

        this.a[qc] = function () {
          if (Bc(u, null), "function" == typeof h) h();else if ("string" == typeof h) {
            var t = ai(h, r);
            "function" == typeof t && t();
          }
        };
      }

      var Hc = "callback",
          qc = "expired-callback",
          Wc = "sitekey",
          Gc = "size";

      function Bc(t, e) {
        for (var n = 0; n < t.m.length; n++) {
          try {
            t.m[n](e);
          } catch (t) {}
        }
      }

      function Xc(t, e) {
        return t.h.push(e), e.ia(function () {
          U(t.h, e);
        }), e;
      }

      function zc(t) {
        if (t.C) throw new Ui("internal-error", "RecaptchaVerifier instance has been destroyed.");
      }

      function Jc(t, e, i) {
        var r = !1;

        try {
          this.b = i || n.app();
        } catch (t) {
          throw new Ui("argument-error", "No firebase.app.App instance is currently initialized.");
        }

        if (!this.b.options || !this.b.options.apiKey) throw new Ui("invalid-api-key");
        i = this.b.options.apiKey;
        var o = this,
            a = null;

        try {
          a = this.b.auth().xa();
        } catch (t) {}

        try {
          r = this.b.auth().settings.appVerificationDisabledForTesting;
        } catch (t) {}

        a = n.SDK_VERSION ? ri(n.SDK_VERSION, a) : null, Kc.call(this, i, t, e, function () {
          try {
            var t = o.b.auth().ea();
          } catch (e) {
            t = null;
          }

          return t;
        }, a, $a(Ja), r);
      }

      function Yc(t, e, n, i) {
        t: {
          n = Array.prototype.slice.call(n);

          for (var r = 0, o = !1, a = 0; a < e.length; a++) {
            if (e[a].optional) o = !0;else {
              if (o) throw new Ui("internal-error", "Argument validator encountered a required argument after an optional argument.");
              r++;
            }
          }

          if (o = e.length, n.length < r || o < n.length) i = "Expected " + (r == o ? 1 == r ? "1 argument" : r + " arguments" : r + "-" + o + " arguments") + " but got " + n.length + ".";else {
            for (r = 0; r < n.length; r++) {
              if (o = e[r].optional && void 0 === n[r], !e[r].M(n[r]) && !o) {
                if (e = e[r], 0 > r || r >= $c.length) throw new Ui("internal-error", "Argument validator received an unsupported number of arguments.");
                n = $c[r], i = (i ? "" : n + " argument ") + (e.name ? '"' + e.name + '" ' : "") + "must be " + e.K + ".";
                break t;
              }
            }

            i = null;
          }
        }

        if (i) throw new Ui("argument-error", t + " failed: " + i);
      }

      (t = Kc.prototype).za = function () {
        var t = this;
        return this.f ? this.f : this.f = Xc(this, At().then(function () {
          if (ci() && !$n()) return zn();
          throw new Ui("operation-not-supported-in-this-environment", "RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.");
        }).then(function () {
          return t.o.g(t.v());
        }).then(function (e) {
          return t.g = e, Ba(t.u, Ca, {});
        }).then(function (e) {
          t.a[Wc] = e.recaptchaSiteKey;
        }).s(function (e) {
          throw t.f = null, e;
        }));
      }, t.render = function () {
        zc(this);
        var t = this;
        return Xc(this, this.za().then(function () {
          if (null === t.c) {
            var e = t.l;

            if (!t.i) {
              var n = Cn(e);
              e = xn("DIV"), n.appendChild(e);
            }

            t.c = t.g.render(e, t.a);
          }

          return t.c;
        }));
      }, t.verify = function () {
        zc(this);
        var t = this;
        return Xc(this, this.render().then(function (e) {
          return new mt(function (n) {
            var i = t.g.getResponse(e);
            if (i) n(i);else {
              var r = function r(e) {
                e && (function (t, e) {
                  V(t.m, function (t) {
                    return t == e;
                  });
                }(t, r), n(e));
              };

              t.m.push(r), t.i && t.g.execute(t.c);
            }
          });
        }));
      }, t.reset = function () {
        zc(this), null !== this.c && this.g.reset(this.c);
      }, t.clear = function () {
        zc(this), this.C = !0, this.o.c();

        for (var t = 0; t < this.h.length; t++) {
          this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");
        }

        if (!this.i) {
          t = Cn(this.l);

          for (var e; e = t.firstChild;) {
            t.removeChild(e);
          }
        }
      }, I(Jc, Kc);
      var $c = "First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");

      function Zc(t, e) {
        return {
          name: t || "",
          K: "a valid string",
          optional: !!e,
          M: o
        };
      }

      function Qc(t, e) {
        return {
          name: t || "",
          K: "a boolean",
          optional: !!e,
          M: a
        };
      }

      function th(t, e) {
        return {
          name: t || "",
          K: "a valid object",
          optional: !!e,
          M: d
        };
      }

      function eh(t, e) {
        return {
          name: t || "",
          K: "a function",
          optional: !!e,
          M: l
        };
      }

      function nh(t, e) {
        return {
          name: t || "",
          K: "null",
          optional: !!e,
          M: c
        };
      }

      function ih(t) {
        return {
          name: t ? t + "Credential" : "credential",
          K: t ? "a valid " + t + " credential" : "a valid credential",
          optional: !1,
          M: function M(e) {
            if (!e) return !1;
            var n = !t || e.providerId === t;
            return !(!e.ya || !n);
          }
        };
      }

      function rh() {
        return {
          name: "applicationVerifier",
          K: "an implementation of firebase.auth.ApplicationVerifier",
          optional: !1,
          M: function M(t) {
            return !!(t && o(t.type) && l(t.verify));
          }
        };
      }

      function oh(t, e, n, i) {
        return {
          name: n || "",
          K: t.K + " or " + e.K,
          optional: !!i,
          M: function M(n) {
            return t.M(n) || e.M(n);
          }
        };
      }

      function ah(t, e) {
        for (var n in e) {
          var i = e[n].name;
          t[i] = ch(i, t[n], e[n].j);
        }
      }

      function sh(t, e) {
        for (var n in e) {
          var i = e[n].name;

          if (i !== n) {
            var r = e[n].qb;
            Object.defineProperty(t, i, {
              get: function get() {
                return this[n];
              },
              set: function set(t) {
                Yc(i, [r], [t], !0), this[n] = t;
              },
              enumerable: !0
            });
          }
        }
      }

      function uh(t, e, n, i) {
        t[e] = ch(e, n, i);
      }

      function ch(t, e, n) {
        function i() {
          var t = Array.prototype.slice.call(arguments);
          return Yc(o, n, t), e.apply(this, t);
        }

        if (!n) return e;

        var r,
            o = function (t) {
          return (t = t.split("."))[t.length - 1];
        }(t);

        for (r in e) {
          i[r] = e[r];
        }

        for (r in e.prototype) {
          i.prototype[r] = e.prototype[r];
        }

        return i;
      }

      ah(mc.prototype, {
        Va: {
          name: "applyActionCode",
          j: [Zc("code")]
        },
        Ja: {
          name: "checkActionCode",
          j: [Zc("code")]
        },
        Xa: {
          name: "confirmPasswordReset",
          j: [Zc("code"), Zc("newPassword")]
        },
        ub: {
          name: "createUserWithEmailAndPassword",
          j: [Zc("email"), Zc("password")]
        },
        Sb: {
          name: "createUserAndRetrieveDataWithEmailAndPassword",
          j: [Zc("email"), Zc("password")]
        },
        Vb: {
          name: "fetchProvidersForEmail",
          j: [Zc("email")]
        },
        Wb: {
          name: "fetchSignInMethodsForEmail",
          j: [Zc("email")]
        },
        fa: {
          name: "getRedirectResult",
          j: []
        },
        kc: {
          name: "isSignInWithEmailLink",
          j: [Zc("emailLink")]
        },
        rc: {
          name: "onAuthStateChanged",
          j: [oh(th(), eh(), "nextOrObserver"), eh("opt_error", !0), eh("opt_completed", !0)]
        },
        sc: {
          name: "onIdTokenChanged",
          j: [oh(th(), eh(), "nextOrObserver"), eh("opt_error", !0), eh("opt_completed", !0)]
        },
        hb: {
          name: "sendPasswordResetEmail",
          j: [Zc("email"), oh(th("opt_actionCodeSettings", !0), nh(null, !0), "opt_actionCodeSettings", !0)]
        },
        ib: {
          name: "sendSignInLinkToEmail",
          j: [Zc("email"), th("actionCodeSettings")]
        },
        jb: {
          name: "setPersistence",
          j: [Zc("persistence")]
        },
        Oa: {
          name: "signInAndRetrieveDataWithCredential",
          j: [ih()]
        },
        Pa: {
          name: "signInAnonymously",
          j: []
        },
        Dc: {
          name: "signInAnonymouslyAndRetrieveData",
          j: []
        },
        Ec: {
          name: "signInWithCredential",
          j: [ih()]
        },
        Jb: {
          name: "signInWithCustomToken",
          j: [Zc("token")]
        },
        Bc: {
          name: "signInAndRetrieveDataWithCustomToken",
          j: [Zc("token")]
        },
        Kb: {
          name: "signInWithEmailAndPassword",
          j: [Zc("email"), Zc("password")]
        },
        Fc: {
          name: "signInWithEmailLink",
          j: [Zc("email"), Zc("emailLink", !0)]
        },
        Cc: {
          name: "signInAndRetrieveDataWithEmailAndPassword",
          j: [Zc("email"), Zc("password")]
        },
        Gc: {
          name: "signInWithPhoneNumber",
          j: [Zc("phoneNumber"), rh()]
        },
        Hc: {
          name: "signInWithPopup",
          j: [{
            name: "authProvider",
            K: "a valid Auth provider",
            optional: !1,
            M: function M(t) {
              return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty("isOAuthProvider"));
            }
          }]
        },
        Ic: {
          name: "signInWithRedirect",
          j: [{
            name: "authProvider",
            K: "a valid Auth provider",
            optional: !1,
            M: function M(t) {
              return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty("isOAuthProvider"));
            }
          }]
        },
        Oc: {
          name: "updateCurrentUser",
          j: [oh({
            name: "user",
            K: "an instance of Firebase User",
            optional: !1,
            M: function M(t) {
              return !!(t && t instanceof Cu);
            }
          }, nh(), "user")]
        },
        kb: {
          name: "signOut",
          j: []
        },
        toJSON: {
          name: "toJSON",
          j: [Zc(null, !0)]
        },
        Qc: {
          name: "useDeviceLanguage",
          j: []
        },
        Rc: {
          name: "verifyPasswordResetCode",
          j: [Zc("code")]
        }
      }), sh(mc.prototype, {
        lc: {
          name: "languageCode",
          qb: oh(Zc(), nh(), "languageCode")
        }
      }), mc.Persistence = Ds, mc.Persistence.LOCAL = "local", mc.Persistence.SESSION = "session", mc.Persistence.NONE = "none", ah(Cu.prototype, {
        "delete": {
          name: "delete",
          j: []
        },
        ac: {
          name: "getIdTokenResult",
          j: [Qc("opt_forceRefresh", !0)]
        },
        F: {
          name: "getIdToken",
          j: [Qc("opt_forceRefresh", !0)]
        },
        ab: {
          name: "linkAndRetrieveDataWithCredential",
          j: [ih()]
        },
        mc: {
          name: "linkWithCredential",
          j: [ih()]
        },
        nc: {
          name: "linkWithPhoneNumber",
          j: [Zc("phoneNumber"), rh()]
        },
        oc: {
          name: "linkWithPopup",
          j: [{
            name: "authProvider",
            K: "a valid Auth provider",
            optional: !1,
            M: function M(t) {
              return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty("isOAuthProvider"));
            }
          }]
        },
        pc: {
          name: "linkWithRedirect",
          j: [{
            name: "authProvider",
            K: "a valid Auth provider",
            optional: !1,
            M: function M(t) {
              return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty("isOAuthProvider"));
            }
          }]
        },
        cb: {
          name: "reauthenticateAndRetrieveDataWithCredential",
          j: [ih()]
        },
        vc: {
          name: "reauthenticateWithCredential",
          j: [ih()]
        },
        wc: {
          name: "reauthenticateWithPhoneNumber",
          j: [Zc("phoneNumber"), rh()]
        },
        xc: {
          name: "reauthenticateWithPopup",
          j: [{
            name: "authProvider",
            K: "a valid Auth provider",
            optional: !1,
            M: function M(t) {
              return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty("isOAuthProvider"));
            }
          }]
        },
        yc: {
          name: "reauthenticateWithRedirect",
          j: [{
            name: "authProvider",
            K: "a valid Auth provider",
            optional: !1,
            M: function M(t) {
              return !!(t && t.providerId && t.hasOwnProperty && t.hasOwnProperty("isOAuthProvider"));
            }
          }]
        },
        reload: {
          name: "reload",
          j: []
        },
        gb: {
          name: "sendEmailVerification",
          j: [oh(th("opt_actionCodeSettings", !0), nh(null, !0), "opt_actionCodeSettings", !0)]
        },
        toJSON: {
          name: "toJSON",
          j: [Zc(null, !0)]
        },
        Nc: {
          name: "unlink",
          j: [Zc("provider")]
        },
        mb: {
          name: "updateEmail",
          j: [Zc("email")]
        },
        nb: {
          name: "updatePassword",
          j: [Zc("password")]
        },
        Pc: {
          name: "updatePhoneNumber",
          j: [ih("phone")]
        },
        ob: {
          name: "updateProfile",
          j: [th("profile")]
        }
      }), ah(Oc.prototype, {
        execute: {
          name: "execute"
        },
        render: {
          name: "render"
        },
        reset: {
          name: "reset"
        },
        getResponse: {
          name: "getResponse"
        }
      }), ah(_c.prototype, {
        execute: {
          name: "execute"
        },
        render: {
          name: "render"
        },
        reset: {
          name: "reset"
        },
        getResponse: {
          name: "getResponse"
        }
      }), ah(mt.prototype, {
        ia: {
          name: "finally"
        },
        s: {
          name: "catch"
        },
        then: {
          name: "then"
        }
      }), sh(Tu.prototype, {
        appVerificationDisabled: {
          name: "appVerificationDisabledForTesting",
          qb: Qc("appVerificationDisabledForTesting")
        }
      }), ah(Au.prototype, {
        confirm: {
          name: "confirm",
          j: [Zc("verificationCode")]
        }
      }), uh(Cr, "credential", function (t, e) {
        return new Rr(t, e);
      }, [Zc("email"), Zc("password")]), ah(Ar.prototype, {
        ta: {
          name: "addScope",
          j: [Zc("scope")]
        },
        Da: {
          name: "setCustomParameters",
          j: [th("customOAuthParameters")]
        }
      }), uh(Ar, "credential", Er, [oh(Zc(), th(), "token")]), uh(Cr, "credentialWithLink", Dr, [Zc("email"), Zc("emailLink")]), ah(Sr.prototype, {
        ta: {
          name: "addScope",
          j: [Zc("scope")]
        },
        Da: {
          name: "setCustomParameters",
          j: [th("customOAuthParameters")]
        }
      }), uh(Sr, "credential", kr, [oh(Zc(), th(), "token")]), ah(Nr.prototype, {
        ta: {
          name: "addScope",
          j: [Zc("scope")]
        },
        Da: {
          name: "setCustomParameters",
          j: [th("customOAuthParameters")]
        }
      }), uh(Nr, "credential", _r, [oh(Zc(), oh(th(), nh()), "idToken"), oh(Zc(), nh(), "accessToken", !0)]), ah(Or.prototype, {
        Da: {
          name: "setCustomParameters",
          j: [th("customOAuthParameters")]
        }
      }), uh(Or, "credential", Pr, [oh(Zc(), th(), "token"), Zc("secret", !0)]), ah(Tr.prototype, {
        ta: {
          name: "addScope",
          j: [Zc("scope")]
        },
        credential: {
          name: "credential",
          j: [oh(Zc(), nh(), "idToken", !0), oh(Zc(), nh(), "accessToken", !0)]
        },
        Da: {
          name: "setCustomParameters",
          j: [th("customOAuthParameters")]
        }
      }), uh(jr, "credential", Ur, [Zc("verificationId"), Zc("verificationCode")]), ah(jr.prototype, {
        Ta: {
          name: "verifyPhoneNumber",
          j: [Zc("phoneNumber"), rh()]
        }
      }), ah(Ui.prototype, {
        toJSON: {
          name: "toJSON",
          j: [Zc(null, !0)]
        }
      }), ah(Br.prototype, {
        toJSON: {
          name: "toJSON",
          j: [Zc(null, !0)]
        }
      }), ah(Gr.prototype, {
        toJSON: {
          name: "toJSON",
          j: [Zc(null, !0)]
        }
      }), ah(Jc.prototype, {
        clear: {
          name: "clear",
          j: []
        },
        render: {
          name: "render",
          j: []
        },
        verify: {
          name: "verify",
          j: []
        }
      }), function () {
        if (void 0 === n || !n.INTERNAL || !n.INTERNAL.registerService) throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");
        var t = {
          Auth: mc,
          Error: Ui
        };
        uh(t, "EmailAuthProvider", Cr, []), uh(t, "FacebookAuthProvider", Ar, []), uh(t, "GithubAuthProvider", Sr, []), uh(t, "GoogleAuthProvider", Nr, []), uh(t, "TwitterAuthProvider", Or, []), uh(t, "OAuthProvider", Tr, [Zc("providerId")]), uh(t, "PhoneAuthProvider", jr, [{
          name: "auth",
          K: "an instance of Firebase Auth",
          optional: !0,
          M: function M(t) {
            return !!(t && t instanceof mc);
          }
        }]), uh(t, "RecaptchaVerifier", Jc, [oh(Zc(), {
          name: "",
          K: "an HTML element",
          optional: !1,
          M: function M(t) {
            return !!(t && t instanceof Element);
          }
        }, "recaptchaContainer"), th("recaptchaParameters", !0), {
          name: "app",
          K: "an instance of Firebase App",
          optional: !0,
          M: function M(t) {
            return !!(t && t instanceof n.app.App);
          }
        }]), n.INTERNAL.registerService("auth", function (t, e) {
          return e({
            INTERNAL: {
              getUid: b((t = new mc(t)).getUid, t),
              getToken: b(t.$b, t),
              addAuthTokenListener: b(t.Rb, t),
              removeAuthTokenListener: b(t.zc, t)
            }
          }), t;
        }, t, function (t, e) {
          if ("create" === t) try {
            e.auth();
          } catch (t) {}
        }), n.INTERNAL.extendNamespace({
          User: Cu
        });
      }();
    }).call(void 0 !== n ? n : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
  } catch (t) {
    throw console.error(t), new Error("Cannot instantiate firebase-auth - be sure to load firebase-app.js first.");
  }
}(this.firebase = this.firebase || {}, firebase);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../node_modules/webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./Resources/assets/js/transaction/firebase-firestore.js":
/*!***************************************************************!*\
  !*** ./Resources/assets/js/transaction/firebase-firestore.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(process, global) {function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

!function (exports, firebase) {
  "use strict";

  try {
    var __extends = function __extends(e, t) {
      function n() {
        this.constructor = e;
      }

      extendStatics(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n());
    };

    var __awaiter = function __awaiter(e, t, n, r) {
      return new (n || (n = Promise))(function (o, i) {
        function a(e) {
          try {
            u(r.next(e));
          } catch (e) {
            i(e);
          }
        }

        function s(e) {
          try {
            u(r["throw"](e));
          } catch (e) {
            i(e);
          }
        }

        function u(e) {
          e.done ? o(e.value) : new n(function (t) {
            t(e.value);
          }).then(a, s);
        }

        u((r = r.apply(e, t || [])).next());
      });
    };

    var __generator = function __generator(e, t) {
      var n,
          r,
          o,
          i,
          a = {
        label: 0,
        sent: function sent() {
          if (1 & o[0]) throw o[1];
          return o[1];
        },
        trys: [],
        ops: []
      };
      return i = {
        next: s(0),
        "throw": s(1),
        "return": s(2)
      }, "function" == typeof Symbol && (i[Symbol.iterator] = function () {
        return this;
      }), i;

      function s(i) {
        return function (s) {
          return function (i) {
            if (n) throw new TypeError("Generator is already executing.");

            for (; a;) {
              try {
                if (n = 1, r && (o = r[2 & i[0] ? "return" : i[0] ? "throw" : "next"]) && !(o = o.call(r, i[1])).done) return o;

                switch (r = 0, o && (i = [0, o.value]), i[0]) {
                  case 0:
                  case 1:
                    o = i;
                    break;

                  case 4:
                    return a.label++, {
                      value: i[1],
                      done: !1
                    };

                  case 5:
                    a.label++, r = i[1], i = [0];
                    continue;

                  case 7:
                    i = a.ops.pop(), a.trys.pop();
                    continue;

                  default:
                    if (!(o = (o = a.trys).length > 0 && o[o.length - 1]) && (6 === i[0] || 2 === i[0])) {
                      a = 0;
                      continue;
                    }

                    if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {
                      a.label = i[1];
                      break;
                    }

                    if (6 === i[0] && a.label < o[1]) {
                      a.label = o[1], o = i;
                      break;
                    }

                    if (o && a.label < o[2]) {
                      a.label = o[2], a.ops.push(i);
                      break;
                    }

                    o[2] && a.ops.pop(), a.trys.pop();
                    continue;
                }

                i = t.call(e, a);
              } catch (e) {
                i = [6, e], r = 0;
              } finally {
                n = o = 0;
              }
            }

            if (5 & i[0]) throw i[1];
            return {
              value: i[0] ? i[1] : void 0,
              done: !0
            };
          }([i, s]);
        };
      }
    };

    var createCommonjsModule = function createCommonjsModule(e, t) {
      return e(t = {
        exports: {}
      }, t.exports), t.exports;
    };

    var getLogLevel = function getLogLevel() {
      return logClient.logLevel === LogLevel.DEBUG ? LogLevel$1.DEBUG : logClient.logLevel === LogLevel.SILENT ? LogLevel$1.SILENT : LogLevel$1.ERROR;
    };

    var setLogLevel$1 = function setLogLevel$1(e) {
      switch (e) {
        case LogLevel$1.DEBUG:
          logClient.logLevel = LogLevel.DEBUG;
          break;

        case LogLevel$1.ERROR:
          logClient.logLevel = LogLevel.ERROR;
          break;

        case LogLevel$1.SILENT:
          logClient.logLevel = LogLevel.SILENT;
          break;

        default:
          logClient.error("Firestore (" + SDK_VERSION + "): Invalid value passed to `setLogLevel`");
      }
    };

    var debug = function debug(e, t) {
      for (var n = [], r = 2; r < arguments.length; r++) {
        n[r - 2] = arguments[r];
      }

      if (logClient.logLevel <= LogLevel.DEBUG) {
        var o = n.map(argToString);
        logClient.debug.apply(logClient, ["Firestore (" + SDK_VERSION + ") [" + e + "]: " + t].concat(o));
      }
    };

    var error = function error(e) {
      for (var t = [], n = 1; n < arguments.length; n++) {
        t[n - 1] = arguments[n];
      }

      if (logClient.logLevel <= LogLevel.ERROR) {
        var r = t.map(argToString);
        logClient.error.apply(logClient, ["Firestore (" + SDK_VERSION + "): " + e].concat(r));
      }
    };

    var argToString = function argToString(e) {
      if ("string" == typeof e) return e;
      var t = PlatformSupport.getPlatform();

      try {
        return t.formatJSON(e);
      } catch (t) {
        return e;
      }
    };

    var fail = function fail(e) {
      var t = "FIRESTORE (" + SDK_VERSION + ") INTERNAL ASSERTION FAILED: " + e;
      throw error(t), new Error(t);
    };

    var assert = function assert(e, t) {
      e || fail(t);
    };

    var emptyByteString = function emptyByteString() {
      return PlatformSupport.getPlatform().emptyByteString;
    };

    var makeConstructorPrivate = function makeConstructorPrivate(e, t) {
      function n() {
        var e = "This constructor is private.";
        throw t && (e += " ", e += t), new FirestoreError(Code.INVALID_ARGUMENT, e);
      }

      for (var r in n.prototype = e.prototype, e) {
        e.hasOwnProperty(r) && (n[r] = e[r]);
      }

      return n;
    };

    var contains = function contains(e, t) {
      return Object.prototype.hasOwnProperty.call(e, t);
    };

    var defaulted = function defaulted(e, t) {
      return void 0 !== e ? e : t;
    };

    var forEachNumber = function forEachNumber(e, t) {
      for (var n in e) {
        if (Object.prototype.hasOwnProperty.call(e, n)) {
          var r = Number(n);
          isNaN(r) || t(r, e[n]);
        }
      }
    };

    var forEach = function forEach(e, t) {
      for (var n in e) {
        Object.prototype.hasOwnProperty.call(e, n) && t(n, e[n]);
      }
    };

    var isEmpty = function isEmpty(e) {
      for (var t in assert(null != e && "object" == _typeof(e), "isEmpty() expects object parameter."), e) {
        if (Object.prototype.hasOwnProperty.call(e, t)) return !1;
      }

      return !0;
    };

    var shallowCopy = function shallowCopy(e) {
      assert(e && "object" == _typeof(e), "shallowCopy() expects object parameter.");
      var t = {};

      for (var n in e) {
        Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
      }

      return t;
    };

    var validateExactNumberOfArgs = function validateExactNumberOfArgs(e, t, n) {
      if (t.length !== n) throw new FirestoreError(Code.INVALID_ARGUMENT, "Function " + e + "() requires " + formatPlural(n, "argument") + ", but was called with " + formatPlural(t.length, "argument") + ".");
    };

    var validateAtLeastNumberOfArgs = function validateAtLeastNumberOfArgs(e, t, n) {
      if (t.length < n) throw new FirestoreError(Code.INVALID_ARGUMENT, "Function " + e + "() requires at least " + formatPlural(n, "argument") + ", but was called with " + formatPlural(t.length, "argument") + ".");
    };

    var validateBetweenNumberOfArgs = function validateBetweenNumberOfArgs(e, t, n, r) {
      if (t.length < n || t.length > r) throw new FirestoreError(Code.INVALID_ARGUMENT, "Function " + e + "() requires between " + n + " and " + r + " arguments, but was called with " + formatPlural(t.length, "argument") + ".");
    };

    var validateNamedArrayAtLeastNumberOfElements = function validateNamedArrayAtLeastNumberOfElements(e, t, n, r) {
      if (!(t instanceof Array) || t.length < r) throw new FirestoreError(Code.INVALID_ARGUMENT, "Function " + e + "() requires its " + n + " argument to be an array with at least " + formatPlural(r, "element") + ".");
    };

    var validateArgType = function validateArgType(e, t, n, r) {
      validateType(e, t, ordinal(n) + " argument", r);
    };

    var validateOptionalArgType = function validateOptionalArgType(e, t, n, r) {
      void 0 !== r && validateArgType(e, t, n, r);
    };

    var validateNamedType = function validateNamedType(e, t, n, r) {
      validateType(e, t, n + " option", r);
    };

    var validateNamedOptionalType = function validateNamedOptionalType(e, t, n, r) {
      void 0 !== r && validateNamedType(e, t, n, r);
    };

    var validateArrayElements = function validateArrayElements(e, t, n, r, o) {
      if (!(r instanceof Array)) throw new FirestoreError(Code.INVALID_ARGUMENT, "Function " + e + "() requires its " + t + " option to be an array, but it was: " + valueDescription(r));

      for (var i = 0; i < r.length; ++i) {
        if (!o(r[i])) throw new FirestoreError(Code.INVALID_ARGUMENT, "Function " + e + "() requires all " + t + " elements to be " + n + ", but the value at index " + i + " was: " + valueDescription(r[i]));
      }
    };

    var validateOptionalArrayElements = function validateOptionalArrayElements(e, t, n, r, o) {
      void 0 !== r && validateArrayElements(e, t, n, r, o);
    };

    var validateNamedPropertyEquals = function validateNamedPropertyEquals(e, t, n, r, o) {
      for (var i = [], a = 0, s = o; a < s.length; a++) {
        var u = s[a];
        if (u === r) return;
        i.push(valueDescription(u));
      }

      var c = valueDescription(r);
      throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid value " + c + " provided to function " + e + '() for option "' + n + '". Acceptable values: ' + i.join(", "));
    };

    var validateNamedOptionalPropertyEquals = function validateNamedOptionalPropertyEquals(e, t, n, r, o) {
      void 0 !== r && validateNamedPropertyEquals(e, t, n, r, o);
    };

    var validateType = function validateType(e, t, n, r) {
      if (_typeof(r) !== t || "object" === t && !isPlainObject(r)) {
        var o = valueDescription(r);
        throw new FirestoreError(Code.INVALID_ARGUMENT, "Function " + e + "() requires its " + n + " to be of type " + t + ", but it was: " + o);
      }
    };

    var isPlainObject = function isPlainObject(e) {
      return "object" == _typeof(e) && null !== e && (Object.getPrototypeOf(e) === Object.prototype || null === Object.getPrototypeOf(e));
    };

    var valueDescription = function valueDescription(e) {
      if (void 0 === e) return "undefined";
      if (null === e) return "null";
      if ("string" == typeof e) return e.length > 20 && (e = e.substring(0, 20) + "..."), JSON.stringify(e);
      if ("number" == typeof e || "boolean" == typeof e) return "" + e;

      if ("object" == _typeof(e)) {
        if (e instanceof Array) return "an array";
        var t = tryGetCustomObjectType(e);
        return t ? "a custom " + t + " object" : "an object";
      }

      return "function" == typeof e ? "a function" : fail("Unknown wrong type: " + _typeof(e));
    };

    var tryGetCustomObjectType = function tryGetCustomObjectType(e) {
      if (e.constructor) {
        var t = /function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());
        if (t && t.length > 1) return t[1];
      }

      return null;
    };

    var validateDefined = function validateDefined(e, t, n) {
      if (void 0 === n) throw new FirestoreError(Code.INVALID_ARGUMENT, "Function " + e + "() requires a valid " + ordinal(t) + " argument, but it was undefined.");
    };

    var validateOptionNames = function validateOptionNames(e, t, n) {
      forEach(t, function (t, r) {
        if (n.indexOf(t) < 0) throw new FirestoreError(Code.INVALID_ARGUMENT, "Unknown option '" + t + "' passed to function " + e + "(). Available options: " + n.join(", "));
      });
    };

    var invalidClassError = function invalidClassError(e, t, n, r) {
      var o = valueDescription(r);
      return new FirestoreError(Code.INVALID_ARGUMENT, "Function " + e + "() requires its " + ordinal(n) + " argument to be a " + t + ", but it was: " + o);
    };

    var ordinal = function ordinal(e) {
      switch (e) {
        case 1:
          return "first";

        case 2:
          return "second";

        case 3:
          return "third";

        default:
          return e + "th";
      }
    };

    var formatPlural = function formatPlural(e, t) {
      return e + " " + t + (1 === e ? "" : "s");
    };

    var primitiveComparator = function primitiveComparator(e, t) {
      return e < t ? -1 : e > t ? 1 : 0;
    };

    var equals = function equals(e, t) {
      return null !== e && void 0 !== e ? !(!t || !e.isEqual(t)) : e === t;
    };

    var arrayEquals = function arrayEquals(e, t) {
      if (e.length !== t.length) return !1;

      for (var n = 0; n < e.length; n++) {
        if (!e[n].isEqual(t[n])) return !1;
      }

      return !0;
    };

    var immediatePredecessor = function immediatePredecessor(e) {
      var t = e.length - 1;
      return 0 === e.length ? "" : "\0" === e.charAt(t) ? e.substring(0, t) : e.substring(0, t) + String.fromCharCode(e.charCodeAt(t) - 1);
    };

    var immediateSuccessor = function immediateSuccessor(e) {
      return e + "\0";
    };

    var assertUint8ArrayAvailable = function assertUint8ArrayAvailable() {
      if ("undefined" == typeof Uint8Array) throw new FirestoreError(Code.UNIMPLEMENTED, "Uint8Arrays are not available in this environment.");
    };

    var assertBase64Available = function assertBase64Available() {
      if (!PlatformSupport.getPlatform().base64Available) throw new FirestoreError(Code.UNIMPLEMENTED, "Blobs are unavailable in Firestore in this environment.");
    };

    var numericComparator = function numericComparator(e, t) {
      return e < t ? -1 : e > t ? 1 : e === t ? 0 : isNaN(e) ? isNaN(t) ? 0 : -1 : 1;
    };

    var numericEquals = function numericEquals(e, t) {
      return e === t ? 0 !== e || 1 / e == 1 / t : e != e && t != t;
    };

    var isNullOrUndefined = function isNullOrUndefined(e) {
      return null === e || void 0 === e;
    };

    var isSafeInteger = function isSafeInteger(e) {
      return isInteger(e) && e <= MAX_SAFE_INTEGER && e >= MIN_SAFE_INTEGER;
    };

    var fieldFilter = function fieldFilter(e, t, n) {
      if (n.isEqual(NullValue.INSTANCE)) {
        if (t !== RelationOp.EQUAL) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid query. You can only perform equals comparisons on null.");
        return new NullFilter(e);
      }

      if (n.isEqual(DoubleValue.NAN)) {
        if (t !== RelationOp.EQUAL) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid query. You can only perform equals comparisons on NaN.");
        return new NanFilter(e);
      }

      return new RelationFilter(e, t, n);
    };

    var isPermanentError = function isPermanentError(e) {
      switch (e) {
        case Code.OK:
          return fail("Treated status OK as error");

        case Code.CANCELLED:
        case Code.UNKNOWN:
        case Code.DEADLINE_EXCEEDED:
        case Code.RESOURCE_EXHAUSTED:
        case Code.INTERNAL:
        case Code.UNAVAILABLE:
        case Code.UNAUTHENTICATED:
          return !1;

        case Code.INVALID_ARGUMENT:
        case Code.NOT_FOUND:
        case Code.ALREADY_EXISTS:
        case Code.PERMISSION_DENIED:
        case Code.FAILED_PRECONDITION:
        case Code.ABORTED:
        case Code.OUT_OF_RANGE:
        case Code.UNIMPLEMENTED:
        case Code.DATA_LOSS:
          return !0;

        default:
          return fail("Unknown status code: " + e);
      }
    };

    var mapCodeFromRpcStatus = function mapCodeFromRpcStatus(e) {
      var t = RpcCode[e];
      if (void 0 !== t) return mapCodeFromRpcCode(t);
    };

    var mapCodeFromRpcCode = function mapCodeFromRpcCode(e) {
      if (void 0 === e) return error("GRPC error has no .code"), Code.UNKNOWN;

      switch (e) {
        case RpcCode.OK:
          return Code.OK;

        case RpcCode.CANCELLED:
          return Code.CANCELLED;

        case RpcCode.UNKNOWN:
          return Code.UNKNOWN;

        case RpcCode.DEADLINE_EXCEEDED:
          return Code.DEADLINE_EXCEEDED;

        case RpcCode.RESOURCE_EXHAUSTED:
          return Code.RESOURCE_EXHAUSTED;

        case RpcCode.INTERNAL:
          return Code.INTERNAL;

        case RpcCode.UNAVAILABLE:
          return Code.UNAVAILABLE;

        case RpcCode.UNAUTHENTICATED:
          return Code.UNAUTHENTICATED;

        case RpcCode.INVALID_ARGUMENT:
          return Code.INVALID_ARGUMENT;

        case RpcCode.NOT_FOUND:
          return Code.NOT_FOUND;

        case RpcCode.ALREADY_EXISTS:
          return Code.ALREADY_EXISTS;

        case RpcCode.PERMISSION_DENIED:
          return Code.PERMISSION_DENIED;

        case RpcCode.FAILED_PRECONDITION:
          return Code.FAILED_PRECONDITION;

        case RpcCode.ABORTED:
          return Code.ABORTED;

        case RpcCode.OUT_OF_RANGE:
          return Code.OUT_OF_RANGE;

        case RpcCode.UNIMPLEMENTED:
          return Code.UNIMPLEMENTED;

        case RpcCode.DATA_LOSS:
          return Code.DATA_LOSS;

        default:
          return fail("Unknown status code: " + e);
      }
    };

    var mapRpcCodeFromCode = function mapRpcCodeFromCode(e) {
      if (void 0 === e) return RpcCode.OK;

      switch (e) {
        case Code.OK:
          return RpcCode.OK;

        case Code.CANCELLED:
          return RpcCode.CANCELLED;

        case Code.UNKNOWN:
          return RpcCode.UNKNOWN;

        case Code.DEADLINE_EXCEEDED:
          return RpcCode.DEADLINE_EXCEEDED;

        case Code.RESOURCE_EXHAUSTED:
          return RpcCode.RESOURCE_EXHAUSTED;

        case Code.INTERNAL:
          return RpcCode.INTERNAL;

        case Code.UNAVAILABLE:
          return RpcCode.UNAVAILABLE;

        case Code.UNAUTHENTICATED:
          return RpcCode.UNAUTHENTICATED;

        case Code.INVALID_ARGUMENT:
          return RpcCode.INVALID_ARGUMENT;

        case Code.NOT_FOUND:
          return RpcCode.NOT_FOUND;

        case Code.ALREADY_EXISTS:
          return RpcCode.ALREADY_EXISTS;

        case Code.PERMISSION_DENIED:
          return RpcCode.PERMISSION_DENIED;

        case Code.FAILED_PRECONDITION:
          return RpcCode.FAILED_PRECONDITION;

        case Code.ABORTED:
          return RpcCode.ABORTED;

        case Code.OUT_OF_RANGE:
          return RpcCode.OUT_OF_RANGE;

        case Code.UNIMPLEMENTED:
          return RpcCode.UNIMPLEMENTED;

        case Code.DATA_LOSS:
          return RpcCode.DATA_LOSS;

        default:
          return fail("Unknown status code: " + e);
      }
    };

    var mapCodeFromHttpStatus = function mapCodeFromHttpStatus(e) {
      switch (e) {
        case 200:
          return Code.OK;

        case 400:
          return Code.INVALID_ARGUMENT;

        case 401:
          return Code.UNAUTHENTICATED;

        case 403:
          return Code.PERMISSION_DENIED;

        case 404:
          return Code.NOT_FOUND;

        case 409:
          return Code.ABORTED;

        case 416:
          return Code.OUT_OF_RANGE;

        case 429:
          return Code.RESOURCE_EXHAUSTED;

        case 499:
          return Code.CANCELLED;

        case 500:
          return Code.UNKNOWN;

        case 501:
          return Code.UNIMPLEMENTED;

        case 503:
          return Code.UNAVAILABLE;

        case 504:
          return Code.DEADLINE_EXCEEDED;

        default:
          return e >= 200 && e < 300 ? Code.OK : e >= 400 && e < 500 ? Code.FAILED_PRECONDITION : e >= 500 && e < 600 ? Code.INTERNAL : Code.UNKNOWN;
      }
    };

    var maybeDocumentMap = function maybeDocumentMap() {
      return EMPTY_MAYBE_DOCUMENT_MAP;
    };

    var documentMap = function documentMap() {
      return EMPTY_DOCUMENT_MAP;
    };

    var documentVersionMap = function documentVersionMap() {
      return EMPTY_DOCUMENT_VERSION_MAP;
    };

    var documentKeySet = function documentKeySet() {
      return EMPTY_DOCUMENT_KEY_SET;
    };

    var applyResumeToken = function applyResumeToken(e, t) {
      t.length > 0 && (e.resumeToken = t);
    };

    var coercedFieldValuesArray = function coercedFieldValuesArray(e) {
      return e instanceof ArrayValue ? e.internalValue.slice() : [];
    };

    var assertPresent = function assertPresent(e, t) {
      assert(!isNullOrUndefined(e), t + " is missing");
    };

    var parseInt64 = function parseInt64(e) {
      return "number" == typeof e ? e : "string" == typeof e ? Number(e) : fail("can't parse " + e);
    };

    var hasTag = function hasTag(e, t, n) {
      return t === n || !t && n in e;
    };

    var fromDotSeparatedString = function fromDotSeparatedString(e) {
      if (e.search(RESERVED) >= 0) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid field path (" + e + "). Paths must not contain '~', '*', '/', '[', or ']'");

      try {
        return new (FieldPath$1.bind.apply(FieldPath$1, [void 0].concat(e.split("."))))();
      } catch (t) {
        throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid field path (" + e + "). Paths must not be empty, begin with '.', end with '.', or contain '..'");
      }
    };

    var compareChangeType = function compareChangeType(e, t) {
      var n = function n(e) {
        switch (e) {
          case ChangeType.Added:
            return 1;

          case ChangeType.Modified:
          case ChangeType.Metadata:
            return 2;

          case ChangeType.Removed:
            return 0;

          default:
            return fail("Unknown ChangeType: " + e);
        }
      };

      return n(e) - n(t);
    };

    var encode = function encode(e) {
      for (var t = "", n = 0; n < e.length; n++) {
        t.length > 0 && (t = encodeSeparator(t)), t = encodeSegment(e.get(n), t);
      }

      return encodeSeparator(t);
    };

    var encodeSegment = function encodeSegment(e, t) {
      for (var n = t, r = e.length, o = 0; o < r; o++) {
        var i = e.charAt(o);

        switch (i) {
          case "\0":
            n += escapeChar + encodedNul;
            break;

          case escapeChar:
            n += escapeChar + encodedEscape;
            break;

          default:
            n += i;
        }
      }

      return n;
    };

    var encodeSeparator = function encodeSeparator(e) {
      return e + escapeChar + encodedSeparatorChar;
    };

    var decode$1 = function decode$1(e) {
      var t = e.length;
      if (assert(t >= 2, "Invalid path " + e), 2 === t) return assert(e.charAt(0) === escapeChar && e.charAt(1) === encodedSeparatorChar, "Non-empty path " + e + " had length 2"), ResourcePath.EMPTY_PATH;

      for (var n = t - 2, r = [], o = "", i = 0; i < t;) {
        var a = e.indexOf(escapeChar, i);

        switch ((a < 0 || a > n) && fail('Invalid encoded resource path: "' + e + '"'), e.charAt(a + 1)) {
          case encodedSeparatorChar:
            var s = e.substring(i, a),
                u = void 0;
            0 === o.length ? u = s : (u = o += s, o = ""), r.push(u);
            break;

          case encodedNul:
            o += e.substring(i, a), o += "\0";
            break;

          case encodedEscape:
            o += e.substring(i, a + 1);
            break;

          default:
            fail('Invalid encoded resource path: "' + e + '"');
        }

        i = a + 2;
      }

      return new ResourcePath(r);
    };

    var createOrUpgradeDb = function createOrUpgradeDb(e, t, n, r) {
      assert(n < r && n >= 0 && r <= 2, "Unexpected schema upgrade from v${fromVersion} to v{toVersion}."), n < 1 && r >= 1 && (createOwnerStore(e), createMutationQueue(e), createQueryCache(e), createRemoteDocumentCache(e));
      var o = PersistencePromise.resolve();
      return n < 2 && r >= 2 && (o = ensureTargetGlobalExists(t).next(function (e) {
        return saveTargetCount(t, e);
      })), o;
    };

    var createOwnerStore = function createOwnerStore(e) {
      e.createObjectStore(DbOwner.store);
    };

    var createMutationQueue = function createMutationQueue(e) {
      e.createObjectStore(DbMutationQueue.store, {
        keyPath: DbMutationQueue.keyPath
      }), e.createObjectStore(DbMutationBatch.store, {
        keyPath: DbMutationBatch.keyPath
      }), e.createObjectStore(DbDocumentMutation.store);
    };

    var createRemoteDocumentCache = function createRemoteDocumentCache(e) {
      e.createObjectStore(DbRemoteDocument.store);
    };

    var createQueryCache = function createQueryCache(e) {
      e.createObjectStore(DbTargetDocument.store, {
        keyPath: DbTargetDocument.keyPath
      }).createIndex(DbTargetDocument.documentTargetsIndex, DbTargetDocument.documentTargetsKeyPath, {
        unique: !0
      }), e.createObjectStore(DbTarget.store, {
        keyPath: DbTarget.keyPath
      }).createIndex(DbTarget.queryTargetsIndexName, DbTarget.queryTargetsKeyPath, {
        unique: !0
      }), e.createObjectStore(DbTargetGlobal.store);
    };

    var saveTargetCount = function saveTargetCount(e, t) {
      var n = e.store(DbTargetGlobal.store);
      return e.store(DbTarget.store).count().next(function (e) {
        return t.targetCount = e, n.put(DbTargetGlobal.key, t);
      });
    };

    var ensureTargetGlobalExists = function ensureTargetGlobalExists(e) {
      var t = e.store(DbTargetGlobal.store);
      return t.get(DbTargetGlobal.key).next(function (e) {
        return null != e ? PersistencePromise.resolve(e) : (e = new DbTargetGlobal(0, 0, SnapshotVersion.MIN.toTimestamp(), 0), t.put(DbTargetGlobal.key, e).next(function () {
          return e;
        }));
      });
    };

    var wrapRequest = function wrapRequest(e) {
      return new PersistencePromise(function (t, n) {
        e.onsuccess = function (e) {
          var n = e.target.result;
          t(n);
        }, e.onerror = function (e) {
          n(e.target.error);
        };
      });
    };

    var convertStreamToken = function convertStreamToken(e) {
      return e instanceof Uint8Array ? (assert("YES" === process.env.USE_MOCK_PERSISTENCE, "Persisting non-string stream tokens is only supported with mock persistence ."), e.toString()) : e;
    };

    var mutationsStore = function mutationsStore(e) {
      return getStore(e, DbMutationBatch.store);
    };

    var documentMutationsStore = function documentMutationsStore(e) {
      return getStore(e, DbDocumentMutation.store);
    };

    var mutationQueuesStore = function mutationQueuesStore(e) {
      return getStore(e, DbMutationQueue.store);
    };

    var getStore = function getStore(e, t) {
      return e instanceof SimpleDbTransaction ? e.store(t) : fail("Invalid transaction object provided!");
    };

    var targetsStore = function targetsStore(e) {
      return getStore$1(e, DbTarget.store);
    };

    var globalTargetStore = function globalTargetStore(e) {
      return getStore$1(e, DbTargetGlobal.store);
    };

    var documentTargetStore = function documentTargetStore(e) {
      return getStore$1(e, DbTargetDocument.store);
    };

    var getStore$1 = function getStore$1(e, t) {
      return e instanceof SimpleDbTransaction ? e.store(t) : fail("Invalid transaction object provided!");
    };

    var remoteDocumentsStore = function remoteDocumentsStore(e) {
      return e instanceof SimpleDbTransaction ? e.store(DbRemoteDocument.store) : fail("Invalid transaction object provided!");
    };

    var dbKey = function dbKey(e) {
      return e.path.toArray();
    };

    var isDocumentQuery = function isDocumentQuery(e) {
      return void 0 !== e.documents;
    };

    var makeCredentialsProvider = function makeCredentialsProvider(e) {
      if (!e) return new EmptyCredentialsProvider();

      switch (e.type) {
        case "gapi":
          return new FirstPartyCredentialsProvider(e.client, e.sessionIndex || "0");

        case "provider":
          return e.client;

        default:
          throw new FirestoreError(Code.INVALID_ARGUMENT, "makeCredentialsProvider failed due to invalid credential type");
      }
    };

    var isPartialObserver = function isPartialObserver(e) {
      return implementsAnyMethods$1(e, ["next", "error", "complete"]);
    };

    var implementsAnyMethods$1 = function implementsAnyMethods$1(e, t) {
      if ("object" != _typeof(e) || null === e) return !1;

      for (var n = e, r = 0, o = t; r < o.length; r++) {
        var i = o[r];
        if (i in n && "function" == typeof n[i]) return !0;
      }

      return !1;
    };

    var isWrite = function isWrite(e) {
      switch (e) {
        case UserDataSource.Set:
        case UserDataSource.MergeSet:
        case UserDataSource.Update:
          return !0;

        case UserDataSource.Argument:
          return !1;

        default:
          throw fail("Unexpected case for UserDataSource: " + e);
      }
    };

    var looksLikeJsonObject = function looksLikeJsonObject(e) {
      return !("object" != _typeof(e) || null === e || e instanceof Array || e instanceof Date || e instanceof Timestamp || e instanceof GeoPoint || e instanceof Blob || e instanceof DocumentKeyReference || e instanceof FieldValueImpl);
    };

    var validatePlainObject = function validatePlainObject(e, t, n) {
      if (!looksLikeJsonObject(n) || !isPlainObject(n)) {
        var r = valueDescription(n);
        throw "an object" === r ? t.createError(e + " a custom object") : t.createError(e + " " + r);
      }
    };

    var fieldPathFromArgument = function fieldPathFromArgument(e, t) {
      if (t instanceof FieldPath$1) return t._internalPath;
      if ("string" == typeof t) return fieldPathFromDotSeparatedString(e, t);
      throw new FirestoreError(Code.INVALID_ARGUMENT, "Function " + e + "() called with invalid data. Field path arguments must be of type string or FieldPath.");
    };

    var fieldPathFromDotSeparatedString = function fieldPathFromDotSeparatedString(e, t) {
      try {
        return fromDotSeparatedString(t)._internalPath;
      } catch (t) {
        var n = errorMessage(t);
        throw new FirestoreError(Code.INVALID_ARGUMENT, "Function " + e + "() called with invalid data. " + n);
      }
    };

    var errorMessage = function errorMessage(e) {
      return e instanceof Error ? e.message : e.toString();
    };

    var throwDocChangesMethodError = function throwDocChangesMethodError() {
      throw new FirestoreError(Code.INVALID_ARGUMENT, 'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"');
    };

    var validateSetOptions = function validateSetOptions(e, t) {
      if (void 0 === t) return {
        merge: !1
      };
      if (validateOptionNames(e, t, ["merge", "mergeFields"]), validateNamedOptionalType(e, "boolean", "merge", t.merge), validateOptionalArrayElements(e, "mergeFields", "a string or a FieldPath", t.mergeFields, function (e) {
        return "string" == typeof e || e instanceof FieldPath$1;
      }), void 0 !== t.mergeFields && void 0 !== t.merge) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid options passed to function " + e + '(): You cannot specify both "merge" and "mergeFields".');
      return t;
    };

    var validateSnapshotOptions = function validateSnapshotOptions(e, t) {
      return void 0 === t ? {} : (validateOptionNames(e, t, ["serverTimestamps"]), validateNamedOptionalPropertyEquals(e, "options", "serverTimestamps", t.serverTimestamps, ["estimate", "previous", "none"]), t);
    };

    var validateReference = function validateReference(e, t, n) {
      if (t instanceof DocumentReference) {
        if (t.firestore !== n) throw new FirestoreError(Code.INVALID_ARGUMENT, "Provided document reference is from a different Firestore instance.");
        return t;
      }

      throw invalidClassError(e, "DocumentReference", 1, t);
    };

    var changesFromSnapshot = function changesFromSnapshot(e, t, n) {
      if (n.oldDocs.isEmpty()) {
        var r,
            o = 0;
        return n.docChanges.map(function (t) {
          var i = new QueryDocumentSnapshot(e, t.doc.key, t.doc, n.fromCache);
          return assert(t.type === ChangeType.Added, "Invalid event type for first snapshot"), assert(!r || n.query.docComparator(r, t.doc) < 0, "Got added events in wrong order"), r = t.doc, {
            type: "added",
            doc: i,
            oldIndex: -1,
            newIndex: o++
          };
        });
      }

      var i = n.oldDocs;
      return n.docChanges.filter(function (e) {
        return t || e.type !== ChangeType.Metadata;
      }).map(function (t) {
        var r = new QueryDocumentSnapshot(e, t.doc.key, t.doc, n.fromCache),
            o = -1,
            a = -1;
        return t.type !== ChangeType.Added && (assert((o = i.indexOf(t.doc.key)) >= 0, "Index for document not found"), i = i["delete"](t.doc.key)), t.type !== ChangeType.Removed && (a = (i = i.add(t.doc)).indexOf(t.doc.key)), {
          type: resultChangeType(t.type),
          doc: r,
          oldIndex: o,
          newIndex: a
        };
      });
    };

    var resultChangeType = function resultChangeType(e) {
      switch (e) {
        case ChangeType.Added:
          return "added";

        case ChangeType.Modified:
        case ChangeType.Metadata:
          return "modified";

        case ChangeType.Removed:
          return "removed";

        default:
          return fail("Unknown change type: " + e);
      }
    };

    var configureForFirebase = function configureForFirebase(e) {
      e.INTERNAL.registerService("firestore", function (e) {
        return new Firestore(e);
      }, shallowCopy(firestoreNamespace));
    };

    var registerFirestore = function registerFirestore(e) {
      configureForFirebase(e);
    };

    var LogLevel;
    firebase = firebase && firebase.hasOwnProperty("default") ? firebase["default"] : firebase, function (e) {
      e[e.DEBUG = 0] = "DEBUG", e[e.VERBOSE = 1] = "VERBOSE", e[e.INFO = 2] = "INFO", e[e.WARN = 3] = "WARN", e[e.ERROR = 4] = "ERROR", e[e.SILENT = 5] = "SILENT";
    }(LogLevel || (LogLevel = {}));

    var defaultLogLevel = LogLevel.INFO,
        defaultLogHandler = function defaultLogHandler(e, t) {
      for (var n = [], r = 2; r < arguments.length; r++) {
        n[r - 2] = arguments[r];
      }

      if (!(t < e.logLevel)) {
        var o = new Date().toISOString();

        switch (t) {
          case LogLevel.DEBUG:
          case LogLevel.VERBOSE:
            console.log.apply(console, ["[" + o + "]  " + e.name + ":"].concat(n));
            break;

          case LogLevel.INFO:
            console.info.apply(console, ["[" + o + "]  " + e.name + ":"].concat(n));
            break;

          case LogLevel.WARN:
            console.warn.apply(console, ["[" + o + "]  " + e.name + ":"].concat(n));
            break;

          case LogLevel.ERROR:
            console.error.apply(console, ["[" + o + "]  " + e.name + ":"].concat(n));
            break;

          default:
            throw new Error("Attempted to log a message with an invalid logType (value: " + t + ")");
        }
      }
    },
        Logger = function () {
      function e(e) {
        this.name = e, this._logLevel = defaultLogLevel, this._logHandler = defaultLogHandler;
      }

      return Object.defineProperty(e.prototype, "logLevel", {
        get: function get() {
          return this._logLevel;
        },
        set: function set(e) {
          if (!(e in LogLevel)) throw new TypeError("Invalid value assigned to `logLevel`");
          this._logLevel = e;
        },
        enumerable: !0,
        configurable: !0
      }), Object.defineProperty(e.prototype, "logHandler", {
        get: function get() {
          return this._logHandler;
        },
        set: function set(e) {
          if ("function" != typeof e) throw new TypeError("Value assigned to `logHandler` must be a function");
          this._logHandler = e;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.debug = function () {
        for (var e = [], t = 0; t < arguments.length; t++) {
          e[t] = arguments[t];
        }

        this._logHandler.apply(this, [this, LogLevel.DEBUG].concat(e));
      }, e.prototype.log = function () {
        for (var e = [], t = 0; t < arguments.length; t++) {
          e[t] = arguments[t];
        }

        this._logHandler.apply(this, [this, LogLevel.VERBOSE].concat(e));
      }, e.prototype.info = function () {
        for (var e = [], t = 0; t < arguments.length; t++) {
          e[t] = arguments[t];
        }

        this._logHandler.apply(this, [this, LogLevel.INFO].concat(e));
      }, e.prototype.warn = function () {
        for (var e = [], t = 0; t < arguments.length; t++) {
          e[t] = arguments[t];
        }

        this._logHandler.apply(this, [this, LogLevel.WARN].concat(e));
      }, e.prototype.error = function () {
        for (var e = [], t = 0; t < arguments.length; t++) {
          e[t] = arguments[t];
        }

        this._logHandler.apply(this, [this, LogLevel.ERROR].concat(e));
      }, e;
    }(),
        extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (e, t) {
      e.__proto__ = t;
    } || function (e, t) {
      for (var n in t) {
        t.hasOwnProperty(n) && (e[n] = t[n]);
      }
    };

    var commonjsGlobal = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
    var dist = createCommonjsModule(function (module) {
      (function () {
        var g,
            goog = goog || {},
            k = this;

        function l(e) {
          return "string" == typeof e;
        }

        function n(e, t) {
          e = e.split("."), t = t || k;

          for (var n = 0; n < e.length; n++) {
            if (null == (t = t[e[n]])) return null;
          }

          return t;
        }

        function aa() {}

        function ba(e) {
          var t = _typeof(e);

          if ("object" == t) {
            if (!e) return "null";
            if (e instanceof Array) return "array";
            if (e instanceof Object) return t;
            var n = Object.prototype.toString.call(e);
            if ("[object Window]" == n) return "object";
            if ("[object Array]" == n || "number" == typeof e.length && void 0 !== e.splice && void 0 !== e.propertyIsEnumerable && !e.propertyIsEnumerable("splice")) return "array";
            if ("[object Function]" == n || void 0 !== e.call && void 0 !== e.propertyIsEnumerable && !e.propertyIsEnumerable("call")) return "function";
          } else if ("function" == t && void 0 === e.call) return "object";

          return t;
        }

        function p(e) {
          return "array" == ba(e);
        }

        function ca(e) {
          var t = ba(e);
          return "array" == t || "object" == t && "number" == typeof e.length;
        }

        function da(e) {
          return "function" == ba(e);
        }

        function ea(e) {
          var t = _typeof(e);

          return "object" == t && null != e || "function" == t;
        }

        var q = "closure_uid_" + (1e9 * Math.random() >>> 0),
            fa = 0;

        function ha(e, t, n) {
          return e.call.apply(e.bind, arguments);
        }

        function ia(e, t, n) {
          if (!e) throw Error();

          if (2 < arguments.length) {
            var r = Array.prototype.slice.call(arguments, 2);
            return function () {
              var n = Array.prototype.slice.call(arguments);
              return Array.prototype.unshift.apply(n, r), e.apply(t, n);
            };
          }

          return function () {
            return e.apply(t, arguments);
          };
        }

        function r(e, t, n) {
          return (r = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? ha : ia).apply(null, arguments);
        }

        function ja(e, t) {
          var n = Array.prototype.slice.call(arguments, 1);
          return function () {
            var t = n.slice();
            return t.push.apply(t, arguments), e.apply(this, t);
          };
        }

        var t = Date.now || function () {
          return +new Date();
        };

        function u(e, t) {
          function n() {}

          n.prototype = t.prototype, e.H = t.prototype, e.prototype = new n(), e.prototype.constructor = e, e.Ib = function (e, n, r) {
            for (var o = Array(arguments.length - 2), i = 2; i < arguments.length; i++) {
              o[i - 2] = arguments[i];
            }

            return t.prototype[n].apply(e, o);
          };
        }

        function ka(e) {
          if (Error.captureStackTrace) Error.captureStackTrace(this, ka);else {
            var t = Error().stack;
            t && (this.stack = t);
          }
          e && (this.message = String(e));
        }

        function la(e, t) {
          for (var n = "", r = (e = e.split("%s")).length - 1, o = 0; o < r; o++) {
            n += e[o] + (o < t.length ? t[o] : "%s");
          }

          ka.call(this, n + e[r]);
        }

        function ma(e, t) {
          throw new la("Failure" + (e ? ": " + e : ""), Array.prototype.slice.call(arguments, 1));
        }

        function w() {
          0 != na && (pa[this[q] || (this[q] = ++fa)] = this), this.i = this.i, this.m = this.m;
        }

        u(ka, Error), ka.prototype.name = "CustomError", u(la, ka), la.prototype.name = "AssertionError";
        var na = 0,
            pa = {};
        w.prototype.i = !1, w.prototype.$ = function () {
          if (!this.i && (this.i = !0, this.w(), 0 != na)) {
            var e = this[q] || (this[q] = ++fa);
            if (0 != na && this.m && 0 < this.m.length) throw Error(this + " did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");
            delete pa[e];
          }
        }, w.prototype.w = function () {
          if (this.m) for (; this.m.length;) {
            this.m.shift()();
          }
        };
        var qa = Array.prototype.indexOf ? function (e, t) {
          return Array.prototype.indexOf.call(e, t, void 0);
        } : function (e, t) {
          if (l(e)) return l(t) && 1 == t.length ? e.indexOf(t, 0) : -1;

          for (var n = 0; n < e.length; n++) {
            if (n in e && e[n] === t) return n;
          }

          return -1;
        },
            ra = Array.prototype.forEach ? function (e, t, n) {
          Array.prototype.forEach.call(e, t, n);
        } : function (e, t, n) {
          for (var r = e.length, o = l(e) ? e.split("") : e, i = 0; i < r; i++) {
            i in o && t.call(n, o[i], i, e);
          }
        };

        function sa(e) {
          e: {
            for (var t = ta, n = e.length, r = l(e) ? e.split("") : e, o = 0; o < n; o++) {
              if (o in r && t.call(void 0, r[o], o, e)) {
                t = o;
                break e;
              }
            }

            t = -1;
          }

          return 0 > t ? null : l(e) ? e.charAt(t) : e[t];
        }

        function ua(e) {
          if (!p(e)) for (var t = e.length - 1; 0 <= t; t--) {
            delete e[t];
          }
          e.length = 0;
        }

        function va(e) {
          return Array.prototype.concat.apply([], arguments);
        }

        function wa(e) {
          var t = e.length;

          if (0 < t) {
            for (var n = Array(t), r = 0; r < t; r++) {
              n[r] = e[r];
            }

            return n;
          }

          return [];
        }

        function xa(e) {
          return /^[\s\xa0]*$/.test(e);
        }

        var ya = String.prototype.trim ? function (e) {
          return e.trim();
        } : function (e) {
          return /^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1];
        },
            x;

        function za(e, t) {
          return e < t ? -1 : e > t ? 1 : 0;
        }

        e: {
          var Aa = k.navigator;

          if (Aa) {
            var Ba = Aa.userAgent;

            if (Ba) {
              x = Ba;
              break e;
            }
          }

          x = "";
        }

        function y(e) {
          return -1 != x.indexOf(e);
        }

        function Ca(e, t, n) {
          for (var r in e) {
            t.call(n, e[r], r, e);
          }
        }

        function Da(e) {
          var t,
              n = [],
              r = 0;

          for (t in e) {
            n[r++] = e[t];
          }

          return n;
        }

        function Ea(e) {
          var t,
              n = [],
              r = 0;

          for (t in e) {
            n[r++] = t;
          }

          return n;
        }

        function Fa(e) {
          var t,
              n = {};

          for (t in e) {
            n[t] = e[t];
          }

          return n;
        }

        var Ga = "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");

        function Ha(e, t) {
          for (var n, r, o = 1; o < arguments.length; o++) {
            for (n in r = arguments[o]) {
              e[n] = r[n];
            }

            for (var i = 0; i < Ga.length; i++) {
              n = Ga[i], Object.prototype.hasOwnProperty.call(r, n) && (e[n] = r[n]);
            }
          }
        }

        function Ia(e) {
          return Ia[" "](e), e;
        }

        function Ja(e, t) {
          var n = Ka;
          return Object.prototype.hasOwnProperty.call(n, e) ? n[e] : n[e] = t(e);
        }

        Ia[" "] = aa;
        var La = y("Opera"),
            z = y("Trident") || y("MSIE"),
            Ma = y("Edge"),
            Na = Ma || z,
            Oa = y("Gecko") && !(-1 != x.toLowerCase().indexOf("webkit") && !y("Edge")) && !(y("Trident") || y("MSIE")) && !y("Edge"),
            Pa = -1 != x.toLowerCase().indexOf("webkit") && !y("Edge"),
            Ra,
            a;

        function Qa() {
          var e = k.document;
          return e ? e.documentMode : void 0;
        }

        e: {
          var Sa = "",
              Ta = (a = x, Oa ? /rv:([^\);]+)(\)|;)/.exec(a) : Ma ? /Edge\/([\d\.]+)/.exec(a) : z ? /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a) : Pa ? /WebKit\/(\S+)/.exec(a) : La ? /(?:Version)[ \/]?(\S+)/.exec(a) : void 0);

          if (Ta && (Sa = Ta ? Ta[1] : ""), z) {
            var Ua = Qa();

            if (null != Ua && Ua > parseFloat(Sa)) {
              Ra = String(Ua);
              break e;
            }
          }

          Ra = Sa;
        }

        var Ka = {},
            Wa;

        function Va(e) {
          return Ja(e, function () {
            for (var t = 0, n = ya(String(Ra)).split("."), r = ya(String(e)).split("."), o = Math.max(n.length, r.length), i = 0; 0 == t && i < o; i++) {
              var a = n[i] || "",
                  s = r[i] || "";

              do {
                if (a = /(\d*)(\D*)(.*)/.exec(a) || ["", "", "", ""], s = /(\d*)(\D*)(.*)/.exec(s) || ["", "", "", ""], 0 == a[0].length && 0 == s[0].length) break;
                t = za(0 == a[1].length ? 0 : parseInt(a[1], 10), 0 == s[1].length ? 0 : parseInt(s[1], 10)) || za(0 == a[2].length, 0 == s[2].length) || za(a[2], s[2]), a = a[3], s = s[3];
              } while (0 == t);
            }

            return 0 <= t;
          });
        }

        var Xa = k.document;
        Wa = Xa && z ? Qa() || ("CSS1Compat" == Xa.compatMode ? parseInt(Ra, 10) : 5) : void 0;

        var Ya = Object.freeze || function (e) {
          return e;
        },
            Za = !z || 9 <= Number(Wa),
            $a = z && !Va("9"),
            ab = function () {
          if (!k.addEventListener || !Object.defineProperty) return !1;
          var e = !1,
              t = Object.defineProperty({}, "passive", {
            get: function get() {
              e = !0;
            }
          });
          return k.addEventListener("test", aa, t), k.removeEventListener("test", aa, t), e;
        }();

        function A(e, t) {
          this.type = e, this.a = this.target = t, this.Ra = !0;
        }

        function bb(e, t) {
          if (A.call(this, e ? e.type : ""), this.relatedTarget = this.a = this.target = null, this.button = this.screenY = this.screenX = this.clientY = this.clientX = 0, this.key = "", this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1, this.pointerId = 0, this.pointerType = "", this.c = null, e) {
            var n = this.type = e.type,
                r = e.changedTouches ? e.changedTouches[0] : null;

            if (this.target = e.target || e.srcElement, this.a = t, t = e.relatedTarget) {
              if (Oa) {
                e: {
                  try {
                    Ia(t.nodeName);
                    var o = !0;
                    break e;
                  } catch (e) {}

                  o = !1;
                }

                o || (t = null);
              }
            } else "mouseover" == n ? t = e.fromElement : "mouseout" == n && (t = e.toElement);

            this.relatedTarget = t, null === r ? (this.clientX = void 0 !== e.clientX ? e.clientX : e.pageX, this.clientY = void 0 !== e.clientY ? e.clientY : e.pageY, this.screenX = e.screenX || 0, this.screenY = e.screenY || 0) : (this.clientX = void 0 !== r.clientX ? r.clientX : r.pageX, this.clientY = void 0 !== r.clientY ? r.clientY : r.pageY, this.screenX = r.screenX || 0, this.screenY = r.screenY || 0), this.button = e.button, this.key = e.key || "", this.ctrlKey = e.ctrlKey, this.altKey = e.altKey, this.shiftKey = e.shiftKey, this.metaKey = e.metaKey, this.pointerId = e.pointerId || 0, this.pointerType = l(e.pointerType) ? e.pointerType : cb[e.pointerType] || "", this.c = e, e.defaultPrevented && this.b();
          }
        }

        A.prototype.b = function () {
          this.Ra = !1;
        }, u(bb, A);
        var cb = Ya({
          2: "touch",
          3: "pen",
          4: "mouse"
        });

        bb.prototype.b = function () {
          bb.H.b.call(this);
          var e = this.c;
          if (e.preventDefault) e.preventDefault();else if (e.returnValue = !1, $a) try {
            (e.ctrlKey || 112 <= e.keyCode && 123 >= e.keyCode) && (e.keyCode = -1);
          } catch (e) {}
        };

        var db = "closure_listenable_" + (1e6 * Math.random() | 0),
            eb = 0;

        function fb(e, t, n, r, o) {
          this.listener = e, this.proxy = null, this.src = t, this.type = n, this.capture = !!r, this.ga = o, this.key = ++eb, this.Z = this.ba = !1;
        }

        function gb(e) {
          e.Z = !0, e.listener = null, e.proxy = null, e.src = null, e.ga = null;
        }

        function hb(e) {
          this.src = e, this.a = {}, this.b = 0;
        }

        function jb(e, t) {
          var n = t.type;

          if (n in e.a) {
            var r,
                o = e.a[n],
                i = qa(o, t);
            (r = 0 <= i) && Array.prototype.splice.call(o, i, 1), r && (gb(t), 0 == e.a[n].length && (delete e.a[n], e.b--));
          }
        }

        function ib(e, t, n, r) {
          for (var o = 0; o < e.length; ++o) {
            var i = e[o];
            if (!i.Z && i.listener == t && i.capture == !!n && i.ga == r) return o;
          }

          return -1;
        }

        hb.prototype.add = function (e, t, n, r, o) {
          var i = e.toString();
          (e = this.a[i]) || (e = this.a[i] = [], this.b++);
          var a = ib(e, t, r, o);
          return -1 < a ? (t = e[a], n || (t.ba = !1)) : ((t = new fb(t, this.src, i, !!r, o)).ba = n, e.push(t)), t;
        };

        var kb = "closure_lm_" + (1e6 * Math.random() | 0),
            lb = {};

        function nb(e, t, n, r, o) {
          if (r && r.once) return ob(e, t, n, r, o);

          if (p(t)) {
            for (var i = 0; i < t.length; i++) {
              nb(e, t[i], n, r, o);
            }

            return null;
          }

          return n = pb(n), e && e[db] ? e.Ia(t, n, ea(r) ? !!r.capture : !!r, o) : qb(e, t, n, !1, r, o);
        }

        function qb(e, t, n, r, o, i) {
          if (!t) throw Error("Invalid event type");
          var a = ea(o) ? !!o.capture : !!o,
              s = rb(e);
          if (s || (e[kb] = s = new hb(e)), (n = s.add(t, n, r, a, i)).proxy) return n;
          if (r = sb(), n.proxy = r, r.src = e, r.listener = n, e.addEventListener) ab || (o = a), void 0 === o && (o = !1), e.addEventListener(t.toString(), r, o);else if (e.attachEvent) e.attachEvent(tb(t.toString()), r);else {
            if (!e.addListener || !e.removeListener) throw Error("addEventListener and attachEvent are unavailable.");
            e.addListener(r);
          }
          return n;
        }

        function sb() {
          var e = ub,
              t = Za ? function (n) {
            return e.call(t.src, t.listener, n);
          } : function (n) {
            if (!(n = e.call(t.src, t.listener, n))) return n;
          };
          return t;
        }

        function ob(e, t, n, r, o) {
          if (p(t)) {
            for (var i = 0; i < t.length; i++) {
              ob(e, t[i], n, r, o);
            }

            return null;
          }

          return n = pb(n), e && e[db] ? e.Ja(t, n, ea(r) ? !!r.capture : !!r, o) : qb(e, t, n, !0, r, o);
        }

        function vb(e, t, n, r, o) {
          if (p(t)) for (var i = 0; i < t.length; i++) {
            vb(e, t[i], n, r, o);
          } else r = ea(r) ? !!r.capture : !!r, n = pb(n), e && e[db] ? (e = e.f, (t = String(t).toString()) in e.a && -1 < (n = ib(i = e.a[t], n, r, o)) && (gb(i[n]), Array.prototype.splice.call(i, n, 1), 0 == i.length && (delete e.a[t], e.b--))) : e && (e = rb(e)) && (t = e.a[t.toString()], e = -1, t && (e = ib(t, n, r, o)), (n = -1 < e ? t[e] : null) && wb(n));
        }

        function wb(e) {
          if ("number" != typeof e && e && !e.Z) {
            var t = e.src;
            if (t && t[db]) jb(t.f, e);else {
              var n = e.type,
                  r = e.proxy;
              t.removeEventListener ? t.removeEventListener(n, r, e.capture) : t.detachEvent ? t.detachEvent(tb(n), r) : t.addListener && t.removeListener && t.removeListener(r), (n = rb(t)) ? (jb(n, e), 0 == n.b && (n.src = null, t[kb] = null)) : gb(e);
            }
          }
        }

        function tb(e) {
          return e in lb ? lb[e] : lb[e] = "on" + e;
        }

        function xb(e, t, n, r) {
          var o = !0;
          if ((e = rb(e)) && (t = e.a[t.toString()])) for (t = t.concat(), e = 0; e < t.length; e++) {
            var i = t[e];
            i && i.capture == n && !i.Z && (i = yb(i, r), o = o && !1 !== i);
          }
          return o;
        }

        function yb(e, t) {
          var n = e.listener,
              r = e.ga || e.src;
          return e.ba && wb(e), n.call(r, t);
        }

        function ub(e, t) {
          if (e.Z) return !0;

          if (!Za) {
            var r = t || n("window.event");
            t = new bb(r, this);
            var o = !0;

            if (!(0 > r.keyCode || void 0 != r.returnValue)) {
              e: {
                var i = !1;
                if (0 == r.keyCode) try {
                  r.keyCode = -1;
                  break e;
                } catch (e) {
                  i = !0;
                }
                (i || void 0 == r.returnValue) && (r.returnValue = !0);
              }

              for (r = [], i = t.a; i; i = i.parentNode) {
                r.push(i);
              }

              for (e = e.type, i = r.length - 1; 0 <= i; i--) {
                t.a = r[i];
                var a = xb(r[i], e, !0, t);
                o = o && a;
              }

              for (i = 0; i < r.length; i++) {
                t.a = r[i], a = xb(r[i], e, !1, t), o = o && a;
              }
            }

            return o;
          }

          return yb(e, new bb(t, this));
        }

        function rb(e) {
          return (e = e[kb]) instanceof hb ? e : null;
        }

        var zb = "__closure_events_fn_" + (1e9 * Math.random() >>> 0);

        function pb(e) {
          return da(e) ? e : (e[zb] || (e[zb] = function (t) {
            return e.handleEvent(t);
          }), e[zb]);
        }

        function B() {
          w.call(this), this.f = new hb(this), this.N = this, this.J = null;
        }

        function Ab(e, t, n, r) {
          if (!(t = e.f.a[String(t)])) return !0;
          t = t.concat();

          for (var o = !0, i = 0; i < t.length; ++i) {
            var a = t[i];

            if (a && !a.Z && a.capture == n) {
              var s = a.listener,
                  u = a.ga || a.src;
              a.ba && jb(e.f, a), o = !1 !== s.call(u, r) && o;
            }
          }

          return o && 0 != r.Ra;
        }

        function Bb(e) {
          return !/^\s*$/.test(e) && /^[\],:{}\s\u2028\u2029]*$/.test(e.replace(/\\["\\\/bfnrtu]/g, "@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g, "]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g, ""));
        }

        function Cb(a) {
          if (a = String(a), Bb(a)) try {
            return eval("(" + a + ")");
          } catch (e) {}
          throw Error("Invalid JSON string: " + a);
        }

        function Db(e) {
          var t = [];
          return Eb(new Fb(), e, t), t.join("");
        }

        function Fb() {}

        function Eb(e, t, n) {
          if (null == t) n.push("null");else {
            if ("object" == _typeof(t)) {
              if (p(t)) {
                var r = t;
                t = r.length, n.push("[");

                for (var o = "", i = 0; i < t; i++) {
                  n.push(o), Eb(e, r[i], n), o = ",";
                }

                return void n.push("]");
              }

              if (!(t instanceof String || t instanceof Number || t instanceof Boolean)) {
                for (r in n.push("{"), o = "", t) {
                  Object.prototype.hasOwnProperty.call(t, r) && "function" != typeof (i = t[r]) && (n.push(o), Gb(r, n), n.push(":"), Eb(e, i, n), o = ",");
                }

                return void n.push("}");
              }

              t = t.valueOf();
            }

            switch (_typeof(t)) {
              case "string":
                Gb(t, n);
                break;

              case "number":
                n.push(isFinite(t) && !isNaN(t) ? String(t) : "null");
                break;

              case "boolean":
                n.push(String(t));
                break;

              case "function":
                n.push("null");
                break;

              default:
                throw Error("Unknown type: " + _typeof(t));
            }
          }
        }

        u(B, w), B.prototype[db] = !0, g = B.prototype, g.addEventListener = function (e, t, n, r) {
          nb(this, e, t, n, r);
        }, g.removeEventListener = function (e, t, n, r) {
          vb(this, e, t, n, r);
        }, g.dispatchEvent = function (e) {
          var t,
              n = this.J;
          if (n) for (t = []; n; n = n.J) {
            t.push(n);
          }
          n = this.N;
          var r = e.type || e;
          if (l(e)) e = new A(e, n);else if (e instanceof A) e.target = e.target || n;else {
            var o = e;
            Ha(e = new A(r, n), o);
          }
          if (o = !0, t) for (var i = t.length - 1; 0 <= i; i--) {
            var a = e.a = t[i];
            o = Ab(a, r, !0, e) && o;
          }
          if (o = Ab(a = e.a = n, r, !0, e) && o, o = Ab(a, r, !1, e) && o, t) for (i = 0; i < t.length; i++) {
            o = Ab(a = e.a = t[i], r, !1, e) && o;
          }
          return o;
        }, g.w = function () {
          if (B.H.w.call(this), this.f) {
            var e,
                t = this.f;

            for (e in t.a) {
              for (var n = t.a[e], r = 0; r < n.length; r++) {
                gb(n[r]);
              }

              delete t.a[e], t.b--;
            }
          }

          this.J = null;
        }, g.Ia = function (e, t, n, r) {
          return this.f.add(String(e), t, !1, n, r);
        }, g.Ja = function (e, t, n, r) {
          return this.f.add(String(e), t, !0, n, r);
        };
        var Hb = {
          '"': '\\"',
          "\\": "\\\\",
          "/": "\\/",
          "\b": "\\b",
          "\f": "\\f",
          "\n": "\\n",
          "\r": "\\r",
          "\t": "\\t",
          "\v": "\\u000b"
        },
            Ib = /\uffff/.test("￿") ? /[\\"\x00-\x1f\x7f-\uffff]/g : /[\\"\x00-\x1f\x7f-\xff]/g;

        function Gb(e, t) {
          t.push('"', e.replace(Ib, function (e) {
            var t = Hb[e];
            return t || (t = "\\u" + (65536 | e.charCodeAt(0)).toString(16).substr(1), Hb[e] = t), t;
          }), '"');
        }

        function Jb(e, t) {
          this.c = e, this.f = t, this.b = 0, this.a = null;
        }

        function Kb() {
          this.b = this.a = null;
        }

        Jb.prototype.get = function () {
          if (0 < this.b) {
            this.b--;
            var e = this.a;
            this.a = e.next, e.next = null;
          } else e = this.c();

          return e;
        };

        var Nb = new Jb(function () {
          return new Lb();
        }, function (e) {
          e.reset();
        }),
            Rb,
            Tb;

        function Ob() {
          var e = Pb,
              t = null;
          return e.a && (t = e.a, e.a = e.a.next, e.a || (e.b = null), t.next = null), t;
        }

        function Lb() {
          this.next = this.b = this.a = null;
        }

        function Qb(e) {
          k.setTimeout(function () {
            throw e;
          }, 0);
        }

        function Sb() {
          var e = k.MessageChannel;

          if (void 0 === e && "undefined" != typeof window && window.postMessage && window.addEventListener && !y("Presto") && (e = function e() {
            var e = document.createElement("IFRAME");
            e.style.display = "none", e.src = "", document.documentElement.appendChild(e);
            var t = e.contentWindow;
            (e = t.document).open(), e.write(""), e.close();
            var n = "callImmediate" + Math.random(),
                o = "file:" == t.location.protocol ? "*" : t.location.protocol + "//" + t.location.host;
            e = r(function (e) {
              "*" != o && e.origin != o || e.data != n || this.port1.onmessage();
            }, this), t.addEventListener("message", e, !1), this.port1 = {}, this.port2 = {
              postMessage: function postMessage() {
                t.postMessage(n, o);
              }
            };
          }), void 0 !== e && !y("Trident") && !y("MSIE")) {
            var t = new e(),
                n = {},
                o = n;
            return t.port1.onmessage = function () {
              if (void 0 !== n.next) {
                var e = (n = n.next).za;
                n.za = null, e();
              }
            }, function (e) {
              o.next = {
                za: e
              }, o = o.next, t.port2.postMessage(0);
            };
          }

          return "undefined" != typeof document && "onreadystatechange" in document.createElement("SCRIPT") ? function (e) {
            var t = document.createElement("SCRIPT");
            t.onreadystatechange = function () {
              t.onreadystatechange = null, t.parentNode.removeChild(t), t = null, e(), e = null;
            }, document.documentElement.appendChild(t);
          } : function (e) {
            k.setTimeout(e, 0);
          };
        }

        function Ub() {
          if (-1 != String(k.Promise).indexOf("[native code]")) {
            var e = k.Promise.resolve(void 0);

            Tb = function Tb() {
              e.then(Vb);
            };
          } else Tb = function Tb() {
            var e = Vb;
            !da(k.setImmediate) || k.Window && k.Window.prototype && !y("Edge") && k.Window.prototype.setImmediate == k.setImmediate ? (Rb || (Rb = Sb()), Rb(e)) : k.setImmediate(e);
          };
        }

        Kb.prototype.add = function (e, t) {
          var n = Nb.get();
          n.set(e, t), this.b ? this.b.next = n : this.a = n, this.b = n;
        }, Lb.prototype.set = function (e, t) {
          this.a = e, this.b = t, this.next = null;
        }, Lb.prototype.reset = function () {
          this.next = this.b = this.a = null;
        };
        var Wb = !1,
            Pb = new Kb();

        function Vb() {
          for (var e; e = Ob();) {
            try {
              e.a.call(e.b);
            } catch (e) {
              Qb(e);
            }

            var t = Nb;
            t.f(e), 100 > t.b && (t.b++, e.next = t.a, t.a = e);
          }

          Wb = !1;
        }

        function Xb(e, n) {
          B.call(this), this.b = e || 1, this.a = n || k, this.c = r(this.qb, this), this.g = t();
        }

        function Yb(e) {
          e.ea = !1, e.O && (e.a.clearTimeout(e.O), e.O = null);
        }

        function Zb(e, t, n) {
          if (da(e)) n && (e = r(e, n));else {
            if (!e || "function" != typeof e.handleEvent) throw Error("Invalid listener argument");
            e = r(e.handleEvent, e);
          }
          return 2147483647 < Number(t) ? -1 : k.setTimeout(e, t || 0);
        }

        function $b(e, t, n) {
          w.call(this), this.f = null != n ? r(e, n) : e, this.c = t, this.b = r(this.kb, this), this.a = [];
        }

        function ac(e) {
          e.Y = Zb(e.b, e.c), e.f.apply(null, e.a);
        }

        function bc(e) {
          w.call(this), this.b = e, this.a = {};
        }

        u(Xb, B), g = Xb.prototype, g.ea = !1, g.O = null, g.qb = function () {
          if (this.ea) {
            var e = t() - this.g;
            0 < e && e < .8 * this.b ? this.O = this.a.setTimeout(this.c, this.b - e) : (this.O && (this.a.clearTimeout(this.O), this.O = null), this.dispatchEvent("tick"), this.ea && (this.O = this.a.setTimeout(this.c, this.b), this.g = t()));
          }
        }, g.start = function () {
          this.ea = !0, this.O || (this.O = this.a.setTimeout(this.c, this.b), this.g = t());
        }, g.w = function () {
          Xb.H.w.call(this), Yb(this), delete this.a;
        }, u($b, w), g = $b.prototype, g.ha = !1, g.Y = null, g.cb = function (e) {
          this.a = arguments, this.Y ? this.ha = !0 : ac(this);
        }, g.w = function () {
          $b.H.w.call(this), this.Y && (k.clearTimeout(this.Y), this.Y = null, this.ha = !1, this.a = []);
        }, g.kb = function () {
          this.Y = null, this.ha && (this.ha = !1, ac(this));
        }, u(bc, w);
        var cc = [];

        function dc(e, t, n, r) {
          p(n) || (n && (cc[0] = n.toString()), n = cc);

          for (var o = 0; o < n.length; o++) {
            var i = nb(t, n[o], r || e.handleEvent, !1, e.b || e);
            if (!i) break;
            e.a[i.key] = i;
          }
        }

        function ec(e) {
          Ca(e.a, function (e, t) {
            this.a.hasOwnProperty(t) && wb(e);
          }, e), e.a = {};
        }

        function fc(e, t, n) {
          this.reset(e, t, n, void 0, void 0);
        }

        function hc(e) {
          this.f = e, this.b = this.c = this.a = null;
        }

        function C(e, t) {
          this.name = e, this.value = t;
        }

        bc.prototype.w = function () {
          bc.H.w.call(this), ec(this);
        }, bc.prototype.handleEvent = function () {
          throw Error("EventHandler.handleEvent not implemented");
        }, fc.prototype.a = null, fc.prototype.reset = function (e, t, n, r, o) {
          delete this.a;
        }, C.prototype.toString = function () {
          return this.name;
        };
        var ic = new C("SEVERE", 1e3),
            jc = new C("WARNING", 900),
            kc = new C("INFO", 800),
            lc = new C("CONFIG", 700),
            mc = new C("FINE", 500);

        function nc(e) {
          return e.c ? e.c : e.a ? nc(e.a) : (ma("Root logger has no level set."), null);
        }

        hc.prototype.log = function (e, t, n) {
          if (e.value >= nc(this).value) for (da(t) && (t = t()), e = new fc(e, String(t), this.f), n && (e.a = n), n = this; n;) {
            n = n.a;
          }
        };

        var oc = {},
            pc = null;

        function qc(e) {
          var t;

          if (pc || (pc = new hc(""), oc[""] = pc, pc.c = lc), !(t = oc[e])) {
            t = new hc(e);
            var n = e.lastIndexOf("."),
                r = e.substr(n + 1);
            (n = qc(e.substr(0, n))).b || (n.b = {}), n.b[r] = t, t.a = n, oc[e] = t;
          }

          return t;
        }

        function D(e, t) {
          e && e.log(jc, t, void 0);
        }

        function rc(e, t) {
          e && e.log(kc, t, void 0);
        }

        function E(e, t) {
          e && e.log(mc, t, void 0);
        }

        function sc() {
          this.a = qc("goog.labs.net.webChannel.WebChannelDebug"), this.b = !0;
        }

        function tc(e, t, n, r, o, i) {
          F(e, function () {
            if (e.b) {
              if (i) for (var a = "", s = i.split("&"), u = 0; u < s.length; u++) {
                var c = s[u].split("=");

                if (1 < c.length) {
                  var h = c[0];
                  c = c[1];
                  var l = h.split("_");
                  a = 2 <= l.length && "type" == l[1] ? a + (h + "=") + c + "&" : a + (h + "=redacted&");
                }
              } else a = null;
            } else a = i;
            return "XMLHTTP REQ (" + r + ") [attempt " + o + "]: " + t + "\n" + n + "\n" + a;
          });
        }

        function uc(e, t, n, r, o, i, a) {
          F(e, function () {
            return "XMLHTTP RESP (" + r + ") [ attempt " + o + "]: " + t + "\n" + n + "\n" + i + " " + a;
          });
        }

        function G(e, t, n, r) {
          F(e, function () {
            return "XMLHTTP TEXT (" + t + "): " + vc(e, n) + (r ? " " + r : "");
          });
        }

        function wc(e, t) {
          F(e, function () {
            return "TIMEOUT: " + t;
          });
        }

        function H(e, t) {
          E(e.a, t);
        }

        function xc(e, t, n) {
          (e = e.a) && e.log(ic, n || "Exception", t);
        }

        function F(e, t) {
          rc(e.a, t);
        }

        function J(e, t) {
          (e = e.a) && e.log(ic, t, void 0);
        }

        function vc(e, t) {
          if (!e.b) return t;
          if (!t) return null;

          try {
            var n = JSON.parse(t);
            if (n) for (var r = 0; r < n.length; r++) {
              if (p(n[r])) {
                var o = n[r];

                if (!(2 > o.length)) {
                  var i = o[1];

                  if (p(i) && !(1 > i.length)) {
                    var a = i[0];
                    if ("noop" != a && "stop" != a && "close" != a) for (var s = 1; s < i.length; s++) {
                      i[s] = "";
                    }
                  }
                }
              }
            }
            return Db(n);
          } catch (n) {
            return H(e, "Exception parsing expected JS array - probably was not JS"), t;
          }
        }

        sc.prototype.Fa = function () {
          this.b = !1;
        };

        var yc = new B();

        function zc(e) {
          A.call(this, "serverreachability", e);
        }

        function Ac(e) {
          yc.dispatchEvent(new zc(yc, e));
        }

        function Bc(e) {
          A.call(this, "statevent", e);
        }

        function K(e) {
          yc.dispatchEvent(new Bc(yc, e));
        }

        function Cc(e) {
          A.call(this, "timingevent", e);
        }

        function Dc(e, t, n) {
          yc.dispatchEvent(new Cc(yc, e, t, n));
        }

        function Ec(e, t) {
          if (!da(e)) throw Error("Fn must not be null and must be a function");
          return k.setTimeout(function () {
            e();
          }, t);
        }

        u(zc, A), u(Bc, A), u(Cc, A);
        var Fc = {
          NO_ERROR: 0,
          rb: 1,
          yb: 2,
          xb: 3,
          ub: 4,
          wb: 5,
          zb: 6,
          Ua: 7,
          TIMEOUT: 8,
          Cb: 9
        },
            Gc = {
          tb: "complete",
          Gb: "success",
          Va: "error",
          Ua: "abort",
          Eb: "ready",
          Fb: "readystatechange",
          TIMEOUT: "timeout",
          Ab: "incrementaldata",
          Db: "progress",
          vb: "downloadprogress",
          Hb: "uploadprogress"
        };

        function Hc() {}

        function Ic(e) {
          var t;
          return (t = e.a) || (t = {}, Jc(e) && (t[0] = !0, t[1] = !0), t = e.a = t), t;
        }

        function Kc() {}

        Hc.prototype.a = null;
        var Lc = {
          OPEN: "a",
          sb: "b",
          Va: "c",
          Bb: "d"
        },
            Oc;

        function Mc() {
          A.call(this, "d");
        }

        function Nc() {
          A.call(this, "c");
        }

        function Pc() {}

        function Qc(e) {
          return (e = Jc(e)) ? new ActiveXObject(e) : new XMLHttpRequest();
        }

        function Jc(e) {
          if (!e.b && "undefined" == typeof XMLHttpRequest && "undefined" != typeof ActiveXObject) {
            for (var t = ["MSXML2.XMLHTTP.6.0", "MSXML2.XMLHTTP.3.0", "MSXML2.XMLHTTP", "Microsoft.XMLHTTP"], n = 0; n < t.length; n++) {
              var r = t[n];

              try {
                return new ActiveXObject(r), e.b = r;
              } catch (e) {}
            }

            throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");
          }

          return e.b;
        }

        function L(e, t, n, r) {
          this.i = e, this.b = t, this.c = n, this.T = r || 1, this.L = new bc(this), this.R = Rc, e = Na ? 125 : void 0, this.S = new Xb(e), this.j = null, this.f = !1, this.l = this.g = this.h = this.J = this.D = this.U = this.s = null, this.u = [], this.a = null, this.G = 0, this.m = this.o = null, this.C = -1, this.B = !1, this.N = 0, this.I = null, this.v = this.X = this.K = !1;
        }

        u(Mc, A), u(Nc, A), u(Pc, Hc), Oc = new Pc();
        var Rc = 45e3;

        function Sc(e, t) {
          switch (e) {
            case 0:
              return "Non-200 return code (" + t + ")";

            case 1:
              return "XMLHTTP failure (no data)";

            case 2:
              return "HttpConnection timeout";

            default:
              return "Unknown error";
          }
        }

        var Tc = {},
            Uc = {};

        function Vc(e, t, n) {
          e.J = 1, e.h = Wc(M(t)), e.l = n, e.K = !0, Xc(e, null);
        }

        function Yc(e, t, n, r) {
          e.J = 1, e.h = Wc(M(t)), e.l = null, e.K = n, Xc(e, r);
        }

        function Xc(e, n) {
          e.D = t(), Zc(e), e.g = M(e.h), $c(e.g, "t", e.T), e.G = 0, e.a = e.i.ca(e.i.ia() ? n : null), 0 < e.N && (e.I = new $b(r(e.Sa, e, e.a), e.N)), dc(e.L, e.a, "readystatechange", e.nb), n = e.j ? Fa(e.j) : {}, e.l ? (e.o || (e.o = "POST"), n["Content-Type"] = "application/x-www-form-urlencoded", e.a.fa(e.g, e.o, e.l, n)) : (e.o = "GET", e.a.fa(e.g, e.o, null, n)), Ac(1), tc(e.b, e.o, e.g, e.c, e.T, e.l);
        }

        function ad(e) {
          var t = N(e.a),
              n = e.a.Ga(),
              r = e.a.W();

          if (!(3 > t || 3 == t && !Na && !e.a.V())) {
            e.B || 4 != t || 7 == n || Ac(8 == n || 0 >= r ? 3 : 2), bd(e);
            var o = e.a.W();
            e.C = o, (n = e.a.V()) || H(e.b, function () {
              return "No response text for uri " + e.g + " status " + o;
            }), e.f = 200 == o, uc(e.b, e.o, e.g, e.c, e.T, t, o), e.f ? ((r = cd(e)) && (G(e.b, e.c, r, "Initial handshake response via X-HTTP-Initial-Response"), e.v = !0, dd(e, r)), e.K ? (ed(e, t, n), Na && e.f && 3 == t && fd(e)) : (G(e.b, e.c, n, null), dd(e, n)), 4 == t && gd(e), e.f && !e.B && (4 == t ? e.i.ta(e) : (e.f = !1, Zc(e)))) : (400 == o && 0 < n.indexOf("Unknown SID") ? (e.m = 3, K(12), D(e.b.a, "XMLHTTP Unknown SID (" + e.c + ")")) : (e.m = 0, K(13), D(e.b.a, "XMLHTTP Bad status " + o + " (" + e.c + ")")), gd(e), hd(e));
          }
        }

        function cd(e) {
          return !e.X || e.v ? null : e.a && (e = id(e.a, "X-HTTP-Initial-Response")) && !xa(e) ? e : null;
        }

        function ed(e, t, n) {
          for (var r = !0; !e.B && e.G < n.length;) {
            var o = jd(e, n);

            if (o == Uc) {
              4 == t && (e.m = 4, K(14), r = !1), G(e.b, e.c, null, "[Incomplete Response]");
              break;
            }

            if (o == Tc) {
              e.m = 4, K(15), G(e.b, e.c, n, "[Invalid Chunk]"), r = !1;
              break;
            }

            G(e.b, e.c, o, null), dd(e, o);
          }

          4 == t && 0 == n.length && (e.m = 1, K(16), r = !1), e.f = e.f && r, r || (G(e.b, e.c, n, "[Invalid Chunked Response]"), gd(e), hd(e));
        }

        function fd(e) {
          dc(e.L, e.S, "tick", e.mb), e.S.start();
        }

        function jd(e, t) {
          var n = e.G,
              r = t.indexOf("\n", n);
          return -1 == r ? Uc : (n = Number(t.substring(n, r)), isNaN(n) ? Tc : (r += 1) + n > t.length ? Uc : (t = t.substr(r, n), e.G = r + n, t));
        }

        function Zc(e) {
          e.U = t() + e.R, kd(e, e.R);
        }

        function kd(e, t) {
          if (null != e.s) throw Error("WatchDog timer not null");
          e.s = Ec(r(e.lb, e), t);
        }

        function bd(e) {
          e.s && (k.clearTimeout(e.s), e.s = null);
        }

        function hd(e) {
          e.i.La() || e.B || e.i.ta(e);
        }

        function gd(e) {
          bd(e);
          var t = e.I;
          t && "function" == typeof t.$ && t.$(), e.I = null, Yb(e.S), ec(e.L), e.a && (t = e.a, e.a = null, t.abort(), t.$());
        }

        function dd(e, t) {
          try {
            e.i.Oa(e, t), Ac(4);
          } catch (t) {
            xc(e.b, t, "Error in httprequest callback");
          }
        }

        function ld(e) {
          if (e.A && "function" == typeof e.A) return e.A();
          if (l(e)) return e.split("");

          if (ca(e)) {
            for (var t = [], n = e.length, r = 0; r < n; r++) {
              t.push(e[r]);
            }

            return t;
          }

          return Da(e);
        }

        function md(e, t) {
          if (e.forEach && "function" == typeof e.forEach) e.forEach(t, void 0);else if (ca(e) || l(e)) ra(e, t, void 0);else {
            if (e.M && "function" == typeof e.M) var n = e.M();else if (e.A && "function" == typeof e.A) n = void 0;else if (ca(e) || l(e)) {
              n = [];

              for (var r = e.length, o = 0; o < r; o++) {
                n.push(o);
              }
            } else n = Ea(e);
            o = (r = ld(e)).length;

            for (var i = 0; i < o; i++) {
              t.call(void 0, r[i], n && n[i], e);
            }
          }
        }

        function O(e, t) {
          this.b = {}, this.a = [], this.c = 0;
          var n = arguments.length;

          if (1 < n) {
            if (n % 2) throw Error("Uneven number of arguments");

            for (var r = 0; r < n; r += 2) {
              this.set(arguments[r], arguments[r + 1]);
            }
          } else if (e) if (e instanceof O) for (n = e.M(), r = 0; r < n.length; r++) {
            this.set(n[r], e.get(n[r]));
          } else for (r in e) {
            this.set(r, e[r]);
          }
        }

        function od(e) {
          e.b = {}, e.a.length = 0, e.c = 0;
        }

        function pd(e, t) {
          return !!P(e.b, t) && (delete e.b[t], e.c--, e.a.length > 2 * e.c && nd(e), !0);
        }

        function nd(e) {
          if (e.c != e.a.length) {
            for (var t = 0, n = 0; t < e.a.length;) {
              var r = e.a[t];
              P(e.b, r) && (e.a[n++] = r), t++;
            }

            e.a.length = n;
          }

          if (e.c != e.a.length) {
            var o = {};

            for (n = t = 0; t < e.a.length;) {
              P(o, r = e.a[t]) || (e.a[n++] = r, o[r] = 1), t++;
            }

            e.a.length = n;
          }
        }

        function P(e, t) {
          return Object.prototype.hasOwnProperty.call(e, t);
        }

        g = L.prototype, g.setTimeout = function (e) {
          this.R = e;
        }, g.nb = function (e) {
          e = e.target;
          var t = this.I;
          t && 3 == N(e) ? (H(this.b, "Throttling readystatechange."), t.cb()) : this.Sa(e);
        }, g.Sa = function (e) {
          try {
            e == this.a ? ad(this) : D(this.b.a, "Called back with an unexpected xmlhttp");
          } catch (e) {
            if (H(this.b, "Failed call to OnXmlHttpReadyStateChanged_"), this.a && this.a.V()) {
              var t = this;
              xc(this.b, e, function () {
                return "ResponseText: " + t.a.V();
              });
            } else xc(this.b, e, "No response text");
          }
        }, g.mb = function () {
          if (this.a) {
            var e = N(this.a),
                t = this.a.V();
            this.G < t.length && (bd(this), ed(this, e, t), this.f && 4 != e && Zc(this));
          }
        }, g.cancel = function () {
          this.B = !0, gd(this);
        }, g.lb = function () {
          this.s = null;
          var e = t();
          0 <= e - this.U ? (this.f && J(this.b, "Received watchdog timeout even though request loaded successfully"), wc(this.b, this.g), 2 != this.J && (Ac(3), K(17)), gd(this), this.m = 2, hd(this)) : (D(this.b.a, "WatchDog timer called too early"), kd(this, this.U - e));
        }, g = O.prototype, g.A = function () {
          nd(this);

          for (var e = [], t = 0; t < this.a.length; t++) {
            e.push(this.b[this.a[t]]);
          }

          return e;
        }, g.M = function () {
          return nd(this), this.a.concat();
        }, g.get = function (e, t) {
          return P(this.b, e) ? this.b[e] : t;
        }, g.set = function (e, t) {
          P(this.b, e) || (this.c++, this.a.push(e)), this.b[e] = t;
        }, g.forEach = function (e, t) {
          for (var n = this.M(), r = 0; r < n.length; r++) {
            var o = n[r],
                i = this.get(o);
            e.call(t, i, o, this);
          }
        };
        var qd = /^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;

        function rd(e, t) {
          if (e) {
            e = e.split("&");

            for (var n = 0; n < e.length; n++) {
              var r = e[n].indexOf("="),
                  o = null;

              if (0 <= r) {
                var i = e[n].substring(0, r);
                o = e[n].substring(r + 1);
              } else i = e[n];

              t(i, o ? decodeURIComponent(o.replace(/\+/g, " ")) : "");
            }
          }
        }

        function Q(e, t) {
          var n;
          this.b = this.j = this.f = "", this.i = null, this.g = this.a = "", this.h = !1, e instanceof Q ? (this.h = void 0 !== t ? t : e.h, sd(this, e.f), this.j = e.j, td(this, e.b), ud(this, e.i), this.a = e.a, vd(this, wd(e.c)), this.g = e.g) : e && (n = String(e).match(qd)) ? (this.h = !!t, sd(this, n[1] || "", !0), this.j = xd(n[2] || ""), td(this, n[3] || "", !0), ud(this, n[4]), this.a = xd(n[5] || "", !0), vd(this, n[6] || "", !0), this.g = xd(n[7] || "")) : (this.h = !!t, this.c = new yd(null, this.h));
        }

        function M(e) {
          return new Q(e);
        }

        function sd(e, t, n) {
          e.f = n ? xd(t, !0) : t, e.f && (e.f = e.f.replace(/:$/, ""));
        }

        function td(e, t, n) {
          e.b = n ? xd(t, !0) : t;
        }

        function ud(e, t) {
          if (t) {
            if (t = Number(t), isNaN(t) || 0 > t) throw Error("Bad port number " + t);
            e.i = t;
          } else e.i = null;
        }

        function vd(e, t, n) {
          t instanceof yd ? (e.c = t, Ed(e.c, e.h)) : (n || (t = zd(t, Fd)), e.c = new yd(t, e.h));
        }

        function R(e, t, n) {
          e.c.set(t, n);
        }

        function $c(e, t, n) {
          p(n) || (n = [String(n)]), Gd(e.c, t, n);
        }

        function Wc(e) {
          return R(e, "zx", Math.floor(2147483648 * Math.random()).toString(36) + Math.abs(Math.floor(2147483648 * Math.random()) ^ t()).toString(36)), e;
        }

        function Hd(e) {
          return e instanceof Q ? M(e) : new Q(e, void 0);
        }

        function Id(e, t, n, r) {
          var o = new Q(null, void 0);
          return e && sd(o, e), t && td(o, t), n && ud(o, n), r && (o.a = r), o;
        }

        function xd(e, t) {
          return e ? t ? decodeURI(e.replace(/%25/g, "%2525")) : decodeURIComponent(e) : "";
        }

        function zd(e, t, n) {
          return l(e) ? (e = encodeURI(e).replace(t, Jd), n && (e = e.replace(/%25([0-9a-fA-F]{2})/g, "%$1")), e) : null;
        }

        function Jd(e) {
          return "%" + ((e = e.charCodeAt(0)) >> 4 & 15).toString(16) + (15 & e).toString(16);
        }

        Q.prototype.toString = function () {
          var e = [],
              t = this.f;
          t && e.push(zd(t, Ad, !0), ":");
          var n = this.b;
          return (n || "file" == t) && (e.push("//"), (t = this.j) && e.push(zd(t, Ad, !0), "@"), e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g, "%$1")), null != (n = this.i) && e.push(":", String(n))), (n = this.a) && (this.b && "/" != n.charAt(0) && e.push("/"), e.push(zd(n, "/" == n.charAt(0) ? Bd : Cd, !0))), (n = this.c.toString()) && e.push("?", n), (n = this.g) && e.push("#", zd(n, Dd)), e.join("");
        }, Q.prototype.resolve = function (e) {
          var t = M(this),
              n = !!e.f;
          n ? sd(t, e.f) : n = !!e.j, n ? t.j = e.j : n = !!e.b, n ? td(t, e.b) : n = null != e.i;
          var r = e.a;
          if (n) ud(t, e.i);else if (n = !!e.a) {
            if ("/" != r.charAt(0)) if (this.b && !this.a) r = "/" + r;else {
              var o = t.a.lastIndexOf("/");
              -1 != o && (r = t.a.substr(0, o + 1) + r);
            }
            if (".." == (o = r) || "." == o) r = "";else if (-1 != o.indexOf("./") || -1 != o.indexOf("/.")) {
              r = 0 == o.lastIndexOf("/", 0), o = o.split("/");

              for (var i = [], a = 0; a < o.length;) {
                var s = o[a++];
                "." == s ? r && a == o.length && i.push("") : ".." == s ? ((1 < i.length || 1 == i.length && "" != i[0]) && i.pop(), r && a == o.length && i.push("")) : (i.push(s), r = !0);
              }

              r = i.join("/");
            } else r = o;
          }
          return n ? t.a = r : n = "" !== e.c.toString(), n ? vd(t, wd(e.c)) : n = !!e.g, n && (t.g = e.g), t;
        };
        var Ad = /[#\/\?@]/g,
            Cd = /[#\?:]/g,
            Bd = /[#\?]/g,
            Fd = /[#\?@]/g,
            Dd = /#/g;

        function yd(e, t) {
          this.b = this.a = null, this.c = e || null, this.f = !!t;
        }

        function S(e) {
          e.a || (e.a = new O(), e.b = 0, e.c && rd(e.c, function (t, n) {
            e.add(decodeURIComponent(t.replace(/\+/g, " ")), n);
          }));
        }

        function Ld(e, t) {
          S(e), t = Kd(e, t), P(e.a.b, t) && (e.c = null, e.b -= e.a.get(t).length, pd(e.a, t));
        }

        function Md(e, t) {
          return S(e), t = Kd(e, t), P(e.a.b, t);
        }

        function Gd(e, t, n) {
          Ld(e, t), 0 < n.length && (e.c = null, e.a.set(Kd(e, t), wa(n)), e.b += n.length);
        }

        function wd(e) {
          var t = new yd();
          return t.c = e.c, e.a && (t.a = new O(e.a), t.b = e.b), t;
        }

        function Kd(e, t) {
          return t = String(t), e.f && (t = t.toLowerCase()), t;
        }

        function Ed(e, t) {
          t && !e.f && (S(e), e.c = null, e.a.forEach(function (e, t) {
            var n = t.toLowerCase();
            t != n && (Ld(this, t), Gd(this, n, e));
          }, e)), e.f = t;
        }

        function Pd() {}

        function Qd() {}

        function Rd(e, t) {
          this.a = e, this.b = t, this.c = this.i = null, this.h = !1, this.m = null, this.f = -1, this.l = this.g = null;
        }

        function Sd(e) {
          H(e.b, "TestConnection: starting stage 2");
          var t = e.a.I.a;
          if (null != t) H(e.b, function () {
            return "Buffered";
          }), K(4), t ? (K(10), Td(e.a, e, !1)) : (K(11), Td(e.a, e, !0));else {
            e.c = new L(e, e.b, void 0, void 0), e.c.j = e.i;
            var n = Ud(e.a, e.g, e.m);
            K(4), $c(n, "TYPE", "xmlhttp");
            var r = e.a.j,
                o = e.a.K;
            r && o && R(n, r, o), Yc(e.c, n, !1, e.g);
          }
        }

        function Wd() {
          this.a = this.b = null;
        }

        function Xd() {
          this.a = new O();
        }

        function Yd(e) {
          var t = _typeof(e);

          return "object" == t && e || "function" == t ? "o" + (e[q] || (e[q] = ++fa)) : t.charAt(0) + e;
        }

        function Zd(e, t) {
          this.a = e, this.b = t;
        }

        function $d(e) {
          this.g = e || ae, k.PerformanceNavigationTiming ? e = 0 < (e = k.performance.getEntriesByType("navigation")).length && ("hq" == e[0].nextHopProtocol || "h2" == e[0].nextHopProtocol) : e = !!(k.oa && k.oa.Ma && k.oa.Ma() && k.oa.Ma().Jb), this.f = e ? this.g : 1, this.a = null, 1 < this.f && (this.a = new Xd()), this.b = null, this.c = [];
        }

        g = yd.prototype, g.add = function (e, t) {
          S(this), this.c = null, e = Kd(this, e);
          var n = this.a.get(e);
          return n || this.a.set(e, n = []), n.push(t), this.b += 1, this;
        }, g.forEach = function (e, t) {
          S(this), this.a.forEach(function (n, r) {
            ra(n, function (n) {
              e.call(t, n, r, this);
            }, this);
          }, this);
        }, g.M = function () {
          S(this);

          for (var e = this.a.A(), t = this.a.M(), n = [], r = 0; r < t.length; r++) {
            for (var o = e[r], i = 0; i < o.length; i++) {
              n.push(t[r]);
            }
          }

          return n;
        }, g.A = function (e) {
          S(this);
          var t = [];
          if (l(e)) Md(this, e) && (t = va(t, this.a.get(Kd(this, e))));else {
            e = this.a.A();

            for (var n = 0; n < e.length; n++) {
              t = va(t, e[n]);
            }
          }
          return t;
        }, g.set = function (e, t) {
          return S(this), this.c = null, Md(this, e = Kd(this, e)) && (this.b -= this.a.get(e).length), this.a.set(e, [t]), this.b += 1, this;
        }, g.get = function (e, t) {
          return 0 < (e = e ? this.A(e) : []).length ? String(e[0]) : t;
        }, g.toString = function () {
          if (this.c) return this.c;
          if (!this.a) return "";

          for (var e = [], t = this.a.M(), n = 0; n < t.length; n++) {
            var r = t[n],
                o = encodeURIComponent(String(r));
            r = this.A(r);

            for (var i = 0; i < r.length; i++) {
              var a = o;
              "" !== r[i] && (a += "=" + encodeURIComponent(String(r[i]))), e.push(a);
            }
          }

          return this.c = e.join("&");
        }, u(Qd, Pd), g = Rd.prototype, g.P = null, g.ca = function (e) {
          return this.a.ca(e);
        }, g.abort = function () {
          this.c && (this.c.cancel(), this.c = null), this.f = -1;
        }, g.La = function () {
          return !1;
        }, g.Oa = function (e, t) {
          if (this.f = e.C, 0 == this.P) {
            if (H(this.b, "TestConnection: Got data for stage 1"), !this.a.o && (e = e.a)) {
              var n = id(e, "X-Client-Wire-Protocol");
              this.l = n || null, this.a.j && ((e = id(e, "X-HTTP-Session-Id")) ? this.a.K = e : D(this.b.a, "Missing X_HTTP_SESSION_ID in the handshake response"));
            }

            if (t) {
              try {
                var r = this.a.la.a.parse(t);
              } catch (e) {
                return xc(this.b, e), void Vd(this.a, this);
              }

              this.g = r[0];
            } else H(this.b, "TestConnection: Null responseText"), Vd(this.a, this);
          } else 1 == this.P && (this.h ? K(6) : "11111" == t ? (K(5), this.h = !0, (!z || 10 <= Number(Wa)) && (this.f = 200, this.c.cancel(), H(this.b, "Test connection succeeded; using streaming connection"), K(11), Td(this.a, this, !0))) : (K(7), this.h = !1));
        }, g.ta = function () {
          this.f = this.c.C, this.c.f ? 0 == this.P ? (this.P = 1, H(this.b, "TestConnection: request complete for initial check"), Sd(this)) : 1 == this.P && (H(this.b, "TestConnection: request complete for stage 2"), this.h ? (H(this.b, "Test connection succeeded; using streaming connection"), K(11), Td(this.a, this, !0)) : (H(this.b, "Test connection failed; not using streaming"), K(10), Td(this.a, this, !1))) : (H(this.b, "TestConnection: request failed, in state " + this.P), 0 == this.P ? K(8) : 1 == this.P && K(9), Vd(this.a, this));
        }, g.ia = function () {
          return this.a.ia();
        }, g.qa = function () {
          return this.a.qa();
        }, Xd.prototype.add = function (e) {
          this.a.set(Yd(e), e);
        }, Xd.prototype.A = function () {
          return this.a.A();
        };
        var ae = 10;

        function be(e, t) {
          e.a || -1 == t.indexOf("spdy") && -1 == t.indexOf("quic") && -1 == t.indexOf("h2") || (e.f = e.g, e.a = new Xd(), e.b && (ce(e, e.b), e.b = null));
        }

        function de(e) {
          return !!e.b || !!e.a && e.a.a.c >= e.f;
        }

        function ee(e, t) {
          return e.b ? e = e.b == t : e.a ? (t = Yd(t), e = P(e.a.a.b, t)) : e = !1, e;
        }

        function ce(e, t) {
          e.a ? e.a.add(t) : e.b = t;
        }

        function fe(e, t) {
          var n;
          e.b && e.b == t ? e.b = null : ((n = e.a) && (n = Yd(t), n = P(e.a.a.b, n)), n && pd(e.a.a, Yd(t)));
        }

        function ge(e) {
          if (null != e.b) return e.c.concat(e.b.u);

          if (null != e.a && 0 != e.a.a.c) {
            var t = e.c;
            return ra(e.a.A(), function (e) {
              t = t.concat(e.u);
            }), t;
          }

          return wa(e.c);
        }

        function he(e, t) {
          e.c = e.c.concat(t);
        }

        function ie() {}

        function je() {
          this.a = new ie();
        }

        function ke(e, t, n) {
          var r = n || "";

          try {
            md(e, function (e, n) {
              var o = e;
              ea(e) && (o = Db(e)), t.push(r + n + "=" + encodeURIComponent(o));
            });
          } catch (e) {
            throw t.push(r + "type=" + encodeURIComponent("_badmap")), e;
          }
        }

        function le(e, t) {
          var n = new sc();
          H(n, "TestLoadImage: loading " + e);
          var r = new Image();
          r.onload = ja(me, n, r, "TestLoadImage: loaded", !0, t), r.onerror = ja(me, n, r, "TestLoadImage: error", !1, t), r.onabort = ja(me, n, r, "TestLoadImage: abort", !1, t), r.ontimeout = ja(me, n, r, "TestLoadImage: timeout", !1, t), k.setTimeout(function () {
            r.ontimeout && r.ontimeout();
          }, 1e4), r.src = e;
        }

        function me(e, t, n, r, o) {
          try {
            H(e, n), t.onload = null, t.onerror = null, t.onabort = null, t.ontimeout = null, o(r);
          } catch (t) {
            xc(e, t);
          }
        }

        function T(e) {
          B.call(this), this.headers = new O(), this.s = e || null, this.c = !1, this.D = this.a = null, this.K = this.B = "", this.j = 0, this.g = "", this.h = this.I = this.u = this.G = !1, this.l = 0, this.C = null, this.L = ne, this.v = this.o = !1;
        }

        $d.prototype.cancel = function () {
          this.c = ge(this), this.b ? (this.b.cancel(), this.b = null) : this.a && 0 != this.a.a.c && (ra(this.a.A(), function (e) {
            e.cancel();
          }), od(this.a.a));
        }, ie.prototype.stringify = function (e) {
          return k.JSON.stringify(e, void 0);
        }, ie.prototype.parse = function (e) {
          return k.JSON.parse(e, void 0);
        }, u(T, B);
        var ne = "";
        T.prototype.b = qc("goog.net.XhrIo");
        var oe = /^https?$/i,
            pe = ["POST", "PUT"];

        function se(e) {
          return z && Va(9) && "number" == typeof e.timeout && void 0 !== e.ontimeout;
        }

        function ta(e) {
          return "content-type" == e.toLowerCase();
        }

        function qe(e, t) {
          e.c = !1, e.a && (e.h = !0, e.a.abort(), e.h = !1), e.g = t, e.j = 5, te(e), ue(e);
        }

        function te(e) {
          e.G || (e.G = !0, e.dispatchEvent("complete"), e.dispatchEvent("error"));
        }

        function ve(e) {
          if (e.c && void 0 !== goog) if (e.D[1] && 4 == N(e) && 2 == e.W()) E(e.b, U(e, "Local request error detected and ignored"));else if (e.u && 4 == N(e)) Zb(e.Na, 0, e);else if (e.dispatchEvent("readystatechange"), 4 == N(e)) {
            E(e.b, U(e, "Request complete")), e.c = !1;

            try {
              var t,
                  n = e.W();

              e: switch (n) {
                case 200:
                case 201:
                case 202:
                case 204:
                case 206:
                case 304:
                case 1223:
                  var r = !0;
                  break e;

                default:
                  r = !1;
              }

              if (!(t = r)) {
                var o;

                if (o = 0 === n) {
                  var i = String(e.B).match(qd)[1] || null;

                  if (!i && k.self && k.self.location) {
                    var a = k.self.location.protocol;
                    i = a.substr(0, a.length - 1);
                  }

                  o = !oe.test(i ? i.toLowerCase() : "");
                }

                t = o;
              }

              t ? (e.dispatchEvent("complete"), e.dispatchEvent("success")) : (e.j = 6, e.g = e.Ha() + " [" + e.W() + "]", te(e));
            } finally {
              ue(e);
            }
          }
        }

        function ue(e, t) {
          if (e.a) {
            re(e);
            var n = e.a,
                r = e.D[0] ? aa : null;
            e.a = null, e.D = null, t || e.dispatchEvent("ready");

            try {
              n.onreadystatechange = r;
            } catch (t) {
              (e = e.b) && e.log(ic, "Problem encountered resetting onreadystatechange: " + t.message, void 0);
            }
          }
        }

        function re(e) {
          e.a && e.v && (e.a.ontimeout = null), e.C && (k.clearTimeout(e.C), e.C = null);
        }

        function N(e) {
          return e.a ? e.a.readyState : 0;
        }

        function id(e, t) {
          return e.a ? e.a.getResponseHeader(t) : null;
        }

        function U(e, t) {
          return t + " [" + e.K + " " + e.B + " " + e.W() + "]";
        }

        function we(e) {
          var t = "";
          return Ca(e, function (e, n) {
            t += n, t += ":", t += e, t += "\r\n";
          }), t;
        }

        function xe(e, t, n) {
          e: {
            for (r in n) {
              var r = !1;
              break e;
            }

            r = !0;
          }

          if (r) return e;

          if (n = we(n), l(e)) {
            if (t = encodeURIComponent(String(t)), t += n = null != n ? "=" + encodeURIComponent(String(n)) : "") {
              if (0 > (n = e.indexOf("#")) && (n = e.length), 0 > (r = e.indexOf("?")) || r > n) {
                r = n;
                var o = "";
              } else o = e.substring(r + 1, n);

              n = (e = [e.substr(0, r), o, e.substr(n)])[1], e[1] = t ? n ? n + "&" + t : t : n, e = e[0] + (e[1] ? "?" + e[1] : "") + e[2];
            }

            return e;
          }

          return R(e, t, n), e;
        }

        function ye(e) {
          this.ya = 0, this.g = [], this.a = new sc(), this.I = new Wd(), this.X = this.ua = this.D = this.ja = this.b = this.K = this.j = this.U = this.h = this.L = this.i = null, this.Za = this.R = 0, this.Xa = !!n("internalChannelParams.failFast", e), this.ka = this.C = this.s = this.l = this.m = this.f = null, this.u = this.xa = this.N = -1, this.T = this.B = this.v = 0, this.Wa = n("internalChannelParams.baseRetryDelayMs", e) || 5e3, this.$a = n("internalChannelParams.retryDelaySeedMs", e) || 1e4, this.Ya = n("internalChannelParams.forwardChannelMaxRetries", e) || 2, this.wa = n("internalChannelParams.forwardChannelRequestTimeoutMs", e) || 2e4, this.Ta = e && e.Kb || void 0, this.G = void 0, this.S = e && e.supportsCrossDomainXhr || !1, this.J = "", this.c = new $d(e && e.concurrentRequestLimit), this.la = new je(), this.o = !e || void 0 === e.backgroundChannelTest || e.backgroundChannelTest, (this.va = e && e.fastHandshake || !1) && !this.o && (D(this.a.a, "Force backgroundChannelTest when fastHandshake is enabled."), this.o = !0), e && e.Fa && this.a.Fa();
        }

        function ze(e) {
          if (H(e.a, "disconnect()"), Ae(e), 3 == e.F) {
            var n = e.R++,
                r = M(e.D);
            R(r, "SID", e.J), R(r, "RID", n), R(r, "TYPE", "terminate"), Be(e, r), (n = new L(e, e.a, n, void 0)).J = 2, n.h = Wc(M(r)), r = !1, k.navigator && k.navigator.sendBeacon && (r = k.navigator.sendBeacon(n.h.toString(), "")), !r && k.Image && (new Image().src = n.h, r = !0), r || (n.a = n.i.ca(null), n.a.fa(n.h)), n.D = t(), Zc(n);
          }

          Ce(e);
        }

        function Ae(e) {
          e.C && (e.C.abort(), e.C = null), e.b && (e.b.cancel(), e.b = null), e.l && (k.clearTimeout(e.l), e.l = null), De(e), e.c.cancel(), e.m && (k.clearTimeout(e.m), e.m = null);
        }

        function Ee(e, t) {
          1e3 == e.g.length && J(e.a, function () {
            return "Already have 1000 queued maps upon queueing " + Db(t);
          }), e.g.push(new Zd(e.Za++, t)), 3 == e.F && Fe(e);
        }

        function Fe(e) {
          de(e.c) || e.m || (e.m = Ec(r(e.Qa, e), 0), e.v = 0);
        }

        function Ge(e, t) {
          var n = e.c;
          return (n.b ? 1 : n.a ? n.a.a.c : 0) >= e.c.f - (e.m ? 1 : 0) ? (J(e.a, "Unexpected retry request is scheduled."), !1) : e.m ? (H(e.a, "Use the retry request that is already scheduled."), e.g = t.u.concat(e.g), !0) : !(1 == e.F || 2 == e.F || e.v >= (e.Xa ? 0 : e.Ya)) && (H(e.a, "Going to retry POST"), e.m = Ec(r(e.Qa, e, t), He(e, e.v)), e.v++, !0);
        }

        function Je(e, t) {
          var n;
          n = t ? t.c : e.R++;
          var r = M(e.D);
          R(r, "SID", e.J), R(r, "RID", n), R(r, "AID", e.N), Be(e, r), e.h && e.i && xe(r, e.h, e.i), n = new L(e, e.a, n, e.v + 1), null === e.h && (n.j = e.i), t && (e.g = t.u.concat(e.g)), t = Ie(e, n), n.setTimeout(Math.round(.5 * e.wa) + Math.round(.5 * e.wa * Math.random())), ce(e.c, n), Vc(n, r, t);
        }

        function Be(e, t) {
          e.f && md({}, function (e, n) {
            R(t, n, e);
          });
        }

        function Ie(e, t) {
          var n = Math.min(e.g.length, 1e3),
              o = e.f ? r(e.f.ab, e.f, e) : null;

          e: for (var i = e.g, a = -1;;) {
            var s = ["count=" + n];
            -1 == a ? 0 < n ? (a = i[0].a, s.push("ofs=" + a)) : a = 0 : s.push("ofs=" + a);

            for (var u = !0, c = 0; c < n; c++) {
              var h = i[c].a,
                  l = i[c].b;
              if (0 > (h -= a)) a = Math.max(0, i[c].a - 100), u = !1;else try {
                ke(l, s, "req" + h + "_");
              } catch (e) {
                o && o(l);
              }
            }

            if (u) {
              o = s.join("&");
              break e;
            }
          }

          return e = e.g.splice(0, n), t.u = e, o;
        }

        function Ke(e) {
          if (!e.b && !e.l) {
            e.T = 1;
            var t = e.Pa;
            Tb || Ub(), Wb || (Tb(), Wb = !0), Pb.add(t, e), e.B = 0;
          }
        }

        function Le(e) {
          return e.b || e.l ? (J(e.a, "Request already in progress"), !1) : !(3 <= e.B) && (H(e.a, "Going to retry GET"), e.T++, e.l = Ec(r(e.Pa, e), He(e, e.B)), e.B++, !0);
        }

        function Td(e, t, n) {
          H(e.a, "Test Connection Finished");
          var r = t.l;
          r && be(e.c, r), e.ka = n, e.u = t.f, H(e.a, "connectChannel_()"), e.D = Me(e, e.ja), Fe(e);
        }

        function Vd(e, t) {
          H(e.a, "Test Connection Failed"), e.u = t.f, V(e, 2);
        }

        function De(e) {
          null != e.s && (k.clearTimeout(e.s), e.s = null);
        }

        function He(e, t) {
          var n = e.Wa + Math.floor(Math.random() * e.$a);
          return e.qa() || (H(e.a, "Inactive channel"), n *= 2), n * t;
        }

        function V(e, t) {
          if (F(e.a, "Error code " + t), 2 == t) {
            var n = null;
            e.f && (n = null);
            var o = r(e.pb, e);
            n || (n = new Q("//www.google.com/images/cleardot.gif"), k.location && "http" == k.location.protocol || sd(n, "https"), Wc(n)), le(n.toString(), o);
          } else K(2);

          H(e.a, "HttpChannel: error - " + t), e.F = 0, e.f && e.f.Ba(t), Ce(e), Ae(e);
        }

        function Ce(e) {
          if (e.F = 0, e.u = -1, e.f) {
            var t = ge(e.c);
            0 == t.length && 0 == e.g.length || (H(e.a, function () {
              return "Number of undelivered maps, pending: " + t.length + ", outgoing: " + e.g.length;
            }), e.c.c.length = 0, wa(e.g), e.g.length = 0), e.f.Aa();
          }
        }

        function Me(e, t) {
          return t = Ne(e, null, t), H(e.a, "GetForwardChannelUri: " + t), t;
        }

        function Ud(e, t, n) {
          return t = Ne(e, e.ia() ? t : null, n), H(e.a, "GetBackChannelUri: " + t), t;
        }

        function Ne(e, t, n) {
          var r = Hd(n);
          if ("" != r.b) t && td(r, t + "." + r.b), ud(r, r.i);else {
            var o,
                i = k.location;
            o = t ? t + "." + i.hostname : i.hostname, r = Id(i.protocol, o, i.port, n);
          }
          return e.U && Ca(e.U, function (e, t) {
            R(r, t, e);
          }), t = e.j, n = e.K, t && n && R(r, t, n), R(r, "VER", e.na), Be(e, r), r;
        }

        function Oe() {}

        function Pe(e) {
          for (var t = arguments[0], n = 1; n < arguments.length; n++) {
            var r,
                o = arguments[n];
            if (0 == o.lastIndexOf("/", 0)) t = o;else (r = "" == t) || (r = 0 <= (r = t.length - 1) && t.indexOf("/", r) == r), t += r ? o : "/" + o;
          }

          return t;
        }

        function Qe() {
          if (z && !(10 <= Number(Wa))) throw Error("Environmental error: no available transport.");
        }

        function W(e, t) {
          B.call(this), this.a = new ye(t), this.b = e, this.o = t && t.testUrl ? t.testUrl : Pe(this.b, "test"), this.c = qc("goog.labs.net.webChannel.WebChannelBaseTransport"), this.g = t && t.messageUrlParams || null, e = t && t.messageHeaders || null, t && t.clientProtocolHeaderRequired && (e ? e["X-Client-Protocol"] = "webchannel" : e = {
            "X-Client-Protocol": "webchannel"
          }), this.a.i = e, e = t && t.initMessageHeaders || null, t && t.messageContentType && (e ? e["X-WebChannel-Content-Type"] = t.messageContentType : e = {
            "X-WebChannel-Content-Type": t.messageContentType
          }), t && t.Ea && (e ? e["X-WebChannel-Client-Profile"] = t.Ea : e = {
            "X-WebChannel-Client-Profile": t.Ea
          }), this.a.L = e, (e = t && t.httpHeadersOverwriteParam) && !xa(e) && (this.a.h = e), this.l = t && t.supportsCrossDomainXhr || !1, this.j = t && t.sendRawJson || !1, (t = t && t.httpSessionIdParam) && !xa(t) && (this.a.j = t, null !== (e = this.g) && t in e && (t in (e = this.g) && delete e[t], D(this.c, "Ignore httpSessionIdParam also specified with messageUrlParams: " + t))), this.h = new Re(this);
        }

        function Se(e) {
          Mc.call(this);
          var t = e.__sm__;

          if (t) {
            e: {
              for (var n in t) {
                e = n;
                break e;
              }

              e = void 0;
            }

            (this.c = e) ? (e = this.c, this.data = null !== t && e in t ? t[e] : void 0) : this.data = t;
          } else this.data = e;
        }

        function Te() {
          Nc.call(this), this.status = 1;
        }

        function Re(e) {
          this.a = e;
        }

        g = T.prototype, g.fa = function (e, t, n, o) {
          if (this.a) throw Error("[goog.net.XhrIo] Object is active with another request=" + this.B + "; newUri=" + e);
          t = t ? t.toUpperCase() : "GET", this.B = e, this.g = "", this.j = 0, this.K = t, this.G = !1, this.c = !0, this.a = this.s ? Qc(this.s) : Qc(Oc), this.D = this.s ? Ic(this.s) : Ic(Oc), this.a.onreadystatechange = r(this.Na, this);

          try {
            E(this.b, U(this, "Opening Xhr")), this.I = !0, this.a.open(t, String(e), !0), this.I = !1;
          } catch (e) {
            return E(this.b, U(this, "Error opening Xhr: " + e.message)), void qe(this, e);
          }

          e = n || "";
          var i = new O(this.headers);
          o && md(o, function (e, t) {
            i.set(t, e);
          }), o = sa(i.M()), n = k.FormData && e instanceof k.FormData, !(0 <= qa(pe, t)) || o || n || i.set("Content-Type", "application/x-www-form-urlencoded;charset=utf-8"), i.forEach(function (e, t) {
            this.a.setRequestHeader(t, e);
          }, this), this.L && (this.a.responseType = this.L), "withCredentials" in this.a && this.a.withCredentials !== this.o && (this.a.withCredentials = this.o);

          try {
            re(this), 0 < this.l && (this.v = se(this.a), E(this.b, U(this, "Will abort after " + this.l + "ms if incomplete, xhr2 " + this.v)), this.v ? (this.a.timeout = this.l, this.a.ontimeout = r(this.Ka, this)) : this.C = Zb(this.Ka, this.l, this)), E(this.b, U(this, "Sending request")), this.u = !0, this.a.send(e), this.u = !1;
          } catch (e) {
            E(this.b, U(this, "Send error: " + e.message)), qe(this, e);
          }
        }, g.Ka = function () {
          void 0 !== goog && this.a && (this.g = "Timed out after " + this.l + "ms, aborting", this.j = 8, E(this.b, U(this, this.g)), this.dispatchEvent("timeout"), this.abort(8));
        }, g.abort = function (e) {
          this.a && this.c && (E(this.b, U(this, "Aborting")), this.c = !1, this.h = !0, this.a.abort(), this.h = !1, this.j = e || 7, this.dispatchEvent("complete"), this.dispatchEvent("abort"), ue(this));
        }, g.w = function () {
          this.a && (this.c && (this.c = !1, this.h = !0, this.a.abort(), this.h = !1), ue(this, !0)), T.H.w.call(this);
        }, g.Na = function () {
          this.i || (this.I || this.u || this.h ? ve(this) : this.jb());
        }, g.jb = function () {
          ve(this);
        }, g.W = function () {
          try {
            return 2 < N(this) ? this.a.status : -1;
          } catch (e) {
            return -1;
          }
        }, g.Ha = function () {
          try {
            return 2 < N(this) ? this.a.statusText : "";
          } catch (e) {
            return E(this.b, "Can not get status: " + e.message), "";
          }
        }, g.V = function () {
          try {
            return this.a ? this.a.responseText : "";
          } catch (e) {
            return E(this.b, "Can not get responseText: " + e.message), "";
          }
        }, g.eb = function (e) {
          if (this.a) {
            var t = this.a.responseText;
            e && 0 == t.indexOf(e) && (t = t.substring(e.length));

            e: {
              if (e = t, k.JSON) try {
                var n = k.JSON.parse(e);
                break e;
              } catch (e) {}
              n = Cb(e);
            }

            return n;
          }
        }, g.Ga = function () {
          return this.j;
        }, g.hb = function () {
          return l(this.g) ? this.g : String(this.g);
        }, g = ye.prototype, g.na = 8, g.F = 1, g.La = function () {
          return 0 == this.F;
        }, g.Qa = function (e) {
          if (this.m = null, H(this.a, "startForwardChannel_"), 1 == this.F) {
            if (e) J(this.a, "Not supposed to retry the open");else {
              H(this.a, "open_()"), this.R = Math.floor(1e5 * Math.random()), e = this.R++;
              var t = new L(this, this.a, e, void 0),
                  n = this.i;
              this.L && (n ? Ha(n = Fa(n), this.L) : n = this.L), null === this.h && (t.j = n);
              var r = Ie(this, t),
                  o = M(this.D);
              R(o, "RID", e), R(o, "CVER", 22), this.o && this.j && R(o, "X-HTTP-Session-Id", this.j), Be(this, o), this.h && n && xe(o, this.h, n), ce(this.c, t), this.va ? (R(o, "$req", r), R(o, "SID", "null"), t.X = !0, Vc(t, o, null)) : Vc(t, o, r), this.F = 2;
            }
          } else 3 == this.F && (e ? Je(this, e) : 0 == this.g.length ? H(this.a, "startForwardChannel_ returned: nothing to send") : de(this.c) ? J(this.a, "startForwardChannel_ returned: connection already in progress") : (Je(this), H(this.a, "startForwardChannel_ finished, sent request")));
        }, g.Pa = function () {
          this.l = null, H(this.a, "Creating new HttpRequest"), this.b = new L(this, this.a, "rpc", this.T), null === this.h && (this.b.j = this.i), this.b.N = 0;
          var e = M(this.ua);
          R(e, "RID", "rpc"), R(e, "SID", this.J), R(e, "CI", this.ka ? "0" : "1"), R(e, "AID", this.N), Be(this, e), R(e, "TYPE", "xmlhttp"), this.h && this.i && xe(e, this.h, this.i), this.G && this.b.setTimeout(this.G), Yc(this.b, e, !0, this.X), H(this.a, "New Request created");
        }, g.Oa = function (e, t) {
          if (0 != this.F && (this.b == e || ee(this.c, e))) if (this.u = e.C, !e.v && ee(this.c, e) && 3 == this.F) {
            try {
              var n = this.la.a.parse(t);
            } catch (e) {
              n = null;
            }

            if (p(n) && 3 == n.length) {
              if (0 == (t = n)[0]) {
                e: if (H(this.a, "Server claims our backchannel is missing."), this.l) H(this.a, "But we are currently starting the request.");else {
                  if (this.b) {
                    if (!(this.b.D + 3e3 < e.D)) break e;
                    De(this), this.b.cancel(), this.b = null;
                  } else D(this.a.a, "We do not have a BackChannel established");

                  Le(this), K(18);
                }
              } else this.xa = t[1], 0 < (e = this.xa - this.N) && (t = t[2], H(this.a, t + " bytes (in " + e + " arrays) are outstanding on the BackChannel"), 37500 > t && this.ka && 0 == this.B && !this.s && (this.s = Ec(r(this.ib, this), 6e3)));
            } else H(this.a, "Bad POST response data returned"), V(this, 11);
          } else if ((e.v || this.b == e) && De(this), !xa(t)) for (t = n = this.la.a.parse(t), n = 0; n < t.length; n++) {
            var o = t[n];
            if (this.N = o[0], o = o[1], 2 == this.F) {
              if ("c" == o[0]) {
                this.J = o[1], this.X = o[2];
                var i = o[3];
                null != i && (this.na = i, F(this.a, "VER=" + this.na)), null != (i = o[4]) && (this.ya = i, F(this.a, "SVER=" + this.ya)), null != (o = o[5]) && "number" == typeof o && 0 < o && (this.G = o *= 1.5, F(this.a, "backChannelRequestTimeoutMs_=" + o)), this.o && (o = e.a) && ((i = id(o, "X-Client-Wire-Protocol")) && be(this.c, i), this.j && ((o = id(o, "X-HTTP-Session-Id")) ? (this.K = o, R(this.D, this.j, o)) : D(this.a.a, "Missing X_HTTP_SESSION_ID in the handshake response"))), this.F = 3, this.f && this.f.Da(), o = e, this.ua = Ud(this, this.X, this.ja), o.v ? (H(this.a, "Upgrade the handshake request to a backchannel."), fe(this.c, o), (i = this.G) && o.setTimeout(i), o.s && (bd(o), Zc(o)), this.b = o) : Ke(this);
              } else "stop" != o[0] && "close" != o[0] || V(this, 7);
            } else 3 == this.F && ("stop" == o[0] || "close" == o[0] ? "stop" == o[0] ? V(this, 7) : ze(this) : "noop" != o[0] && this.f && this.f.Ca(o), this.B = 0);
          }
        }, g.ib = function () {
          null != this.s && (this.s = null, this.b.cancel(), this.b = null, Le(this), K(19));
        }, g.ta = function (e) {
          H(this.a, "Request complete");
          var n = null;

          if (this.b == e) {
            De(this), this.b = null;
            var r = 2;
          } else {
            if (!ee(this.c, e)) return;
            n = e.u, fe(this.c, e), r = 1;
          }

          if (this.u = e.C, 0 != this.F) if (e.f) 1 == r ? (Dc(e.l ? e.l.length : 0, t() - e.D, this.v), Fe(this)) : Ke(this);else {
            var o = e.m;
            if (3 == o || 0 == o && 0 < this.u) H(this.a, "Not retrying due to error type");else {
              var i = this;
              if (H(this.a, function () {
                return "Maybe retrying, last error: " + Sc(o, i.u);
              }), 1 == r && Ge(this, e) || 2 == r && Le(this)) return;
              H(this.a, "Exceeded max number of retries");
            }

            switch (n && 0 < n.length && he(this.c, n), H(this.a, "Error: HTTP request failed"), o) {
              case 1:
                V(this, 5);
                break;

              case 4:
                V(this, 10);
                break;

              case 3:
                V(this, 6);
                break;

              default:
                V(this, 2);
            }
          }
        }, g.pb = function (e) {
          e ? (F(this.a, "Successfully pinged google.com"), K(2)) : (F(this.a, "Failed to ping google.com"), K(1));
        }, g.ca = function (e) {
          if (e && !this.S) throw Error("Can't create secondary domain capable XhrIo object.");
          return (e = new T(this.Ta)).o = this.S, e;
        }, g.qa = function () {
          return !!this.f && !0;
        }, g.ia = function () {
          return this.S;
        }, g = Oe.prototype, g.Da = function () {}, g.Ca = function () {}, g.Ba = function () {}, g.Aa = function () {}, g.ab = function () {}, Qe.prototype.a = function (e, t) {
          return new W(e, t);
        }, u(W, B), g = W.prototype, g.addEventListener = function (e, t, n, r) {
          W.H.addEventListener.call(this, e, t, n, r);
        }, g.removeEventListener = function (e, t, n, r) {
          W.H.removeEventListener.call(this, e, t, n, r);
        }, g.fb = function () {
          this.a.f = this.h, this.l && (this.a.S = !0);
          var e = this.a,
              t = this.o,
              n = this.b,
              r = this.g || void 0;
          H(e.a, "connect()"), K(0), e.ja = n, e.U = r || {}, e.o && (H(e.a, "connect() bypassed channel-test."), e.I.b = [], e.I.a = !1), H(e.a, "connectTest_()"), e.C = new Rd(e, e.a), null === e.h && (e.C.i = e.i), n = t, e.h && e.i && (n = xe(t, e.h, e.i)), (e = e.C).m = n, t = Me(e.a, e.m), K(3), null != (n = e.a.I.b) ? (e.g = n[0], e.P = 1, Sd(e)) : ($c(t, "MODE", "init"), !e.a.o && e.a.j && $c(t, "X-HTTP-Session-Id", e.a.j), e.c = new L(e, e.b, void 0, void 0), e.c.j = e.i, Yc(e.c, t, !1, null), e.P = 0);
        }, g.close = function () {
          ze(this.a);
        }, g.gb = function (e) {
          if (l(e)) {
            var t = {};
            t.__data__ = e, Ee(this.a, t);
          } else this.j ? ((t = {}).__data__ = Db(e), Ee(this.a, t)) : Ee(this.a, e);
        }, g.w = function () {
          this.a.f = null, delete this.h, ze(this.a), delete this.a, W.H.w.call(this);
        }, u(Se, Mc), u(Te, Nc), u(Re, Oe), Re.prototype.Da = function () {
          rc(this.a.c, "WebChannel opened on " + this.a.b), this.a.dispatchEvent("a");
        }, Re.prototype.Ca = function (e) {
          this.a.dispatchEvent(new Se(e));
        }, Re.prototype.Ba = function (e) {
          rc(this.a.c, "WebChannel aborted on " + this.a.b + " due to channel error: " + e), this.a.dispatchEvent(new Te(e));
        }, Re.prototype.Aa = function () {
          rc(this.a.c, "WebChannel closed on " + this.a.b), this.a.dispatchEvent("b");
        };
        var Ue = ja(function (e, t) {
          function n() {}

          n.prototype = e.prototype;
          var r = new n();
          return e.apply(r, Array.prototype.slice.call(arguments, 1)), r;
        }, Qe);

        function Ve() {
          this.b = [], this.a = [];
        }

        function We(e) {
          return 0 == e.b.length && (e.b = e.a, e.b.reverse(), e.a = []), e.b.pop();
        }

        function Xe(e) {
          return e.b.length + e.a.length;
        }

        function Ye(e, t) {
          if (w.call(this), this.h = e || 0, this.c = t || 10, this.h > this.c) throw Error(Ze);
          this.a = new Ve(), this.b = new Xd(), this.g = null, this.aa();
        }

        Ve.prototype.A = function () {
          for (var e = [], t = this.b.length - 1; 0 <= t; --t) {
            e.push(this.b[t]);
          }

          var n = this.a.length;

          for (t = 0; t < n; ++t) {
            e.push(this.a[t]);
          }

          return e;
        }, u(Ye, w);
        var Ze = "[goog.structs.Pool] Min can not be greater than max";

        function af(e) {
          if ("function" == typeof e.$) e.$();else for (var t in e) {
            e[t] = null;
          }
        }

        function $e(e) {
          return Xe(e.a) + e.b.a.c;
        }

        function bf(e, t) {
          this.a = e, this.b = t;
        }

        function cf(e) {
          if (this.a = [], e) e: {
            if (e instanceof cf) {
              var t = e.M();

              if (e = e.A(), 0 >= this.a.length) {
                for (var n = this.a, r = 0; r < t.length; r++) {
                  n.push(new bf(t[r], e[r]));
                }

                break e;
              }
            } else t = Ea(e), e = Da(e);

            for (r = 0; r < t.length; r++) {
              df(this, t[r], e[r]);
            }
          }
        }

        function df(e, t, n) {
          var r = e.a;

          for (r.push(new bf(t, n)), t = r.length - 1, n = (e = e.a)[t]; 0 < t && e[r = t - 1 >> 1].a > n.a;) {
            e[t] = e[r], t = r;
          }

          e[t] = n;
        }

        function ef() {
          cf.call(this);
        }

        function Y(e, t) {
          this.f = new ef(), Ye.call(this, e, t);
        }

        function Z(e, t, n, r) {
          this.l = e, this.j = !!r, Y.call(this, t, n);
        }

        g = Ye.prototype, g.da = function () {
          var e = t();

          if (!(null != this.g && 0 > e - this.g)) {
            for (var n; 0 < Xe(this.a) && (n = We(this.a), !this.sa(n));) {
              this.aa();
            }

            return !n && $e(this) < this.c && (n = this.pa()), n && (this.g = e, this.b.add(n)), n;
          }
        }, g.ob = function (e) {
          return !!pd(this.b.a, Yd(e)) && (this.ma(e), !0);
        }, g.ma = function (e) {
          pd(this.b.a, Yd(e)), this.sa(e) && $e(this) < this.c ? this.a.a.push(e) : af(e);
        }, g.aa = function () {
          for (var e = this.a; $e(this) < this.h;) {
            var t = this.pa();
            e.a.push(t);
          }

          for (; $e(this) > this.c && 0 < Xe(this.a);) {
            af(We(e));
          }
        }, g.pa = function () {
          return {};
        }, g.sa = function (e) {
          return "function" != typeof e.bb || e.bb();
        }, g.w = function () {
          if (Ye.H.w.call(this), 0 < this.b.a.c) throw Error("[goog.structs.Pool] Objects not released");
          delete this.b;

          for (var e = this.a; 0 != e.b.length || 0 != e.a.length;) {
            af(We(e));
          }

          delete this.a;
        }, cf.prototype.A = function () {
          for (var e = this.a, t = [], n = e.length, r = 0; r < n; r++) {
            t.push(e[r].b);
          }

          return t;
        }, cf.prototype.M = function () {
          for (var e = this.a, t = [], n = e.length, r = 0; r < n; r++) {
            t.push(e[r].a);
          }

          return t;
        }, u(ef, cf), u(Y, Ye), g = Y.prototype, g.da = function (e, t) {
          if (!e) return Y.H.da.call(this);
          df(this.f, void 0 !== t ? t : 100, e), this.ra();
        }, g.ra = function () {
          for (var e = this.f; 0 < e.a.length;) {
            var t = this.da();
            if (!t) break;
            var n = e,
                r = n.a,
                o = r.length,
                i = r[0];
            if (0 >= o) i = void 0;else {
              if (1 == o) ua(r);else {
                r[0] = r.pop(), r = 0, o = (n = n.a).length;

                for (var a = n[r]; r < o >> 1;) {
                  var s = 2 * r + 1,
                      u = 2 * r + 2;
                  if (n[s = u < o && n[u].a < n[s].a ? u : s].a > a.a) break;
                  n[r] = n[s], r = s;
                }

                n[r] = a;
              }
              i = i.b;
            }
            i.apply(this, [t]);
          }
        }, g.ma = function (e) {
          Y.H.ma.call(this, e), this.ra();
        }, g.aa = function () {
          Y.H.aa.call(this), this.ra();
        }, g.w = function () {
          Y.H.w.call(this), k.clearTimeout(void 0), ua(this.f.a), this.f = null;
        }, u(Z, Y), Z.prototype.pa = function () {
          var e = new T(),
              t = this.l;
          return t && t.forEach(function (t, n) {
            e.headers.set(n, t);
          }), this.j && (e.o = !0), e;
        }, Z.prototype.sa = function (e) {
          return !e.i && !e.a;
        }, Qe.prototype.createWebChannel = Qe.prototype.a, W.prototype.send = W.prototype.gb, W.prototype.open = W.prototype.fb, W.prototype.close = W.prototype.close, Fc.NO_ERROR = 0, Fc.TIMEOUT = 8, Fc.HTTP_ERROR = 6, Gc.COMPLETE = "complete", Kc.EventType = Lc, Lc.OPEN = "a", Lc.CLOSE = "b", Lc.ERROR = "c", Lc.MESSAGE = "d", B.prototype.listen = B.prototype.Ia, Z.prototype.getObject = Z.prototype.da, Z.prototype.releaseObject = Z.prototype.ob, T.prototype.listenOnce = T.prototype.Ja, T.prototype.getLastError = T.prototype.hb, T.prototype.getLastErrorCode = T.prototype.Ga, T.prototype.getStatus = T.prototype.W, T.prototype.getStatusText = T.prototype.Ha, T.prototype.getResponseJson = T.prototype.eb, T.prototype.getResponseText = T.prototype.V, T.prototype.getResponseText = T.prototype.V, T.prototype.send = T.prototype.fa, module.exports = {
          createWebChannelTransport: Ue,
          ErrorCode: Fc,
          EventType: Gc,
          WebChannel: Kc,
          XhrIoPool: Z
        };
      }).call(void 0 !== commonjsGlobal ? commonjsGlobal : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
    }),
        dist_1 = dist.createWebChannelTransport,
        dist_2 = dist.ErrorCode,
        dist_3 = dist.EventType,
        dist_4 = dist.WebChannel,
        dist_5 = dist.XhrIoPool,
        SDK_VERSION = firebase.SDK_VERSION,
        logClient = new Logger("@firebase/firestore"),
        LogLevel$1;
    LogLevel$$1 = LogLevel$1 || (LogLevel$1 = {}), LogLevel$$1[LogLevel$$1.DEBUG = 0] = "DEBUG", LogLevel$$1[LogLevel$$1.ERROR = 1] = "ERROR", LogLevel$$1[LogLevel$$1.SILENT = 2] = "SILENT";

    var PlatformSupport = function () {
      function e() {}

      return e.setPlatform = function (t) {
        e.platform && fail("Platform already defined"), e.platform = t;
      }, e.getPlatform = function () {
        return e.platform || fail("Platform not set"), e.platform;
      }, e;
    }();

    var Code = {
      OK: "ok",
      CANCELLED: "cancelled",
      UNKNOWN: "unknown",
      INVALID_ARGUMENT: "invalid-argument",
      DEADLINE_EXCEEDED: "deadline-exceeded",
      NOT_FOUND: "not-found",
      ALREADY_EXISTS: "already-exists",
      PERMISSION_DENIED: "permission-denied",
      UNAUTHENTICATED: "unauthenticated",
      RESOURCE_EXHAUSTED: "resource-exhausted",
      FAILED_PRECONDITION: "failed-precondition",
      ABORTED: "aborted",
      OUT_OF_RANGE: "out-of-range",
      UNIMPLEMENTED: "unimplemented",
      INTERNAL: "internal",
      UNAVAILABLE: "unavailable",
      DATA_LOSS: "data-loss"
    },
        FirestoreError = function (e) {
      function t(t, n) {
        var r = e.call(this, n) || this;
        return r.code = t, r.message = n, r.name = "FirebaseError", r.toString = function () {
          return r.name + ": [code=" + r.code + "]: " + r.message;
        }, r;
      }

      return __extends(t, e), t;
    }(Error);

    var AutoId = function () {
      function e() {}

      return e.newId = function () {
        for (var e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", t = "", n = 0; n < 20; n++) {
          t += e.charAt(Math.floor(Math.random() * e.length));
        }

        return assert(20 === t.length, "Invalid auto ID: " + t), t;
      }, e;
    }();

    var Blob = function () {
      function e(e) {
        assertBase64Available(), this._binaryString = e;
      }

      return e.fromBase64String = function (t) {
        validateExactNumberOfArgs("Blob.fromBase64String", arguments, 1), validateArgType("Blob.fromBase64String", "string", 1, t), assertBase64Available();

        try {
          return new e(PlatformSupport.getPlatform().atob(t));
        } catch (e) {
          throw new FirestoreError(Code.INVALID_ARGUMENT, "Failed to construct Blob from Base64 string: " + e);
        }
      }, e.fromUint8Array = function (t) {
        if (validateExactNumberOfArgs("Blob.fromUint8Array", arguments, 1), assertUint8ArrayAvailable(), !(t instanceof Uint8Array)) throw invalidClassError("Blob.fromUint8Array", "Uint8Array", 1, t);
        return new e(Array.prototype.map.call(t, function (e) {
          return String.fromCharCode(e);
        }).join(""));
      }, e.prototype.toBase64 = function () {
        return validateExactNumberOfArgs("Blob.toBase64", arguments, 0), assertBase64Available(), PlatformSupport.getPlatform().btoa(this._binaryString);
      }, e.prototype.toUint8Array = function () {
        validateExactNumberOfArgs("Blob.toUint8Array", arguments, 0), assertUint8ArrayAvailable();

        for (var e = new Uint8Array(this._binaryString.length), t = 0; t < this._binaryString.length; t++) {
          e[t] = this._binaryString.charCodeAt(t);
        }

        return e;
      }, e.prototype.toString = function () {
        return "Blob(base64: " + this.toBase64() + ")";
      }, e.prototype.isEqual = function (e) {
        return this._binaryString === e._binaryString;
      }, e.prototype._compareTo = function (e) {
        return primitiveComparator(this._binaryString, e._binaryString);
      }, e;
    }(),
        PublicBlob = makeConstructorPrivate(Blob, "Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),
        GeoPoint = function () {
      function e(e, t) {
        if (validateExactNumberOfArgs("GeoPoint", arguments, 2), validateArgType("GeoPoint", "number", 1, e), validateArgType("GeoPoint", "number", 2, t), !isFinite(e) || e < -90 || e > 90) throw new FirestoreError(Code.INVALID_ARGUMENT, "Latitude must be a number between -90 and 90, but was: " + e);
        if (!isFinite(t) || t < -180 || t > 180) throw new FirestoreError(Code.INVALID_ARGUMENT, "Longitude must be a number between -180 and 180, but was: " + t);
        this._lat = e, this._long = t;
      }

      return Object.defineProperty(e.prototype, "latitude", {
        get: function get() {
          return this._lat;
        },
        enumerable: !0,
        configurable: !0
      }), Object.defineProperty(e.prototype, "longitude", {
        get: function get() {
          return this._long;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.isEqual = function (e) {
        return this._lat === e._lat && this._long === e._long;
      }, e.prototype._compareTo = function (e) {
        return primitiveComparator(this._lat, e._lat) || primitiveComparator(this._long, e._long);
      }, e;
    }(),
        Timestamp = function () {
      function e(e, t) {
        if (this.seconds = e, this.nanoseconds = t, t < 0) throw new FirestoreError(Code.INVALID_ARGUMENT, "Timestamp nanoseconds out of range: " + t);
        if (t >= 1e9) throw new FirestoreError(Code.INVALID_ARGUMENT, "Timestamp nanoseconds out of range: " + t);
        if (e < -62135596800) throw new FirestoreError(Code.INVALID_ARGUMENT, "Timestamp seconds out of range: " + e);
        if (e >= 253402300800) throw new FirestoreError(Code.INVALID_ARGUMENT, "Timestamp seconds out of range: " + e);
      }

      return e.now = function () {
        return e.fromMillis(Date.now());
      }, e.fromDate = function (t) {
        return e.fromMillis(t.getTime());
      }, e.fromMillis = function (t) {
        var n = Math.floor(t / 1e3);
        return new e(n, 1e6 * (t - 1e3 * n));
      }, e.prototype.toDate = function () {
        return new Date(this.toMillis());
      }, e.prototype.toMillis = function () {
        return 1e3 * this.seconds + this.nanoseconds / 1e6;
      }, e.prototype._compareTo = function (e) {
        return this.seconds === e.seconds ? primitiveComparator(this.nanoseconds, e.nanoseconds) : primitiveComparator(this.seconds, e.seconds);
      }, e.prototype.isEqual = function (e) {
        return e.seconds === this.seconds && e.nanoseconds === this.nanoseconds;
      }, e.prototype.toString = function () {
        return "Timestamp(seconds=" + this.seconds + ", nanoseconds=" + this.nanoseconds + ")";
      }, e;
    }(),
        DatabaseInfo = function () {
      return function (e, t, n, r) {
        this.databaseId = e, this.persistenceKey = t, this.host = n, this.ssl = r;
      };
    }(),
        DEFAULT_DATABASE_NAME = "(default)",
        DatabaseId = function () {
      function e(e, t) {
        this.projectId = e, this.database = t || DEFAULT_DATABASE_NAME;
      }

      return Object.defineProperty(e.prototype, "isDefaultDatabase", {
        get: function get() {
          return this.database === DEFAULT_DATABASE_NAME;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.isEqual = function (t) {
        return t instanceof e && t.projectId === this.projectId && t.database === this.database;
      }, e.prototype.compareTo = function (e) {
        return primitiveComparator(this.projectId, e.projectId) || primitiveComparator(this.database, e.database);
      }, e;
    }(),
        DOCUMENT_KEY_NAME = "__name__",
        Path = function () {
      function e(e, t, n) {
        this.init(e, t, n);
      }

      return e.prototype.init = function (e, t, n) {
        void 0 === t ? t = 0 : t > e.length && fail("offset " + t + " out of range " + e.length), void 0 === n ? n = e.length - t : n > e.length - t && fail("length " + n + " out of range " + (e.length - t)), this.segments = e, this.offset = t, this.len = n;
      }, e.prototype.construct = function (e, t, n) {
        var r = Object.create(Object.getPrototypeOf(this));
        return r.init(e, t, n), r;
      }, Object.defineProperty(e.prototype, "length", {
        get: function get() {
          return this.len;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.isEqual = function (t) {
        return 0 === e.comparator(this, t);
      }, e.prototype.child = function (t) {
        var n = this.segments.slice(this.offset, this.limit());
        return t instanceof e ? t.forEach(function (e) {
          n.push(e);
        }) : "string" == typeof t ? n.push(t) : fail("Unknown parameter type for Path.child(): " + t), this.construct(n);
      }, e.prototype.limit = function () {
        return this.offset + this.length;
      }, e.prototype.popFirst = function (e) {
        return e = void 0 === e ? 1 : e, assert(this.length >= e, "Can't call popFirst() with less segments"), this.construct(this.segments, this.offset + e, this.length - e);
      }, e.prototype.popLast = function () {
        return assert(!this.isEmpty(), "Can't call popLast() on empty path"), this.construct(this.segments, this.offset, this.length - 1);
      }, e.prototype.firstSegment = function () {
        return assert(!this.isEmpty(), "Can't call firstSegment() on empty path"), this.segments[this.offset];
      }, e.prototype.lastSegment = function () {
        return assert(!this.isEmpty(), "Can't call lastSegment() on empty path"), this.segments[this.limit() - 1];
      }, e.prototype.get = function (e) {
        return assert(e < this.length, "Index out of range"), this.segments[this.offset + e];
      }, e.prototype.isEmpty = function () {
        return 0 === this.length;
      }, e.prototype.isPrefixOf = function (e) {
        if (e.length < this.length) return !1;

        for (var t = 0; t < this.length; t++) {
          if (this.get(t) !== e.get(t)) return !1;
        }

        return !0;
      }, e.prototype.forEach = function (e) {
        for (var t = this.offset, n = this.limit(); t < n; t++) {
          e(this.segments[t]);
        }
      }, e.prototype.toArray = function () {
        return this.segments.slice(this.offset, this.limit());
      }, e.comparator = function (e, t) {
        for (var n = Math.min(e.length, t.length), r = 0; r < n; r++) {
          var o = e.get(r),
              i = t.get(r);
          if (o < i) return -1;
          if (o > i) return 1;
        }

        return e.length < t.length ? -1 : e.length > t.length ? 1 : 0;
      }, e;
    }(),
        ResourcePath = function (e) {
      function t() {
        return null !== e && e.apply(this, arguments) || this;
      }

      return __extends(t, e), t.prototype.canonicalString = function () {
        return this.toArray().join("/");
      }, t.prototype.toString = function () {
        return this.canonicalString();
      }, t.fromString = function (e) {
        if (e.indexOf("//") >= 0) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid path (" + e + "). Paths must not contain // in them.");
        return new t(e.split("/").filter(function (e) {
          return e.length > 0;
        }));
      }, t.EMPTY_PATH = new t([]), t;
    }(Path),
        identifierRegExp = /^[_a-zA-Z][_a-zA-Z0-9]*$/,
        FieldPath = function (e) {
      function t() {
        return null !== e && e.apply(this, arguments) || this;
      }

      return __extends(t, e), t.isValidIdentifier = function (e) {
        return identifierRegExp.test(e);
      }, t.prototype.canonicalString = function () {
        return this.toArray().map(function (e) {
          return e = e.replace("\\", "\\\\").replace("`", "\\`"), t.isValidIdentifier(e) || (e = "`" + e + "`"), e;
        }).join(".");
      }, t.prototype.toString = function () {
        return this.canonicalString();
      }, t.prototype.isKeyField = function () {
        return 1 === this.length && this.get(0) === DOCUMENT_KEY_NAME;
      }, t.keyField = function () {
        return new t([DOCUMENT_KEY_NAME]);
      }, t.fromServerFormat = function (e) {
        for (var n = [], r = "", o = 0, i = function i() {
          if (0 === r.length) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid field path (" + e + "). Paths must not be empty, begin with '.', end with '.', or contain '..'");
          n.push(r), r = "";
        }, a = !1; o < e.length;) {
          var s = e[o];

          if ("\\" === s) {
            if (o + 1 === e.length) throw new FirestoreError(Code.INVALID_ARGUMENT, "Path has trailing escape character: " + e);
            var u = e[o + 1];
            if ("\\" !== u && "." !== u && "`" !== u) throw new FirestoreError(Code.INVALID_ARGUMENT, "Path has invalid escape sequence: " + e);
            r += u, o += 2;
          } else "`" === s ? (a = !a, o++) : "." !== s || a ? (r += s, o++) : (i(), o++);
        }

        if (i(), a) throw new FirestoreError(Code.INVALID_ARGUMENT, "Unterminated ` in path: " + e);
        return new t(n);
      }, t.EMPTY_PATH = new t([]), t;
    }(Path),
        DocumentKey = function () {
      function e(t) {
        this.path = t, assert(e.isDocumentKey(t), "Invalid DocumentKey with an odd number of segments: " + t.toArray().join("/"));
      }

      return e.prototype.isEqual = function (e) {
        return null !== e && 0 === ResourcePath.comparator(this.path, e.path);
      }, e.prototype.toString = function () {
        return this.path.toString();
      }, e.comparator = function (e, t) {
        return ResourcePath.comparator(e.path, t.path);
      }, e.isDocumentKey = function (e) {
        return e.length % 2 == 0;
      }, e.fromSegments = function (t) {
        return new e(new ResourcePath(t.slice()));
      }, e.fromPathString = function (t) {
        return new e(ResourcePath.fromString(t));
      }, e.EMPTY = new e(new ResourcePath([])), e;
    }(),
        Document = function () {
      function e(e, t, n, r) {
        this.key = e, this.version = t, this.data = n, this.hasLocalMutations = r.hasLocalMutations;
      }

      return e.prototype.field = function (e) {
        return this.data.field(e);
      }, e.prototype.fieldValue = function (e) {
        var t = this.field(e);
        return t ? t.value() : void 0;
      }, e.prototype.value = function () {
        return this.data.value();
      }, e.prototype.isEqual = function (t) {
        return t instanceof e && this.key.isEqual(t.key) && this.version.isEqual(t.version) && this.data.isEqual(t.data) && this.hasLocalMutations === t.hasLocalMutations;
      }, e.prototype.toString = function () {
        return "Document(" + this.key + ", " + this.version + ", " + this.data.toString() + ", {hasLocalMutations: " + this.hasLocalMutations + "})";
      }, e.compareByKey = function (e, t) {
        return DocumentKey.comparator(e.key, t.key);
      }, e.compareByField = function (e, t, n) {
        var r = t.field(e),
            o = n.field(e);
        return void 0 !== r && void 0 !== o ? r.compareTo(o) : fail("Trying to compare documents on fields that don't exist");
      }, e;
    }(),
        NoDocument = function () {
      function e(e, t) {
        this.key = e, this.version = t;
      }

      return e.prototype.toString = function () {
        return "NoDocument(" + this.key + ", " + this.version + ")";
      }, e.prototype.isEqual = function (e) {
        return e && e.version.isEqual(this.version) && e.key.isEqual(this.key);
      }, e.compareByKey = function (e, t) {
        return DocumentKey.comparator(e.key, t.key);
      }, e;
    }(),
        SortedMap = function () {
      function e(e, t) {
        this.comparator = e, this.root = t || LLRBNode.EMPTY;
      }

      return e.prototype.insert = function (t, n) {
        return new e(this.comparator, this.root.insert(t, n, this.comparator).copy(null, null, LLRBNode.BLACK, null, null));
      }, e.prototype.remove = function (t) {
        return new e(this.comparator, this.root.remove(t, this.comparator).copy(null, null, LLRBNode.BLACK, null, null));
      }, e.prototype.get = function (e) {
        for (var t = this.root; !t.isEmpty();) {
          var n = this.comparator(e, t.key);
          if (0 === n) return t.value;
          n < 0 ? t = t.left : n > 0 && (t = t.right);
        }

        return null;
      }, e.prototype.indexOf = function (e) {
        for (var t = 0, n = this.root; !n.isEmpty();) {
          var r = this.comparator(e, n.key);
          if (0 === r) return t + n.left.size;
          r < 0 ? n = n.left : (t += n.left.size + 1, n = n.right);
        }

        return -1;
      }, e.prototype.isEmpty = function () {
        return this.root.isEmpty();
      }, Object.defineProperty(e.prototype, "size", {
        get: function get() {
          return this.root.size;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.minKey = function () {
        return this.root.minKey();
      }, e.prototype.maxKey = function () {
        return this.root.maxKey();
      }, e.prototype.inorderTraversal = function (e) {
        return this.root.inorderTraversal(e);
      }, e.prototype.forEach = function (e) {
        this.inorderTraversal(function (t, n) {
          return e(t, n), !1;
        });
      }, e.prototype.reverseTraversal = function (e) {
        return this.root.reverseTraversal(e);
      }, e.prototype.getIterator = function () {
        return new SortedMapIterator(this.root, null, this.comparator, !1);
      }, e.prototype.getIteratorFrom = function (e) {
        return new SortedMapIterator(this.root, e, this.comparator, !1);
      }, e.prototype.getReverseIterator = function () {
        return new SortedMapIterator(this.root, null, this.comparator, !0);
      }, e.prototype.getReverseIteratorFrom = function (e) {
        return new SortedMapIterator(this.root, e, this.comparator, !0);
      }, e;
    }(),
        SortedMapIterator = function () {
      function e(e, t, n, r) {
        this.isReverse = r, this.nodeStack = [];

        for (var o = 1; !e.isEmpty();) {
          if (o = t ? n(e.key, t) : 1, r && (o *= -1), o < 0) e = this.isReverse ? e.left : e.right;else {
            if (0 === o) {
              this.nodeStack.push(e);
              break;
            }

            this.nodeStack.push(e), e = this.isReverse ? e.right : e.left;
          }
        }
      }

      return e.prototype.getNext = function () {
        assert(this.nodeStack.length > 0, "getNext() called on iterator when hasNext() is false.");
        var e = this.nodeStack.pop(),
            t = {
          key: e.key,
          value: e.value
        };
        if (this.isReverse) for (e = e.left; !e.isEmpty();) {
          this.nodeStack.push(e), e = e.right;
        } else for (e = e.right; !e.isEmpty();) {
          this.nodeStack.push(e), e = e.left;
        }
        return t;
      }, e.prototype.hasNext = function () {
        return this.nodeStack.length > 0;
      }, e.prototype.peek = function () {
        if (0 === this.nodeStack.length) return null;
        var e = this.nodeStack[this.nodeStack.length - 1];
        return {
          key: e.key,
          value: e.value
        };
      }, e;
    }(),
        LLRBNode = function () {
      function e(t, n, r, o, i) {
        this.key = t, this.value = n, this.color = null != r ? r : e.RED, this.left = null != o ? o : e.EMPTY, this.right = null != i ? i : e.EMPTY, this.size = this.left.size + 1 + this.right.size;
      }

      return e.prototype.copy = function (t, n, r, o, i) {
        return new e(null != t ? t : this.key, null != n ? n : this.value, null != r ? r : this.color, null != o ? o : this.left, null != i ? i : this.right);
      }, e.prototype.isEmpty = function () {
        return !1;
      }, e.prototype.inorderTraversal = function (e) {
        return this.left.inorderTraversal(e) || e(this.key, this.value) || this.right.inorderTraversal(e);
      }, e.prototype.reverseTraversal = function (e) {
        return this.right.reverseTraversal(e) || e(this.key, this.value) || this.left.reverseTraversal(e);
      }, e.prototype.min = function () {
        return this.left.isEmpty() ? this : this.left.min();
      }, e.prototype.minKey = function () {
        return this.min().key;
      }, e.prototype.maxKey = function () {
        return this.right.isEmpty() ? this.key : this.right.maxKey();
      }, e.prototype.insert = function (e, t, n) {
        var r = this,
            o = n(e, r.key);
        return (r = o < 0 ? r.copy(null, null, null, r.left.insert(e, t, n), null) : 0 === o ? r.copy(null, t, null, null, null) : r.copy(null, null, null, null, r.right.insert(e, t, n))).fixUp();
      }, e.prototype.removeMin = function () {
        if (this.left.isEmpty()) return e.EMPTY;
        var t = this;
        return t.left.isRed() || t.left.left.isRed() || (t = t.moveRedLeft()), (t = t.copy(null, null, null, t.left.removeMin(), null)).fixUp();
      }, e.prototype.remove = function (t, n) {
        var r,
            o = this;
        if (n(t, o.key) < 0) o.left.isEmpty() || o.left.isRed() || o.left.left.isRed() || (o = o.moveRedLeft()), o = o.copy(null, null, null, o.left.remove(t, n), null);else {
          if (o.left.isRed() && (o = o.rotateRight()), o.right.isEmpty() || o.right.isRed() || o.right.left.isRed() || (o = o.moveRedRight()), 0 === n(t, o.key)) {
            if (o.right.isEmpty()) return e.EMPTY;
            r = o.right.min(), o = o.copy(r.key, r.value, null, null, o.right.removeMin());
          }

          o = o.copy(null, null, null, null, o.right.remove(t, n));
        }
        return o.fixUp();
      }, e.prototype.isRed = function () {
        return this.color;
      }, e.prototype.fixUp = function () {
        var e = this;
        return e.right.isRed() && !e.left.isRed() && (e = e.rotateLeft()), e.left.isRed() && e.left.left.isRed() && (e = e.rotateRight()), e.left.isRed() && e.right.isRed() && (e = e.colorFlip()), e;
      }, e.prototype.moveRedLeft = function () {
        var e = this.colorFlip();
        return e.right.left.isRed() && (e = (e = (e = e.copy(null, null, null, null, e.right.rotateRight())).rotateLeft()).colorFlip()), e;
      }, e.prototype.moveRedRight = function () {
        var e = this.colorFlip();
        return e.left.left.isRed() && (e = (e = e.rotateRight()).colorFlip()), e;
      }, e.prototype.rotateLeft = function () {
        var t = this.copy(null, null, e.RED, null, this.right.left);
        return this.right.copy(null, null, this.color, t, null);
      }, e.prototype.rotateRight = function () {
        var t = this.copy(null, null, e.RED, this.left.right, null);
        return this.left.copy(null, null, this.color, null, t);
      }, e.prototype.colorFlip = function () {
        var e = this.left.copy(null, null, !this.left.color, null, null),
            t = this.right.copy(null, null, !this.right.color, null, null);
        return this.copy(null, null, !this.color, e, t);
      }, e.prototype.checkMaxDepth = function () {
        var e = this.check();
        return Math.pow(2, e) <= this.size + 1;
      }, e.prototype.check = function () {
        if (this.isRed() && this.left.isRed()) throw fail("Red node has red child(" + this.key + "," + this.value + ")");
        if (this.right.isRed()) throw fail("Right child of (" + this.key + "," + this.value + ") is red");
        var e = this.left.check();
        if (e !== this.right.check()) throw fail("Black depths differ");
        return e + (this.isRed() ? 0 : 1);
      }, e.EMPTY = null, e.RED = !0, e.BLACK = !1, e;
    }(),
        LLRBEmptyNode = function () {
      function e() {
        this.size = 0;
      }

      return e.prototype.copy = function (e, t, n, r, o) {
        return this;
      }, e.prototype.insert = function (e, t, n) {
        return new LLRBNode(e, t);
      }, e.prototype.remove = function (e, t) {
        return this;
      }, e.prototype.isEmpty = function () {
        return !0;
      }, e.prototype.inorderTraversal = function (e) {
        return !1;
      }, e.prototype.reverseTraversal = function (e) {
        return !1;
      }, e.prototype.minKey = function () {
        return null;
      }, e.prototype.maxKey = function () {
        return null;
      }, e.prototype.isRed = function () {
        return !1;
      }, e.prototype.checkMaxDepth = function () {
        return !0;
      }, e.prototype.check = function () {
        return 0;
      }, e;
    }(),
        TypeOrder,
        ServerTimestampBehavior;

    LLRBNode.EMPTY = new LLRBEmptyNode(), function (e) {
      e[e.NullValue = 0] = "NullValue", e[e.BooleanValue = 1] = "BooleanValue", e[e.NumberValue = 2] = "NumberValue", e[e.TimestampValue = 3] = "TimestampValue", e[e.StringValue = 4] = "StringValue", e[e.BlobValue = 5] = "BlobValue", e[e.RefValue = 6] = "RefValue", e[e.GeoPointValue = 7] = "GeoPointValue", e[e.ArrayValue = 8] = "ArrayValue", e[e.ObjectValue = 9] = "ObjectValue";
    }(TypeOrder || (TypeOrder = {})), function (e) {
      e[e.Default = 0] = "Default", e[e.Estimate = 1] = "Estimate", e[e.Previous = 2] = "Previous";
    }(ServerTimestampBehavior || (ServerTimestampBehavior = {}));

    var FieldValueOptions = function () {
      function e(e, t) {
        this.serverTimestampBehavior = e, this.timestampsInSnapshots = t;
      }

      return e.fromSnapshotOptions = function (t, n) {
        switch (t.serverTimestamps) {
          case "estimate":
            return new e(ServerTimestampBehavior.Estimate, n);

          case "previous":
            return new e(ServerTimestampBehavior.Previous, n);

          case "none":
          case void 0:
            return new e(ServerTimestampBehavior.Default, n);

          default:
            return fail("fromSnapshotOptions() called with invalid options.");
        }
      }, e;
    }(),
        FieldValue = function () {
      function e() {}

      return e.prototype.toString = function () {
        var e = this.value();
        return null === e ? "null" : e.toString();
      }, e.prototype.defaultCompareTo = function (e) {
        return assert(this.typeOrder !== e.typeOrder, "Default compareTo should not be used for values of same type."), primitiveComparator(this.typeOrder, e.typeOrder);
      }, e;
    }(),
        NullValue = function (e) {
      function t() {
        var t = e.call(this) || this;
        return t.typeOrder = TypeOrder.NullValue, t.internalValue = null, t;
      }

      return __extends(t, e), t.prototype.value = function (e) {
        return null;
      }, t.prototype.isEqual = function (e) {
        return e instanceof t;
      }, t.prototype.compareTo = function (e) {
        return e instanceof t ? 0 : this.defaultCompareTo(e);
      }, t.INSTANCE = new t(), t;
    }(FieldValue),
        BooleanValue = function (e) {
      function t(t) {
        var n = e.call(this) || this;
        return n.internalValue = t, n.typeOrder = TypeOrder.BooleanValue, n;
      }

      return __extends(t, e), t.prototype.value = function (e) {
        return this.internalValue;
      }, t.prototype.isEqual = function (e) {
        return e instanceof t && this.internalValue === e.internalValue;
      }, t.prototype.compareTo = function (e) {
        return e instanceof t ? primitiveComparator(this, e) : this.defaultCompareTo(e);
      }, t.of = function (e) {
        return e ? t.TRUE : t.FALSE;
      }, t.TRUE = new t(!0), t.FALSE = new t(!1), t;
    }(FieldValue),
        NumberValue = function (e) {
      function t(t) {
        var n = e.call(this) || this;
        return n.internalValue = t, n.typeOrder = TypeOrder.NumberValue, n;
      }

      return __extends(t, e), t.prototype.value = function (e) {
        return this.internalValue;
      }, t.prototype.compareTo = function (e) {
        return e instanceof t ? numericComparator(this.internalValue, e.internalValue) : this.defaultCompareTo(e);
      }, t;
    }(FieldValue);

    var IntegerValue = function (e) {
      function t(t) {
        return e.call(this, t) || this;
      }

      return __extends(t, e), t.prototype.isEqual = function (e) {
        return e instanceof t && numericEquals(this.internalValue, e.internalValue);
      }, t;
    }(NumberValue),
        DoubleValue = function (e) {
      function t(t) {
        var n = e.call(this, t) || this;
        return n.internalValue = t, n;
      }

      return __extends(t, e), t.prototype.isEqual = function (e) {
        return e instanceof t && numericEquals(this.internalValue, e.internalValue);
      }, t.NAN = new t(NaN), t.POSITIVE_INFINITY = new t(1 / 0), t.NEGATIVE_INFINITY = new t(-1 / 0), t;
    }(NumberValue),
        StringValue = function (e) {
      function t(t) {
        var n = e.call(this) || this;
        return n.internalValue = t, n.typeOrder = TypeOrder.StringValue, n;
      }

      return __extends(t, e), t.prototype.value = function (e) {
        return this.internalValue;
      }, t.prototype.isEqual = function (e) {
        return e instanceof t && this.internalValue === e.internalValue;
      }, t.prototype.compareTo = function (e) {
        return e instanceof t ? primitiveComparator(this.internalValue, e.internalValue) : this.defaultCompareTo(e);
      }, t;
    }(FieldValue),
        TimestampValue = function (e) {
      function t(t) {
        var n = e.call(this) || this;
        return n.internalValue = t, n.typeOrder = TypeOrder.TimestampValue, n;
      }

      return __extends(t, e), t.prototype.value = function (e) {
        return e && e.timestampsInSnapshots ? this.internalValue : this.internalValue.toDate();
      }, t.prototype.isEqual = function (e) {
        return e instanceof t && this.internalValue.isEqual(e.internalValue);
      }, t.prototype.compareTo = function (e) {
        return e instanceof t ? this.internalValue._compareTo(e.internalValue) : e instanceof ServerTimestampValue ? -1 : this.defaultCompareTo(e);
      }, t;
    }(FieldValue),
        ServerTimestampValue = function (e) {
      function t(t, n) {
        var r = e.call(this) || this;
        return r.localWriteTime = t, r.previousValue = n, r.typeOrder = TypeOrder.TimestampValue, r;
      }

      return __extends(t, e), t.prototype.value = function (e) {
        return e && e.serverTimestampBehavior === ServerTimestampBehavior.Estimate ? new TimestampValue(this.localWriteTime).value(e) : e && e.serverTimestampBehavior === ServerTimestampBehavior.Previous && this.previousValue ? this.previousValue.value(e) : null;
      }, t.prototype.isEqual = function (e) {
        return e instanceof t && this.localWriteTime.isEqual(e.localWriteTime);
      }, t.prototype.compareTo = function (e) {
        return e instanceof t ? this.localWriteTime._compareTo(e.localWriteTime) : e instanceof TimestampValue ? 1 : this.defaultCompareTo(e);
      }, t.prototype.toString = function () {
        return "<ServerTimestamp localTime=" + this.localWriteTime.toString() + ">";
      }, t;
    }(FieldValue),
        BlobValue = function (e) {
      function t(t) {
        var n = e.call(this) || this;
        return n.internalValue = t, n.typeOrder = TypeOrder.BlobValue, n;
      }

      return __extends(t, e), t.prototype.value = function (e) {
        return this.internalValue;
      }, t.prototype.isEqual = function (e) {
        return e instanceof t && this.internalValue.isEqual(e.internalValue);
      }, t.prototype.compareTo = function (e) {
        return e instanceof t ? this.internalValue._compareTo(e.internalValue) : this.defaultCompareTo(e);
      }, t;
    }(FieldValue),
        RefValue = function (e) {
      function t(t, n) {
        var r = e.call(this) || this;
        return r.databaseId = t, r.key = n, r.typeOrder = TypeOrder.RefValue, r;
      }

      return __extends(t, e), t.prototype.value = function (e) {
        return this.key;
      }, t.prototype.isEqual = function (e) {
        return e instanceof t && this.key.isEqual(e.key) && this.databaseId.isEqual(e.databaseId);
      }, t.prototype.compareTo = function (e) {
        if (e instanceof t) {
          var n = this.databaseId.compareTo(e.databaseId);
          return 0 !== n ? n : DocumentKey.comparator(this.key, e.key);
        }

        return this.defaultCompareTo(e);
      }, t;
    }(FieldValue),
        GeoPointValue = function (e) {
      function t(t) {
        var n = e.call(this) || this;
        return n.internalValue = t, n.typeOrder = TypeOrder.GeoPointValue, n;
      }

      return __extends(t, e), t.prototype.value = function (e) {
        return this.internalValue;
      }, t.prototype.isEqual = function (e) {
        return e instanceof t && this.internalValue.isEqual(e.internalValue);
      }, t.prototype.compareTo = function (e) {
        return e instanceof t ? this.internalValue._compareTo(e.internalValue) : this.defaultCompareTo(e);
      }, t;
    }(FieldValue),
        ObjectValue = function (e) {
      function t(t) {
        var n = e.call(this) || this;
        return n.internalValue = t, n.typeOrder = TypeOrder.ObjectValue, n;
      }

      return __extends(t, e), t.prototype.value = function (e) {
        var t = {};
        return this.internalValue.inorderTraversal(function (n, r) {
          t[n] = r.value(e);
        }), t;
      }, t.prototype.forEach = function (e) {
        this.internalValue.inorderTraversal(e);
      }, t.prototype.isEqual = function (e) {
        if (e instanceof t) {
          for (var n = this.internalValue.getIterator(), r = e.internalValue.getIterator(); n.hasNext() && r.hasNext();) {
            var o = n.getNext(),
                i = r.getNext();
            if (o.key !== i.key || !o.value.isEqual(i.value)) return !1;
          }

          return !n.hasNext() && !r.hasNext();
        }

        return !1;
      }, t.prototype.compareTo = function (e) {
        if (e instanceof t) {
          for (var n = this.internalValue.getIterator(), r = e.internalValue.getIterator(); n.hasNext() && r.hasNext();) {
            var o = n.getNext(),
                i = r.getNext(),
                a = primitiveComparator(o.key, i.key) || o.value.compareTo(i.value);
            if (a) return a;
          }

          return primitiveComparator(n.hasNext(), r.hasNext());
        }

        return this.defaultCompareTo(e);
      }, t.prototype.set = function (e, n) {
        if (assert(!e.isEmpty(), "Cannot set field for empty path on ObjectValue"), 1 === e.length) return this.setChild(e.firstSegment(), n);
        var r = this.child(e.firstSegment());
        r instanceof t || (r = t.EMPTY);
        var o = r.set(e.popFirst(), n);
        return this.setChild(e.firstSegment(), o);
      }, t.prototype["delete"] = function (e) {
        if (assert(!e.isEmpty(), "Cannot delete field for empty path on ObjectValue"), 1 === e.length) return new t(this.internalValue.remove(e.firstSegment()));
        var n = this.child(e.firstSegment());

        if (n instanceof t) {
          var r = n["delete"](e.popFirst());
          return new t(this.internalValue.insert(e.firstSegment(), r));
        }

        return this;
      }, t.prototype.contains = function (e) {
        return void 0 !== this.field(e);
      }, t.prototype.field = function (e) {
        assert(!e.isEmpty(), "Can't get field of empty path");
        var n = this;
        return e.forEach(function (e) {
          n = n instanceof t && n.internalValue.get(e) || void 0;
        }), n;
      }, t.prototype.toString = function () {
        return JSON.stringify(this.value());
      }, t.prototype.child = function (e) {
        return this.internalValue.get(e) || void 0;
      }, t.prototype.setChild = function (e, n) {
        return new t(this.internalValue.insert(e, n));
      }, t.EMPTY = new t(new SortedMap(primitiveComparator)), t;
    }(FieldValue),
        ArrayValue = function (e) {
      function t(t) {
        var n = e.call(this) || this;
        return n.internalValue = t, n.typeOrder = TypeOrder.ArrayValue, n;
      }

      return __extends(t, e), t.prototype.value = function (e) {
        return this.internalValue.map(function (t) {
          return t.value(e);
        });
      }, t.prototype.forEach = function (e) {
        this.internalValue.forEach(e);
      }, t.prototype.isEqual = function (e) {
        if (e instanceof t) {
          if (this.internalValue.length !== e.internalValue.length) return !1;

          for (var n = 0; n < this.internalValue.length; n++) {
            if (!this.internalValue[n].isEqual(e.internalValue[n])) return !1;
          }

          return !0;
        }

        return !1;
      }, t.prototype.compareTo = function (e) {
        if (e instanceof t) {
          for (var n = Math.min(this.internalValue.length, e.internalValue.length), r = 0; r < n; r++) {
            var o = this.internalValue[r].compareTo(e.internalValue[r]);
            if (o) return o;
          }

          return primitiveComparator(this.internalValue.length, e.internalValue.length);
        }

        return this.defaultCompareTo(e);
      }, t.prototype.toString = function () {
        return JSON.stringify(this.value());
      }, t;
    }(FieldValue),
        NumberAsAny = Number,
        MIN_SAFE_INTEGER = NumberAsAny.MIN_SAFE_INTEGER || -(Math.pow(2, 53) - 1),
        MAX_SAFE_INTEGER = NumberAsAny.MAX_SAFE_INTEGER || Math.pow(2, 53) - 1,
        isInteger = NumberAsAny.isInteger || function (e) {
      return "number" == typeof e && isFinite(e) && Math.floor(e) === e;
    };

    var Query = function () {
      function e(e, t, n, r, o, i) {
        void 0 === t && (t = []), void 0 === n && (n = []), void 0 === r && (r = null), void 0 === o && (o = null), void 0 === i && (i = null), this.path = e, this.explicitOrderBy = t, this.filters = n, this.limit = r, this.startAt = o, this.endAt = i, this.memoizedCanonicalId = null, this.memoizedOrderBy = null, this.startAt && this.assertValidBound(this.startAt), this.endAt && this.assertValidBound(this.endAt);
      }

      return e.atPath = function (t) {
        return new e(t);
      }, Object.defineProperty(e.prototype, "orderBy", {
        get: function get() {
          if (null === this.memoizedOrderBy) {
            var e = this.getInequalityFilterField(),
                t = this.getFirstOrderByField();
            if (null !== e && null === t) e.isKeyField() ? this.memoizedOrderBy = [KEY_ORDERING_ASC] : this.memoizedOrderBy = [new OrderBy(e), KEY_ORDERING_ASC];else {
              assert(null === e || null !== t && e.isEqual(t), "First orderBy should match inequality field."), this.memoizedOrderBy = [];

              for (var n = !1, r = 0, o = this.explicitOrderBy; r < o.length; r++) {
                var i = o[r];
                this.memoizedOrderBy.push(i), i.field.isKeyField() && (n = !0);
              }

              if (!n) {
                var a = this.explicitOrderBy.length > 0 ? this.explicitOrderBy[this.explicitOrderBy.length - 1].dir : Direction.ASCENDING;
                this.memoizedOrderBy.push(a === Direction.ASCENDING ? KEY_ORDERING_ASC : KEY_ORDERING_DESC);
              }
            }
          }

          return this.memoizedOrderBy;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.addFilter = function (t) {
        assert(null == this.getInequalityFilterField() || !(t instanceof RelationFilter) || !t.isInequality() || t.field.isEqual(this.getInequalityFilterField()), "Query must only have one inequality field."), assert(!DocumentKey.isDocumentKey(this.path), "No filtering allowed for document query");
        var n = this.filters.concat([t]);
        return new e(this.path, this.explicitOrderBy.slice(), n, this.limit, this.startAt, this.endAt);
      }, e.prototype.addOrderBy = function (t) {
        assert(!DocumentKey.isDocumentKey(this.path), "No ordering allowed for document query"), assert(!this.startAt && !this.endAt, "Bounds must be set after orderBy");
        var n = this.explicitOrderBy.concat([t]);
        return new e(this.path, n, this.filters.slice(), this.limit, this.startAt, this.endAt);
      }, e.prototype.withLimit = function (t) {
        return new e(this.path, this.explicitOrderBy.slice(), this.filters.slice(), t, this.startAt, this.endAt);
      }, e.prototype.withStartAt = function (t) {
        return new e(this.path, this.explicitOrderBy.slice(), this.filters.slice(), this.limit, t, this.endAt);
      }, e.prototype.withEndAt = function (t) {
        return new e(this.path, this.explicitOrderBy.slice(), this.filters.slice(), this.limit, this.startAt, t);
      }, e.prototype.canonicalId = function () {
        if (null === this.memoizedCanonicalId) {
          var e = this.path.canonicalString();
          e += "|f:";

          for (var t = 0, n = this.filters; t < n.length; t++) {
            e += n[t].canonicalId(), e += ",";
          }

          e += "|ob:";

          for (var r = 0, o = this.orderBy; r < o.length; r++) {
            e += o[r].canonicalId(), e += ",";
          }

          isNullOrUndefined(this.limit) || (e += "|l:", e += this.limit), this.startAt && (e += "|lb:", e += this.startAt.canonicalId()), this.endAt && (e += "|ub:", e += this.endAt.canonicalId()), this.memoizedCanonicalId = e;
        }

        return this.memoizedCanonicalId;
      }, e.prototype.toString = function () {
        var e = "Query(" + this.path.canonicalString();
        return this.filters.length > 0 && (e += ", filters: [" + this.filters.join(", ") + "]"), isNullOrUndefined(this.limit) || (e += ", limit: " + this.limit), this.explicitOrderBy.length > 0 && (e += ", orderBy: [" + this.explicitOrderBy.join(", ") + "]"), this.startAt && (e += ", startAt: " + this.startAt.canonicalId()), this.endAt && (e += ", endAt: " + this.endAt.canonicalId()), e + ")";
      }, e.prototype.isEqual = function (e) {
        if (this.limit !== e.limit) return !1;
        if (this.orderBy.length !== e.orderBy.length) return !1;

        for (var t = 0; t < this.orderBy.length; t++) {
          if (!this.orderBy[t].isEqual(e.orderBy[t])) return !1;
        }

        if (this.filters.length !== e.filters.length) return !1;

        for (t = 0; t < this.filters.length; t++) {
          if (!this.filters[t].isEqual(e.filters[t])) return !1;
        }

        return !!this.path.isEqual(e.path) && !(null !== this.startAt ? !this.startAt.isEqual(e.startAt) : null !== e.startAt) && (null !== this.endAt ? this.endAt.isEqual(e.endAt) : null === e.endAt);
      }, e.prototype.docComparator = function (e, t) {
        for (var n = !1, r = 0, o = this.orderBy; r < o.length; r++) {
          var i = o[r],
              a = i.compare(e, t);
          if (0 !== a) return a;
          n = n || i.field.isKeyField();
        }

        return assert(n, "orderBy used that doesn't compare on key field"), 0;
      }, e.prototype.matches = function (e) {
        return this.matchesAncestor(e) && this.matchesOrderBy(e) && this.matchesFilters(e) && this.matchesBounds(e);
      }, e.prototype.hasLimit = function () {
        return !isNullOrUndefined(this.limit);
      }, e.prototype.getFirstOrderByField = function () {
        return this.explicitOrderBy.length > 0 ? this.explicitOrderBy[0].field : null;
      }, e.prototype.getInequalityFilterField = function () {
        for (var e = 0, t = this.filters; e < t.length; e++) {
          var n = t[e];
          if (n instanceof RelationFilter && n.isInequality()) return n.field;
        }

        return null;
      }, e.prototype.hasArrayContainsFilter = function () {
        return void 0 !== this.filters.find(function (e) {
          return e instanceof RelationFilter && e.op === RelationOp.ARRAY_CONTAINS;
        });
      }, e.prototype.isDocumentQuery = function () {
        return DocumentKey.isDocumentKey(this.path) && 0 === this.filters.length;
      }, e.prototype.matchesAncestor = function (e) {
        var t = e.key.path;
        return DocumentKey.isDocumentKey(this.path) ? this.path.isEqual(t) : this.path.isPrefixOf(t) && this.path.length === t.length - 1;
      }, e.prototype.matchesOrderBy = function (e) {
        for (var t = 0, n = this.explicitOrderBy; t < n.length; t++) {
          var r = n[t];
          if (!r.field.isKeyField() && void 0 === e.field(r.field)) return !1;
        }

        return !0;
      }, e.prototype.matchesFilters = function (e) {
        for (var t = 0, n = this.filters; t < n.length; t++) {
          if (!n[t].matches(e)) return !1;
        }

        return !0;
      }, e.prototype.matchesBounds = function (e) {
        return !(this.startAt && !this.startAt.sortsBeforeDocument(this.orderBy, e)) && (!this.endAt || !this.endAt.sortsBeforeDocument(this.orderBy, e));
      }, e.prototype.assertValidBound = function (e) {
        assert(e.position.length <= this.orderBy.length, "Bound is longer than orderBy");
      }, e;
    }(),
        RelationOp = function () {
      function e(e) {
        this.name = e;
      }

      return e.fromString = function (t) {
        switch (t) {
          case "<":
            return e.LESS_THAN;

          case "<=":
            return e.LESS_THAN_OR_EQUAL;

          case "==":
            return e.EQUAL;

          case ">=":
            return e.GREATER_THAN_OR_EQUAL;

          case ">":
            return e.GREATER_THAN;

          case "array-contains":
            return e.ARRAY_CONTAINS;

          default:
            return fail("Unknown relation: " + t);
        }
      }, e.prototype.toString = function () {
        return this.name;
      }, e.prototype.isEqual = function (e) {
        return this.name === e.name;
      }, e.LESS_THAN = new e("<"), e.LESS_THAN_OR_EQUAL = new e("<="), e.EQUAL = new e("=="), e.GREATER_THAN = new e(">"), e.GREATER_THAN_OR_EQUAL = new e(">="), e.ARRAY_CONTAINS = new e("array-contains"), e;
    }(),
        RelationFilter = function () {
      function e(e, t, n) {
        this.field = e, this.op = t, this.value = n;
      }

      return e.prototype.matches = function (e) {
        if (this.field.isKeyField()) {
          assert(this.value instanceof RefValue, "Comparing on key, but filter value not a RefValue"), assert(this.op !== RelationOp.ARRAY_CONTAINS, "array-contains queries don't make sense on document keys.");
          var t = this.value,
              n = DocumentKey.comparator(e.key, t.key);
          return this.matchesComparison(n);
        }

        var r = e.field(this.field);
        return void 0 !== r && this.matchesValue(r);
      }, e.prototype.matchesValue = function (e) {
        var t = this;
        return this.op === RelationOp.ARRAY_CONTAINS ? e instanceof ArrayValue && void 0 !== e.internalValue.find(function (e) {
          return e.isEqual(t.value);
        }) : this.value.typeOrder === e.typeOrder && this.matchesComparison(e.compareTo(this.value));
      }, e.prototype.matchesComparison = function (e) {
        switch (this.op) {
          case RelationOp.LESS_THAN:
            return e < 0;

          case RelationOp.LESS_THAN_OR_EQUAL:
            return e <= 0;

          case RelationOp.EQUAL:
            return 0 === e;

          case RelationOp.GREATER_THAN:
            return e > 0;

          case RelationOp.GREATER_THAN_OR_EQUAL:
            return e >= 0;

          default:
            return fail("Unknown relation op" + this.op);
        }
      }, e.prototype.isInequality = function () {
        return this.op !== RelationOp.EQUAL && this.op !== RelationOp.ARRAY_CONTAINS;
      }, e.prototype.canonicalId = function () {
        return this.field.canonicalString() + this.op.toString() + this.value.toString();
      }, e.prototype.isEqual = function (t) {
        return t instanceof e && this.op.isEqual(t.op) && this.field.isEqual(t.field) && this.value.isEqual(t.value);
      }, e.prototype.toString = function () {
        return this.field.canonicalString() + " " + this.op + " " + this.value.value();
      }, e;
    }(),
        NullFilter = function () {
      function e(e) {
        this.field = e;
      }

      return e.prototype.matches = function (e) {
        var t = e.field(this.field);
        return void 0 !== t && null === t.value();
      }, e.prototype.canonicalId = function () {
        return this.field.canonicalString() + " IS null";
      }, e.prototype.toString = function () {
        return this.field.canonicalString() + " IS null";
      }, e.prototype.isEqual = function (t) {
        return t instanceof e && this.field.isEqual(t.field);
      }, e;
    }(),
        NanFilter = function () {
      function e(e) {
        this.field = e;
      }

      return e.prototype.matches = function (e) {
        var t = e.field(this.field).value();
        return "number" == typeof t && isNaN(t);
      }, e.prototype.canonicalId = function () {
        return this.field.canonicalString() + " IS NaN";
      }, e.prototype.toString = function () {
        return this.field.canonicalString() + " IS NaN";
      }, e.prototype.isEqual = function (t) {
        return t instanceof e && this.field.isEqual(t.field);
      }, e;
    }();

    var Direction = function () {
      function e(e) {
        this.name = e;
      }

      return e.prototype.toString = function () {
        return this.name;
      }, e.ASCENDING = new e("asc"), e.DESCENDING = new e("desc"), e;
    }(),
        Bound = function () {
      function e(e, t) {
        this.position = e, this.before = t;
      }

      return e.prototype.canonicalId = function () {
        for (var e = this.before ? "b:" : "a:", t = 0, n = this.position; t < n.length; t++) {
          e += n[t].toString();
        }

        return e;
      }, e.prototype.sortsBeforeDocument = function (e, t) {
        assert(this.position.length <= e.length, "Bound has more components than query's orderBy");

        for (var n = 0, r = 0; r < this.position.length; r++) {
          var o = e[r],
              i = this.position[r];
          if (o.field.isKeyField()) assert(i instanceof RefValue, "Bound has a non-key value where the key path is being used."), n = DocumentKey.comparator(i.key, t.key);else {
            var a = t.field(o.field);
            assert(void 0 !== a, "Field should exist since document matched the orderBy already."), n = i.compareTo(a);
          }
          if (o.dir === Direction.DESCENDING && (n *= -1), 0 !== n) break;
        }

        return this.before ? n <= 0 : n < 0;
      }, e.prototype.isEqual = function (e) {
        if (null === e) return !1;
        if (this.before !== e.before || this.position.length !== e.position.length) return !1;

        for (var t = 0; t < this.position.length; t++) {
          var n = this.position[t],
              r = e.position[t];
          return n.isEqual(r);
        }

        return !0;
      }, e;
    }(),
        OrderBy = function () {
      function e(e, t) {
        this.field = e, void 0 === t && (t = Direction.ASCENDING), this.dir = t, this.isKeyOrderBy = e.isKeyField();
      }

      return e.prototype.compare = function (e, t) {
        var n = this.isKeyOrderBy ? Document.compareByKey(e, t) : Document.compareByField(this.field, e, t);

        switch (this.dir) {
          case Direction.ASCENDING:
            return n;

          case Direction.DESCENDING:
            return -1 * n;

          default:
            return fail("Unknown direction: " + this.dir);
        }
      }, e.prototype.canonicalId = function () {
        return this.field.canonicalString() + this.dir.toString();
      }, e.prototype.toString = function () {
        return this.field.canonicalString() + " (" + this.dir + ")";
      }, e.prototype.isEqual = function (e) {
        return this.dir === e.dir && this.field.isEqual(e.field);
      }, e;
    }(),
        KEY_ORDERING_ASC = new OrderBy(FieldPath.keyField(), Direction.ASCENDING),
        KEY_ORDERING_DESC = new OrderBy(FieldPath.keyField(), Direction.DESCENDING),
        SnapshotVersion = function () {
      function e(e) {
        this.timestamp = e;
      }

      return e.fromMicroseconds = function (t) {
        var n = Math.floor(t / 1e6);
        return new e(new Timestamp(n, t % 1e6 * 1e3));
      }, e.fromTimestamp = function (t) {
        return new e(t);
      }, e.forDeletedDoc = function () {
        return e.MIN;
      }, e.prototype.compareTo = function (e) {
        return this.timestamp._compareTo(e.timestamp);
      }, e.prototype.isEqual = function (e) {
        return this.timestamp.isEqual(e.timestamp);
      }, e.prototype.toMicroseconds = function () {
        return 1e6 * this.timestamp.seconds + this.timestamp.nanoseconds / 1e3;
      }, e.prototype.toString = function () {
        return "SnapshotVersion(" + this.timestamp.toString() + ")";
      }, e.prototype.toTimestamp = function () {
        return this.timestamp;
      }, e.MIN = new e(new Timestamp(0, 0)), e;
    }(),
        QueryPurpose;

    !function (e) {
      e[e.Listen = 0] = "Listen", e[e.ExistenceFilterMismatch = 1] = "ExistenceFilterMismatch", e[e.LimboResolution = 2] = "LimboResolution";
    }(QueryPurpose || (QueryPurpose = {}));

    var QueryData = function () {
      function e(e, t, n, r, o) {
        void 0 === r && (r = SnapshotVersion.MIN), void 0 === o && (o = emptyByteString()), this.query = e, this.targetId = t, this.purpose = n, this.snapshotVersion = r, this.resumeToken = o;
      }

      return e.prototype.update = function (t) {
        return new e(this.query, this.targetId, this.purpose, t.snapshotVersion, t.resumeToken);
      }, e.prototype.isEqual = function (e) {
        return this.targetId === e.targetId && this.purpose === e.purpose && this.snapshotVersion.isEqual(e.snapshotVersion) && this.resumeToken === e.resumeToken && this.query.isEqual(e.query);
      }, e;
    }(),
        FieldMask = function () {
      function e(e) {
        this.fields = e;
      }

      return e.prototype.covers = function (e) {
        for (var t = 0, n = this.fields; t < n.length; t++) {
          if (n[t].isPrefixOf(e)) return !0;
        }

        return !1;
      }, e.prototype.isEqual = function (e) {
        return arrayEquals(this.fields, e.fields);
      }, e;
    }(),
        FieldTransform = function () {
      function e(e, t) {
        this.field = e, this.transform = t;
      }

      return e.prototype.isEqual = function (e) {
        return this.field.isEqual(e.field) && this.transform.isEqual(e.transform);
      }, e;
    }(),
        MutationResult = function () {
      return function (e, t) {
        this.version = e, this.transformResults = t;
      };
    }(),
        MutationType;

    !function (e) {
      e[e.Set = 0] = "Set", e[e.Patch = 1] = "Patch", e[e.Transform = 2] = "Transform", e[e.Delete = 3] = "Delete";
    }(MutationType || (MutationType = {}));

    var Precondition = function () {
      function e(e, t) {
        this.updateTime = e, this.exists = t, assert(void 0 === e || void 0 === t, 'Precondition can specify "exists" or "updateTime" but not both');
      }

      return e.exists = function (t) {
        return new e(void 0, t);
      }, e.updateTime = function (t) {
        return new e(t);
      }, Object.defineProperty(e.prototype, "isNone", {
        get: function get() {
          return void 0 === this.updateTime && void 0 === this.exists;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.isValidFor = function (e) {
        return void 0 !== this.updateTime ? e instanceof Document && e.version.isEqual(this.updateTime) : void 0 !== this.exists ? this.exists ? e instanceof Document : null === e || e instanceof NoDocument : (assert(this.isNone, "Precondition should be empty"), !0);
      }, e.prototype.isEqual = function (e) {
        return equals(this.updateTime, e.updateTime) && this.exists === e.exists;
      }, e.NONE = new e(), e;
    }(),
        Mutation = function () {
      function e() {}

      return e.prototype.verifyKeyMatches = function (e) {
        null != e && assert(e.key.isEqual(this.key), "Can only apply a mutation to a document with the same key");
      }, e.getPostMutationVersion = function (e) {
        return e instanceof Document ? e.version : SnapshotVersion.MIN;
      }, e;
    }(),
        SetMutation = function (e) {
      function t(t, n, r) {
        var o = e.call(this) || this;
        return o.key = t, o.value = n, o.precondition = r, o.type = MutationType.Set, o;
      }

      return __extends(t, e), t.prototype.applyToRemoteDocument = function (e, t) {
        this.verifyKeyMatches(e), assert(null == t.transformResults, "Transform results received by SetMutation.");
        var n = Mutation.getPostMutationVersion(e);
        return new Document(this.key, n, this.value, {
          hasLocalMutations: !1
        });
      }, t.prototype.applyToLocalView = function (e, t, n) {
        if (this.verifyKeyMatches(e), !this.precondition.isValidFor(e)) return e;
        var r = Mutation.getPostMutationVersion(e);
        return new Document(this.key, r, this.value, {
          hasLocalMutations: !0
        });
      }, t.prototype.isEqual = function (e) {
        return e instanceof t && this.key.isEqual(e.key) && this.value.isEqual(e.value) && this.precondition.isEqual(e.precondition);
      }, t;
    }(Mutation),
        PatchMutation = function (e) {
      function t(t, n, r, o) {
        var i = e.call(this) || this;
        return i.key = t, i.data = n, i.fieldMask = r, i.precondition = o, i.type = MutationType.Patch, i;
      }

      return __extends(t, e), t.prototype.applyToRemoteDocument = function (e, t) {
        if (this.verifyKeyMatches(e), assert(null == t.transformResults, "Transform results received by PatchMutation."), !this.precondition.isValidFor(e)) return e;
        var n = Mutation.getPostMutationVersion(e),
            r = this.patchDocument(e);
        return new Document(this.key, n, r, {
          hasLocalMutations: !1
        });
      }, t.prototype.applyToLocalView = function (e, t, n) {
        if (this.verifyKeyMatches(e), !this.precondition.isValidFor(e)) return e;
        var r = Mutation.getPostMutationVersion(e),
            o = this.patchDocument(e);
        return new Document(this.key, r, o, {
          hasLocalMutations: !0
        });
      }, t.prototype.isEqual = function (e) {
        return e instanceof t && this.key.isEqual(e.key) && this.fieldMask.isEqual(e.fieldMask) && this.precondition.isEqual(e.precondition);
      }, t.prototype.patchDocument = function (e) {
        var t;
        return t = e instanceof Document ? e.data : ObjectValue.EMPTY, this.patchObject(t);
      }, t.prototype.patchObject = function (e) {
        for (var t = 0, n = this.fieldMask.fields; t < n.length; t++) {
          var r = n[t],
              o = this.data.field(r);
          e = void 0 !== o ? e.set(r, o) : e["delete"](r);
        }

        return e;
      }, t;
    }(Mutation),
        TransformMutation = function (e) {
      function t(t, n) {
        var r = e.call(this) || this;
        return r.key = t, r.fieldTransforms = n, r.type = MutationType.Transform, r.precondition = Precondition.exists(!0), r;
      }

      return __extends(t, e), t.prototype.applyToRemoteDocument = function (e, t) {
        if (this.verifyKeyMatches(e), assert(null != t.transformResults, "Transform results missing for TransformMutation."), !this.precondition.isValidFor(e)) return e;
        var n = this.requireDocument(e),
            r = this.serverTransformResults(e, t.transformResults),
            o = this.transformObject(n.data, r);
        return new Document(this.key, n.version, o, {
          hasLocalMutations: !1
        });
      }, t.prototype.applyToLocalView = function (e, t, n) {
        if (this.verifyKeyMatches(e), !this.precondition.isValidFor(e)) return e;
        var r = this.requireDocument(e),
            o = this.localTransformResults(n, t),
            i = this.transformObject(r.data, o);
        return new Document(this.key, r.version, i, {
          hasLocalMutations: !0
        });
      }, t.prototype.isEqual = function (e) {
        return e instanceof t && this.key.isEqual(e.key) && arrayEquals(this.fieldTransforms, e.fieldTransforms) && this.precondition.isEqual(e.precondition);
      }, t.prototype.requireDocument = function (e) {
        assert(e instanceof Document, "Unknown MaybeDocument type " + e);
        var t = e;
        return assert(t.key.isEqual(this.key), "Can only transform a document with the same key"), t;
      }, t.prototype.serverTransformResults = function (e, t) {
        var n = [];
        assert(this.fieldTransforms.length === t.length, "server transform result count (" + t.length + ") should match field transform count (" + this.fieldTransforms.length + ")");

        for (var r = 0; r < t.length; r++) {
          var o = this.fieldTransforms[r],
              i = o.transform,
              a = null;
          e instanceof Document && (a = e.field(o.field) || null), n.push(i.applyToRemoteDocument(a, t[r]));
        }

        return n;
      }, t.prototype.localTransformResults = function (e, t) {
        for (var n = [], r = 0, o = this.fieldTransforms; r < o.length; r++) {
          var i = o[r],
              a = i.transform,
              s = null;
          t instanceof Document && (s = t.field(i.field) || null), n.push(a.applyToLocalView(s, e));
        }

        return n;
      }, t.prototype.transformObject = function (e, t) {
        assert(t.length === this.fieldTransforms.length, "TransformResults length mismatch.");

        for (var n = 0; n < this.fieldTransforms.length; n++) {
          var r = this.fieldTransforms[n].field;
          e = e.set(r, t[n]);
        }

        return e;
      }, t;
    }(Mutation),
        DeleteMutation = function (e) {
      function t(t, n) {
        var r = e.call(this) || this;
        return r.key = t, r.precondition = n, r.type = MutationType.Delete, r;
      }

      return __extends(t, e), t.prototype.applyToRemoteDocument = function (e, t) {
        return this.verifyKeyMatches(e), assert(null == t.transformResults, "Transform results received by DeleteMutation."), new NoDocument(this.key, SnapshotVersion.MIN);
      }, t.prototype.applyToLocalView = function (e, t, n) {
        return this.verifyKeyMatches(e), this.precondition.isValidFor(e) ? (e && assert(e.key.isEqual(this.key), "Can only apply mutation to document with same key"), new NoDocument(this.key, SnapshotVersion.forDeletedDoc())) : e;
      }, t.prototype.isEqual = function (e) {
        return e instanceof t && this.key.isEqual(e.key) && this.precondition.isEqual(e.precondition);
      }, t;
    }(Mutation),
        ExistenceFilter = function () {
      function e(e) {
        this.count = e;
      }

      return e.prototype.isEqual = function (e) {
        return e && e.count === this.count;
      }, e;
    }(),
        RpcCode;

    !function (e) {
      e[e.OK = 0] = "OK", e[e.CANCELLED = 1] = "CANCELLED", e[e.UNKNOWN = 2] = "UNKNOWN", e[e.INVALID_ARGUMENT = 3] = "INVALID_ARGUMENT", e[e.DEADLINE_EXCEEDED = 4] = "DEADLINE_EXCEEDED", e[e.NOT_FOUND = 5] = "NOT_FOUND", e[e.ALREADY_EXISTS = 6] = "ALREADY_EXISTS", e[e.PERMISSION_DENIED = 7] = "PERMISSION_DENIED", e[e.UNAUTHENTICATED = 16] = "UNAUTHENTICATED", e[e.RESOURCE_EXHAUSTED = 8] = "RESOURCE_EXHAUSTED", e[e.FAILED_PRECONDITION = 9] = "FAILED_PRECONDITION", e[e.ABORTED = 10] = "ABORTED", e[e.OUT_OF_RANGE = 11] = "OUT_OF_RANGE", e[e.UNIMPLEMENTED = 12] = "UNIMPLEMENTED", e[e.INTERNAL = 13] = "INTERNAL", e[e.UNAVAILABLE = 14] = "UNAVAILABLE", e[e.DATA_LOSS = 15] = "DATA_LOSS";
    }(RpcCode || (RpcCode = {}));

    var SortedSet = function () {
      function e(e) {
        this.comparator = e, this.data = new SortedMap(this.comparator);
      }

      return e.fromMapKeys = function (t) {
        var n = new e(t.comparator);
        return t.forEach(function (e) {
          n = n.add(e);
        }), n;
      }, e.prototype.has = function (e) {
        return null !== this.data.get(e);
      }, e.prototype.first = function () {
        return this.data.minKey();
      }, e.prototype.last = function () {
        return this.data.maxKey();
      }, Object.defineProperty(e.prototype, "size", {
        get: function get() {
          return this.data.size;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.indexOf = function (e) {
        return this.data.indexOf(e);
      }, e.prototype.forEach = function (e) {
        this.data.inorderTraversal(function (t, n) {
          return e(t), !1;
        });
      }, e.prototype.forEachInRange = function (e, t) {
        for (var n = this.data.getIteratorFrom(e[0]); n.hasNext();) {
          var r = n.getNext();
          if (this.comparator(r.key, e[1]) >= 0) return;
          t(r.key);
        }
      }, e.prototype.forEachWhile = function (e, t) {
        var n;

        for (n = void 0 !== t ? this.data.getIteratorFrom(t) : this.data.getIterator(); n.hasNext();) {
          if (!e(n.getNext().key)) return;
        }
      }, e.prototype.firstAfterOrEqual = function (e) {
        var t = this.data.getIteratorFrom(e);
        return t.hasNext() ? t.getNext().key : null;
      }, e.prototype.add = function (e) {
        return this.copy(this.data.remove(e).insert(e, !0));
      }, e.prototype["delete"] = function (e) {
        return this.has(e) ? this.copy(this.data.remove(e)) : this;
      }, e.prototype.isEmpty = function () {
        return this.data.isEmpty();
      }, e.prototype.unionWith = function (e) {
        var t = this;
        return e.forEach(function (e) {
          t = t.add(e);
        }), t;
      }, e.prototype.isEqual = function (t) {
        if (!(t instanceof e)) return !1;
        if (this.size !== t.size) return !1;

        for (var n = this.data.getIterator(), r = t.data.getIterator(); n.hasNext();) {
          var o = n.getNext().key,
              i = r.getNext().key;
          if (0 !== this.comparator(o, i)) return !1;
        }

        return !0;
      }, e.prototype.toString = function () {
        var e = [];
        return this.forEach(function (t) {
          return e.push(t);
        }), "SortedSet(" + e.toString() + ")";
      }, e.prototype.copy = function (t) {
        var n = new e(this.comparator);
        return n.data = t, n;
      }, e;
    }(),
        EMPTY_MAYBE_DOCUMENT_MAP = new SortedMap(DocumentKey.comparator);

    var EMPTY_DOCUMENT_MAP = new SortedMap(DocumentKey.comparator);
    var EMPTY_DOCUMENT_VERSION_MAP = new SortedMap(DocumentKey.comparator);
    var EMPTY_DOCUMENT_KEY_SET = new SortedSet(DocumentKey.comparator);

    var RemoteEvent = function () {
      function e(e, t, n, r) {
        this.snapshotVersion = e, this.targetChanges = t, this.documentUpdates = n, this.limboDocuments = r;
      }

      return e.prototype.addDocumentUpdate = function (e) {
        this.documentUpdates = this.documentUpdates.insert(e.key, e);
      }, e.prototype.handleExistenceFilterMismatch = function (e) {
        this.targetChanges[e] = {
          mapping: new ResetMapping(),
          snapshotVersion: SnapshotVersion.MIN,
          currentStatusUpdate: CurrentStatusUpdate.MarkNotCurrent,
          resumeToken: emptyByteString()
        };
      }, e.prototype.synthesizeDeleteForLimboTargetChange = function (e, t) {
        e.currentStatusUpdate !== CurrentStatusUpdate.MarkCurrent || this.documentUpdates.get(t) || (this.documentUpdates = this.documentUpdates.insert(t, new NoDocument(t, this.snapshotVersion)), this.limboDocuments = this.limboDocuments.add(t));
      }, e;
    }(),
        CurrentStatusUpdate;

    !function (e) {
      e[e.None = 0] = "None", e[e.MarkNotCurrent = 1] = "MarkNotCurrent", e[e.MarkCurrent = 2] = "MarkCurrent";
    }(CurrentStatusUpdate || (CurrentStatusUpdate = {}));

    var EMPTY_KEY_SET = documentKeySet(),
        ResetMapping = function () {
      function e() {
        this.docs = EMPTY_KEY_SET;
      }

      return Object.defineProperty(e.prototype, "documents", {
        get: function get() {
          return this.docs;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.add = function (e) {
        this.docs = this.docs.add(e);
      }, e.prototype["delete"] = function (e) {
        this.docs = this.docs["delete"](e);
      }, e.prototype.isEqual = function (e) {
        return null !== e && this.docs.isEqual(e.docs);
      }, e.prototype.filterUpdates = function (e) {}, e;
    }(),
        UpdateMapping = function () {
      function e() {
        this.addedDocuments = EMPTY_KEY_SET, this.removedDocuments = EMPTY_KEY_SET;
      }

      return e.prototype.applyToKeySet = function (e) {
        var t = e;
        return this.addedDocuments.forEach(function (e) {
          return t = t.add(e);
        }), this.removedDocuments.forEach(function (e) {
          return t = t["delete"](e);
        }), t;
      }, e.prototype.add = function (e) {
        this.addedDocuments = this.addedDocuments.add(e), this.removedDocuments = this.removedDocuments["delete"](e);
      }, e.prototype["delete"] = function (e) {
        this.addedDocuments = this.addedDocuments["delete"](e), this.removedDocuments = this.removedDocuments.add(e);
      }, e.prototype.isEqual = function (e) {
        return null !== e && this.addedDocuments.isEqual(e.addedDocuments) && this.removedDocuments.isEqual(e.removedDocuments);
      }, e.prototype.filterUpdates = function (e) {
        var t = this.addedDocuments;
        this.addedDocuments.forEach(function (n) {
          e.has(n) && (t = t["delete"](n));
        }), this.addedDocuments = t;
      }, e;
    }(),
        DocumentWatchChange = function () {
      return function (e, t, n, r) {
        this.updatedTargetIds = e, this.removedTargetIds = t, this.key = n, this.newDoc = r;
      };
    }(),
        ExistenceFilterChange = function () {
      return function (e, t) {
        this.targetId = e, this.existenceFilter = t;
      };
    }(),
        WatchTargetChangeState;

    !function (e) {
      e[e.NoChange = 0] = "NoChange", e[e.Added = 1] = "Added", e[e.Removed = 2] = "Removed", e[e.Current = 3] = "Current", e[e.Reset = 4] = "Reset";
    }(WatchTargetChangeState || (WatchTargetChangeState = {}));

    var WatchTargetChange = function () {
      return function (e, t, n, r) {
        void 0 === n && (n = emptyByteString()), void 0 === r && (r = null), this.state = e, this.targetIds = t, this.resumeToken = n, this.cause = r;
      };
    }(),
        WatchChangeAggregator = function () {
      function e(e, t, n) {
        this.snapshotVersion = e, this.listenTargets = t, this.existenceFilters = {}, this.targetChanges = {}, this.documentUpdates = maybeDocumentMap(), this.frozen = !1, this.limboDocuments = documentKeySet(), this.pendingTargetResponses = shallowCopy(n);
      }

      return e.prototype.add = function (e) {
        assert(!this.frozen, "Trying to modify frozen WatchChangeAggregator."), e instanceof DocumentWatchChange ? this.addDocumentChange(e) : e instanceof WatchTargetChange ? this.addTargetChange(e) : e instanceof ExistenceFilterChange ? this.addExistenceFilterChange(e) : fail("Unknown watch change: " + e);
      }, e.prototype.addChanges = function (e) {
        var t = this;
        assert(!this.frozen, "Trying to modify frozen WatchChangeAggregator."), e.forEach(function (e) {
          return t.add(e);
        });
      }, e.prototype.createRemoteEvent = function () {
        var e = this,
            t = this.targetChanges;
        return forEachNumber(this.targetChanges, function (n) {
          e.isActiveTarget(n) || delete t[n];
        }), this.frozen = !0, new RemoteEvent(this.snapshotVersion, t, this.documentUpdates, this.limboDocuments);
      }, e.prototype.ensureTargetChange = function (e) {
        var t = this.targetChanges[e];
        return t || (t = {
          currentStatusUpdate: CurrentStatusUpdate.None,
          snapshotVersion: this.snapshotVersion,
          mapping: new UpdateMapping(),
          resumeToken: emptyByteString()
        }, this.targetChanges[e] = t), t;
      }, e.prototype.queryDataForActiveTarget = function (e) {
        var t = this.listenTargets[e];
        return t && !contains(this.pendingTargetResponses, e) ? t : null;
      }, e.prototype.isActiveTarget = function (e) {
        return null !== this.queryDataForActiveTarget(e);
      }, e.prototype.updateLimboDocuments = function (e, t, n) {
        return !!n && (this.documentUpdates.get(e) ? t.purpose === QueryPurpose.LimboResolution || (this.limboDocuments = this.limboDocuments["delete"](e), !1) : t.purpose === QueryPurpose.LimboResolution && (this.limboDocuments = this.limboDocuments.add(e), !0));
      }, e.prototype.addDocumentChange = function (e) {
        for (var t = !1, n = !0, r = 0, o = e.updatedTargetIds; r < o.length; r++) {
          var i = o[r];

          if (c = this.queryDataForActiveTarget(i)) {
            var a = this.ensureTargetChange(i);
            n = this.updateLimboDocuments(e.key, c, n), a.mapping.add(e.key), t = !0;
          }
        }

        for (var s = 0, u = e.removedTargetIds; s < u.length; s++) {
          var c;
          i = u[s];

          if (c = this.queryDataForActiveTarget(i)) {
            a = this.ensureTargetChange(i);
            n = this.updateLimboDocuments(e.key, c, n), a.mapping["delete"](e.key), t = !0;
          }
        }

        e.newDoc && t && (this.documentUpdates = this.documentUpdates.insert(e.key, e.newDoc));
      }, e.prototype.addTargetChange = function (e) {
        var t = this;
        e.targetIds.forEach(function (n) {
          var r = t.ensureTargetChange(n);

          switch (e.state) {
            case WatchTargetChangeState.NoChange:
              t.isActiveTarget(n) && applyResumeToken(r, e.resumeToken);
              break;

            case WatchTargetChangeState.Added:
              t.recordTargetResponse(n), contains(t.pendingTargetResponses, n) || (r.mapping = new UpdateMapping(), r.currentStatusUpdate = CurrentStatusUpdate.None, delete t.existenceFilters[n]), applyResumeToken(r, e.resumeToken);
              break;

            case WatchTargetChangeState.Removed:
              t.recordTargetResponse(n), assert(!e.cause, "WatchChangeAggregator does not handle errored targets");
              break;

            case WatchTargetChangeState.Current:
              t.isActiveTarget(n) && (r.currentStatusUpdate = CurrentStatusUpdate.MarkCurrent, applyResumeToken(r, e.resumeToken));
              break;

            case WatchTargetChangeState.Reset:
              t.isActiveTarget(n) && (r.mapping = new ResetMapping(), applyResumeToken(r, e.resumeToken));
              break;

            default:
              fail("Unknown target watch change state: " + e.state);
          }
        });
      }, e.prototype.recordTargetResponse = function (e) {
        var t = (this.pendingTargetResponses[e] || 0) - 1;
        0 === t ? delete this.pendingTargetResponses[e] : this.pendingTargetResponses[e] = t;
      }, e.prototype.addExistenceFilterChange = function (e) {
        this.isActiveTarget(e.targetId) && (this.existenceFilters[e.targetId] = e.existenceFilter);
      }, e;
    }();

    var ServerTimestampTransform = function () {
      function e() {}

      return e.prototype.applyToLocalView = function (e, t) {
        return new ServerTimestampValue(t, e);
      }, e.prototype.applyToRemoteDocument = function (e, t) {
        return t;
      }, e.prototype.isEqual = function (t) {
        return t instanceof e;
      }, e.instance = new e(), e;
    }(),
        ArrayUnionTransformOperation = function () {
      function e(e) {
        this.elements = e;
      }

      return e.prototype.applyToLocalView = function (e, t) {
        return this.apply(e);
      }, e.prototype.applyToRemoteDocument = function (e, t) {
        return this.apply(e);
      }, e.prototype.apply = function (e) {
        for (var t = coercedFieldValuesArray(e), n = function n(e) {
          t.find(function (t) {
            return t.isEqual(e);
          }) || t.push(e);
        }, r = 0, o = this.elements; r < o.length; r++) {
          n(o[r]);
        }

        return new ArrayValue(t);
      }, e.prototype.isEqual = function (t) {
        return t instanceof e && arrayEquals(t.elements, this.elements);
      }, e;
    }(),
        ArrayRemoveTransformOperation = function () {
      function e(e) {
        this.elements = e;
      }

      return e.prototype.applyToLocalView = function (e, t) {
        return this.apply(e);
      }, e.prototype.applyToRemoteDocument = function (e, t) {
        return this.apply(e);
      }, e.prototype.apply = function (e) {
        for (var t = coercedFieldValuesArray(e), n = function n(e) {
          t = t.filter(function (t) {
            return !t.isEqual(e);
          });
        }, r = 0, o = this.elements; r < o.length; r++) {
          n(o[r]);
        }

        return new ArrayValue(t);
      }, e.prototype.isEqual = function (t) {
        return t instanceof e && arrayEquals(t.elements, this.elements);
      }, e;
    }();

    var DIRECTIONS = (dirs = {}, dirs[Direction.ASCENDING.name] = "ASCENDING", dirs[Direction.DESCENDING.name] = "DESCENDING", dirs),
        OPERATORS = (ops = {}, ops[RelationOp.LESS_THAN.name] = "LESS_THAN", ops[RelationOp.LESS_THAN_OR_EQUAL.name] = "LESS_THAN_OR_EQUAL", ops[RelationOp.GREATER_THAN.name] = "GREATER_THAN", ops[RelationOp.GREATER_THAN_OR_EQUAL.name] = "GREATER_THAN_OR_EQUAL", ops[RelationOp.EQUAL.name] = "EQUAL", ops[RelationOp.ARRAY_CONTAINS.name] = "ARRAY_CONTAINS", ops),
        ISO_REG_EXP = new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);

    var JsonProtoSerializer = function () {
      function e(e, t) {
        this.databaseId = e, this.options = t;
      }

      return e.prototype.emptyByteString = function () {
        return this.options.useProto3Json ? "" : new Uint8Array(0);
      }, e.prototype.unsafeCastProtoByteString = function (e) {
        return e;
      }, e.prototype.fromRpcStatus = function (e) {
        var t = void 0 === e.code ? Code.UNKNOWN : mapCodeFromRpcCode(e.code);
        return new FirestoreError(t, e.message || "");
      }, e.prototype.toInt32Value = function (e) {
        return isNullOrUndefined(e) ? void 0 : {
          value: e
        };
      }, e.prototype.fromInt32Value = function (e) {
        var t;
        return isNullOrUndefined(t = "object" == _typeof(e) ? e.value : e) ? null : t;
      }, e.prototype.toTimestamp = function (e) {
        return {
          seconds: e.seconds,
          nanos: e.nanoseconds
        };
      }, e.prototype.fromTimestamp = function (e) {
        if ("string" == typeof e) return this.fromIso8601String(e);
        assert(!!e, "Cannot deserialize null or undefined timestamp.");
        var t = parseInt64(e.seconds || "0"),
            n = e.nanos || 0;
        return new Timestamp(t, n);
      }, e.prototype.fromIso8601String = function (e) {
        var t = 0,
            n = ISO_REG_EXP.exec(e);

        if (assert(!!n, "invalid timestamp: " + e), n[1]) {
          var r = n[1];
          r = (r + "000000000").substr(0, 9), t = Number(r);
        }

        var o = new Date(e),
            i = Math.floor(o.getTime() / 1e3);
        return new Timestamp(i, t);
      }, e.prototype.toBytes = function (e) {
        return this.options.useProto3Json ? e.toBase64() : this.unsafeCastProtoByteString(e.toUint8Array());
      }, e.prototype.fromBlob = function (e) {
        return "string" == typeof e ? (assert(this.options.useProto3Json, "Expected bytes to be passed in as Uint8Array, but got a string instead."), Blob.fromBase64String(e)) : (assert(!this.options.useProto3Json, "Expected bytes to be passed in as string, but got something else instead."), Blob.fromUint8Array(e));
      }, e.prototype.toVersion = function (e) {
        return this.toTimestamp(e.toTimestamp());
      }, e.prototype.fromVersion = function (e) {
        return assert(!!e, "Trying to deserialize version that isn't set"), SnapshotVersion.fromTimestamp(this.fromTimestamp(e));
      }, e.prototype.toResourceName = function (e, t) {
        return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString();
      }, e.prototype.fromResourceName = function (e) {
        var t = ResourcePath.fromString(e);
        return assert(this.isValidResourceName(t), "Tried to deserialize invalid key " + t.toString()), t;
      }, e.prototype.toName = function (e) {
        return this.toResourceName(this.databaseId, e.path);
      }, e.prototype.fromName = function (e) {
        var t = this.fromResourceName(e);
        return assert(t.get(1) === this.databaseId.projectId, "Tried to deserialize key from different project: " + t.get(1) + " vs " + this.databaseId.projectId), assert(!t.get(3) && !this.databaseId.database || t.get(3) === this.databaseId.database, "Tried to deserialize key from different database: " + t.get(3) + " vs " + this.databaseId.database), new DocumentKey(this.extractLocalPathFromResourceName(t));
      }, e.prototype.toQueryPath = function (e) {
        return 0 === e.length ? this.encodedDatabaseId : this.toResourceName(this.databaseId, e);
      }, e.prototype.fromQueryPath = function (e) {
        var t = this.fromResourceName(e);
        return 4 === t.length ? ResourcePath.EMPTY_PATH : this.extractLocalPathFromResourceName(t);
      }, Object.defineProperty(e.prototype, "encodedDatabaseId", {
        get: function get() {
          return new ResourcePath(["projects", this.databaseId.projectId, "databases", this.databaseId.database]).canonicalString();
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.fullyQualifiedPrefixPath = function (e) {
        return new ResourcePath(["projects", e.projectId, "databases", e.database]);
      }, e.prototype.extractLocalPathFromResourceName = function (e) {
        return assert(e.length > 4 && "documents" === e.get(4), "tried to deserialize invalid key " + e.toString()), e.popFirst(5);
      }, e.prototype.isValidResourceName = function (e) {
        return e.length >= 4 && "projects" === e.get(0) && "databases" === e.get(2);
      }, e.prototype.toValue = function (e) {
        if (e instanceof NullValue) return {
          nullValue: "NULL_VALUE"
        };
        if (e instanceof BooleanValue) return {
          booleanValue: e.value()
        };
        if (e instanceof IntegerValue) return {
          integerValue: "" + e.value()
        };

        if (e instanceof DoubleValue) {
          var t = e.value();

          if (this.options.useProto3Json) {
            if (isNaN(t)) return {
              doubleValue: "NaN"
            };
            if (t === 1 / 0) return {
              doubleValue: "Infinity"
            };
            if (t === -1 / 0) return {
              doubleValue: "-Infinity"
            };
          }

          return {
            doubleValue: e.value()
          };
        }

        return e instanceof StringValue ? {
          stringValue: e.value()
        } : e instanceof ObjectValue ? {
          mapValue: this.toMapValue(e)
        } : e instanceof ArrayValue ? {
          arrayValue: this.toArrayValue(e)
        } : e instanceof TimestampValue ? {
          timestampValue: this.toTimestamp(e.internalValue)
        } : e instanceof GeoPointValue ? {
          geoPointValue: {
            latitude: e.value().latitude,
            longitude: e.value().longitude
          }
        } : e instanceof BlobValue ? {
          bytesValue: this.toBytes(e.value())
        } : e instanceof RefValue ? {
          referenceValue: this.toResourceName(e.databaseId, e.key.path)
        } : fail("Unknown FieldValue " + JSON.stringify(e));
      }, e.prototype.fromValue = function (e) {
        var t = this,
            n = e.value_type;
        if (hasTag(e, n, "nullValue")) return NullValue.INSTANCE;
        if (hasTag(e, n, "booleanValue")) return BooleanValue.of(e.booleanValue);
        if (hasTag(e, n, "integerValue")) return new IntegerValue(parseInt64(e.integerValue));

        if (hasTag(e, n, "doubleValue")) {
          if (this.options.useProto3Json) {
            if ("NaN" === e.doubleValue) return DoubleValue.NAN;
            if ("Infinity" === e.doubleValue) return DoubleValue.POSITIVE_INFINITY;
            if ("-Infinity" === e.doubleValue) return DoubleValue.NEGATIVE_INFINITY;
          }

          return new DoubleValue(e.doubleValue);
        }

        if (hasTag(e, n, "stringValue")) return new StringValue(e.stringValue);
        if (hasTag(e, n, "mapValue")) return this.fromFields(e.mapValue.fields || {});

        if (hasTag(e, n, "arrayValue")) {
          assertPresent(e.arrayValue, "arrayValue");
          var r = e.arrayValue.values || [];
          return new ArrayValue(r.map(function (e) {
            return t.fromValue(e);
          }));
        }

        if (hasTag(e, n, "timestampValue")) return assertPresent(e.timestampValue, "timestampValue"), new TimestampValue(this.fromTimestamp(e.timestampValue));

        if (hasTag(e, n, "geoPointValue")) {
          assertPresent(e.geoPointValue, "geoPointValue");
          var o = e.geoPointValue.latitude || 0,
              i = e.geoPointValue.longitude || 0;
          return new GeoPointValue(new GeoPoint(o, i));
        }

        if (hasTag(e, n, "bytesValue")) {
          assertPresent(e.bytesValue, "bytesValue");
          var a = this.fromBlob(e.bytesValue);
          return new BlobValue(a);
        }

        if (hasTag(e, n, "referenceValue")) {
          assertPresent(e.referenceValue, "referenceValue");
          var s = this.fromResourceName(e.referenceValue),
              u = new DatabaseId(s.get(1), s.get(3)),
              c = new DocumentKey(this.extractLocalPathFromResourceName(s));
          return new RefValue(u, c);
        }

        return fail("Unknown Value proto " + JSON.stringify(e));
      }, e.prototype.toMutationDocument = function (e, t) {
        return {
          name: this.toName(e),
          fields: this.toFields(t)
        };
      }, e.prototype.toDocument = function (e) {
        return assert(!e.hasLocalMutations, "Can't serialize documents with mutations."), {
          name: this.toName(e.key),
          fields: this.toFields(e.data),
          updateTime: this.toTimestamp(e.version.toTimestamp())
        };
      }, e.prototype.fromDocument = function (e) {
        return new Document(this.fromName(e.name), this.fromVersion(e.updateTime), this.fromFields(e.fields || {}), {
          hasLocalMutations: !1
        });
      }, e.prototype.toFields = function (e) {
        var t = this,
            n = {};
        return e.forEach(function (e, r) {
          n[e] = t.toValue(r);
        }), n;
      }, e.prototype.fromFields = function (e) {
        var t = this,
            n = e,
            r = ObjectValue.EMPTY;
        return forEach(n, function (e, n) {
          r = r.set(new FieldPath([e]), t.fromValue(n));
        }), r;
      }, e.prototype.toMapValue = function (e) {
        return {
          fields: this.toFields(e)
        };
      }, e.prototype.toArrayValue = function (e) {
        var t = this,
            n = [];
        return e.forEach(function (e) {
          n.push(t.toValue(e));
        }), {
          values: n
        };
      }, e.prototype.fromFound = function (e) {
        assert(!!e.found, "Tried to deserialize a found document from a missing document."), assertPresent(e.found.name, "doc.found.name"), assertPresent(e.found.updateTime, "doc.found.updateTime");
        var t = this.fromName(e.found.name),
            n = this.fromVersion(e.found.updateTime),
            r = this.fromFields(e.found.fields || {});
        return new Document(t, n, r, {
          hasLocalMutations: !1
        });
      }, e.prototype.fromMissing = function (e) {
        assert(!!e.missing, "Tried to deserialize a missing document from a found document."), assert(!!e.readTime, "Tried to deserialize a missing document without a read time.");
        var t = this.fromName(e.missing),
            n = this.fromVersion(e.readTime);
        return new NoDocument(t, n);
      }, e.prototype.fromMaybeDocument = function (e) {
        var t = e.result;
        return hasTag(e, t, "found") ? this.fromFound(e) : hasTag(e, t, "missing") ? this.fromMissing(e) : fail("invalid batch get response: " + JSON.stringify(e));
      }, e.prototype.toWatchTargetChangeState = function (e) {
        switch (e) {
          case WatchTargetChangeState.Added:
            return "ADD";

          case WatchTargetChangeState.Current:
            return "CURRENT";

          case WatchTargetChangeState.NoChange:
            return "NO_CHANGE";

          case WatchTargetChangeState.Removed:
            return "REMOVE";

          case WatchTargetChangeState.Reset:
            return "RESET";

          default:
            return fail("Unknown WatchTargetChangeState: " + e);
        }
      }, e.prototype.toTestWatchChange = function (e) {
        if (e instanceof ExistenceFilterChange) return {
          filter: {
            count: e.existenceFilter.count,
            targetId: e.targetId
          }
        };

        if (e instanceof DocumentWatchChange) {
          if (e.newDoc instanceof Document) {
            var t = e.newDoc;
            return {
              documentChange: {
                document: {
                  name: this.toName(t.key),
                  fields: this.toFields(t.data),
                  updateTime: this.toVersion(t.version)
                },
                targetIds: e.updatedTargetIds,
                removedTargetIds: e.removedTargetIds
              }
            };
          }

          if (e.newDoc instanceof NoDocument) {
            t = e.newDoc;
            return {
              documentDelete: {
                document: this.toName(t.key),
                readTime: this.toVersion(t.version),
                removedTargetIds: e.removedTargetIds
              }
            };
          }

          if (null === e.newDoc) return {
            documentRemove: {
              document: this.toName(e.key),
              removedTargetIds: e.removedTargetIds
            }
          };
        }

        if (e instanceof WatchTargetChange) {
          var n = void 0;
          return e.cause && (n = {
            code: mapRpcCodeFromCode(e.cause.code),
            message: e.cause.message
          }), {
            targetChange: {
              targetChangeType: this.toWatchTargetChangeState(e.state),
              targetIds: e.targetIds,
              resumeToken: this.unsafeCastProtoByteString(e.resumeToken),
              cause: n
            }
          };
        }

        return fail("Unrecognized watch change: " + JSON.stringify(e));
      }, e.prototype.fromWatchChange = function (e) {
        var t,
            n = e.response_type;

        if (hasTag(e, n, "targetChange")) {
          assertPresent(e.targetChange, "targetChange");
          var r = this.fromWatchTargetChangeState(e.targetChange.targetChangeType || "NO_CHANGE"),
              o = e.targetChange.targetIds || [],
              i = e.targetChange.resumeToken || this.emptyByteString(),
              a = e.targetChange.cause,
              s = a && this.fromRpcStatus(a);
          t = new WatchTargetChange(r, o, i, s || null);
        } else if (hasTag(e, n, "documentChange")) {
          assertPresent(e.documentChange, "documentChange"), assertPresent(e.documentChange.document, "documentChange.name"), assertPresent(e.documentChange.document.name, "documentChange.document.name"), assertPresent(e.documentChange.document.updateTime, "documentChange.document.updateTime");
          var u = e.documentChange,
              c = this.fromName(u.document.name),
              h = this.fromVersion(u.document.updateTime),
              l = this.fromFields(u.document.fields || {}),
              f = new Document(c, h, l, {
            hasLocalMutations: !1
          }),
              d = u.targetIds || [],
              p = u.removedTargetIds || [];
          t = new DocumentWatchChange(d, p, f.key, f);
        } else if (hasTag(e, n, "documentDelete")) {
          assertPresent(e.documentDelete, "documentDelete"), assertPresent(e.documentDelete.document, "documentDelete.document");
          var m = e.documentDelete;
          c = this.fromName(m.document), h = m.readTime ? this.fromVersion(m.readTime) : SnapshotVersion.forDeletedDoc(), f = new NoDocument(c, h), p = m.removedTargetIds || [];
          t = new DocumentWatchChange([], p, f.key, f);
        } else if (hasTag(e, n, "documentRemove")) {
          assertPresent(e.documentRemove, "documentRemove"), assertPresent(e.documentRemove.document, "documentRemove");
          var y = e.documentRemove;
          c = this.fromName(y.document), p = y.removedTargetIds || [];
          t = new DocumentWatchChange([], p, c, null);
        } else {
          if (!hasTag(e, n, "filter")) return fail("Unknown change type " + JSON.stringify(e));
          assertPresent(e.filter, "filter"), assertPresent(e.filter.targetId, "filter.targetId");
          var g = e.filter,
              v = g.count || 0,
              b = new ExistenceFilter(v),
              E = g.targetId;
          t = new ExistenceFilterChange(E, b);
        }

        return t;
      }, e.prototype.fromWatchTargetChangeState = function (e) {
        return "NO_CHANGE" === e ? WatchTargetChangeState.NoChange : "ADD" === e ? WatchTargetChangeState.Added : "REMOVE" === e ? WatchTargetChangeState.Removed : "CURRENT" === e ? WatchTargetChangeState.Current : "RESET" === e ? WatchTargetChangeState.Reset : fail("Got unexpected TargetChange.state: " + e);
      }, e.prototype.versionFromListenResponse = function (e) {
        if (!hasTag(e, e.response_type, "targetChange")) return SnapshotVersion.MIN;
        var t = e.targetChange;
        return t.targetIds && t.targetIds.length ? SnapshotVersion.MIN : t.readTime ? this.fromVersion(t.readTime) : SnapshotVersion.MIN;
      }, e.prototype.toMutation = function (e) {
        var t,
            n = this;
        if (e instanceof SetMutation) t = {
          update: this.toMutationDocument(e.key, e.value)
        };else if (e instanceof DeleteMutation) t = {
          "delete": this.toName(e.key)
        };else if (e instanceof PatchMutation) t = {
          update: this.toMutationDocument(e.key, e.data),
          updateMask: this.toDocumentMask(e.fieldMask)
        };else {
          if (!(e instanceof TransformMutation)) return fail("Unknown mutation type " + e.type);
          t = {
            transform: {
              document: this.toName(e.key),
              fieldTransforms: e.fieldTransforms.map(function (e) {
                return n.toFieldTransform(e);
              })
            }
          };
        }
        return e.precondition.isNone || (t.currentDocument = this.toPrecondition(e.precondition)), t;
      }, e.prototype.fromMutation = function (e) {
        var t = this,
            n = e.currentDocument ? this.fromPrecondition(e.currentDocument) : Precondition.NONE;

        if (e.update) {
          assertPresent(e.update.name, "name");
          var r = this.fromName(e.update.name),
              o = this.fromFields(e.update.fields || {});

          if (e.updateMask) {
            var i = this.fromDocumentMask(e.updateMask);
            return new PatchMutation(r, o, i, n);
          }

          return new SetMutation(r, o, n);
        }

        if (e["delete"]) {
          r = this.fromName(e["delete"]);
          return new DeleteMutation(r, n);
        }

        if (e.transform) {
          r = this.fromName(e.transform.document);
          var a = e.transform.fieldTransforms.map(function (e) {
            return t.fromFieldTransform(e);
          });
          return assert(!0 === n.exists, 'Transforms only support precondition "exists == true"'), new TransformMutation(r, a);
        }

        return fail("unknown mutation proto: " + JSON.stringify(e));
      }, e.prototype.toPrecondition = function (e) {
        return assert(!e.isNone, "Can't serialize an empty precondition"), void 0 !== e.updateTime ? {
          updateTime: this.toVersion(e.updateTime)
        } : void 0 !== e.exists ? {
          exists: e.exists
        } : fail("Unknown precondition");
      }, e.prototype.fromPrecondition = function (e) {
        return void 0 !== e.updateTime ? Precondition.updateTime(this.fromVersion(e.updateTime)) : void 0 !== e.exists ? Precondition.exists(e.exists) : Precondition.NONE;
      }, e.prototype.fromWriteResult = function (e) {
        var t = this,
            n = e.updateTime ? this.fromVersion(e.updateTime) : null,
            r = null;
        return e.transformResults && e.transformResults.length > 0 && (r = e.transformResults.map(function (e) {
          return t.fromValue(e);
        })), new MutationResult(n, r);
      }, e.prototype.fromWriteResults = function (e) {
        var t = this;
        return (e || []).map(function (e) {
          return t.fromWriteResult(e);
        });
      }, e.prototype.toFieldTransform = function (e) {
        var t = this,
            n = e.transform;
        return n instanceof ServerTimestampTransform ? {
          fieldPath: e.field.canonicalString(),
          setToServerValue: "REQUEST_TIME"
        } : n instanceof ArrayUnionTransformOperation ? {
          fieldPath: e.field.canonicalString(),
          appendMissingElements: {
            values: n.elements.map(function (e) {
              return t.toValue(e);
            })
          }
        } : n instanceof ArrayRemoveTransformOperation ? {
          fieldPath: e.field.canonicalString(),
          removeAllFromArray: {
            values: n.elements.map(function (e) {
              return t.toValue(e);
            })
          }
        } : void fail("Unknown transform: " + e.transform);
      }, e.prototype.fromFieldTransform = function (e) {
        var t = this,
            n = e.transform_type,
            r = null;
        if (hasTag(e, n, "setToServerValue")) assert("REQUEST_TIME" === e.setToServerValue, "Unknown server value transform proto: " + JSON.stringify(e)), r = ServerTimestampTransform.instance;else if (hasTag(e, n, "appendMissingElements")) {
          var o = e.appendMissingElements.values || [];
          r = new ArrayUnionTransformOperation(o.map(function (e) {
            return t.fromValue(e);
          }));
        } else if (hasTag(e, n, "removeAllFromArray")) {
          o = e.removeAllFromArray.values || [];
          r = new ArrayRemoveTransformOperation(o.map(function (e) {
            return t.fromValue(e);
          }));
        } else fail("Unknown transform proto: " + JSON.stringify(e));
        var i = FieldPath.fromServerFormat(e.fieldPath);
        return new FieldTransform(i, r);
      }, e.prototype.toDocumentsTarget = function (e) {
        return {
          documents: [this.toQueryPath(e.path)]
        };
      }, e.prototype.fromDocumentsTarget = function (e) {
        var t = e.documents.length;
        assert(1 === t, "DocumentsTarget contained other than 1 document: " + t);
        var n = e.documents[0];
        return Query.atPath(this.fromQueryPath(n));
      }, e.prototype.toQueryTarget = function (e) {
        var t = {
          structuredQuery: {}
        };
        if (e.path.isEmpty()) t.parent = this.toQueryPath(ResourcePath.EMPTY_PATH);else {
          var n = e.path;
          assert(n.length % 2 != 0, "Document queries with filters are not supported."), t.parent = this.toQueryPath(n.popLast()), t.structuredQuery.from = [{
            collectionId: n.lastSegment()
          }];
        }
        var r = this.toFilter(e.filters);
        r && (t.structuredQuery.where = r);
        var o = this.toOrder(e.orderBy);
        o && (t.structuredQuery.orderBy = o);
        var i = this.toInt32Value(e.limit);
        return void 0 !== i && (t.structuredQuery.limit = i), e.startAt && (t.structuredQuery.startAt = this.toCursor(e.startAt)), e.endAt && (t.structuredQuery.endAt = this.toCursor(e.endAt)), t;
      }, e.prototype.fromQueryTarget = function (e) {
        var t = this.fromQueryPath(e.parent),
            n = e.structuredQuery,
            r = n.from ? n.from.length : 0;

        if (r > 0) {
          assert(1 === r, "StructuredQuery.from with more than one collection is not supported.");
          var o = n.from[0];
          t = t.child(o.collectionId);
        }

        var i = [];
        n.where && (i = this.fromFilter(n.where));
        var a = [];
        n.orderBy && (a = this.fromOrder(n.orderBy));
        var s = null;
        n.limit && (s = this.fromInt32Value(n.limit));
        var u = null;
        n.startAt && (u = this.fromCursor(n.startAt));
        var c = null;
        return n.endAt && (c = this.fromCursor(n.endAt)), new Query(t, a, i, s, u, c);
      }, e.prototype.toListenRequestLabels = function (e) {
        var t = this.toLabel(e.purpose);
        return null == t ? null : {
          "goog-listen-tags": t
        };
      }, e.prototype.toLabel = function (e) {
        switch (e) {
          case QueryPurpose.Listen:
            return null;

          case QueryPurpose.ExistenceFilterMismatch:
            return "existence-filter-mismatch";

          case QueryPurpose.LimboResolution:
            return "limbo-document";

          default:
            return fail("Unrecognized query purpose: " + e);
        }
      }, e.prototype.toTarget = function (e) {
        var t,
            n = e.query;
        return (t = n.isDocumentQuery() ? {
          documents: this.toDocumentsTarget(n)
        } : {
          query: this.toQueryTarget(n)
        }).targetId = e.targetId, e.resumeToken.length > 0 && (t.resumeToken = this.unsafeCastProtoByteString(e.resumeToken)), t;
      }, e.prototype.toFilter = function (e) {
        var t = this;

        if (0 !== e.length) {
          var n = e.map(function (e) {
            return e instanceof RelationFilter ? t.toRelationFilter(e) : t.toUnaryFilter(e);
          });
          return 1 === n.length ? n[0] : {
            compositeFilter: {
              op: "AND",
              filters: n
            }
          };
        }
      }, e.prototype.fromFilter = function (e) {
        var t = this;
        return e ? void 0 !== e.unaryFilter ? [this.fromUnaryFilter(e)] : void 0 !== e.fieldFilter ? [this.fromRelationFilter(e)] : void 0 !== e.compositeFilter ? e.compositeFilter.filters.map(function (e) {
          return t.fromFilter(e);
        }).reduce(function (e, t) {
          return e.concat(t);
        }) : fail("Unknown filter: " + JSON.stringify(e)) : [];
      }, e.prototype.toOrder = function (e) {
        var t = this;
        if (0 !== e.length) return e.map(function (e) {
          return t.toPropertyOrder(e);
        });
      }, e.prototype.fromOrder = function (e) {
        var t = this;
        return e.map(function (e) {
          return t.fromPropertyOrder(e);
        });
      }, e.prototype.toCursor = function (e) {
        var t = this;
        return {
          before: e.before,
          values: e.position.map(function (e) {
            return t.toValue(e);
          })
        };
      }, e.prototype.fromCursor = function (e) {
        var t = this,
            n = !!e.before,
            r = e.values.map(function (e) {
          return t.fromValue(e);
        });
        return new Bound(r, n);
      }, e.prototype.toDirection = function (e) {
        return DIRECTIONS[e.name];
      }, e.prototype.fromDirection = function (e) {
        switch (e) {
          case "ASCENDING":
            return Direction.ASCENDING;

          case "DESCENDING":
            return Direction.DESCENDING;

          default:
            return;
        }
      }, e.prototype.toOperatorName = function (e) {
        return OPERATORS[e.name];
      }, e.prototype.fromOperatorName = function (e) {
        switch (e) {
          case "EQUAL":
            return RelationOp.EQUAL;

          case "GREATER_THAN":
            return RelationOp.GREATER_THAN;

          case "GREATER_THAN_OR_EQUAL":
            return RelationOp.GREATER_THAN_OR_EQUAL;

          case "LESS_THAN":
            return RelationOp.LESS_THAN;

          case "LESS_THAN_OR_EQUAL":
            return RelationOp.LESS_THAN_OR_EQUAL;

          case "ARRAY_CONTAINS":
            return RelationOp.ARRAY_CONTAINS;

          case "OPERATOR_UNSPECIFIED":
            return fail("Unspecified relation");

          default:
            return fail("Unknown relation");
        }
      }, e.prototype.toFieldPathReference = function (e) {
        return {
          fieldPath: e.canonicalString()
        };
      }, e.prototype.fromFieldPathReference = function (e) {
        return FieldPath.fromServerFormat(e.fieldPath);
      }, e.prototype.toPropertyOrder = function (e) {
        return {
          field: this.toFieldPathReference(e.field),
          direction: this.toDirection(e.dir)
        };
      }, e.prototype.fromPropertyOrder = function (e) {
        return new OrderBy(this.fromFieldPathReference(e.field), this.fromDirection(e.direction));
      }, e.prototype.toRelationFilter = function (e) {
        return e instanceof RelationFilter ? {
          fieldFilter: {
            field: this.toFieldPathReference(e.field),
            op: this.toOperatorName(e.op),
            value: this.toValue(e.value)
          }
        } : fail("Unrecognized filter: " + JSON.stringify(e));
      }, e.prototype.fromRelationFilter = function (e) {
        return new RelationFilter(this.fromFieldPathReference(e.fieldFilter.field), this.fromOperatorName(e.fieldFilter.op), this.fromValue(e.fieldFilter.value));
      }, e.prototype.toUnaryFilter = function (e) {
        return e instanceof NanFilter ? {
          unaryFilter: {
            field: this.toFieldPathReference(e.field),
            op: "IS_NAN"
          }
        } : e instanceof NullFilter ? {
          unaryFilter: {
            field: this.toFieldPathReference(e.field),
            op: "IS_NULL"
          }
        } : fail("Unrecognized filter: " + JSON.stringify(e));
      }, e.prototype.fromUnaryFilter = function (e) {
        switch (e.unaryFilter.op) {
          case "IS_NAN":
            var t = this.fromFieldPathReference(e.unaryFilter.field);
            return new NanFilter(t);

          case "IS_NULL":
            var n = this.fromFieldPathReference(e.unaryFilter.field);
            return new NullFilter(n);

          case "OPERATOR_UNSPECIFIED":
            return fail("Unspecified filter");

          default:
            return fail("Unknown filter");
        }
      }, e.prototype.toDocumentMask = function (e) {
        return {
          fieldPaths: e.fields.map(function (e) {
            return e.canonicalString();
          })
        };
      }, e.prototype.fromDocumentMask = function (e) {
        var t = (e.fieldPaths || []).map(function (e) {
          return FieldPath.fromServerFormat(e);
        });
        return new FieldMask(t);
      }, e;
    }();

    var isReactNative = function isReactNative() {
      return "object" == (typeof navigator === "undefined" ? "undefined" : _typeof(navigator)) && "ReactNative" === navigator.product;
    },
        ERROR_NAME = "FirebaseError",
        captureStackTrace = Error.captureStackTrace,
        FirebaseError = function () {
      return function (e, t) {
        if (this.code = e, this.message = t, captureStackTrace) captureStackTrace(this, ErrorFactory.prototype.create);else try {
          throw Error.apply(this, arguments);
        } catch (e) {
          this.name = ERROR_NAME, Object.defineProperty(this, "stack", {
            get: function get() {
              return e.stack;
            }
          });
        }
      };
    }();

    FirebaseError.prototype = Object.create(Error.prototype), FirebaseError.prototype.constructor = FirebaseError, FirebaseError.prototype.name = ERROR_NAME;

    var ErrorFactory = function () {
      function e(e, t, n) {
        this.service = e, this.serviceName = t, this.errors = n, this.pattern = /\{\$([^}]+)}/g;
      }

      return e.prototype.create = function (e, t) {
        void 0 === t && (t = {});
        var n,
            r = this.errors[e],
            o = this.service + "/" + e;
        n = void 0 === r ? "Error" : r.replace(this.pattern, function (e, n) {
          var r = t[n];
          return void 0 !== r ? r.toString() : "<" + n + "?>";
        }), n = this.serviceName + ": " + n + " (" + o + ").";
        var i = new FirebaseError(o, n);

        for (var a in t) {
          t.hasOwnProperty(a) && "_" !== a.slice(-1) && (i[a] = t[a]);
        }

        return i;
      }, e;
    }(),
        Hash = function () {
      return function () {
        this.blockSize = -1;
      };
    }(),
        Sha1 = function (e) {
      function t() {
        var t = e.call(this) || this;
        t.chain_ = [], t.buf_ = [], t.W_ = [], t.pad_ = [], t.inbuf_ = 0, t.total_ = 0, t.blockSize = 64, t.pad_[0] = 128;

        for (var n = 1; n < t.blockSize; ++n) {
          t.pad_[n] = 0;
        }

        return t.reset(), t;
      }

      return __extends(t, e), t.prototype.reset = function () {
        this.chain_[0] = 1732584193, this.chain_[1] = 4023233417, this.chain_[2] = 2562383102, this.chain_[3] = 271733878, this.chain_[4] = 3285377520, this.inbuf_ = 0, this.total_ = 0;
      }, t.prototype.compress_ = function (e, t) {
        t || (t = 0);
        var n = this.W_;
        if ("string" == typeof e) for (var r = 0; r < 16; r++) {
          n[r] = e.charCodeAt(t) << 24 | e.charCodeAt(t + 1) << 16 | e.charCodeAt(t + 2) << 8 | e.charCodeAt(t + 3), t += 4;
        } else for (r = 0; r < 16; r++) {
          n[r] = e[t] << 24 | e[t + 1] << 16 | e[t + 2] << 8 | e[t + 3], t += 4;
        }

        for (r = 16; r < 80; r++) {
          var o = n[r - 3] ^ n[r - 8] ^ n[r - 14] ^ n[r - 16];
          n[r] = 4294967295 & (o << 1 | o >>> 31);
        }

        var i,
            a,
            s = this.chain_[0],
            u = this.chain_[1],
            c = this.chain_[2],
            h = this.chain_[3],
            l = this.chain_[4];

        for (r = 0; r < 80; r++) {
          r < 40 ? r < 20 ? (i = h ^ u & (c ^ h), a = 1518500249) : (i = u ^ c ^ h, a = 1859775393) : r < 60 ? (i = u & c | h & (u | c), a = 2400959708) : (i = u ^ c ^ h, a = 3395469782);
          o = (s << 5 | s >>> 27) + i + l + a + n[r] & 4294967295;
          l = h, h = c, c = 4294967295 & (u << 30 | u >>> 2), u = s, s = o;
        }

        this.chain_[0] = this.chain_[0] + s & 4294967295, this.chain_[1] = this.chain_[1] + u & 4294967295, this.chain_[2] = this.chain_[2] + c & 4294967295, this.chain_[3] = this.chain_[3] + h & 4294967295, this.chain_[4] = this.chain_[4] + l & 4294967295;
      }, t.prototype.update = function (e, t) {
        if (null != e) {
          void 0 === t && (t = e.length);

          for (var n = t - this.blockSize, r = 0, o = this.buf_, i = this.inbuf_; r < t;) {
            if (0 == i) for (; r <= n;) {
              this.compress_(e, r), r += this.blockSize;
            }

            if ("string" == typeof e) {
              for (; r < t;) {
                if (o[i] = e.charCodeAt(r), ++r, ++i == this.blockSize) {
                  this.compress_(o), i = 0;
                  break;
                }
              }
            } else for (; r < t;) {
              if (o[i] = e[r], ++r, ++i == this.blockSize) {
                this.compress_(o), i = 0;
                break;
              }
            }
          }

          this.inbuf_ = i, this.total_ += t;
        }
      }, t.prototype.digest = function () {
        var e = [],
            t = 8 * this.total_;
        this.inbuf_ < 56 ? this.update(this.pad_, 56 - this.inbuf_) : this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));

        for (var n = this.blockSize - 1; n >= 56; n--) {
          this.buf_[n] = 255 & t, t /= 256;
        }

        this.compress_(this.buf_);
        var r = 0;

        for (n = 0; n < 5; n++) {
          for (var o = 24; o >= 0; o -= 8) {
            e[r] = this.chain_[n] >> o & 255, ++r;
          }
        }

        return e;
      }, t;
    }(Hash),
        StreamBridge = function () {
      function e(e) {
        this.sendFn = e.sendFn, this.closeFn = e.closeFn;
      }

      return e.prototype.onOpen = function (e) {
        assert(!this.wrappedOnOpen, "Called onOpen on stream twice!"), this.wrappedOnOpen = e;
      }, e.prototype.onClose = function (e) {
        assert(!this.wrappedOnClose, "Called onClose on stream twice!"), this.wrappedOnClose = e;
      }, e.prototype.onMessage = function (e) {
        assert(!this.wrappedOnMessage, "Called onMessage on stream twice!"), this.wrappedOnMessage = e;
      }, e.prototype.close = function () {
        this.closeFn();
      }, e.prototype.send = function (e) {
        this.sendFn(e);
      }, e.prototype.callOnOpen = function () {
        assert(void 0 !== this.wrappedOnOpen, "Cannot call onOpen because no callback was set"), this.wrappedOnOpen();
      }, e.prototype.callOnClose = function (e) {
        assert(void 0 !== this.wrappedOnClose, "Cannot call onClose because no callback was set"), this.wrappedOnClose(e);
      }, e.prototype.callOnMessage = function (e) {
        assert(void 0 !== this.wrappedOnMessage, "Cannot call onMessage because no callback was set"), this.wrappedOnMessage(e);
      }, e;
    }(),
        LOG_TAG = "Connection",
        RPC_STREAM_SERVICE = "google.firestore.v1beta1.Firestore",
        RPC_URL_VERSION = "v1beta1",
        RPC_NAME_REST_MAPPING = {
      BatchGetDocuments: "batchGet",
      Commit: "commit"
    },
        X_GOOG_API_CLIENT_VALUE = "gl-js/ fire/" + SDK_VERSION,
        XHR_TIMEOUT_SECS = 15,
        WebChannelConnection = function () {
      function e(e) {
        this.databaseId = e.databaseId, this.pool = new dist_5();
        var t = e.ssl ? "https" : "http";
        this.baseUrl = t + "://" + e.host;
      }

      return e.prototype.modifyHeadersForRequest = function (e, t) {
        if (t) for (var n in t.authHeaders) {
          t.authHeaders.hasOwnProperty(n) && (e[n] = t.authHeaders[n]);
        }
        e["X-Goog-Api-Client"] = X_GOOG_API_CLIENT_VALUE;
      }, e.prototype.invokeRPC = function (e, t, n) {
        var r = this,
            o = this.makeUrl(e);
        return new Promise(function (i, a) {
          r.pool.getObject(function (s) {
            s.listenOnce(dist_3.COMPLETE, function () {
              try {
                switch (s.getLastErrorCode()) {
                  case dist_2.NO_ERROR:
                    var t = s.getResponseJson();
                    debug(LOG_TAG, "XHR received:", JSON.stringify(t)), i(t);
                    break;

                  case dist_2.TIMEOUT:
                    debug(LOG_TAG, 'RPC "' + e + '" timed out'), a(new FirestoreError(Code.DEADLINE_EXCEEDED, "Request time out"));
                    break;

                  case dist_2.HTTP_ERROR:
                    var n = s.getStatus();
                    debug(LOG_TAG, 'RPC "' + e + '" failed with status:', n, "response text:", s.getResponseText()), n > 0 ? a(new FirestoreError(mapCodeFromHttpStatus(n), "Server responded with status " + s.getStatusText())) : (debug(LOG_TAG, 'RPC "' + e + '" failed'), a(new FirestoreError(Code.UNAVAILABLE, "Connection failed.")));
                    break;

                  default:
                    fail('RPC "' + e + '" failed with unanticipated webchannel error ' + s.getLastErrorCode() + ": " + s.getLastError() + ", giving up.");
                }
              } finally {
                debug(LOG_TAG, 'RPC "' + e + '" completed.'), r.pool.releaseObject(s);
              }
            });
            var u = JSON.stringify(t);
            debug(LOG_TAG, "XHR sending: ", o + " " + u);
            var c = {
              "Content-Type": "text/plain"
            };
            r.modifyHeadersForRequest(c, n), s.send(o, "POST", u, c, XHR_TIMEOUT_SECS);
          });
        });
      }, e.prototype.invokeStreamingRPC = function (e, t, n) {
        return this.invokeRPC(e, t, n);
      }, e.prototype.openStream = function (e, t) {
        var n = [this.baseUrl, "/", RPC_STREAM_SERVICE, "/", e, "/channel"],
            r = dist_1(),
            o = {
          backgroundChannelTest: !0,
          httpSessionIdParam: "gsessionid",
          initMessageHeaders: {},
          messageUrlParams: {
            database: "projects/" + this.databaseId.projectId + "/databases/" + this.databaseId.database
          },
          sendRawJson: !0,
          supportsCrossDomainXhr: !0
        };
        this.modifyHeadersForRequest(o.initMessageHeaders, t), isReactNative() || (o.httpHeadersOverwriteParam = "$httpHeaders");
        var i = n.join("");
        debug(LOG_TAG, "Creating WebChannel: " + i + " " + o);

        var a = r.createWebChannel(i, o),
            s = !1,
            u = !1,
            c = new StreamBridge({
          sendFn: function sendFn(e) {
            u ? debug(LOG_TAG, "Not sending because WebChannel is closed:", e) : (s || (debug(LOG_TAG, "Opening WebChannel transport."), a.open(), s = !0), debug(LOG_TAG, "WebChannel sending:", e), a.send(e));
          },
          closeFn: function closeFn() {
            return a.close();
          }
        }),
            h = function h(e, t) {
          a.listen(e, function (e) {
            try {
              t(e);
            } catch (e) {
              setTimeout(function () {
                throw e;
              }, 0);
            }
          });
        };

        return h(dist_4.EventType.OPEN, function () {
          u || debug(LOG_TAG, "WebChannel transport opened.");
        }), h(dist_4.EventType.CLOSE, function () {
          u || (u = !0, debug(LOG_TAG, "WebChannel transport closed"), c.callOnClose());
        }), h(dist_4.EventType.ERROR, function (e) {
          u || (u = !0, debug(LOG_TAG, "WebChannel transport errored:", e), c.callOnClose(new FirestoreError(Code.UNAVAILABLE, "The operation could not be completed")));
        }), h(dist_4.EventType.MESSAGE, function (e) {
          if (!u) {
            var t = e.data[0];
            assert(!!t, "Got a webchannel message without data.");
            var n = t.error || t[0] && t[0].error;

            if (n) {
              debug(LOG_TAG, "WebChannel received error:", n);
              var r = n.status,
                  o = mapCodeFromRpcStatus(r),
                  i = n.message;
              void 0 === o && (o = Code.INTERNAL, i = "Unknown error status: " + r + " with message " + n.message), u = !0, c.callOnClose(new FirestoreError(o, i)), a.close();
            } else debug(LOG_TAG, "WebChannel received:", t), c.callOnMessage(t);
          }
        }), setTimeout(function () {
          c.callOnOpen();
        }, 0), c;
      }, e.prototype.makeUrl = function (e) {
        var t = RPC_NAME_REST_MAPPING[e];
        assert(void 0 !== t, "Unknown REST mapping for: " + e);
        var n = [this.baseUrl, "/", RPC_URL_VERSION];
        return n.push("/projects/"), n.push(this.databaseId.projectId), n.push("/databases/"), n.push(this.databaseId.database), n.push("/documents"), n.push(":"), n.push(t), n.join("");
      }, e;
    }(),
        BrowserPlatform = function () {
      function e() {
        this.emptyByteString = "", this.base64Available = "undefined" != typeof atob;
      }

      return e.prototype.loadConnection = function (e) {
        return Promise.resolve(new WebChannelConnection(e));
      }, e.prototype.newSerializer = function (e) {
        return new JsonProtoSerializer(e, {
          useProto3Json: !0
        });
      }, e.prototype.formatJSON = function (e) {
        return JSON.stringify(e);
      }, e.prototype.atob = function (e) {
        return atob(e);
      }, e.prototype.btoa = function (e) {
        return btoa(e);
      }, e;
    }();

    PlatformSupport.setPlatform(new BrowserPlatform());

    var FieldPath$1 = function () {
      function e() {
        for (var e = [], t = 0; t < arguments.length; t++) {
          e[t] = arguments[t];
        }

        validateNamedArrayAtLeastNumberOfElements("FieldPath", e, "fieldNames", 1);

        for (var n = 0; n < e.length; ++n) {
          if (validateArgType("FieldPath", "string", n, e[n]), 0 === e[n].length) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid field name at argument $(i + 1). Field names must not be empty.");
        }

        this._internalPath = new FieldPath(e);
      }

      return e.documentId = function () {
        return e._DOCUMENT_ID;
      }, e.prototype.isEqual = function (t) {
        if (!(t instanceof e)) throw invalidClassError("isEqual", "FieldPath", 1, t);
        return this._internalPath.isEqual(t._internalPath);
      }, e._DOCUMENT_ID = new e(FieldPath.keyField().canonicalString()), e;
    }(),
        RESERVED = new RegExp("[~\\*/\\[\\]]"),
        OnlineState,
        ChangeType,
        SyncState;

    !function (e) {
      e[e.Unknown = 0] = "Unknown", e[e.Online = 1] = "Online", e[e.Offline = 2] = "Offline";
    }(OnlineState || (OnlineState = {})), function (e) {
      e[e.Added = 0] = "Added", e[e.Removed = 1] = "Removed", e[e.Modified = 2] = "Modified", e[e.Metadata = 3] = "Metadata";
    }(ChangeType || (ChangeType = {})), function (e) {
      e[e.Local = 0] = "Local", e[e.Synced = 1] = "Synced";
    }(SyncState || (SyncState = {}));

    var DocumentChangeSet = function () {
      function e() {
        this.changeMap = new SortedMap(DocumentKey.comparator);
      }

      return e.prototype.track = function (e) {
        var t = e.doc.key,
            n = this.changeMap.get(t);
        n ? e.type !== ChangeType.Added && n.type === ChangeType.Metadata ? this.changeMap = this.changeMap.insert(t, e) : e.type === ChangeType.Metadata && n.type !== ChangeType.Removed ? this.changeMap = this.changeMap.insert(t, {
          type: n.type,
          doc: e.doc
        }) : e.type === ChangeType.Modified && n.type === ChangeType.Modified ? this.changeMap = this.changeMap.insert(t, {
          type: ChangeType.Modified,
          doc: e.doc
        }) : e.type === ChangeType.Modified && n.type === ChangeType.Added ? this.changeMap = this.changeMap.insert(t, {
          type: ChangeType.Added,
          doc: e.doc
        }) : e.type === ChangeType.Removed && n.type === ChangeType.Added ? this.changeMap = this.changeMap.remove(t) : e.type === ChangeType.Removed && n.type === ChangeType.Modified ? this.changeMap = this.changeMap.insert(t, {
          type: ChangeType.Removed,
          doc: n.doc
        }) : e.type === ChangeType.Added && n.type === ChangeType.Removed ? this.changeMap = this.changeMap.insert(t, {
          type: ChangeType.Modified,
          doc: e.doc
        }) : fail("unsupported combination of changes: " + JSON.stringify(e) + " after " + JSON.stringify(n)) : this.changeMap = this.changeMap.insert(t, e);
      }, e.prototype.getChanges = function () {
        var e = [];
        return this.changeMap.inorderTraversal(function (t, n) {
          e.push(n);
        }), e;
      }, e;
    }(),
        ViewSnapshot = function () {
      function e(e, t, n, r, o, i, a, s) {
        this.query = e, this.docs = t, this.oldDocs = n, this.docChanges = r, this.fromCache = o, this.hasPendingWrites = i, this.syncStateChanged = a, this.excludesMetadataChanges = s;
      }

      return e.prototype.isEqual = function (e) {
        if (this.fromCache !== e.fromCache || this.hasPendingWrites !== e.hasPendingWrites || this.syncStateChanged !== e.syncStateChanged || !this.query.isEqual(e.query) || !this.docs.isEqual(e.docs) || !this.oldDocs.isEqual(e.oldDocs)) return !1;
        var t = this.docChanges,
            n = e.docChanges;
        if (t.length !== n.length) return !1;

        for (var r = 0; r < t.length; r++) {
          if (t[r].type !== n[r].type || !t[r].doc.isEqual(n[r].doc)) return !1;
        }

        return !0;
      }, e;
    }(),
        DocumentSet = function () {
      function e(e) {
        this.comparator = e ? function (t, n) {
          return e(t, n) || DocumentKey.comparator(t.key, n.key);
        } : function (e, t) {
          return DocumentKey.comparator(e.key, t.key);
        }, this.keyedMap = documentMap(), this.sortedSet = new SortedMap(this.comparator);
      }

      return e.emptySet = function (t) {
        return new e(t.comparator);
      }, e.prototype.has = function (e) {
        return null != this.keyedMap.get(e);
      }, e.prototype.get = function (e) {
        return this.keyedMap.get(e);
      }, e.prototype.first = function () {
        return this.sortedSet.minKey();
      }, e.prototype.last = function () {
        return this.sortedSet.maxKey();
      }, e.prototype.isEmpty = function () {
        return this.sortedSet.isEmpty();
      }, e.prototype.indexOf = function (e) {
        var t = this.keyedMap.get(e);
        return t ? this.sortedSet.indexOf(t) : -1;
      }, Object.defineProperty(e.prototype, "size", {
        get: function get() {
          return this.sortedSet.size;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.forEach = function (e) {
        this.sortedSet.inorderTraversal(function (t, n) {
          return e(t), !1;
        });
      }, e.prototype.add = function (e) {
        var t = this["delete"](e.key);
        return t.copy(t.keyedMap.insert(e.key, e), t.sortedSet.insert(e, null));
      }, e.prototype["delete"] = function (e) {
        var t = this.get(e);
        return t ? this.copy(this.keyedMap.remove(e), this.sortedSet.remove(t)) : this;
      }, e.prototype.isEqual = function (t) {
        if (!(t instanceof e)) return !1;
        if (this.size !== t.size) return !1;

        for (var n = this.sortedSet.getIterator(), r = t.sortedSet.getIterator(); n.hasNext();) {
          var o = n.getNext().key,
              i = r.getNext().key;
          if (!o.isEqual(i)) return !1;
        }

        return !0;
      }, e.prototype.toString = function () {
        var e = [];
        return this.forEach(function (t) {
          e.push(t.toString());
        }), 0 === e.length ? "DocumentSet ()" : "DocumentSet (\n  " + e.join("  \n") + "\n)";
      }, e.prototype.copy = function (t, n) {
        var r = new e();
        return r.comparator = this.comparator, r.keyedMap = t, r.sortedSet = n, r;
      }, e;
    }(),
        ObjectMap = function () {
      function e(e) {
        this.mapKeyFn = e, this.inner = {};
      }

      return e.prototype.get = function (e) {
        var t = this.mapKeyFn(e),
            n = this.inner[t];
        if (void 0 !== n) for (var r = 0, o = n; r < o.length; r++) {
          var i = o[r],
              a = i[0],
              s = i[1];
          if (a.isEqual(e)) return s;
        }
      }, e.prototype.has = function (e) {
        return void 0 !== this.get(e);
      }, e.prototype.set = function (e, t) {
        var n = this.mapKeyFn(e),
            r = this.inner[n];

        if (void 0 !== r) {
          for (var o = 0; o < r.length; o++) {
            if (r[o][0].isEqual(e)) return void (r[o] = [e, t]);
          }

          r.push([e, t]);
        } else this.inner[n] = [[e, t]];
      }, e.prototype["delete"] = function (e) {
        var t = this.mapKeyFn(e),
            n = this.inner[t];
        if (void 0 === n) return !1;

        for (var r = 0; r < n.length; r++) {
          if (n[r][0].isEqual(e)) return 1 === n.length ? delete this.inner[t] : n.splice(r, 1), !0;
        }

        return !1;
      }, e.prototype.forEach = function (e) {
        forEach(this.inner, function (t, n) {
          for (var r = 0, o = n; r < o.length; r++) {
            var i = o[r],
                a = i[0],
                s = i[1];
            e(a, s);
          }
        });
      }, e.prototype.isEmpty = function () {
        return isEmpty(this.inner);
      }, e;
    }(),
        QueryListenersInfo = function () {
      return function () {
        this.listeners = [];
      };
    }(),
        EventManager = function () {
      function e(e) {
        this.syncEngine = e, this.queries = new ObjectMap(function (e) {
          return e.canonicalId();
        }), this.onlineState = OnlineState.Unknown, this.syncEngine.subscribe(this.onChange.bind(this), this.onError.bind(this));
      }

      return e.prototype.listen = function (e) {
        var t = e.query,
            n = !1,
            r = this.queries.get(t);
        return r || (n = !0, r = new QueryListenersInfo(), this.queries.set(t, r)), r.listeners.push(e), e.applyOnlineStateChange(this.onlineState), r.viewSnap && e.onViewSnapshot(r.viewSnap), n ? this.syncEngine.listen(t).then(function (e) {
          return r.targetId = e, e;
        }) : Promise.resolve(r.targetId);
      }, e.prototype.unlisten = function (e) {
        return __awaiter(this, void 0, void 0, function () {
          var t, n, r, o;
          return __generator(this, function (i) {
            return t = e.query, n = !1, (r = this.queries.get(t)) && (o = r.listeners.indexOf(e)) >= 0 && (r.listeners.splice(o, 1), n = 0 === r.listeners.length), n ? (this.queries["delete"](t), [2, this.syncEngine.unlisten(t)]) : [2];
          });
        });
      }, e.prototype.onChange = function (e) {
        for (var t = 0, n = e; t < n.length; t++) {
          var r = n[t],
              o = r.query,
              i = this.queries.get(o);

          if (i) {
            for (var a = 0, s = i.listeners; a < s.length; a++) {
              s[a].onViewSnapshot(r);
            }

            i.viewSnap = r;
          }
        }
      }, e.prototype.onError = function (e, t) {
        var n = this.queries.get(e);
        if (n) for (var r = 0, o = n.listeners; r < o.length; r++) {
          o[r].onError(t);
        }
        this.queries["delete"](e);
      }, e.prototype.applyOnlineStateChange = function (e) {
        this.onlineState = e, this.queries.forEach(function (t, n) {
          for (var r = 0, o = n.listeners; r < o.length; r++) {
            o[r].applyOnlineStateChange(e);
          }
        });
      }, e;
    }(),
        QueryListener = function () {
      function e(e, t, n) {
        this.query = e, this.queryObserver = t, this.raisedInitialEvent = !1, this.onlineState = OnlineState.Unknown, this.options = n || {};
      }

      return e.prototype.onViewSnapshot = function (e) {
        if (assert(e.docChanges.length > 0 || e.syncStateChanged, "We got a new snapshot with no changes?"), !this.options.includeMetadataChanges) {
          for (var t = [], n = 0, r = e.docChanges; n < r.length; n++) {
            var o = r[n];
            o.type !== ChangeType.Metadata && t.push(o);
          }

          e = new ViewSnapshot(e.query, e.docs, e.oldDocs, t, e.fromCache, e.hasPendingWrites, e.syncStateChanged, !0);
        }

        this.raisedInitialEvent ? this.shouldRaiseEvent(e) && this.queryObserver.next(e) : this.shouldRaiseInitialEvent(e, this.onlineState) && this.raiseInitialEvent(e), this.snap = e;
      }, e.prototype.onError = function (e) {
        this.queryObserver.error(e);
      }, e.prototype.applyOnlineStateChange = function (e) {
        this.onlineState = e, this.snap && !this.raisedInitialEvent && this.shouldRaiseInitialEvent(this.snap, e) && this.raiseInitialEvent(this.snap);
      }, e.prototype.shouldRaiseInitialEvent = function (e, t) {
        if (assert(!this.raisedInitialEvent, "Determining whether to raise first event but already had first event"), !e.fromCache) return !0;
        var n = t !== OnlineState.Offline;
        return this.options.waitForSyncWhenOnline && n ? (assert(e.fromCache, "Waiting for sync, but snapshot is not from cache"), !1) : !e.docs.isEmpty() || t === OnlineState.Offline;
      }, e.prototype.shouldRaiseEvent = function (e) {
        if (e.docChanges.length > 0) return !0;
        var t = this.snap && this.snap.hasPendingWrites !== e.hasPendingWrites;
        return !(!e.syncStateChanged && !t) && !0 === this.options.includeMetadataChanges;
      }, e.prototype.raiseInitialEvent = function (t) {
        assert(!this.raisedInitialEvent, "Trying to raise initial events for second time"), t = new ViewSnapshot(t.query, t.docs, DocumentSet.emptySet(t.docs), e.getInitialViewChanges(t), t.fromCache, t.hasPendingWrites, !0, !1), this.raisedInitialEvent = !0, this.queryObserver.next(t);
      }, e.getInitialViewChanges = function (e) {
        var t = [];
        return e.docs.forEach(function (e) {
          t.push({
            type: ChangeType.Added,
            doc: e
          });
        }), t;
      }, e;
    }(),
        PersistencePromise = function () {
      function e(e) {
        var t = this;
        this.nextCallback = null, this.catchCallback = null, this.result = void 0, this.error = void 0, this.isDone = !1, this.callbackAttached = !1, e(function (e) {
          t.isDone = !0, t.result = e, t.nextCallback && t.nextCallback(e);
        }, function (e) {
          t.isDone = !0, t.error = e, t.catchCallback && t.catchCallback(e);
        });
      }

      return e.prototype["catch"] = function (e) {
        return this.next(void 0, e);
      }, e.prototype.next = function (t, n) {
        var r = this;
        return this.callbackAttached && fail("Called next() or catch() twice for PersistencePromise"), this.callbackAttached = !0, this.isDone ? this.error ? this.wrapFailure(n, this.error) : this.wrapSuccess(t, this.result) : new e(function (e, o) {
          r.nextCallback = function (n) {
            r.wrapSuccess(t, n).next(e, o);
          }, r.catchCallback = function (t) {
            r.wrapFailure(n, t).next(e, o);
          };
        });
      }, e.prototype.toPromise = function () {
        var e = this;
        return new Promise(function (t, n) {
          e.next(t, n);
        });
      }, e.prototype.wrapUserFunction = function (t) {
        try {
          var n = t();
          return n instanceof e ? n : e.resolve(n);
        } catch (t) {
          return e.reject(t);
        }
      }, e.prototype.wrapSuccess = function (t, n) {
        return t ? this.wrapUserFunction(function () {
          return t(n);
        }) : e.resolve(n);
      }, e.prototype.wrapFailure = function (t, n) {
        return t ? this.wrapUserFunction(function () {
          return t(n);
        }) : e.reject(n);
      }, e.resolve = function (t) {
        return new e(function (e, n) {
          e(t);
        });
      }, e.reject = function (t) {
        return new e(function (e, n) {
          n(t);
        });
      }, e.waitFor = function (t) {
        var n = t.length;
        if (0 === n) return e.resolve();
        var r = 0;
        return new e(function (e, o) {
          for (var i = 0, a = t; i < a.length; i++) {
            a[i].next(function () {
              ++r === n && e();
            }, function (e) {
              return o(e);
            });
          }
        });
      }, e.map = function (t) {
        for (var n = [], r = [], o = function o(e) {
          r[e] = t[e].next(function (t) {
            n[e] = t;
          });
        }, i = 0; i < t.length; ++i) {
          o(i);
        }

        return e.waitFor(r).next(function () {
          return n;
        });
      }, e;
    }(),
        EagerGarbageCollector = function () {
      function e() {
        this.isEager = !0, this.sources = [], this.potentialGarbage = documentKeySet();
      }

      return e.prototype.addGarbageSource = function (e) {
        this.sources.push(e), e.setGarbageCollector(this);
      }, e.prototype.removeGarbageSource = function (e) {
        this.sources.splice(this.sources.indexOf(e), 1), e.setGarbageCollector(null);
      }, e.prototype.addPotentialGarbageKey = function (e) {
        this.potentialGarbage = this.potentialGarbage.add(e);
      }, e.prototype.collectGarbage = function (e) {
        var t = this,
            n = [],
            r = documentKeySet();
        return this.potentialGarbage.forEach(function (o) {
          var i = t.documentHasAnyReferences(e, o);
          n.push(i.next(function (e) {
            return e || (r = r.add(o)), PersistencePromise.resolve();
          }));
        }), this.potentialGarbage = documentKeySet(), PersistencePromise.waitFor(n).next(function () {
          return r;
        });
      }, e.prototype.documentHasAnyReferences = function (e, t) {
        var n = PersistencePromise.resolve(!1);
        return this.sources.map(function (n) {
          return function () {
            return n.containsKey(e, t);
          };
        }).reduce(function (e, t) {
          return e.next(function (e) {
            return e ? PersistencePromise.resolve(!0) : t();
          });
        }, n);
      }, e;
    }(),
        LocalViewChanges = function () {
      function e(e, t, n) {
        this.query = e, this.addedKeys = t, this.removedKeys = n;
      }

      return e.fromSnapshot = function (t) {
        for (var n = documentKeySet(), r = documentKeySet(), o = 0, i = t.docChanges; o < i.length; o++) {
          var a = i[o];

          switch (a.type) {
            case ChangeType.Added:
              n = n.add(a.doc.key);
              break;

            case ChangeType.Removed:
              r = r.add(a.doc.key);
          }
        }

        return new e(t.query, n, r);
      }, e;
    }(),
        ReferenceSet = function () {
      function e() {
        this.refsByKey = new SortedSet(DocReference.compareByKey), this.refsByTarget = new SortedSet(DocReference.compareByTargetId), this.garbageCollector = null;
      }

      return e.prototype.isEmpty = function () {
        return this.refsByKey.isEmpty();
      }, e.prototype.addReference = function (e, t) {
        var n = new DocReference(e, t);
        this.refsByKey = this.refsByKey.add(n), this.refsByTarget = this.refsByTarget.add(n);
      }, e.prototype.addReferences = function (e, t) {
        var n = this;
        e.forEach(function (e) {
          return n.addReference(e, t);
        });
      }, e.prototype.removeReference = function (e, t) {
        this.removeRef(new DocReference(e, t));
      }, e.prototype.removeReferences = function (e, t) {
        var n = this;
        e.forEach(function (e) {
          return n.removeReference(e, t);
        });
      }, e.prototype.removeReferencesForId = function (e) {
        var t = this,
            n = DocumentKey.EMPTY,
            r = new DocReference(n, e),
            o = new DocReference(n, e + 1);
        this.refsByTarget.forEachInRange([r, o], function (e) {
          t.removeRef(e);
        });
      }, e.prototype.removeAllReferences = function () {
        var e = this;
        this.refsByKey.forEach(function (t) {
          return e.removeRef(t);
        });
      }, e.prototype.removeRef = function (e) {
        this.refsByKey = this.refsByKey["delete"](e), this.refsByTarget = this.refsByTarget["delete"](e), null !== this.garbageCollector && this.garbageCollector.addPotentialGarbageKey(e.key);
      }, e.prototype.referencesForId = function (e) {
        var t = DocumentKey.EMPTY,
            n = new DocReference(t, e),
            r = new DocReference(t, e + 1),
            o = documentKeySet();
        return this.refsByTarget.forEachInRange([n, r], function (e) {
          o = o.add(e.key);
        }), o;
      }, e.prototype.setGarbageCollector = function (e) {
        this.garbageCollector = e;
      }, e.prototype.containsKey = function (e, t) {
        var n = new DocReference(t, 0),
            r = this.refsByKey.firstAfterOrEqual(n);
        return PersistencePromise.resolve(null !== r && t.isEqual(r.key));
      }, e;
    }(),
        DocReference = function () {
      function e(e, t) {
        this.key = e, this.targetOrBatchId = t;
      }

      return e.compareByKey = function (e, t) {
        return DocumentKey.comparator(e.key, t.key) || primitiveComparator(e.targetOrBatchId, t.targetOrBatchId);
      }, e.compareByTargetId = function (e, t) {
        return primitiveComparator(e.targetOrBatchId, t.targetOrBatchId) || DocumentKey.comparator(e.key, t.key);
      }, e;
    }(),
        RESERVED_BITS = 1,
        GeneratorIds;

    !function (e) {
      e[e.LocalStore = 0] = "LocalStore", e[e.SyncEngine = 1] = "SyncEngine";
    }(GeneratorIds || (GeneratorIds = {}));

    var TargetIdGenerator = function () {
      function e(e, t) {
        void 0 === t && (t = 0), this.generatorId = e;
        var n = t >> RESERVED_BITS << RESERVED_BITS,
            r = t - n;
        this.previousId = r >= e ? n | this.generatorId : (n | this.generatorId) - (1 << RESERVED_BITS);
      }

      return e.prototype.next = function () {
        return this.previousId += 1 << RESERVED_BITS, this.previousId;
      }, e.forLocalStore = function (t) {
        return void 0 === t && (t = 0), new e(GeneratorIds.LocalStore, t);
      }, e.forSyncEngine = function () {
        return new e(GeneratorIds.SyncEngine);
      }, e;
    }(),
        AddedLimboDocument = function () {
      return function (e) {
        this.key = e;
      };
    }(),
        RemovedLimboDocument = function () {
      return function (e) {
        this.key = e;
      };
    }(),
        View = function () {
      function e(e, t) {
        this.query = e, this._syncedDocuments = t, this.syncState = null, this.current = !1, this.limboDocuments = documentKeySet(), this.mutatedKeys = documentKeySet(), this.documentSet = new DocumentSet(e.docComparator.bind(e));
      }

      return Object.defineProperty(e.prototype, "syncedDocuments", {
        get: function get() {
          return this._syncedDocuments;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.computeDocChanges = function (e, t) {
        var n = this,
            r = t ? t.changeSet : new DocumentChangeSet(),
            o = t ? t.documentSet : this.documentSet,
            i = t ? t.mutatedKeys : this.mutatedKeys,
            a = o,
            s = !1,
            u = this.query.hasLimit() && o.size === this.query.limit ? o.last() : null;
        if (e.inorderTraversal(function (e, t) {
          var c = o.get(e),
              h = t instanceof Document ? t : null;

          if (h && (assert(e.isEqual(h.key), "Mismatching keys found in document changes: " + e + " != " + h.key), h = n.query.matches(h) ? h : null), h ? (a = a.add(h), i = h.hasLocalMutations ? i.add(e) : i["delete"](e)) : (a = a["delete"](e), i = i["delete"](e)), c && h) {
            var l = c.data.isEqual(h.data);
            l && c.hasLocalMutations === h.hasLocalMutations || (l ? r.track({
              type: ChangeType.Metadata,
              doc: h
            }) : r.track({
              type: ChangeType.Modified,
              doc: h
            }), u && n.query.docComparator(h, u) > 0 && (s = !0));
          } else !c && h ? r.track({
            type: ChangeType.Added,
            doc: h
          }) : c && !h && (r.track({
            type: ChangeType.Removed,
            doc: c
          }), u && (s = !0));
        }), this.query.hasLimit()) for (; a.size > this.query.limit;) {
          var c = a.last();
          a = a["delete"](c.key), r.track({
            type: ChangeType.Removed,
            doc: c
          });
        }
        return assert(!s || !t, "View was refilled using docs that themselves needed refilling."), {
          documentSet: a,
          changeSet: r,
          needsRefill: s,
          mutatedKeys: i
        };
      }, e.prototype.applyChanges = function (e, t) {
        var n = this;
        assert(!e.needsRefill, "Cannot apply changes that need a refill");
        var r = this.documentSet;
        this.documentSet = e.documentSet, this.mutatedKeys = e.mutatedKeys;
        var o = e.changeSet.getChanges();
        o.sort(function (e, t) {
          return compareChangeType(e.type, t.type) || n.query.docComparator(e.doc, t.doc);
        }), this.applyTargetChange(t);
        var i = this.updateLimboDocuments(),
            a = 0 === this.limboDocuments.size && this.current ? SyncState.Synced : SyncState.Local,
            s = a !== this.syncState;
        return this.syncState = a, 0 !== o.length || s ? {
          snapshot: new ViewSnapshot(this.query, e.documentSet, r, o, a === SyncState.Local, !e.mutatedKeys.isEmpty(), s, !1),
          limboChanges: i
        } : {
          limboChanges: i
        };
      }, e.prototype.applyOnlineStateChange = function (e) {
        return this.current && e === OnlineState.Offline ? (this.current = !1, this.applyChanges({
          documentSet: this.documentSet,
          changeSet: new DocumentChangeSet(),
          mutatedKeys: this.mutatedKeys,
          needsRefill: !1
        })) : {
          limboChanges: []
        };
      }, e.prototype.shouldBeInLimbo = function (e) {
        return !this._syncedDocuments.has(e) && !!this.documentSet.has(e) && !this.documentSet.get(e).hasLocalMutations;
      }, e.prototype.applyTargetChange = function (e) {
        if (e) {
          var t = e.mapping;

          switch (t instanceof ResetMapping ? this._syncedDocuments = t.documents : t instanceof UpdateMapping && (this._syncedDocuments = t.applyToKeySet(this._syncedDocuments)), e.currentStatusUpdate) {
            case CurrentStatusUpdate.MarkCurrent:
              this.current = !0;
              break;

            case CurrentStatusUpdate.MarkNotCurrent:
              this.current = !1;
              break;

            case CurrentStatusUpdate.None:
              break;

            default:
              fail("Unknown current status update: " + e.currentStatusUpdate);
          }
        }
      }, e.prototype.updateLimboDocuments = function () {
        var e = this;
        if (!this.current) return [];
        var t = this.limboDocuments;
        this.limboDocuments = documentKeySet(), this.documentSet.forEach(function (t) {
          e.shouldBeInLimbo(t.key) && (e.limboDocuments = e.limboDocuments.add(t.key));
        });
        var n = [];
        return t.forEach(function (t) {
          e.limboDocuments.has(t) || n.push(new RemovedLimboDocument(t));
        }), this.limboDocuments.forEach(function (e) {
          t.has(e) || n.push(new AddedLimboDocument(e));
        }), n;
      }, e;
    }();

    var LOG_TAG$1 = "SyncEngine",
        QueryView = function () {
      return function (e, t, n, r) {
        this.query = e, this.targetId = t, this.resumeToken = n, this.view = r;
      };
    }(),
        SyncEngine = function () {
      function e(e, t, n) {
        this.localStore = e, this.remoteStore = t, this.currentUser = n, this.viewHandler = null, this.errorHandler = null, this.queryViewsByQuery = new ObjectMap(function (e) {
          return e.canonicalId();
        }), this.queryViewsByTarget = {}, this.limboTargetsByKey = new SortedMap(DocumentKey.comparator), this.limboKeysByTarget = {}, this.limboDocumentRefs = new ReferenceSet(), this.limboCollector = new EagerGarbageCollector(), this.mutationUserCallbacks = {}, this.targetIdGenerator = TargetIdGenerator.forSyncEngine();
      }

      return e.prototype.subscribe = function (e, t) {
        assert(null !== e && null !== t, "View and error handlers cannot be null"), assert(null === this.viewHandler && null === this.errorHandler, "SyncEngine already has a subscriber."), this.viewHandler = e, this.errorHandler = t, this.limboCollector.addGarbageSource(this.limboDocumentRefs);
      }, e.prototype.listen = function (e) {
        var t = this;
        return this.assertSubscribed("listen()"), assert(!this.queryViewsByQuery.has(e), "We already listen to the query: " + e), this.localStore.allocateQuery(e).then(function (n) {
          return t.localStore.executeQuery(e).then(function (r) {
            return t.localStore.remoteDocumentKeys(n.targetId).then(function (o) {
              var i = new View(e, o),
                  a = i.computeDocChanges(r),
                  s = i.applyChanges(a);
              assert(0 === s.limboChanges.length, "View returned limbo docs before target ack from the server."), assert(!!s.snapshot, "applyChanges for new view should always return a snapshot");
              var u = new QueryView(e, n.targetId, n.resumeToken, i);
              t.queryViewsByQuery.set(e, u), t.queryViewsByTarget[n.targetId] = u, t.viewHandler([s.snapshot]), t.remoteStore.listen(n);
            });
          }).then(function () {
            return n.targetId;
          });
        });
      }, e.prototype.unlisten = function (e) {
        var t = this;
        this.assertSubscribed("unlisten()");
        var n = this.queryViewsByQuery.get(e);
        return assert(!!n, "Trying to unlisten on query not found:" + e), this.localStore.releaseQuery(e).then(function () {
          return t.remoteStore.unlisten(n.targetId), t.removeAndCleanupQuery(n).then(function () {
            return t.localStore.collectGarbage();
          });
        });
      }, e.prototype.write = function (e, t) {
        var n = this;
        return this.assertSubscribed("write()"), this.localStore.localWrite(e).then(function (e) {
          return n.addMutationCallback(e.batchId, t), n.emitNewSnapsAndNotifyLocalStore(e.changes);
        }).then(function () {
          return n.remoteStore.fillWritePipeline();
        });
      }, e.prototype.wrapUpdateFunctionError = function (e) {
        return e;
      }, e.prototype.runTransaction = function (e, t) {
        var n = this;
        void 0 === t && (t = 5), assert(t >= 0, "Got negative number of retries for transaction.");
        var r = this.remoteStore.createTransaction();
        return function () {
          try {
            var t = e(r);
            return !isNullOrUndefined(t) && t["catch"] && t.then ? t["catch"](function (e) {
              return Promise.reject(n.wrapUpdateFunctionError(e));
            }) : Promise.reject(Error("Transaction callback must return a Promise"));
          } catch (e) {
            return Promise.reject(n.wrapUpdateFunctionError(e));
          }
        }().then(function (o) {
          return r.commit().then(function () {
            return o;
          })["catch"](function (r) {
            return 0 === t ? Promise.reject(r) : n.runTransaction(e, t - 1);
          });
        });
      }, e.prototype.applyRemoteEvent = function (e) {
        var t = this;
        return this.assertSubscribed("applyRemoteEvent()"), forEachNumber(e.targetChanges, function (n, r) {
          var o = t.limboKeysByTarget[n];
          if (o) e.synthesizeDeleteForLimboTargetChange(r, o);else {
            var i = t.queryViewsByTarget[n];
            assert(!!i, "Missing QueryView for non-limbo query: " + n), r.mapping.filterUpdates(i.view.syncedDocuments);
          }
        }), this.localStore.applyRemoteEvent(e).then(function (n) {
          return t.emitNewSnapsAndNotifyLocalStore(n, e);
        });
      }, e.prototype.applyOnlineStateChange = function (e) {
        var t = [];
        this.queryViewsByQuery.forEach(function (n, r) {
          var o = r.view.applyOnlineStateChange(e);
          assert(0 === o.limboChanges.length, "OnlineState should not affect limbo documents."), o.snapshot && t.push(o.snapshot);
        }), this.viewHandler(t);
      }, e.prototype.rejectListen = function (e, t) {
        var n = this;
        this.assertSubscribed("rejectListens()");
        var r = this.limboKeysByTarget[e];

        if (r) {
          this.limboTargetsByKey = this.limboTargetsByKey.remove(r), delete this.limboKeysByTarget[e];
          var o = new SortedMap(DocumentKey.comparator);
          o = o.insert(r, new NoDocument(r, SnapshotVersion.forDeletedDoc()));
          var i = documentKeySet().add(r),
              a = new RemoteEvent(SnapshotVersion.MIN, {}, o, i);
          return this.applyRemoteEvent(a);
        }

        var s = this.queryViewsByTarget[e];
        return assert(!!s, "Unknown targetId: " + e), this.localStore.releaseQuery(s.query).then(function () {
          return n.removeAndCleanupQuery(s).then(function () {
            n.errorHandler(s.query, t);
          });
        });
      }, e.prototype.applySuccessfulWrite = function (e) {
        var t = this;
        return this.assertSubscribed("applySuccessfulWrite()"), this.processUserCallback(e.batch.batchId, null), this.localStore.acknowledgeBatch(e).then(function (e) {
          return t.emitNewSnapsAndNotifyLocalStore(e);
        });
      }, e.prototype.rejectFailedWrite = function (e, t) {
        var n = this;
        return this.assertSubscribed("rejectFailedWrite()"), this.processUserCallback(e, t), this.localStore.rejectBatch(e).then(function (e) {
          return n.emitNewSnapsAndNotifyLocalStore(e);
        });
      }, e.prototype.addMutationCallback = function (e, t) {
        var n = this.mutationUserCallbacks[this.currentUser.toKey()];
        n || (n = new SortedMap(primitiveComparator)), n = n.insert(e, t), this.mutationUserCallbacks[this.currentUser.toKey()] = n;
      }, e.prototype.processUserCallback = function (e, t) {
        var n = this.mutationUserCallbacks[this.currentUser.toKey()];

        if (n) {
          var r = n.get(e);
          r && (assert(e === n.minKey(), "Mutation callbacks processed out-of-order?"), t ? r.reject(t) : r.resolve(), n = n.remove(e)), this.mutationUserCallbacks[this.currentUser.toKey()] = n;
        }
      }, e.prototype.removeAndCleanupQuery = function (e) {
        return this.queryViewsByQuery["delete"](e.query), delete this.queryViewsByTarget[e.targetId], this.limboDocumentRefs.removeReferencesForId(e.targetId), this.gcLimboDocuments();
      }, e.prototype.updateTrackedLimbos = function (e, t) {
        for (var n = 0, r = t; n < r.length; n++) {
          var o = r[n];
          o instanceof AddedLimboDocument ? (this.limboDocumentRefs.addReference(o.key, e), this.trackLimboChange(o)) : o instanceof RemovedLimboDocument ? (debug(LOG_TAG$1, "Document no longer in limbo: " + o.key), this.limboDocumentRefs.removeReference(o.key, e)) : fail("Unknown limbo change: " + JSON.stringify(o));
        }

        return this.gcLimboDocuments();
      }, e.prototype.trackLimboChange = function (e) {
        var t = e.key;

        if (!this.limboTargetsByKey.get(t)) {
          debug(LOG_TAG$1, "New document in limbo: " + t);
          var n = this.targetIdGenerator.next(),
              r = Query.atPath(t.path);
          this.limboKeysByTarget[n] = t, this.remoteStore.listen(new QueryData(r, n, QueryPurpose.Listen)), this.limboTargetsByKey = this.limboTargetsByKey.insert(t, n);
        }
      }, e.prototype.gcLimboDocuments = function () {
        var e = this;
        return this.limboCollector.collectGarbage(null).next(function (t) {
          t.forEach(function (t) {
            var n = e.limboTargetsByKey.get(t);
            null !== n && (e.remoteStore.unlisten(n), e.limboTargetsByKey = e.limboTargetsByKey.remove(t), delete e.limboKeysByTarget[n]);
          });
        }).toPromise();
      }, e.prototype.currentLimboDocs = function () {
        return this.limboTargetsByKey;
      }, e.prototype.emitNewSnapsAndNotifyLocalStore = function (e, t) {
        var n = this,
            r = [],
            o = [],
            i = [];
        return this.queryViewsByQuery.forEach(function (a, s) {
          i.push(Promise.resolve().then(function () {
            var t = s.view.computeDocChanges(e);
            return t.needsRefill ? n.localStore.executeQuery(s.query).then(function (e) {
              return s.view.computeDocChanges(e, t);
            }) : t;
          }).then(function (e) {
            var i = t && t.targetChanges[s.targetId],
                a = s.view.applyChanges(e, i);
            return n.updateTrackedLimbos(s.targetId, a.limboChanges).then(function () {
              if (a.snapshot) {
                r.push(a.snapshot);
                var e = LocalViewChanges.fromSnapshot(a.snapshot);
                o.push(e);
              }
            });
          }));
        }), Promise.all(i).then(function () {
          return n.viewHandler(r), n.localStore.notifyLocalViewChanges(o);
        }).then(function () {
          return n.localStore.collectGarbage();
        });
      }, e.prototype.assertSubscribed = function (e) {
        assert(null !== this.viewHandler && null !== this.errorHandler, "Trying to call " + e + " before calling subscribe().");
      }, e.prototype.handleUserChange = function (e) {
        var t = this;
        return this.currentUser = e, this.localStore.handleUserChange(e).then(function (e) {
          return t.emitNewSnapsAndNotifyLocalStore(e);
        }).then(function () {
          return t.remoteStore.handleUserChange(e);
        });
      }, e;
    }(),
        BATCHID_UNKNOWN = -1,
        MutationBatch = function () {
      function e(e, t, n) {
        this.batchId = e, this.localWriteTime = t, this.mutations = n;
      }

      return e.prototype.applyToRemoteDocument = function (e, t, n) {
        t && assert(t.key.isEqual(e), "applyToRemoteDocument: key " + e + " should match maybeDoc key\n        " + t.key);
        var r = n.mutationResults;
        assert(r.length === this.mutations.length, "Mismatch between mutations length\n      (" + this.mutations.length + ") and mutation results length\n      (" + r.length + ").");

        for (var o = 0; o < this.mutations.length; o++) {
          var i = this.mutations[o];

          if (i.key.isEqual(e)) {
            var a = r[o];
            t = i.applyToRemoteDocument(t, a);
          }
        }

        return t;
      }, e.prototype.applyToLocalView = function (e, t) {
        t && assert(t.key.isEqual(e), "applyToLocalDocument: key " + e + " should match maybeDoc key\n        " + t.key);

        for (var n = t, r = 0; r < this.mutations.length; r++) {
          var o = this.mutations[r];
          o.key.isEqual(e) && (t = o.applyToLocalView(t, n, this.localWriteTime));
        }

        return t;
      }, e.prototype.keys = function () {
        for (var e = documentKeySet(), t = 0, n = this.mutations; t < n.length; t++) {
          var r = n[t];
          e = e.add(r.key);
        }

        return e;
      }, e.prototype.isEqual = function (e) {
        return this.batchId === e.batchId && arrayEquals(this.mutations, e.mutations);
      }, e.prototype.isTombstone = function () {
        return 0 === this.mutations.length;
      }, e.prototype.toTombstone = function () {
        return new e(this.batchId, this.localWriteTime, []);
      }, e;
    }(),
        MutationBatchResult = function () {
      function e(e, t, n, r, o) {
        this.batch = e, this.commitVersion = t, this.mutationResults = n, this.streamToken = r, this.docVersions = o;
      }

      return e.from = function (t, n, r, o) {
        assert(t.mutations.length === r.length, "Mutations sent " + t.mutations.length + " must equal results received " + r.length);

        for (var i = documentVersionMap(), a = t.mutations, s = 0; s < a.length; s++) {
          var u = r[s].version;
          null === u && (u = n), i = i.insert(a[s].key, u);
        }

        return new e(t, n, r, o, i);
      }, e;
    }(),
        escapeChar = "",
        encodedSeparatorChar = "",
        encodedNul = "",
        encodedEscape = "";

    var SCHEMA_VERSION = 2;

    var DbTimestamp = function () {
      return function (e, t) {
        this.seconds = e, this.nanoseconds = t;
      };
    }(),
        DbOwner = function () {
      function e(e, t) {
        this.ownerId = e, this.leaseTimestampMs = t;
      }

      return e.store = "owner", e;
    }();

    var DbMutationQueue = function () {
      function e(e, t, n) {
        this.userId = e, this.lastAcknowledgedBatchId = t, this.lastStreamToken = n;
      }

      return e.store = "mutationQueues", e.keyPath = "userId", e;
    }(),
        DbMutationBatch = function () {
      function e(e, t, n, r) {
        this.userId = e, this.batchId = t, this.localWriteTimeMs = n, this.mutations = r;
      }

      return e.store = "mutations", e.keyPath = ["userId", "batchId"], e;
    }();

    var DbDocumentMutation = function () {
      function e() {}

      return e.prefixForUser = function (e) {
        return [e];
      }, e.prefixForPath = function (e, t) {
        return [e, encode(t)];
      }, e.key = function (e, t, n) {
        return [e, encode(t), n];
      }, e.store = "documentMutations", e.PLACEHOLDER = new e(), e;
    }();

    var DbNoDocument = function () {
      return function (e, t) {
        this.path = e, this.readTime = t;
      };
    }(),
        DbRemoteDocument = function () {
      function e(e, t) {
        this.noDocument = e, this.document = t;
      }

      return e.store = "remoteDocuments", e;
    }(),
        DbTarget = function () {
      function e(e, t, n, r, o, i) {
        this.targetId = e, this.canonicalId = t, this.readTime = n, this.resumeToken = r, this.lastListenSequenceNumber = o, this.query = i;
      }

      return e.store = "targets", e.keyPath = "targetId", e.queryTargetsIndexName = "queryTargetsIndex", e.queryTargetsKeyPath = ["canonicalId", "targetId"], e;
    }(),
        DbTargetDocument = function () {
      function e(e, t) {
        this.targetId = e, this.path = t;
      }

      return e.store = "targetDocuments", e.keyPath = ["targetId", "path"], e.documentTargetsIndex = "documentTargetsIndex", e.documentTargetsKeyPath = ["path", "targetId"], e;
    }(),
        DbTargetGlobal = function () {
      function e(e, t, n, r) {
        this.highestTargetId = e, this.highestListenSequenceNumber = t, this.lastRemoteSnapshotVersion = n, this.targetCount = r;
      }

      return e.key = "targetGlobalKey", e.store = "targetGlobal", e;
    }();

    var ALL_STORES = [DbMutationQueue.store, DbMutationBatch.store, DbDocumentMutation.store, DbRemoteDocument.store, DbTarget.store, DbOwner.store, DbTargetGlobal.store, DbTargetDocument.store],
        Deferred$1 = function () {
      return function () {
        var e = this;
        this.promise = new Promise(function (t, n) {
          e.resolve = t, e.reject = n;
        });
      };
    }(),
        LOG_TAG$2 = "SimpleDb",
        SimpleDb = function () {
      function e(e) {
        this.db = e;
      }

      return e.openOrCreate = function (t, n, r) {
        return assert(e.isAvailable(), "IndexedDB not supported in current environment."), debug(LOG_TAG$2, "Opening database:", t), new PersistencePromise(function (o, i) {
          var a = window.indexedDB.open(t, n);
          a.onsuccess = function (t) {
            var n = t.target.result;
            o(new e(n));
          }, a.onerror = function (e) {
            i(e.target.error);
          }, a.onupgradeneeded = function (e) {
            debug(LOG_TAG$2, 'Database "' + t + '" requires upgrade from version:', e.oldVersion);
            var n = e.target.result,
                o = new SimpleDbTransaction(a.transaction);
            r(n, o, e.oldVersion, SCHEMA_VERSION).next(function () {
              debug(LOG_TAG$2, "Database upgrade to version " + SCHEMA_VERSION + " complete");
            });
          };
        }).toPromise();
      }, e["delete"] = function (e) {
        return debug(LOG_TAG$2, "Removing database:", e), wrapRequest(window.indexedDB.deleteDatabase(e)).toPromise();
      }, e.isAvailable = function () {
        if ("undefined" == typeof window || null == window.indexedDB) return !1;
        if (void 0 === window.navigator) return "YES" === process.env.USE_MOCK_PERSISTENCE;
        var e = window.navigator.userAgent;
        return !(e.indexOf("MSIE ") > 0 || e.indexOf("Trident/") > 0 || e.indexOf("Edge/") > 0);
      }, e.prototype.runTransaction = function (e, t, n) {
        var r = SimpleDbTransaction.open(this.db, e, t),
            o = n(r)["catch"](function (e) {
          r.abort(e);
        }).toPromise();
        return r.completionPromise.then(function () {
          return o;
        });
      }, e.prototype.close = function () {
        this.db.close();
      }, e;
    }(),
        IterationController = function () {
      function e(e) {
        this.dbCursor = e, this.shouldStop = !1, this.nextKey = null;
      }

      return Object.defineProperty(e.prototype, "isDone", {
        get: function get() {
          return this.shouldStop;
        },
        enumerable: !0,
        configurable: !0
      }), Object.defineProperty(e.prototype, "skipToKey", {
        get: function get() {
          return this.nextKey;
        },
        enumerable: !0,
        configurable: !0
      }), Object.defineProperty(e.prototype, "cursor", {
        set: function set(e) {
          this.dbCursor = e;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.done = function () {
        this.shouldStop = !0;
      }, e.prototype.skip = function (e) {
        this.nextKey = e;
      }, e.prototype["delete"] = function () {
        return wrapRequest(this.dbCursor["delete"]());
      }, e;
    }(),
        SimpleDbTransaction = function () {
      function e(e) {
        var t = this;
        this.transaction = e, this.aborted = !1, this.completionDeferred = new Deferred$1(), this.transaction.oncomplete = function () {
          t.completionDeferred.resolve();
        }, this.transaction.onabort = function () {
          e.error ? t.completionDeferred.reject(e.error) : t.completionDeferred.resolve();
        }, this.transaction.onerror = function (e) {
          t.completionDeferred.reject(e.target.error);
        };
      }

      return e.open = function (t, n, r) {
        return new e(t.transaction(r, n));
      }, Object.defineProperty(e.prototype, "completionPromise", {
        get: function get() {
          return this.completionDeferred.promise;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.abort = function (e) {
        e && this.completionDeferred.reject(e), this.aborted || (debug(LOG_TAG$2, "Aborting transaction: %s", e ? e.message : "Client-initiated abort"), this.aborted = !0, this.transaction.abort());
      }, e.prototype.store = function (e) {
        var t = this.transaction.objectStore(e);
        return assert(!!t, "Object store not part of transaction: " + e), new SimpleDbStore(t);
      }, e;
    }(),
        SimpleDbStore = function () {
      function e(e) {
        this.store = e;
      }

      return e.prototype.put = function (e, t) {
        var n;
        return void 0 !== t ? (debug(LOG_TAG$2, "PUT", this.store.name, e, t), n = this.store.put(t, e)) : (debug(LOG_TAG$2, "PUT", this.store.name, "<auto-key>", e), n = this.store.put(e)), wrapRequest(n);
      }, e.prototype.get = function (e) {
        var t = this;
        return wrapRequest(this.store.get(e)).next(function (n) {
          return void 0 === n && (n = null), debug(LOG_TAG$2, "GET", t.store.name, e, n), n;
        });
      }, e.prototype["delete"] = function (e) {
        return debug(LOG_TAG$2, "DELETE", this.store.name, e), wrapRequest(this.store["delete"](e));
      }, e.prototype.count = function () {
        return debug(LOG_TAG$2, "COUNT", this.store.name), wrapRequest(this.store.count());
      }, e.prototype.loadAll = function (e, t) {
        var n = this.cursor(this.options(e, t)),
            r = [];
        return this.iterateCursor(n, function (e, t) {
          r.push(t);
        }).next(function () {
          return r;
        });
      }, e.prototype.deleteAll = function (e, t) {
        debug(LOG_TAG$2, "DELETE ALL", this.store.name);
        var n = this.options(e, t);
        n.keysOnly = !1;
        var r = this.cursor(n);
        return this.iterateCursor(r, function (e, t, n) {
          return n["delete"]();
        });
      }, e.prototype.iterate = function (e, t) {
        var n;
        t ? n = e : (n = {}, t = e);
        var r = this.cursor(n);
        return this.iterateCursor(r, t);
      }, e.prototype.iterateCursor = function (e, t) {
        var n = [];
        return new PersistencePromise(function (r, o) {
          e.onerror = function (e) {
            o(e.target.error);
          }, e.onsuccess = function (e) {
            var o = e.target.result;

            if (o) {
              var i = new IterationController(o),
                  a = t(o.primaryKey, o.value, i);
              a instanceof PersistencePromise && n.push(a), i.isDone ? r() : null === i.skipToKey ? o["continue"]() : o["continue"](i.skipToKey);
            } else r();
          };
        }).next(function () {
          return PersistencePromise.waitFor(n);
        });
      }, e.prototype.options = function (e, t) {
        var n = void 0;
        return void 0 !== e && ("string" == typeof e ? n = e : (assert(void 0 === t, "3rd argument must not be defined if 2nd is a range."), t = e)), {
          index: n,
          range: t
        };
      }, e.prototype.cursor = function (e) {
        var t = "next";

        if (e.reverse && (t = "prev"), e.index) {
          var n = this.store.index(e.index);
          return e.keysOnly ? n.openKeyCursor(e.range, t) : n.openCursor(e.range, t);
        }

        return this.store.openCursor(e.range, t);
      }, e;
    }();

    var IndexedDbMutationQueue = function () {
      function e(e, t) {
        this.userId = e, this.serializer = t, this.garbageCollector = null;
      }

      return e.forUser = function (t, n) {
        return assert("" !== t.uid, "UserID must not be an empty string."), new e(t.isAuthenticated() ? t.uid : "", n);
      }, e.prototype.start = function (t) {
        var n = this;
        return e.loadNextBatchIdFromDb(t).next(function (e) {
          return n.nextBatchId = e, mutationQueuesStore(t).get(n.userId);
        }).next(function (e) {
          return e || (e = new DbMutationQueue(n.userId, BATCHID_UNKNOWN, "")), n.metadata = e, n.metadata.lastAcknowledgedBatchId >= n.nextBatchId ? n.checkEmpty(t).next(function (e) {
            return assert(e, "Reset nextBatchID is only possible when the queue is empty"), n.metadata.lastAcknowledgedBatchId = BATCHID_UNKNOWN, mutationQueuesStore(t).put(n.metadata);
          }) : PersistencePromise.resolve();
        });
      }, e.loadNextBatchIdFromDb = function (e) {
        var t = BATCHID_UNKNOWN;
        return mutationsStore(e).iterate({
          reverse: !0
        }, function (e, n, r) {
          var o = e[0];
          if (e[1] > t && (t = n.batchId), "" === o) r.done();else {
            var i = immediatePredecessor(o);
            r.skip([i]);
          }
        }).next(function () {
          return t + 1;
        });
      }, e.prototype.checkEmpty = function (e) {
        var t = !0,
            n = IDBKeyRange.bound(this.keyForBatchId(Number.NEGATIVE_INFINITY), this.keyForBatchId(Number.POSITIVE_INFINITY));
        return mutationsStore(e).iterate({
          range: n
        }, function (e, n, r) {
          t = !1, r.done();
        }).next(function () {
          return t;
        });
      }, e.prototype.getNextBatchId = function (e) {
        return PersistencePromise.resolve(this.nextBatchId);
      }, e.prototype.getHighestAcknowledgedBatchId = function (e) {
        return PersistencePromise.resolve(this.metadata.lastAcknowledgedBatchId);
      }, e.prototype.acknowledgeBatch = function (e, t, n) {
        var r = t.batchId;
        return assert(r > this.metadata.lastAcknowledgedBatchId, "Mutation batchIDs must be acknowledged in order"), this.metadata.lastAcknowledgedBatchId = r, this.metadata.lastStreamToken = convertStreamToken(n), mutationQueuesStore(e).put(this.metadata);
      }, e.prototype.getLastStreamToken = function (e) {
        return PersistencePromise.resolve(this.metadata.lastStreamToken);
      }, e.prototype.setLastStreamToken = function (e, t) {
        return this.metadata.lastStreamToken = convertStreamToken(t), mutationQueuesStore(e).put(this.metadata);
      }, e.prototype.addMutationBatch = function (e, t, n) {
        var r = this,
            o = this.nextBatchId;
        this.nextBatchId++;
        var i = new MutationBatch(o, t, n),
            a = this.serializer.toDbMutationBatch(this.userId, i);
        return mutationsStore(e).put(a).next(function () {
          for (var t = [], i = 0, a = n; i < a.length; i++) {
            var s = a[i],
                u = DbDocumentMutation.key(r.userId, s.key.path, o);
            t.push(documentMutationsStore(e).put(u, DbDocumentMutation.PLACEHOLDER));
          }

          return PersistencePromise.waitFor(t);
        }).next(function () {
          return i;
        });
      }, e.prototype.lookupMutationBatch = function (e, t) {
        var n = this;
        return mutationsStore(e).get(this.keyForBatchId(t)).next(function (e) {
          return e ? n.serializer.fromDbMutationBatch(e) : null;
        });
      }, e.prototype.getNextMutationBatchAfterBatchId = function (e, t) {
        var n = this,
            r = Math.max(t, this.metadata.lastAcknowledgedBatchId) + 1,
            o = IDBKeyRange.lowerBound(this.keyForBatchId(r)),
            i = null;
        return mutationsStore(e).iterate({
          range: o
        }, function (e, t, o) {
          t.userId === n.userId && (assert(t.batchId >= r, "Should have found mutation after " + r), i = n.serializer.fromDbMutationBatch(t)), o.done();
        }).next(function () {
          return i;
        });
      }, e.prototype.getAllMutationBatches = function (e) {
        var t = this,
            n = IDBKeyRange.bound(this.keyForBatchId(BATCHID_UNKNOWN), this.keyForBatchId(Number.POSITIVE_INFINITY));
        return mutationsStore(e).loadAll(n).next(function (e) {
          return e.map(function (e) {
            return t.serializer.fromDbMutationBatch(e);
          });
        });
      }, e.prototype.getAllMutationBatchesThroughBatchId = function (e, t) {
        var n = this,
            r = IDBKeyRange.bound(this.keyForBatchId(BATCHID_UNKNOWN), this.keyForBatchId(t));
        return mutationsStore(e).loadAll(r).next(function (e) {
          return e.map(function (e) {
            return n.serializer.fromDbMutationBatch(e);
          });
        });
      }, e.prototype.getAllMutationBatchesAffectingDocumentKey = function (e, t) {
        var n = this,
            r = DbDocumentMutation.prefixForPath(this.userId, t.path),
            o = IDBKeyRange.lowerBound(r),
            i = [];
        return documentMutationsStore(e).iterate({
          range: o
        }, function (r, o, a) {
          var s = r[0],
              u = r[1],
              c = r[2],
              h = decode$1(u);

          if (s === n.userId && t.path.isEqual(h)) {
            var l = n.keyForBatchId(c);
            return mutationsStore(e).get(l).next(function (e) {
              null === e && fail("Dangling document-mutation reference found: " + r + " which points to " + l), i.push(n.serializer.fromDbMutationBatch(e));
            });
          }

          a.done();
        }).next(function () {
          return i;
        });
      }, e.prototype.getAllMutationBatchesAffectingQuery = function (e, t) {
        var n = this;
        assert(!t.isDocumentQuery(), "Document queries shouldn't go down this path");
        var r = t.path,
            o = r.length + 1,
            i = DbDocumentMutation.prefixForPath(this.userId, r),
            a = IDBKeyRange.lowerBound(i),
            s = new SortedSet(primitiveComparator);
        return documentMutationsStore(e).iterate({
          range: a
        }, function (e, t, i) {
          var a = e[0],
              u = e[1],
              c = e[2],
              h = decode$1(u);
          a === n.userId && r.isPrefixOf(h) ? h.length === o && (s = s.add(c)) : i.done();
        }).next(function () {
          var t = [],
              r = [];
          return s.forEach(function (o) {
            var i = n.keyForBatchId(o);
            r.push(mutationsStore(e).get(i).next(function (e) {
              null === e && fail("Dangling document-mutation reference found, which points to " + i), t.push(n.serializer.fromDbMutationBatch(e));
            }));
          }), PersistencePromise.waitFor(r).next(function () {
            return t;
          });
        });
      }, e.prototype.removeMutationBatches = function (e, t) {
        for (var n = mutationsStore(e), r = documentMutationsStore(e), o = [], i = function i(e) {
          var t = IDBKeyRange.only(a.keyForBatchId(e.batchId)),
              i = 0,
              s = n.iterate({
            range: t
          }, function (e, t, n) {
            return i++, n["delete"]();
          });
          o.push(s.next(function () {
            assert(1 === i, "Dangling document-mutation reference found: Missing batch " + e.batchId);
          }));

          for (var u = 0, c = e.mutations; u < c.length; u++) {
            var h = c[u],
                l = DbDocumentMutation.key(a.userId, h.key.path, e.batchId);
            o.push(r["delete"](l)), null !== a.garbageCollector && a.garbageCollector.addPotentialGarbageKey(h.key);
          }
        }, a = this, s = 0, u = t; s < u.length; s++) {
          i(u[s]);
        }

        return PersistencePromise.waitFor(o);
      }, e.prototype.performConsistencyCheck = function (e) {
        var t = this;
        return this.checkEmpty(e).next(function (n) {
          if (!n) return PersistencePromise.resolve();
          var r = IDBKeyRange.lowerBound(DbDocumentMutation.prefixForUser(t.userId)),
              o = [];
          return documentMutationsStore(e).iterate({
            range: r
          }, function (e, n, r) {
            if (e[0] === t.userId) {
              var i = decode$1(e[1]);
              o.push(i);
            } else r.done();
          }).next(function () {
            assert(0 === o.length, "Document leak -- detected dangling mutation references when queue is empty. Dangling keys: " + o.map(function (e) {
              return e.canonicalString();
            }));
          });
        });
      }, e.prototype.setGarbageCollector = function (e) {
        this.garbageCollector = e;
      }, e.prototype.containsKey = function (e, t) {
        var n = this,
            r = DbDocumentMutation.prefixForPath(this.userId, t.path),
            o = r[1],
            i = IDBKeyRange.lowerBound(r),
            a = !1;
        return documentMutationsStore(e).iterate({
          range: i,
          keysOnly: !0
        }, function (e, t, r) {
          var i = e[0],
              s = e[1];
          e[2];
          i === n.userId && s === o && (a = !0), r.done();
        }).next(function () {
          return a;
        });
      }, e.prototype.keyForBatchId = function (e) {
        return [this.userId, e];
      }, e;
    }();

    var IndexedDbQueryCache = function () {
      function e(e) {
        this.serializer = e, this.lastRemoteSnapshotVersion = SnapshotVersion.MIN, this.metadata = null, this.garbageCollector = null;
      }

      return e.prototype.start = function (e) {
        var t = this;
        return globalTargetStore(e).get(DbTargetGlobal.key).next(function (e) {
          assert(null !== e, "Missing metadata row that should be added by schema migration."), t.metadata = e;
          var n = e.lastRemoteSnapshotVersion;
          return t.lastRemoteSnapshotVersion = SnapshotVersion.fromTimestamp(new Timestamp(n.seconds, n.nanoseconds)), PersistencePromise.resolve();
        });
      }, e.prototype.getHighestTargetId = function () {
        return this.metadata.highestTargetId;
      }, e.prototype.getLastRemoteSnapshotVersion = function () {
        return this.lastRemoteSnapshotVersion;
      }, e.prototype.setLastRemoteSnapshotVersion = function (e, t) {
        return this.lastRemoteSnapshotVersion = t, this.metadata.lastRemoteSnapshotVersion = t.toTimestamp(), globalTargetStore(e).put(DbTargetGlobal.key, this.metadata);
      }, e.prototype.addQueryData = function (e, t) {
        var n = this;
        return this.saveQueryData(e, t).next(function () {
          return n.metadata.targetCount += 1, n.updateMetadataFromQueryData(t), n.saveMetadata(e);
        });
      }, e.prototype.updateQueryData = function (e, t) {
        var n = this;
        return this.saveQueryData(e, t).next(function () {
          return n.updateMetadataFromQueryData(t) ? n.saveMetadata(e) : PersistencePromise.resolve();
        });
      }, e.prototype.removeQueryData = function (e, t) {
        var n = this;
        return assert(this.metadata.targetCount > 0, "Removing from an empty query cache"), this.removeMatchingKeysForTargetId(e, t.targetId).next(function () {
          return targetsStore(e)["delete"](t.targetId);
        }).next(function () {
          return n.metadata.targetCount -= 1, n.saveMetadata(e);
        });
      }, e.prototype.saveMetadata = function (e) {
        return globalTargetStore(e).put(DbTargetGlobal.key, this.metadata);
      }, e.prototype.saveQueryData = function (e, t) {
        return targetsStore(e).put(this.serializer.toDbTarget(t));
      }, e.prototype.updateMetadataFromQueryData = function (e) {
        var t = !1;
        return e.targetId > this.metadata.highestTargetId && (this.metadata.highestTargetId = e.targetId, t = !0), t;
      }, Object.defineProperty(e.prototype, "count", {
        get: function get() {
          return this.metadata.targetCount;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.getQueryData = function (e, t) {
        var n = this,
            r = t.canonicalId(),
            o = IDBKeyRange.bound([r, Number.NEGATIVE_INFINITY], [r, Number.POSITIVE_INFINITY]),
            i = null;
        return targetsStore(e).iterate({
          range: o,
          index: DbTarget.queryTargetsIndexName
        }, function (e, r, o) {
          var a = n.serializer.fromDbTarget(r);
          t.isEqual(a.query) && (i = a, o.done());
        }).next(function () {
          return i;
        });
      }, e.prototype.addMatchingKeys = function (e, t, n) {
        var r = [],
            o = documentTargetStore(e);
        return t.forEach(function (e) {
          var t = encode(e.path);
          r.push(o.put(new DbTargetDocument(n, t)));
        }), PersistencePromise.waitFor(r);
      }, e.prototype.removeMatchingKeys = function (e, t, n) {
        var r = this,
            o = [],
            i = documentTargetStore(e);
        return t.forEach(function (e) {
          var t = encode(e.path);
          o.push(i["delete"]([n, t])), null !== r.garbageCollector && r.garbageCollector.addPotentialGarbageKey(e);
        }), PersistencePromise.waitFor(o);
      }, e.prototype.removeMatchingKeysForTargetId = function (e, t) {
        var n = documentTargetStore(e),
            r = IDBKeyRange.bound([t], [t + 1], !1, !0);
        return this.notifyGCForRemovedKeys(e, r).next(function () {
          return n["delete"](r);
        });
      }, e.prototype.notifyGCForRemovedKeys = function (e, t) {
        var n = this,
            r = documentTargetStore(e);
        return null !== this.garbageCollector && this.garbageCollector.isEager ? r.iterate({
          range: t,
          keysOnly: !0
        }, function (e, t, r) {
          var o = decode$1(e[1]),
              i = new DocumentKey(o);
          assert(null !== n.garbageCollector, "GarbageCollector for query cache set to null during key removal."), n.garbageCollector.addPotentialGarbageKey(i);
        }) : PersistencePromise.resolve();
      }, e.prototype.getMatchingKeysForTargetId = function (e, t) {
        var n = IDBKeyRange.bound([t], [t + 1], !1, !0),
            r = documentTargetStore(e),
            o = documentKeySet();
        return r.iterate({
          range: n,
          keysOnly: !0
        }, function (e, t, n) {
          var r = decode$1(e[1]),
              i = new DocumentKey(r);
          o = o.add(i);
        }).next(function () {
          return o;
        });
      }, e.prototype.setGarbageCollector = function (e) {
        this.garbageCollector = e;
      }, e.prototype.containsKey = function (e, t) {
        assert(null !== e, "Persistence Transaction cannot be null for query cache containsKey");
        var n = encode(t.path),
            r = IDBKeyRange.bound([n], [immediateSuccessor(n)], !1, !0),
            o = 0;
        return documentTargetStore(e).iterate({
          index: DbTargetDocument.documentTargetsIndex,
          keysOnly: !0,
          range: r
        }, function (e, t, n) {
          o++, n.done();
        }).next(function () {
          return o > 0;
        });
      }, e;
    }();

    var IndexedDbRemoteDocumentCache = function () {
      function e(e) {
        this.serializer = e;
      }

      return e.prototype.addEntry = function (e, t) {
        return remoteDocumentsStore(e).put(dbKey(t.key), this.serializer.toDbRemoteDocument(t));
      }, e.prototype.removeEntry = function (e, t) {
        return remoteDocumentsStore(e)["delete"](dbKey(t));
      }, e.prototype.getEntry = function (e, t) {
        var n = this;
        return remoteDocumentsStore(e).get(dbKey(t)).next(function (e) {
          return e ? n.serializer.fromDbRemoteDocument(e) : null;
        });
      }, e.prototype.getDocumentsMatchingQuery = function (e, t) {
        var n = this,
            r = documentMap(),
            o = t.path.toArray(),
            i = IDBKeyRange.lowerBound(o);
        return remoteDocumentsStore(e).iterate({
          range: i
        }, function (e, o, i) {
          var a = n.serializer.fromDbRemoteDocument(o);
          t.path.isPrefixOf(a.key.path) ? a instanceof Document && t.matches(a) && (r = r.insert(a.key, a)) : i.done();
        }).next(function () {
          return r;
        });
      }, e;
    }();

    var LocalSerializer = function () {
      function e(e) {
        this.remoteSerializer = e;
      }

      return e.prototype.fromDbRemoteDocument = function (e) {
        if (e.document) return this.remoteSerializer.fromDocument(e.document);

        if (e.noDocument) {
          var t = DocumentKey.fromSegments(e.noDocument.path),
              n = e.noDocument.readTime,
              r = new Timestamp(n.seconds, n.nanoseconds);
          return new NoDocument(t, SnapshotVersion.fromTimestamp(r));
        }

        return fail("Unexpected DbRemoteDocument");
      }, e.prototype.toDbRemoteDocument = function (e) {
        if (e instanceof Document) {
          var t = this.remoteSerializer.toDocument(e);
          return new DbRemoteDocument(null, t);
        }

        var n = e.key.path.toArray(),
            r = e.version.toTimestamp(),
            o = new DbTimestamp(r.seconds, r.nanoseconds);
        return new DbRemoteDocument(new DbNoDocument(n, o), null);
      }, e.prototype.toDbMutationBatch = function (e, t) {
        var n = this,
            r = t.mutations.map(function (e) {
          return n.remoteSerializer.toMutation(e);
        });
        return new DbMutationBatch(e, t.batchId, t.localWriteTime.toMillis(), r);
      }, e.prototype.fromDbMutationBatch = function (e) {
        var t = this,
            n = e.mutations.map(function (e) {
          return t.remoteSerializer.fromMutation(e);
        }),
            r = Timestamp.fromMillis(e.localWriteTimeMs);
        return new MutationBatch(e.batchId, r, n);
      }, e.prototype.fromDbTarget = function (e) {
        var t,
            n = new Timestamp(e.readTime.seconds, e.readTime.nanoseconds),
            r = SnapshotVersion.fromTimestamp(n);
        return t = isDocumentQuery(e.query) ? this.remoteSerializer.fromDocumentsTarget(e.query) : this.remoteSerializer.fromQueryTarget(e.query), new QueryData(t, e.targetId, QueryPurpose.Listen, r, e.resumeToken);
      }, e.prototype.toDbTarget = function (e) {
        assert(QueryPurpose.Listen === e.purpose, "Only queries with purpose " + QueryPurpose.Listen + " may be stored, got " + e.purpose);
        var t,
            n,
            r = e.snapshotVersion.toTimestamp(),
            o = new DbTimestamp(r.seconds, r.nanoseconds);
        return t = e.query.isDocumentQuery() ? this.remoteSerializer.toDocumentsTarget(e.query) : this.remoteSerializer.toQueryTarget(e.query), e.resumeToken instanceof Uint8Array ? (assert("YES" === process.env.USE_MOCK_PERSISTENCE, "Persisting non-string stream tokens is only supported with mock persistence ."), n = e.resumeToken.toString()) : n = e.resumeToken, new DbTarget(e.targetId, e.query.canonicalId(), o, n, 0, t);
      }, e;
    }();

    var LOG_TAG$3 = "IndexedDbPersistence",
        OWNER_LEASE_MAX_AGE_MS = 5e3,
        OWNER_LEASE_REFRESH_INTERVAL_MS = 4e3,
        ZOMBIE_OWNER_LOCALSTORAGE_SUFFIX = "zombiedOwnerId",
        EXISTING_OWNER_ERROR_MSG = "There is another tab open with offline persistence enabled. Only one such tab is allowed at a time. The other tab must be closed or persistence must be disabled.",
        UNSUPPORTED_PLATFORM_ERROR_MSG = "This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",
        IndexedDbPersistence = function () {
      function e(t, n) {
        this.ownerId = this.generateOwnerId(), this.dbName = t + e.MAIN_DATABASE, this.serializer = new LocalSerializer(n), this.localStoragePrefix = t;
      }

      return e.prototype.start = function () {
        var t = this;
        return e.isAvailable() ? (assert(!this.started, "IndexedDbPersistence double-started!"), this.started = !0, SimpleDb.openOrCreate(this.dbName, SCHEMA_VERSION, createOrUpgradeDb).then(function (e) {
          t.simpleDb = e;
        }).then(function () {
          return t.tryAcquireOwnerLease();
        }).then(function () {
          t.scheduleOwnerLeaseRefreshes(), t.attachWindowUnloadHook();
        })) : (this.persistenceError = new FirestoreError(Code.UNIMPLEMENTED, UNSUPPORTED_PLATFORM_ERROR_MSG), Promise.reject(this.persistenceError));
      }, e.prototype.shutdown = function (e) {
        var t = this;
        return assert(this.started, "IndexedDbPersistence shutdown without start!"), this.started = !1, this.detachWindowUnloadHook(), this.stopOwnerLeaseRefreshes(), this.releaseOwnerLease().then(function () {
          if (t.simpleDb.close(), e) return SimpleDb["delete"](t.dbName);
        });
      }, e.prototype.getMutationQueue = function (e) {
        return IndexedDbMutationQueue.forUser(e, this.serializer);
      }, e.prototype.getQueryCache = function () {
        return new IndexedDbQueryCache(this.serializer);
      }, e.prototype.getRemoteDocumentCache = function () {
        return new IndexedDbRemoteDocumentCache(this.serializer);
      }, e.prototype.runTransaction = function (e, t) {
        var n = this;
        return this.persistenceError ? Promise.reject(this.persistenceError) : (debug(LOG_TAG$3, "Starting transaction:", e), this.simpleDb.runTransaction("readwrite", ALL_STORES, function (e) {
          return n.ensureOwnerLease(e).next(function () {
            return t(e);
          });
        }));
      }, e.isAvailable = function () {
        return SimpleDb.isAvailable();
      }, e.buildStoragePrefix = function (e) {
        var t = e.databaseId.projectId;
        return e.databaseId.isDefaultDatabase || (t += "." + e.databaseId.database), "firestore/" + e.persistenceKey + "/" + t + "/";
      }, e.prototype.tryAcquireOwnerLease = function () {
        var e = this;
        return this.simpleDb.runTransaction("readwrite", [DbOwner.store], function (t) {
          var n = t.store(DbOwner.store);
          return n.get("owner").next(function (t) {
            if (e.validOwner(t)) return debug(LOG_TAG$3, "Valid owner already. Failing. Current owner:", t), e.persistenceError = new FirestoreError(Code.FAILED_PRECONDITION, EXISTING_OWNER_ERROR_MSG), PersistencePromise.reject(e.persistenceError);
            var r = new DbOwner(e.ownerId, Date.now());
            return debug(LOG_TAG$3, "No valid owner. Acquiring owner lease. Current owner:", t, "New owner:", r), n.put("owner", r);
          });
        });
      }, e.prototype.releaseOwnerLease = function () {
        var e = this;
        return this.simpleDb.runTransaction("readwrite", [DbOwner.store], function (t) {
          var n = t.store(DbOwner.store);
          return n.get("owner").next(function (t) {
            return null !== t && t.ownerId === e.ownerId ? (debug(LOG_TAG$3, "Releasing owner lease."), n["delete"]("owner")) : PersistencePromise.resolve();
          });
        });
      }, e.prototype.ensureOwnerLease = function (e) {
        var t = this;
        return e.store(DbOwner.store).get("owner").next(function (e) {
          return null === e || e.ownerId !== t.ownerId ? (t.persistenceError = new FirestoreError(Code.FAILED_PRECONDITION, EXISTING_OWNER_ERROR_MSG), PersistencePromise.reject(t.persistenceError)) : PersistencePromise.resolve();
        });
      }, e.prototype.validOwner = function (e) {
        var t = Date.now(),
            n = t - OWNER_LEASE_MAX_AGE_MS,
            r = t;
        return null !== e && !(e.leaseTimestampMs < n) && (e.leaseTimestampMs > r ? (error("Persistence owner-lease is in the future. Discarding.", e), !1) : e.ownerId !== this.getZombiedOwnerId());
      }, e.prototype.scheduleOwnerLeaseRefreshes = function () {
        var e = this;
        this.ownerLeaseRefreshHandle = setInterval(function () {
          e.runTransaction("Refresh owner timestamp", function (t) {
            return t.store(DbOwner.store).put("owner", new DbOwner(e.ownerId, Date.now()));
          })["catch"](function (t) {
            error(t), e.stopOwnerLeaseRefreshes();
          });
        }, OWNER_LEASE_REFRESH_INTERVAL_MS);
      }, e.prototype.stopOwnerLeaseRefreshes = function () {
        this.ownerLeaseRefreshHandle && (clearInterval(this.ownerLeaseRefreshHandle), this.ownerLeaseRefreshHandle = null);
      }, e.prototype.attachWindowUnloadHook = function () {
        var e = this;
        "object" == (typeof window === "undefined" ? "undefined" : _typeof(window)) && "function" == typeof window.addEventListener && (this.windowUnloadHandler = function () {
          e.setZombiedOwnerId(e.ownerId), e.shutdown();
        }, window.addEventListener("unload", this.windowUnloadHandler));
      }, e.prototype.detachWindowUnloadHook = function () {
        this.windowUnloadHandler && (assert("object" == (typeof window === "undefined" ? "undefined" : _typeof(window)) && "function" == typeof window.removeEventListener, "Expected 'window.removeEventListener' to be a function"), window.removeEventListener("unload", this.windowUnloadHandler), this.windowUnloadHandler = null);
      }, e.prototype.getZombiedOwnerId = function () {
        try {
          var e = window.localStorage.getItem(this.zombiedOwnerLocalStorageKey());
          return debug(LOG_TAG$3, "Zombied ownerID from LocalStorage:", e), e;
        } catch (e) {
          return error("Failed to get zombie owner id.", e), null;
        }
      }, e.prototype.setZombiedOwnerId = function (e) {
        try {
          null === e ? window.localStorage.removeItem(this.zombiedOwnerLocalStorageKey()) : window.localStorage.setItem(this.zombiedOwnerLocalStorageKey(), e);
        } catch (e) {
          error("Failed to set zombie owner id.", e);
        }
      }, e.prototype.zombiedOwnerLocalStorageKey = function () {
        return this.localStoragePrefix + ZOMBIE_OWNER_LOCALSTORAGE_SUFFIX;
      }, e.prototype.generateOwnerId = function () {
        return AutoId.newId();
      }, e.MAIN_DATABASE = "main", e;
    }(),
        LocalDocumentsView = function () {
      function e(e, t) {
        this.remoteDocumentCache = e, this.mutationQueue = t;
      }

      return e.prototype.getDocument = function (e, t) {
        var n = this;
        return this.remoteDocumentCache.getEntry(e, t).next(function (r) {
          return n.computeLocalDocument(e, t, r);
        });
      }, e.prototype.getDocuments = function (e, t) {
        var n = this,
            r = [],
            o = maybeDocumentMap();
        return t.forEach(function (t) {
          r.push(n.getDocument(e, t).next(function (e) {
            e || (e = new NoDocument(t, SnapshotVersion.forDeletedDoc())), o = o.insert(t, e);
          }));
        }), PersistencePromise.waitFor(r).next(function () {
          return o;
        });
      }, e.prototype.getDocumentsMatchingQuery = function (e, t) {
        return DocumentKey.isDocumentKey(t.path) ? this.getDocumentsMatchingDocumentQuery(e, t.path) : this.getDocumentsMatchingCollectionQuery(e, t);
      }, e.prototype.getDocumentsMatchingDocumentQuery = function (e, t) {
        return this.getDocument(e, new DocumentKey(t)).next(function (e) {
          var t = documentMap();
          return e instanceof Document && (t = t.insert(e.key, e)), t;
        });
      }, e.prototype.getDocumentsMatchingCollectionQuery = function (e, t) {
        var n,
            r = this;
        return this.remoteDocumentCache.getDocumentsMatchingQuery(e, t).next(function (t) {
          return r.computeLocalDocuments(e, t);
        }).next(function (o) {
          return n = o, r.mutationQueue.getAllMutationBatchesAffectingQuery(e, t);
        }).next(function (t) {
          for (var o = documentKeySet(), i = 0, a = t; i < a.length; i++) {
            for (var s = 0, u = a[i].mutations; s < u.length; s++) {
              var c = u[s];
              n.get(c.key) || (o = o.add(c.key));
            }
          }

          var h = [];
          return o.forEach(function (t) {
            h.push(r.getDocument(e, t).next(function (e) {
              e instanceof Document && (n = n.insert(e.key, e));
            }));
          }), PersistencePromise.waitFor(h);
        }).next(function () {
          return n.forEach(function (e, r) {
            t.matches(r) || (n = n.remove(e));
          }), n;
        });
      }, e.prototype.computeLocalDocument = function (e, t, n) {
        return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e, t).next(function (e) {
          for (var r = 0, o = e; r < o.length; r++) {
            var i = o[r];
            n = i.applyToLocalView(t, n);
          }

          return n;
        });
      }, e.prototype.computeLocalDocuments = function (e, t) {
        var n = this,
            r = [];
        return t.forEach(function (o, i) {
          r.push(n.computeLocalDocument(e, o, i).next(function (e) {
            e instanceof Document ? t = t.insert(e.key, e) : e instanceof NoDocument ? t = t.remove(e.key) : fail("Unknown MaybeDocument: " + e);
          }));
        }), PersistencePromise.waitFor(r).next(function () {
          return t;
        });
      }, e;
    }(),
        RemoteDocumentChangeBuffer = function () {
      function e(e) {
        this.remoteDocumentCache = e, this.changes = maybeDocumentMap();
      }

      return e.prototype.addEntry = function (e) {
        var t = this.assertChanges();
        this.changes = t.insert(e.key, e);
      }, e.prototype.getEntry = function (e, t) {
        var n = this.assertChanges().get(t);
        return n ? PersistencePromise.resolve(n) : this.remoteDocumentCache.getEntry(e, t);
      }, e.prototype.apply = function (e) {
        var t = this,
            n = [];
        return this.assertChanges().forEach(function (r, o) {
          n.push(t.remoteDocumentCache.addEntry(e, o));
        }), this.changes = null, PersistencePromise.waitFor(n);
      }, e.prototype.assertChanges = function () {
        return assert(null !== this.changes, "Changes have already been applied."), this.changes;
      }, e;
    }(),
        LOG_TAG$4 = "LocalStore",
        LocalStore = function () {
      function e(e, t, n) {
        this.persistence = e, this.garbageCollector = n, this.localViewReferences = new ReferenceSet(), this.targetIds = {}, this.targetIdGenerator = TargetIdGenerator.forLocalStore(), this.heldBatchResults = [], this.mutationQueue = e.getMutationQueue(t), this.remoteDocuments = e.getRemoteDocumentCache(), this.queryCache = e.getQueryCache(), this.localDocuments = new LocalDocumentsView(this.remoteDocuments, this.mutationQueue), this.garbageCollector.addGarbageSource(this.localViewReferences), this.garbageCollector.addGarbageSource(this.queryCache), this.garbageCollector.addGarbageSource(this.mutationQueue);
      }

      return e.prototype.start = function () {
        var e = this;
        return this.persistence.runTransaction("Start LocalStore", function (t) {
          return e.startMutationQueue(t).next(function () {
            return e.startQueryCache(t);
          });
        });
      }, e.prototype.handleUserChange = function (e) {
        var t = this;
        return this.persistence.runTransaction("Handle user change", function (n) {
          var r;
          return t.mutationQueue.getAllMutationBatches(n).next(function (o) {
            return r = o, t.garbageCollector.removeGarbageSource(t.mutationQueue), t.mutationQueue = t.persistence.getMutationQueue(e), t.garbageCollector.addGarbageSource(t.mutationQueue), t.startMutationQueue(n);
          }).next(function () {
            return t.localDocuments = new LocalDocumentsView(t.remoteDocuments, t.mutationQueue), t.mutationQueue.getAllMutationBatches(n);
          }).next(function (e) {
            for (var o = documentKeySet(), i = 0, a = [r, e]; i < a.length; i++) {
              for (var s = 0, u = a[i]; s < u.length; s++) {
                for (var c = 0, h = u[s].mutations; c < h.length; c++) {
                  var l = h[c];
                  o = o.add(l.key);
                }
              }
            }

            return t.localDocuments.getDocuments(n, o);
          });
        });
      }, e.prototype.startQueryCache = function (e) {
        var t = this;
        return this.queryCache.start(e).next(function () {
          var e = t.queryCache.getHighestTargetId();
          t.targetIdGenerator = TargetIdGenerator.forLocalStore(e);
        });
      }, e.prototype.startMutationQueue = function (e) {
        var t = this;
        return this.mutationQueue.start(e).next(function () {
          return t.heldBatchResults = [], t.mutationQueue.getHighestAcknowledgedBatchId(e);
        }).next(function (n) {
          return n !== BATCHID_UNKNOWN ? t.mutationQueue.getAllMutationBatchesThroughBatchId(e, n) : PersistencePromise.resolve([]);
        }).next(function (n) {
          return n.length > 0 ? t.mutationQueue.removeMutationBatches(e, n) : PersistencePromise.resolve();
        });
      }, e.prototype.localWrite = function (e) {
        var t = this;
        return this.persistence.runTransaction("Locally write mutations", function (n) {
          var r,
              o = Timestamp.now();
          return t.mutationQueue.addMutationBatch(n, o, e).next(function (e) {
            var o = (r = e).keys();
            return t.localDocuments.getDocuments(n, o);
          }).next(function (e) {
            return {
              batchId: r.batchId,
              changes: e
            };
          });
        });
      }, e.prototype.acknowledgeBatch = function (e) {
        var t = this;
        return this.persistence.runTransaction("Acknowledge batch", function (n) {
          var r;
          return t.mutationQueue.acknowledgeBatch(n, e.batch, e.streamToken).next(function () {
            if (t.shouldHoldBatchResult(e.commitVersion)) return t.heldBatchResults.push(e), r = documentKeySet(), PersistencePromise.resolve();
            var o = new RemoteDocumentChangeBuffer(t.remoteDocuments);
            return t.releaseBatchResults(n, [e], o).next(function (e) {
              return r = e, o.apply(n);
            });
          }).next(function () {
            return t.mutationQueue.performConsistencyCheck(n);
          }).next(function () {
            return t.localDocuments.getDocuments(n, r);
          });
        });
      }, e.prototype.rejectBatch = function (e) {
        var t = this;
        return this.persistence.runTransaction("Reject batch", function (n) {
          var r, o;
          return t.mutationQueue.lookupMutationBatch(n, e).next(function (o) {
            return assert(null != o, "Attempt to reject nonexistent batch!"), r = o, t.mutationQueue.getHighestAcknowledgedBatchId(n).next(function (t) {
              return assert(e > t, "Acknowledged batches can't be rejected."), r;
            });
          }).next(function () {
            return t.removeMutationBatch(n, r);
          }).next(function (e) {
            return o = e, t.mutationQueue.performConsistencyCheck(n);
          }).next(function () {
            return t.localDocuments.getDocuments(n, o);
          });
        });
      }, e.prototype.getLastStreamToken = function () {
        var e = this;
        return this.persistence.runTransaction("Get last stream token", function (t) {
          return e.mutationQueue.getLastStreamToken(t);
        });
      }, e.prototype.setLastStreamToken = function (e) {
        var t = this;
        return this.persistence.runTransaction("Set last stream token", function (n) {
          return t.mutationQueue.setLastStreamToken(n, e);
        });
      }, e.prototype.getLastRemoteSnapshotVersion = function () {
        return this.queryCache.getLastRemoteSnapshotVersion();
      }, e.prototype.applyRemoteEvent = function (e) {
        var t = this,
            n = new RemoteDocumentChangeBuffer(this.remoteDocuments);
        return this.persistence.runTransaction("Apply remote event", function (r) {
          var o = [];
          forEachNumber(e.targetChanges, function (e, n) {
            var i = t.targetIds[e];

            if (i) {
              var a = n.mapping;
              if (a) if (a instanceof ResetMapping) o.push(t.queryCache.removeMatchingKeysForTargetId(r, e).next(function () {
                return t.queryCache.addMatchingKeys(r, a.documents, e);
              }));else {
                if (!(a instanceof UpdateMapping)) return fail("Unknown mapping type: " + JSON.stringify(a));
                o.push(t.queryCache.removeMatchingKeys(r, a.removedDocuments, e).next(function () {
                  return t.queryCache.addMatchingKeys(r, a.addedDocuments, e);
                }));
              }
              var s = n.resumeToken;
              s.length > 0 && (i = i.update({
                resumeToken: s,
                snapshotVersion: n.snapshotVersion
              }), t.targetIds[e] = i, o.push(t.queryCache.updateQueryData(r, i)));
            }
          });
          var i = documentKeySet();
          e.documentUpdates.forEach(function (e, a) {
            i = i.add(e), o.push(n.getEntry(r, e).next(function (r) {
              null == r || a.version.isEqual(SnapshotVersion.MIN) || a.version.compareTo(r.version) >= 0 ? n.addEntry(a) : debug(LOG_TAG$4, "Ignoring outdated watch update for ", e, ". Current version:", r.version, " Watch version:", a.version), t.garbageCollector.addPotentialGarbageKey(e);
            }));
          });
          var a,
              s = t.queryCache.getLastRemoteSnapshotVersion(),
              u = e.snapshotVersion;
          return u.isEqual(SnapshotVersion.MIN) || (assert(u.compareTo(s) >= 0, "Watch stream reverted to previous snapshot?? " + u + " < " + s), o.push(t.queryCache.setLastRemoteSnapshotVersion(r, u))), PersistencePromise.waitFor(o).next(function () {
            return t.releaseHeldBatchResults(r, n);
          }).next(function (e) {
            return a = e, n.apply(r);
          }).next(function () {
            return t.localDocuments.getDocuments(r, i.unionWith(a));
          });
        });
      }, e.prototype.notifyLocalViewChanges = function (e) {
        var t = this;
        return this.persistence.runTransaction("Notify local view changes", function (n) {
          for (var r = [], o = function o(e) {
            r.push(t.queryCache.getQueryData(n, e.query).next(function (n) {
              assert(null !== n, "Local view changes contain unallocated query.");
              var r = n.targetId;
              t.localViewReferences.addReferences(e.addedKeys, r), t.localViewReferences.removeReferences(e.removedKeys, r);
            }));
          }, i = 0, a = e; i < a.length; i++) {
            o(a[i]);
          }

          return PersistencePromise.waitFor(r);
        });
      }, e.prototype.nextMutationBatch = function (e) {
        var t = this;
        return this.persistence.runTransaction("Get next mutation batch", function (n) {
          return void 0 === e && (e = BATCHID_UNKNOWN), t.mutationQueue.getNextMutationBatchAfterBatchId(n, e);
        });
      }, e.prototype.readDocument = function (e) {
        var t = this;
        return this.persistence.runTransaction("read document", function (n) {
          return t.localDocuments.getDocument(n, e);
        });
      }, e.prototype.allocateQuery = function (e) {
        var t = this;
        return this.persistence.runTransaction("Allocate query", function (n) {
          var r;
          return t.queryCache.getQueryData(n, e).next(function (o) {
            if (o) return r = o, PersistencePromise.resolve();
            var i = t.targetIdGenerator.next();
            return r = new QueryData(e, i, QueryPurpose.Listen), t.queryCache.addQueryData(n, r);
          }).next(function () {
            return assert(!t.targetIds[r.targetId], "Tried to allocate an already allocated query: " + e), t.targetIds[r.targetId] = r, r;
          });
        });
      }, e.prototype.releaseQuery = function (e) {
        var t = this;
        return this.persistence.runTransaction("Release query", function (n) {
          return t.queryCache.getQueryData(n, e).next(function (r) {
            return assert(null != r, "Tried to release nonexistent query: " + e), t.localViewReferences.removeReferencesForId(r.targetId), delete t.targetIds[r.targetId], t.garbageCollector.isEager ? t.queryCache.removeQueryData(n, r) : PersistencePromise.resolve();
          }).next(function () {
            if (isEmpty(t.targetIds)) {
              var e = new RemoteDocumentChangeBuffer(t.remoteDocuments);
              return t.releaseHeldBatchResults(n, e).next(function () {
                e.apply(n);
              });
            }

            return PersistencePromise.resolve();
          });
        });
      }, e.prototype.executeQuery = function (e) {
        var t = this;
        return this.persistence.runTransaction("Execute query", function (n) {
          return t.localDocuments.getDocumentsMatchingQuery(n, e);
        });
      }, e.prototype.remoteDocumentKeys = function (e) {
        var t = this;
        return this.persistence.runTransaction("Remote document keys", function (n) {
          return t.queryCache.getMatchingKeysForTargetId(n, e);
        });
      }, e.prototype.collectGarbage = function () {
        var e = this;
        return this.persistence.runTransaction("Garbage collection", function (t) {
          return e.garbageCollector.collectGarbage(t).next(function (n) {
            var r = [];
            return n.forEach(function (n) {
              r.push(e.remoteDocuments.removeEntry(t, n));
            }), PersistencePromise.waitFor(r);
          });
        });
      }, e.prototype.releaseHeldBatchResults = function (e, t) {
        for (var n = [], r = 0, o = this.heldBatchResults; r < o.length; r++) {
          var i = o[r];
          if (!this.isRemoteUpToVersion(i.commitVersion)) break;
          n.push(i);
        }

        return 0 === n.length ? PersistencePromise.resolve(documentKeySet()) : (this.heldBatchResults.splice(0, n.length), this.releaseBatchResults(e, n, t));
      }, e.prototype.isRemoteUpToVersion = function (e) {
        var t = this.queryCache.getLastRemoteSnapshotVersion();
        return e.compareTo(t) <= 0 || isEmpty(this.targetIds);
      }, e.prototype.shouldHoldBatchResult = function (e) {
        return !this.isRemoteUpToVersion(e) || this.heldBatchResults.length > 0;
      }, e.prototype.releaseBatchResults = function (e, t, n) {
        for (var r = this, o = PersistencePromise.resolve(), i = function i(t) {
          o = o.next(function () {
            return r.applyWriteToRemoteDocuments(e, t, n);
          });
        }, a = 0, s = t; a < s.length; a++) {
          i(s[a]);
        }

        return o.next(function () {
          return r.removeMutationBatches(e, t.map(function (e) {
            return e.batch;
          }));
        });
      }, e.prototype.removeMutationBatch = function (e, t) {
        return this.removeMutationBatches(e, [t]);
      }, e.prototype.removeMutationBatches = function (e, t) {
        for (var n = documentKeySet(), r = 0, o = t; r < o.length; r++) {
          for (var i = 0, a = o[r].mutations; i < a.length; i++) {
            var s = a[i].key;
            n = n.add(s);
          }
        }

        return this.mutationQueue.removeMutationBatches(e, t).next(function () {
          return n;
        });
      }, e.prototype.applyWriteToRemoteDocuments = function (e, t, n) {
        var r = t.batch,
            o = r.keys(),
            i = PersistencePromise.resolve();
        return o.forEach(function (o) {
          i = i.next(function () {
            return n.getEntry(e, o);
          }).next(function (e) {
            var i = e,
                a = t.docVersions.get(o);
            assert(null !== a, "ackVersions should contain every doc in the write."), (!i || i.version.compareTo(a) < 0) && ((i = r.applyToRemoteDocument(o, i, t)) ? n.addEntry(i) : assert(!e, "Mutation batch " + r + " applied to document " + e + " resulted in null"));
          });
        }), i;
      }, e;
    }(),
        MemoryMutationQueue = function () {
      function e() {
        this.mutationQueue = [], this.nextBatchId = 1, this.highestAcknowledgedBatchId = BATCHID_UNKNOWN, this.lastStreamToken = emptyByteString(), this.garbageCollector = null, this.batchesByDocumentKey = new SortedSet(DocReference.compareByKey);
      }

      return e.prototype.start = function (e) {
        return 0 === this.mutationQueue.length && (this.nextBatchId = 1, this.highestAcknowledgedBatchId = BATCHID_UNKNOWN), assert(this.highestAcknowledgedBatchId < this.nextBatchId, "highestAcknowledgedBatchId must be less than the nextBatchId"), PersistencePromise.resolve();
      }, e.prototype.checkEmpty = function (e) {
        return PersistencePromise.resolve(0 === this.mutationQueue.length);
      }, e.prototype.getNextBatchId = function (e) {
        return PersistencePromise.resolve(this.nextBatchId);
      }, e.prototype.getHighestAcknowledgedBatchId = function (e) {
        return PersistencePromise.resolve(this.highestAcknowledgedBatchId);
      }, e.prototype.acknowledgeBatch = function (e, t, n) {
        var r = t.batchId;
        assert(r > this.highestAcknowledgedBatchId, "Mutation batchIDs must be acknowledged in order");
        var o = this.indexOfExistingBatchId(r, "acknowledged"),
            i = this.mutationQueue[o];
        return assert(r === i.batchId, "Queue ordering failure: expected batch " + r + ", got batch " + i.batchId), assert(!i.isTombstone(), "Can't acknowledge a previously removed batch"), this.highestAcknowledgedBatchId = r, this.lastStreamToken = n, PersistencePromise.resolve();
      }, e.prototype.getLastStreamToken = function (e) {
        return PersistencePromise.resolve(this.lastStreamToken);
      }, e.prototype.setLastStreamToken = function (e, t) {
        return this.lastStreamToken = t, PersistencePromise.resolve();
      }, e.prototype.addMutationBatch = function (e, t, n) {
        assert(0 !== n.length, "Mutation batches should not be empty");
        var r = this.nextBatchId;
        (this.nextBatchId++, this.mutationQueue.length > 0) && assert(this.mutationQueue[this.mutationQueue.length - 1].batchId < r, "Mutation batchIDs must be monotonically increasing order");
        var o = new MutationBatch(r, t, n);
        this.mutationQueue.push(o);

        for (var i = 0, a = n; i < a.length; i++) {
          var s = a[i];
          this.batchesByDocumentKey = this.batchesByDocumentKey.add(new DocReference(s.key, r));
        }

        return PersistencePromise.resolve(o);
      }, e.prototype.lookupMutationBatch = function (e, t) {
        return PersistencePromise.resolve(this.findMutationBatch(t));
      }, e.prototype.getNextMutationBatchAfterBatchId = function (e, t) {
        for (var n = this.mutationQueue.length, r = Math.max(t, this.highestAcknowledgedBatchId) + 1, o = this.indexOfBatchId(r), i = o < 0 ? 0 : o; i < n; i++) {
          var a = this.mutationQueue[i];
          if (!a.isTombstone()) return PersistencePromise.resolve(a);
        }

        return PersistencePromise.resolve(null);
      }, e.prototype.getAllMutationBatches = function (e) {
        return PersistencePromise.resolve(this.getAllLiveMutationBatchesBeforeIndex(this.mutationQueue.length));
      }, e.prototype.getAllMutationBatchesThroughBatchId = function (e, t) {
        var n = this.mutationQueue.length,
            r = this.indexOfBatchId(t);
        return r < 0 ? r = 0 : r >= n ? r = n : r++, PersistencePromise.resolve(this.getAllLiveMutationBatchesBeforeIndex(r));
      }, e.prototype.getAllMutationBatchesAffectingDocumentKey = function (e, t) {
        var n = this,
            r = new DocReference(t, 0),
            o = new DocReference(t, Number.POSITIVE_INFINITY),
            i = [];
        return this.batchesByDocumentKey.forEachInRange([r, o], function (e) {
          assert(t.isEqual(e.key), "Should only iterate over a single key's batches");
          var r = n.findMutationBatch(e.targetOrBatchId);
          assert(null !== r, "Batches in the index must exist in the main table"), i.push(r);
        }), PersistencePromise.resolve(i);
      }, e.prototype.getAllMutationBatchesAffectingQuery = function (e, t) {
        var n = this,
            r = t.path,
            o = r.length + 1,
            i = r;
        DocumentKey.isDocumentKey(i) || (i = i.child(""));
        var a = new DocReference(new DocumentKey(i), 0),
            s = new SortedSet(primitiveComparator);
        this.batchesByDocumentKey.forEachWhile(function (e) {
          var t = e.key.path;
          return !!r.isPrefixOf(t) && (t.length === o && (s = s.add(e.targetOrBatchId)), !0);
        }, a);
        var u = [];
        return s.forEach(function (e) {
          var t = n.findMutationBatch(e);
          null !== t && u.push(t);
        }), PersistencePromise.resolve(u);
      }, e.prototype.removeMutationBatches = function (e, t) {
        var n = t.length;
        assert(n > 0, "Should not remove mutations when none exist.");
        var r = t[0].batchId,
            o = this.mutationQueue.length,
            i = this.indexOfExistingBatchId(r, "removed");
        assert(this.mutationQueue[i].batchId === r, "Removed batches must exist in the queue");

        for (var a = 1, s = i + 1; a < n && s < o;) {
          (d = this.mutationQueue[s]).isTombstone() ? s++ : (assert(d.batchId === t[a].batchId, "Removed batches must be contiguous in the queue"), a++, s++);
        }

        if (0 === i) {
          for (; s < o; s++) {
            if (!(d = this.mutationQueue[s]).isTombstone()) break;
          }

          var u = s - i;
          this.mutationQueue.splice(i, u);
        } else for (var c = i; c < s; c++) {
          this.mutationQueue[c] = this.mutationQueue[c].toTombstone();
        }

        for (var h = this.batchesByDocumentKey, l = 0, f = t; l < f.length; l++) {
          for (var d, p = (d = f[l]).batchId, m = 0, y = d.mutations; m < y.length; m++) {
            var g = y[m].key;
            null !== this.garbageCollector && this.garbageCollector.addPotentialGarbageKey(g);
            var v = new DocReference(g, p);
            h = h["delete"](v);
          }
        }

        return this.batchesByDocumentKey = h, PersistencePromise.resolve();
      }, e.prototype.setGarbageCollector = function (e) {
        this.garbageCollector = e;
      }, e.prototype.containsKey = function (e, t) {
        var n = new DocReference(t, 0),
            r = this.batchesByDocumentKey.firstAfterOrEqual(n);
        return PersistencePromise.resolve(t.isEqual(r && r.key));
      }, e.prototype.performConsistencyCheck = function (e) {
        return 0 === this.mutationQueue.length && assert(this.batchesByDocumentKey.isEmpty(), "Document leak -- detected dangling mutation references when queue is empty."), PersistencePromise.resolve();
      }, e.prototype.getAllLiveMutationBatchesBeforeIndex = function (e) {
        for (var t = [], n = 0; n < e; n++) {
          var r = this.mutationQueue[n];
          r.isTombstone() || t.push(r);
        }

        return t;
      }, e.prototype.indexOfExistingBatchId = function (e, t) {
        var n = this.indexOfBatchId(e);
        return assert(n >= 0 && n < this.mutationQueue.length, "Batches must exist to be " + t), n;
      }, e.prototype.indexOfBatchId = function (e) {
        return 0 === this.mutationQueue.length ? 0 : e - this.mutationQueue[0].batchId;
      }, e.prototype.findMutationBatch = function (e) {
        var t = this.indexOfBatchId(e);
        if (t < 0 || t >= this.mutationQueue.length) return null;
        var n = this.mutationQueue[t];
        return assert(n.batchId === e, "If found batch must match"), n.isTombstone() ? null : n;
      }, e;
    }(),
        MemoryQueryCache = function () {
      function e() {
        this.queries = new ObjectMap(function (e) {
          return e.canonicalId();
        }), this.lastRemoteSnapshotVersion = SnapshotVersion.MIN, this.highestTargetId = 0, this.references = new ReferenceSet(), this.targetCount = 0;
      }

      return e.prototype.start = function (e) {
        return PersistencePromise.resolve();
      }, e.prototype.getLastRemoteSnapshotVersion = function () {
        return this.lastRemoteSnapshotVersion;
      }, e.prototype.getHighestTargetId = function () {
        return this.highestTargetId;
      }, e.prototype.setLastRemoteSnapshotVersion = function (e, t) {
        return this.lastRemoteSnapshotVersion = t, PersistencePromise.resolve();
      }, e.prototype.saveQueryData = function (e) {
        this.queries.set(e.query, e);
        var t = e.targetId;
        t > this.highestTargetId && (this.highestTargetId = t);
      }, e.prototype.addQueryData = function (e, t) {
        return assert(!this.queries.has(t.query), "Adding a query that already exists"), this.saveQueryData(t), this.targetCount += 1, PersistencePromise.resolve();
      }, e.prototype.updateQueryData = function (e, t) {
        return assert(this.queries.has(t.query), "Updating a non-existent query"), this.saveQueryData(t), PersistencePromise.resolve();
      }, e.prototype.removeQueryData = function (e, t) {
        return assert(this.targetCount > 0, "Removing a target from an empty cache"), assert(this.queries.has(t.query), "Removing a non-existent target from the cache"), this.queries["delete"](t.query), this.references.removeReferencesForId(t.targetId), this.targetCount -= 1, PersistencePromise.resolve();
      }, Object.defineProperty(e.prototype, "count", {
        get: function get() {
          return this.targetCount;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.getQueryData = function (e, t) {
        var n = this.queries.get(t) || null;
        return PersistencePromise.resolve(n);
      }, e.prototype.addMatchingKeys = function (e, t, n) {
        return this.references.addReferences(t, n), PersistencePromise.resolve();
      }, e.prototype.removeMatchingKeys = function (e, t, n) {
        return this.references.removeReferences(t, n), PersistencePromise.resolve();
      }, e.prototype.removeMatchingKeysForTargetId = function (e, t) {
        return this.references.removeReferencesForId(t), PersistencePromise.resolve();
      }, e.prototype.getMatchingKeysForTargetId = function (e, t) {
        var n = this.references.referencesForId(t);
        return PersistencePromise.resolve(n);
      }, e.prototype.setGarbageCollector = function (e) {
        this.references.setGarbageCollector(e);
      }, e.prototype.containsKey = function (e, t) {
        return this.references.containsKey(e, t);
      }, e;
    }(),
        MemoryRemoteDocumentCache = function () {
      function e() {
        this.docs = maybeDocumentMap();
      }

      return e.prototype.addEntry = function (e, t) {
        return this.docs = this.docs.insert(t.key, t), PersistencePromise.resolve();
      }, e.prototype.removeEntry = function (e, t) {
        return this.docs = this.docs.remove(t), PersistencePromise.resolve();
      }, e.prototype.getEntry = function (e, t) {
        return PersistencePromise.resolve(this.docs.get(t));
      }, e.prototype.getDocumentsMatchingQuery = function (e, t) {
        for (var n = documentMap(), r = new DocumentKey(t.path.child("")), o = this.docs.getIteratorFrom(r); o.hasNext();) {
          var i = o.getNext(),
              a = i.key,
              s = i.value;
          if (!t.path.isPrefixOf(a.path)) break;
          s instanceof Document && t.matches(s) && (n = n.insert(s.key, s));
        }

        return PersistencePromise.resolve(n);
      }, e;
    }(),
        LOG_TAG$5 = "MemoryPersistence",
        MemoryPersistence = function () {
      function e() {
        this.mutationQueues = {}, this.remoteDocumentCache = new MemoryRemoteDocumentCache(), this.queryCache = new MemoryQueryCache(), this.started = !1;
      }

      return e.prototype.start = function () {
        return __awaiter(this, void 0, void 0, function () {
          return __generator(this, function (e) {
            return assert(!this.started, "MemoryPersistence double-started!"), this.started = !0, [2];
          });
        });
      }, e.prototype.shutdown = function (e) {
        return __awaiter(this, void 0, void 0, function () {
          return __generator(this, function (e) {
            return assert(this.started, "MemoryPersistence shutdown without start!"), this.started = !1, [2];
          });
        });
      }, e.prototype.getMutationQueue = function (e) {
        var t = this.mutationQueues[e.toKey()];
        return t || (t = new MemoryMutationQueue(), this.mutationQueues[e.toKey()] = t), t;
      }, e.prototype.getQueryCache = function () {
        return this.queryCache;
      }, e.prototype.getRemoteDocumentCache = function () {
        return this.remoteDocumentCache;
      }, e.prototype.runTransaction = function (e, t) {
        return debug(LOG_TAG$5, "Starting transaction:", e), t(new MemoryPersistenceTransaction()).toPromise();
      }, e;
    }(),
        MemoryPersistenceTransaction = function () {
      return function () {};
    }(),
        NoOpGarbageCollector = function () {
      function e() {
        this.isEager = !1;
      }

      return e.prototype.addGarbageSource = function (e) {}, e.prototype.removeGarbageSource = function (e) {}, e.prototype.addPotentialGarbageKey = function (e) {}, e.prototype.collectGarbage = function (e) {
        return PersistencePromise.resolve(documentKeySet());
      }, e;
    }(),
        TimerId;

    !function (e) {
      e.All = "all", e.ListenStreamIdle = "listen_stream_idle", e.ListenStreamConnectionBackoff = "listen_stream_connection_backoff", e.WriteStreamIdle = "write_stream_idle", e.WriteStreamConnectionBackoff = "write_stream_connection_backoff", e.OnlineStateTimeout = "online_state_timeout";
    }(TimerId || (TimerId = {}));

    var DelayedOperation = function () {
      function e(e, t, n, r, o) {
        this.asyncQueue = e, this.timerId = t, this.targetTimeMs = n, this.op = r, this.removalCallback = o, this.deferred = new Deferred$1(), this.then = this.deferred.promise.then.bind(this.deferred.promise), this["catch"] = this.deferred.promise["catch"].bind(this.deferred.promise), this.deferred.promise["catch"](function (e) {});
      }

      return e.createAndSchedule = function (t, n, r, o, i) {
        var a = new e(t, n, Date.now() + r, o, i);
        return a.start(r), a;
      }, e.prototype.start = function (e) {
        var t = this;
        this.timerHandle = setTimeout(function () {
          return t.handleDelayElapsed();
        }, e);
      }, e.prototype.skipDelay = function () {
        return this.handleDelayElapsed();
      }, e.prototype.cancel = function (e) {
        null !== this.timerHandle && (this.clearTimeout(), this.deferred.reject(new FirestoreError(Code.CANCELLED, "Operation cancelled" + (e ? ": " + e : ""))));
      }, e.prototype.handleDelayElapsed = function () {
        var e = this;
        this.asyncQueue.enqueue(function () {
          return null !== e.timerHandle ? (e.clearTimeout(), e.op().then(function (t) {
            return e.deferred.resolve(t);
          })) : Promise.resolve();
        });
      }, e.prototype.clearTimeout = function () {
        null !== this.timerHandle && (this.removalCallback(this), clearTimeout(this.timerHandle), this.timerHandle = null);
      }, e;
    }(),
        AsyncQueue = function () {
      function e() {
        this.tail = Promise.resolve(), this.delayedOperations = [], this.operationInProgress = !1;
      }

      return e.prototype.enqueue = function (e) {
        var t = this;
        this.verifyNotFailed();
        var n = this.tail.then(function () {
          return t.operationInProgress = !0, e()["catch"](function (e) {
            t.failure = e, t.operationInProgress = !1;
            var n = e.stack || e.message || "";
            throw error("INTERNAL UNHANDLED ERROR: ", n), n.indexOf("Firestore Test Simulated Error") < 0 && setTimeout(function () {
              throw e;
            }, 0), e;
          }).then(function (e) {
            return t.operationInProgress = !1, e;
          });
        });
        return this.tail = n, n;
      }, e.prototype.enqueueAfterDelay = function (e, t, n) {
        var r = this;
        this.verifyNotFailed(), assert(!this.containsDelayedOperation(e), "Attempted to schedule multiple operations with timer id " + e + ".");
        var o = DelayedOperation.createAndSchedule(this, e, t, n, function (e) {
          return r.removeDelayedOperation(e);
        });
        return this.delayedOperations.push(o), o;
      }, e.prototype.verifyNotFailed = function () {
        this.failure && fail("AsyncQueue is already failed: " + (this.failure.stack || this.failure.message));
      }, e.prototype.verifyOperationInProgress = function () {
        assert(this.operationInProgress, "verifyOpInProgress() called when no op in progress on this queue.");
      }, e.prototype.drain = function () {
        return this.enqueue(function () {
          return Promise.resolve();
        });
      }, e.prototype.containsDelayedOperation = function (e) {
        return this.delayedOperations.findIndex(function (t) {
          return t.timerId === e;
        }) >= 0;
      }, e.prototype.runDelayedOperationsEarly = function (e) {
        var t = this;
        return this.drain().then(function () {
          assert(e === TimerId.All || t.containsDelayedOperation(e), "Attempted to drain to missing operation " + e), t.delayedOperations.sort(function (e, t) {
            return e.targetTimeMs - t.targetTimeMs;
          });

          for (var n = 0, r = t.delayedOperations; n < r.length; n++) {
            var o = r[n];
            if (o.skipDelay(), e !== TimerId.All && o.timerId === e) break;
          }

          return t.drain();
        });
      }, e.prototype.removeDelayedOperation = function (e) {
        var t = this.delayedOperations.indexOf(e);
        assert(t >= 0, "Delayed operation not found."), this.delayedOperations.splice(t, 1);
      }, e;
    }(),
        LOG_TAG$6 = "ExponentialBackoff",
        ExponentialBackoff = function () {
      function e(e, t, n, r, o) {
        this.queue = e, this.timerId = t, this.initialDelayMs = n, this.backoffFactor = r, this.maxDelayMs = o, this.timerPromise = null, this.reset();
      }

      return e.prototype.reset = function () {
        this.currentBaseMs = 0;
      }, e.prototype.resetToMax = function () {
        this.currentBaseMs = this.maxDelayMs;
      }, e.prototype.backoffAndRun = function (e) {
        this.cancel();
        var t = this.currentBaseMs + this.jitterDelayMs();
        this.currentBaseMs > 0 && debug(LOG_TAG$6, "Backing off for " + t + " ms (base delay: " + this.currentBaseMs + " ms)"), this.timerPromise = this.queue.enqueueAfterDelay(this.timerId, t, e), this.currentBaseMs *= this.backoffFactor, this.currentBaseMs < this.initialDelayMs && (this.currentBaseMs = this.initialDelayMs), this.currentBaseMs > this.maxDelayMs && (this.currentBaseMs = this.maxDelayMs);
      }, e.prototype.cancel = function () {
        null !== this.timerPromise && (this.timerPromise.cancel(), this.timerPromise = null);
      }, e.prototype.jitterDelayMs = function () {
        return (Math.random() - .5) * this.currentBaseMs;
      }, e;
    }(),
        LOG_TAG$7 = "PersistentStream",
        PersistentStreamState;

    !function (e) {
      e[e.Initial = 0] = "Initial", e[e.Auth = 1] = "Auth", e[e.Open = 2] = "Open", e[e.Error = 3] = "Error", e[e.Backoff = 4] = "Backoff", e[e.Stopped = 5] = "Stopped";
    }(PersistentStreamState || (PersistentStreamState = {}));

    var BACKOFF_INITIAL_DELAY_MS = 1e3,
        BACKOFF_MAX_DELAY_MS = 6e4,
        BACKOFF_FACTOR = 1.5,
        IDLE_TIMEOUT_MS = 6e4,
        PersistentStream = function () {
      function e(e, t, n, r, o) {
        this.queue = e, this.idleTimerId = n, this.connection = r, this.credentialsProvider = o, this.inactivityTimerPromise = null, this.stream = null, this.listener = null, this.backoff = new ExponentialBackoff(e, t, BACKOFF_INITIAL_DELAY_MS, BACKOFF_FACTOR, BACKOFF_MAX_DELAY_MS), this.state = PersistentStreamState.Initial;
      }

      return e.prototype.isStarted = function () {
        return this.state === PersistentStreamState.Backoff || this.state === PersistentStreamState.Auth || this.state === PersistentStreamState.Open;
      }, e.prototype.isOpen = function () {
        return this.state === PersistentStreamState.Open;
      }, e.prototype.start = function (e) {
        this.state !== PersistentStreamState.Error ? (assert(this.state === PersistentStreamState.Initial, "Already started"), this.listener = e, this.auth()) : this.performBackoff(e);
      }, e.prototype.stop = function () {
        this.isStarted() && this.close(PersistentStreamState.Stopped);
      }, e.prototype.inhibitBackoff = function () {
        assert(!this.isStarted(), "Can only inhibit backoff in a stopped state"), this.state = PersistentStreamState.Initial, this.backoff.reset();
      }, e.prototype.markIdle = function () {
        var e = this;
        this.isOpen() && null === this.inactivityTimerPromise && (this.inactivityTimerPromise = this.queue.enqueueAfterDelay(this.idleTimerId, IDLE_TIMEOUT_MS, function () {
          return e.handleIdleCloseTimer();
        }));
      }, e.prototype.sendRequest = function (e) {
        this.cancelIdleCheck(), this.stream.send(e);
      }, e.prototype.handleIdleCloseTimer = function () {
        return __awaiter(this, void 0, void 0, function () {
          return __generator(this, function (e) {
            return this.isOpen() ? [2, this.close(PersistentStreamState.Initial)] : [2];
          });
        });
      }, e.prototype.cancelIdleCheck = function () {
        this.inactivityTimerPromise && (this.inactivityTimerPromise.cancel(), this.inactivityTimerPromise = null);
      }, e.prototype.close = function (e, t) {
        return __awaiter(this, void 0, void 0, function () {
          var n;
          return __generator(this, function (r) {
            return assert(e === PersistentStreamState.Error || isNullOrUndefined(t), "Can't provide an error when not in an error state."), this.cancelIdleCheck(), this.backoff.cancel(), e !== PersistentStreamState.Error ? this.backoff.reset() : t && t.code === Code.RESOURCE_EXHAUSTED && (error(t.toString()), error("Using maximum backoff delay to prevent overloading the backend."), this.backoff.resetToMax()), null !== this.stream && (this.tearDown(), this.stream.close(), this.stream = null), this.state = e, n = this.listener, this.listener = null, e !== PersistentStreamState.Stopped ? [2, n.onClose(t)] : [2];
          });
        });
      }, e.prototype.tearDown = function () {}, e.prototype.auth = function () {
        var e = this;
        assert(this.state === PersistentStreamState.Initial, "Must be in initial state to auth"), this.state = PersistentStreamState.Auth, this.credentialsProvider.getToken(!1).then(function (t) {
          e.startStream(t);
        }, function (t) {
          e.queue.enqueue(function () {
            return __awaiter(e, void 0, void 0, function () {
              var e;
              return __generator(this, function (n) {
                return this.state !== PersistentStreamState.Stopped ? (e = new FirestoreError(Code.UNKNOWN, "Fetching auth token failed: " + t.message), [2, this.handleStreamClose(e)]) : [2];
              });
            });
          });
        });
      }, e.prototype.startStream = function (e) {
        var t = this;

        if (this.state !== PersistentStreamState.Stopped) {
          assert(this.state === PersistentStreamState.Auth, "Trying to start stream in a non-auth state");

          var n = function n(e, _n) {
            t.queue.enqueue(function () {
              return __awaiter(t, void 0, void 0, function () {
                return __generator(this, function (t) {
                  return this.stream === e ? [2, _n()] : [2];
                });
              });
            });
          };

          if (null !== this.listener) {
            var r = this.startRpc(e);
            this.stream = r, this.stream.onOpen(function () {
              n(r, function () {
                return assert(t.state === PersistentStreamState.Auth, "Expected stream to be in state auth, but was " + t.state), t.state = PersistentStreamState.Open, t.listener.onOpen();
              });
            }), this.stream.onClose(function (e) {
              n(r, function () {
                return t.handleStreamClose(e);
              });
            }), this.stream.onMessage(function (e) {
              n(r, function () {
                return t.onMessage(e);
              });
            });
          }
        }
      }, e.prototype.performBackoff = function (e) {
        var t = this;
        assert(this.state === PersistentStreamState.Error, "Should only perform backoff in an error case"), this.state = PersistentStreamState.Backoff, this.backoff.backoffAndRun(function () {
          return __awaiter(t, void 0, void 0, function () {
            return __generator(this, function (t) {
              return this.state === PersistentStreamState.Stopped ? [2] : (this.state = PersistentStreamState.Initial, this.start(e), assert(this.isStarted(), "PersistentStream should have started"), [2]);
            });
          });
        });
      }, e.prototype.handleStreamClose = function (e) {
        return assert(this.isStarted(), "Can't handle server close on non-started stream"), debug(LOG_TAG$7, "close with error: " + e), this.stream = null, this.close(PersistentStreamState.Error, e);
      }, e;
    }(),
        PersistentListenStream = function (e) {
      function t(t, n, r, o) {
        var i = e.call(this, t, TimerId.ListenStreamConnectionBackoff, TimerId.ListenStreamIdle, n, r) || this;
        return i.serializer = o, i;
      }

      return __extends(t, e), t.prototype.startRpc = function (e) {
        return this.connection.openStream("Listen", e);
      }, t.prototype.onMessage = function (e) {
        this.backoff.reset();
        var t = this.serializer.fromWatchChange(e),
            n = this.serializer.versionFromListenResponse(e);
        return this.listener.onWatchChange(t, n);
      }, t.prototype.watch = function (e) {
        var t = {};
        t.database = this.serializer.encodedDatabaseId, t.addTarget = this.serializer.toTarget(e);
        var n = this.serializer.toListenRequestLabels(e);
        n && (t.labels = n), this.sendRequest(t);
      }, t.prototype.unwatch = function (e) {
        var t = {};
        t.database = this.serializer.encodedDatabaseId, t.removeTarget = e, this.sendRequest(t);
      }, t;
    }(PersistentStream),
        PersistentWriteStream = function (e) {
      function t(t, n, r, o) {
        var i = e.call(this, t, TimerId.WriteStreamConnectionBackoff, TimerId.WriteStreamIdle, n, r) || this;
        return i.serializer = o, i.handshakeComplete_ = !1, i;
      }

      return __extends(t, e), Object.defineProperty(t.prototype, "handshakeComplete", {
        get: function get() {
          return this.handshakeComplete_;
        },
        enumerable: !0,
        configurable: !0
      }), t.prototype.start = function (t) {
        this.handshakeComplete_ = !1, e.prototype.start.call(this, t);
      }, t.prototype.tearDown = function () {
        this.handshakeComplete_ && this.writeMutations([]);
      }, t.prototype.startRpc = function (e) {
        return this.connection.openStream("Write", e);
      }, t.prototype.onMessage = function (e) {
        if (assert(!!e.streamToken, "Got a write response without a stream token"), this.lastStreamToken = e.streamToken, this.handshakeComplete_) {
          this.backoff.reset();
          var t = this.serializer.fromWriteResults(e.writeResults),
              n = this.serializer.fromVersion(e.commitTime);
          return this.listener.onMutationResult(n, t);
        }

        return assert(!e.writeResults || 0 === e.writeResults.length, "Got mutation results for handshake"), this.handshakeComplete_ = !0, this.listener.onHandshakeComplete();
      }, t.prototype.writeHandshake = function () {
        assert(this.isOpen(), "Writing handshake requires an opened stream"), assert(!this.handshakeComplete_, "Handshake already completed");
        var e = {};
        e.database = this.serializer.encodedDatabaseId, this.sendRequest(e);
      }, t.prototype.writeMutations = function (e) {
        var t = this;
        assert(this.isOpen(), "Writing mutations requires an opened stream"), assert(this.handshakeComplete_, "Handshake must be complete before writing mutations"), assert(this.lastStreamToken.length > 0, "Trying to write mutation without a token");
        var n = {
          streamToken: this.lastStreamToken,
          writes: e.map(function (e) {
            return t.serializer.toMutation(e);
          })
        };
        this.sendRequest(n);
      }, t;
    }(PersistentStream),
        Datastore = function () {
      function e(e, t, n, r) {
        this.queue = e, this.connection = t, this.credentials = n, this.serializer = r;
      }

      return e.prototype.newPersistentWriteStream = function () {
        return new PersistentWriteStream(this.queue, this.connection, this.credentials, this.serializer);
      }, e.prototype.newPersistentWatchStream = function () {
        return new PersistentListenStream(this.queue, this.connection, this.credentials, this.serializer);
      }, e.prototype.commit = function (e) {
        var t = this,
            n = {
          database: this.serializer.encodedDatabaseId,
          writes: e.map(function (e) {
            return t.serializer.toMutation(e);
          })
        };
        return this.invokeRPC("Commit", n).then(function (e) {
          return t.serializer.fromWriteResults(e.writeResults);
        });
      }, e.prototype.lookup = function (e) {
        var t = this,
            n = {
          database: this.serializer.encodedDatabaseId,
          documents: e.map(function (e) {
            return t.serializer.toName(e);
          })
        };
        return this.invokeStreamingRPC("BatchGetDocuments", n).then(function (n) {
          var r = maybeDocumentMap();
          n.forEach(function (e) {
            var n = t.serializer.fromMaybeDocument(e);
            r = r.insert(n.key, n);
          });
          var o = [];
          return e.forEach(function (e) {
            var t = r.get(e);
            assert(!!t, "Missing entity in write response for " + e), o.push(t);
          }), o;
        });
      }, e.prototype.invokeRPC = function (e, t) {
        var n = this;
        return this.credentials.getToken(!1).then(function (r) {
          return n.connection.invokeRPC(e, t, r);
        });
      }, e.prototype.invokeStreamingRPC = function (e, t) {
        var n = this;
        return this.credentials.getToken(!1).then(function (r) {
          return n.connection.invokeStreamingRPC(e, t, r);
        });
      }, e;
    }(),
        Transaction = function () {
      function e(e) {
        this.datastore = e, this.readVersions = documentVersionMap(), this.mutations = [], this.committed = !1;
      }

      return e.prototype.recordVersion = function (e) {
        var t = e.version;
        e instanceof NoDocument && (t = SnapshotVersion.forDeletedDoc());
        var n = this.readVersions.get(e.key);

        if (null !== n) {
          if (!t.isEqual(n)) throw new FirestoreError(Code.ABORTED, "Document version changed between two reads.");
        } else this.readVersions = this.readVersions.insert(e.key, t);
      }, e.prototype.lookup = function (e) {
        var t = this;
        return this.committed ? Promise.reject("Transaction has already completed.") : this.mutations.length > 0 ? Promise.reject("Transactions lookups are invalid after writes.") : this.datastore.lookup(e).then(function (e) {
          return e.forEach(function (e) {
            return t.recordVersion(e);
          }), e;
        });
      }, e.prototype.write = function (e) {
        if (this.committed) throw new FirestoreError(Code.FAILED_PRECONDITION, "Transaction has already completed.");
        this.mutations = this.mutations.concat(e);
      }, e.prototype.precondition = function (e) {
        var t = this.readVersions.get(e);
        return t ? Precondition.updateTime(t) : Precondition.NONE;
      }, e.prototype.preconditionForUpdate = function (e) {
        var t = this.readVersions.get(e);
        if (t && t.isEqual(SnapshotVersion.forDeletedDoc())) throw new FirestoreError(Code.FAILED_PRECONDITION, "Can't update a document that doesn't exist.");
        return t ? Precondition.updateTime(t) : Precondition.exists(!0);
      }, e.prototype.set = function (e, t) {
        this.write(t.toMutations(e, this.precondition(e)));
      }, e.prototype.update = function (e, t) {
        this.write(t.toMutations(e, this.preconditionForUpdate(e)));
      }, e.prototype["delete"] = function (e) {
        this.write([new DeleteMutation(e, this.precondition(e))]), this.readVersions = this.readVersions.insert(e, SnapshotVersion.forDeletedDoc());
      }, e.prototype.commit = function () {
        var e = this,
            t = this.readVersions;
        return this.mutations.forEach(function (e) {
          t = t.remove(e.key);
        }), t.isEmpty() ? this.datastore.commit(this.mutations).then(function () {
          e.committed = !0;
        }) : Promise.reject(Error("Every document read in a transaction must also be written."));
      }, e;
    }(),
        LOG_TAG$8 = "OnlineStateTracker",
        MAX_WATCH_STREAM_FAILURES = 2,
        ONLINE_STATE_TIMEOUT_MS = 1e4,
        OnlineStateTracker = function () {
      function e(e, t) {
        this.asyncQueue = e, this.onlineStateHandler = t, this.state = OnlineState.Unknown, this.watchStreamFailures = 0, this.onlineStateTimer = null, this.shouldWarnClientIsOffline = !0;
      }

      return e.prototype.handleWatchStreamStart = function () {
        var e = this;
        0 === this.watchStreamFailures && (this.setAndBroadcast(OnlineState.Unknown), assert(null === this.onlineStateTimer, "onlineStateTimer shouldn't be started yet"), this.onlineStateTimer = this.asyncQueue.enqueueAfterDelay(TimerId.OnlineStateTimeout, ONLINE_STATE_TIMEOUT_MS, function () {
          return e.onlineStateTimer = null, assert(e.state === OnlineState.Unknown, "Timer should be canceled if we transitioned to a different state."), e.logClientOfflineWarningIfNecessary("Backend didn't respond within " + ONLINE_STATE_TIMEOUT_MS / 1e3 + " seconds."), e.setAndBroadcast(OnlineState.Offline), Promise.resolve();
        }));
      }, e.prototype.handleWatchStreamFailure = function (e) {
        this.state === OnlineState.Online ? (this.setAndBroadcast(OnlineState.Unknown), assert(0 === this.watchStreamFailures, "watchStreamFailures must be 0"), assert(null === this.onlineStateTimer, "onlineStateTimer must be null")) : (this.watchStreamFailures++, this.watchStreamFailures >= MAX_WATCH_STREAM_FAILURES && (this.clearOnlineStateTimer(), this.logClientOfflineWarningIfNecessary("Connection failed " + MAX_WATCH_STREAM_FAILURES + " times. Most recent error: " + e.toString()), this.setAndBroadcast(OnlineState.Offline)));
      }, e.prototype.set = function (e) {
        this.clearOnlineStateTimer(), this.watchStreamFailures = 0, e === OnlineState.Online && (this.shouldWarnClientIsOffline = !1), this.setAndBroadcast(e);
      }, e.prototype.setAndBroadcast = function (e) {
        e !== this.state && (this.state = e, this.onlineStateHandler(e));
      }, e.prototype.logClientOfflineWarningIfNecessary = function (e) {
        var t = "Could not reach Cloud Firestore backend. " + e + "\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";
        this.shouldWarnClientIsOffline ? (error(t), this.shouldWarnClientIsOffline = !1) : debug(LOG_TAG$8, t);
      }, e.prototype.clearOnlineStateTimer = function () {
        null !== this.onlineStateTimer && (this.onlineStateTimer.cancel(), this.onlineStateTimer = null);
      }, e;
    }(),
        LOG_TAG$9 = "RemoteStore",
        MAX_PENDING_WRITES = 10,
        RemoteStore = function () {
      function e(e, t, n, r) {
        this.localStore = e, this.datastore = t, this.pendingWrites = [], this.lastBatchSeen = BATCHID_UNKNOWN, this.listenTargets = {}, this.pendingTargetResponses = {}, this.accumulatedWatchChanges = [], this.watchStream = null, this.writeStream = null, this.onlineStateTracker = new OnlineStateTracker(n, r);
      }

      return e.prototype.start = function () {
        return this.enableNetwork();
      }, e.prototype.isNetworkEnabled = function () {
        return assert(null == this.watchStream == (null == this.writeStream), "WatchStream and WriteStream should both be null or non-null"), null != this.watchStream;
      }, e.prototype.enableNetwork = function () {
        var e = this;
        return this.isNetworkEnabled() ? Promise.resolve() : (this.watchStream = this.datastore.newPersistentWatchStream(), this.writeStream = this.datastore.newPersistentWriteStream(), this.localStore.getLastStreamToken().then(function (t) {
          return e.writeStream.lastStreamToken = t, e.shouldStartWatchStream() ? e.startWatchStream() : e.onlineStateTracker.set(OnlineState.Unknown), e.fillWritePipeline();
        }));
      }, e.prototype.disableNetwork = function () {
        return __awaiter(this, void 0, void 0, function () {
          return __generator(this, function (e) {
            return this.disableNetworkInternal(), this.onlineStateTracker.set(OnlineState.Offline), [2];
          });
        });
      }, e.prototype.disableNetworkInternal = function () {
        this.isNetworkEnabled() && (this.watchStream.stop(), this.writeStream.stop(), this.cleanUpWatchStreamState(), this.cleanUpWriteStreamState(), this.writeStream = null, this.watchStream = null);
      }, e.prototype.shutdown = function () {
        return debug(LOG_TAG$9, "RemoteStore shutting down."), this.disableNetworkInternal(), this.onlineStateTracker.set(OnlineState.Unknown), Promise.resolve();
      }, e.prototype.listen = function (e) {
        assert(!contains(this.listenTargets, e.targetId), "listen called with duplicate targetId!"), this.listenTargets[e.targetId] = e, this.shouldStartWatchStream() ? this.startWatchStream() : this.isNetworkEnabled() && this.watchStream.isOpen() && this.sendWatchRequest(e);
      }, e.prototype.unlisten = function (e) {
        assert(contains(this.listenTargets, e), "unlisten called without assigned target ID!"), delete this.listenTargets[e], this.isNetworkEnabled() && this.watchStream.isOpen() && (this.sendUnwatchRequest(e), isEmpty(this.listenTargets) && this.watchStream.markIdle());
      }, e.prototype.sendWatchRequest = function (e) {
        this.recordPendingTargetRequest(e.targetId), this.watchStream.watch(e);
      }, e.prototype.sendUnwatchRequest = function (e) {
        this.recordPendingTargetRequest(e), this.watchStream.unwatch(e);
      }, e.prototype.recordPendingTargetRequest = function (e) {
        this.pendingTargetResponses[e] = (this.pendingTargetResponses[e] || 0) + 1;
      }, e.prototype.startWatchStream = function () {
        assert(this.shouldStartWatchStream(), "startWriteStream() called when shouldStartWatchStream() is false."), this.watchStream.start({
          onOpen: this.onWatchStreamOpen.bind(this),
          onClose: this.onWatchStreamClose.bind(this),
          onWatchChange: this.onWatchStreamChange.bind(this)
        }), this.onlineStateTracker.handleWatchStreamStart();
      }, e.prototype.shouldStartWatchStream = function () {
        return this.isNetworkEnabled() && !this.watchStream.isStarted() && !isEmpty(this.listenTargets);
      }, e.prototype.cleanUpWatchStreamState = function () {
        this.accumulatedWatchChanges = [], this.pendingTargetResponses = {};
      }, e.prototype.onWatchStreamOpen = function () {
        return __awaiter(this, void 0, void 0, function () {
          var e = this;
          return __generator(this, function (t) {
            return forEachNumber(this.listenTargets, function (t, n) {
              e.sendWatchRequest(n);
            }), [2];
          });
        });
      }, e.prototype.onWatchStreamClose = function (e) {
        return __awaiter(this, void 0, void 0, function () {
          return __generator(this, function (t) {
            return assert(this.isNetworkEnabled(), "onWatchStreamClose() should only be called when the network is enabled"), this.cleanUpWatchStreamState(), this.shouldStartWatchStream() ? (e && this.onlineStateTracker.handleWatchStreamFailure(e), this.startWatchStream()) : this.onlineStateTracker.set(OnlineState.Unknown), [2];
          });
        });
      }, e.prototype.onWatchStreamChange = function (e, t) {
        return __awaiter(this, void 0, void 0, function () {
          var n;
          return __generator(this, function (r) {
            return this.onlineStateTracker.set(OnlineState.Online), e instanceof WatchTargetChange && e.state === WatchTargetChangeState.Removed && e.cause ? [2, this.handleTargetError(e)] : (this.accumulatedWatchChanges.push(e), !t.isEqual(SnapshotVersion.MIN) && t.compareTo(this.localStore.getLastRemoteSnapshotVersion()) >= 0 ? (n = this.accumulatedWatchChanges, this.accumulatedWatchChanges = [], [2, this.handleWatchChangeBatch(t, n)]) : [2]);
          });
        });
      }, e.prototype.handleWatchChangeBatch = function (e, t) {
        var n = this,
            r = new WatchChangeAggregator(e, this.listenTargets, this.pendingTargetResponses);
        r.addChanges(t);
        var o = r.createRemoteEvent();
        this.pendingTargetResponses = r.pendingTargetResponses;
        var i = [];
        return forEachNumber(r.existenceFilters, function (t, r) {
          var a = n.listenTargets[t];

          if (a) {
            var s = a.query;
            if (s.isDocumentQuery()) {
              if (0 === r.count) {
                var u = new DocumentKey(s.path),
                    c = new NoDocument(u, e);
                o.addDocumentUpdate(c);
              } else assert(1 === r.count, "Single document existence filter with count: " + r.count);
            } else {
              var h = n.localStore.remoteDocumentKeys(t).then(function (e) {
                if (o.targetChanges[t]) {
                  var i = o.targetChanges[t].mapping;
                  null !== i && (i instanceof UpdateMapping ? e = i.applyToKeySet(e) : (assert(i instanceof ResetMapping, "Expected either reset or update mapping but got something else: " + i), e = i.documents));
                }

                if (e.size !== r.count) {
                  o.handleExistenceFilterMismatch(t);
                  var u = new QueryData(s, t, a.purpose);
                  n.listenTargets[t] = u, n.sendUnwatchRequest(t);
                  var c = new QueryData(s, t, QueryPurpose.ExistenceFilterMismatch);
                  n.sendWatchRequest(c);
                }
              });
              i.push(h);
            }
          }
        }), Promise.all(i).then(function () {
          return forEachNumber(o.targetChanges, function (e, t) {
            if (t.resumeToken.length > 0) {
              var r = n.listenTargets[e];
              r && (n.listenTargets[e] = r.update({
                resumeToken: t.resumeToken,
                snapshotVersion: t.snapshotVersion
              }));
            }
          }), n.syncEngine.applyRemoteEvent(o);
        });
      }, e.prototype.handleTargetError = function (e) {
        var t = this;
        assert(!!e.cause, "Handling target error without a cause");
        var n = e.cause,
            r = Promise.resolve();
        return e.targetIds.forEach(function (e) {
          r = r.then(function () {
            return __awaiter(t, void 0, void 0, function () {
              return __generator(this, function (t) {
                return contains(this.listenTargets, e) ? (delete this.listenTargets[e], [2, this.syncEngine.rejectListen(e, n)]) : [2];
              });
            });
          });
        }), r;
      }, e.prototype.cleanUpWriteStreamState = function () {
        this.lastBatchSeen = BATCHID_UNKNOWN, debug(LOG_TAG$9, "Stopping write stream with " + this.pendingWrites.length + " pending writes"), this.pendingWrites = [];
      }, e.prototype.fillWritePipeline = function () {
        return __awaiter(this, void 0, void 0, function () {
          var e = this;
          return __generator(this, function (t) {
            return this.canWriteMutations() ? [2, this.localStore.nextMutationBatch(this.lastBatchSeen).then(function (t) {
              if (null !== t) return e.commit(t), e.fillWritePipeline();
              0 === e.pendingWrites.length && e.writeStream.markIdle();
            })] : [2];
          });
        });
      }, e.prototype.canWriteMutations = function () {
        return this.isNetworkEnabled() && this.pendingWrites.length < MAX_PENDING_WRITES;
      }, e.prototype.outstandingWrites = function () {
        return this.pendingWrites.length;
      }, e.prototype.commit = function (e) {
        assert(this.canWriteMutations(), "commit called when batches can't be written"), this.lastBatchSeen = e.batchId, this.pendingWrites.push(e), this.shouldStartWriteStream() ? this.startWriteStream() : this.isNetworkEnabled() && this.writeStream.handshakeComplete && this.writeStream.writeMutations(e.mutations);
      }, e.prototype.shouldStartWriteStream = function () {
        return this.isNetworkEnabled() && !this.writeStream.isStarted() && this.pendingWrites.length > 0;
      }, e.prototype.startWriteStream = function () {
        assert(this.shouldStartWriteStream(), "startWriteStream() called when shouldStartWriteStream() is false."), this.writeStream.start({
          onOpen: this.onWriteStreamOpen.bind(this),
          onClose: this.onWriteStreamClose.bind(this),
          onHandshakeComplete: this.onWriteHandshakeComplete.bind(this),
          onMutationResult: this.onMutationResult.bind(this)
        });
      }, e.prototype.onWriteStreamOpen = function () {
        return __awaiter(this, void 0, void 0, function () {
          return __generator(this, function (e) {
            return this.writeStream.writeHandshake(), [2];
          });
        });
      }, e.prototype.onWriteHandshakeComplete = function () {
        var e = this;
        return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function () {
          for (var t = 0, n = e.pendingWrites; t < n.length; t++) {
            var r = n[t];
            e.writeStream.writeMutations(r.mutations);
          }
        });
      }, e.prototype.onMutationResult = function (e, t) {
        var n = this;
        assert(this.pendingWrites.length > 0, "Got result for empty pending writes");
        var r = this.pendingWrites.shift(),
            o = MutationBatchResult.from(r, e, t, this.writeStream.lastStreamToken);
        return this.syncEngine.applySuccessfulWrite(o).then(function () {
          return n.fillWritePipeline();
        });
      }, e.prototype.onWriteStreamClose = function (e) {
        return __awaiter(this, void 0, void 0, function () {
          var t = this;
          return __generator(this, function (n) {
            return assert(this.isNetworkEnabled(), "onWriteStreamClose() should only be called when the network is enabled"), e && this.pendingWrites.length > 0 ? (assert(!!e, "We have pending writes, but the write stream closed without an error"), void 0, [2, (this.writeStream.handshakeComplete ? this.handleWriteError(e) : this.handleHandshakeError(e)).then(function () {
              t.shouldStartWriteStream() && t.startWriteStream();
            })]) : [2];
          });
        });
      }, e.prototype.handleHandshakeError = function (e) {
        return __awaiter(this, void 0, void 0, function () {
          return __generator(this, function (t) {
            return isPermanentError(e.code) || e.code === Code.ABORTED ? (debug(LOG_TAG$9, "RemoteStore error before completed handshake; resetting stream token: ", this.writeStream.lastStreamToken), this.writeStream.lastStreamToken = emptyByteString(), [2, this.localStore.setLastStreamToken(emptyByteString())]) : [2];
          });
        });
      }, e.prototype.handleWriteError = function (e) {
        return __awaiter(this, void 0, void 0, function () {
          var t,
              n = this;
          return __generator(this, function (r) {
            return isPermanentError(e.code) ? (t = this.pendingWrites.shift(), this.writeStream.inhibitBackoff(), [2, this.syncEngine.rejectFailedWrite(t.batchId, e).then(function () {
              return n.fillWritePipeline();
            })]) : [2];
          });
        });
      }, e.prototype.createTransaction = function () {
        return new Transaction(this.datastore);
      }, e.prototype.handleUserChange = function (e) {
        if (debug(LOG_TAG$9, "RemoteStore changing users: uid=", e.uid), this.isNetworkEnabled()) return this.disableNetworkInternal(), this.onlineStateTracker.set(OnlineState.Unknown), this.enableNetwork();
      }, e;
    }(),
        LOG_TAG$10 = "FirestoreClient",
        DOM_EXCEPTION_ABORTED = 20,
        DOM_EXCEPTION_QUOTA_EXCEEDED = 22,
        FirestoreClient = function () {
      function e(e, t, n, r) {
        this.platform = e, this.databaseInfo = t, this.credentials = n, this.asyncQueue = r;
      }

      return e.prototype.start = function (e) {
        var t = this,
            n = new Deferred$1(),
            r = new Deferred$1(),
            o = !1;
        return this.credentials.setUserChangeListener(function (i) {
          o ? t.asyncQueue.enqueue(function () {
            return t.handleUserChange(i);
          }) : (o = !0, t.initializePersistence(e, r).then(function () {
            return t.initializeRest(i);
          }).then(n.resolve, n.reject));
        }), this.asyncQueue.enqueue(function () {
          return n.promise;
        }), r.promise;
      }, e.prototype.enableNetwork = function () {
        var e = this;
        return this.asyncQueue.enqueue(function () {
          return e.remoteStore.enableNetwork();
        });
      }, e.prototype.initializePersistence = function (e, t) {
        var n = this;
        return e ? this.startIndexedDbPersistence().then(t.resolve)["catch"](function (e) {
          return t.reject(e), n.canFallback(e) ? (console.warn("Error enabling offline storage. Falling back to storage disabled: " + e), n.startMemoryPersistence()) : Promise.reject(e);
        }) : (t.resolve(), this.startMemoryPersistence());
      }, e.prototype.canFallback = function (e) {
        return e instanceof FirestoreError ? e.code === Code.FAILED_PRECONDITION || e.code === Code.UNIMPLEMENTED : !("undefined" != typeof DOMException && e instanceof DOMException) || e.code === DOM_EXCEPTION_QUOTA_EXCEEDED || e.code === DOM_EXCEPTION_ABORTED;
      }, e.prototype.startIndexedDbPersistence = function () {
        this.garbageCollector = new NoOpGarbageCollector();
        var e = IndexedDbPersistence.buildStoragePrefix(this.databaseInfo),
            t = new JsonProtoSerializer(this.databaseInfo.databaseId, {
          useProto3Json: !0
        });
        return this.persistence = new IndexedDbPersistence(e, t), this.persistence.start();
      }, e.prototype.startMemoryPersistence = function () {
        return this.garbageCollector = new EagerGarbageCollector(), this.persistence = new MemoryPersistence(), this.persistence.start();
      }, e.prototype.initializeRest = function (e) {
        var t = this;
        return this.platform.loadConnection(this.databaseInfo).then(function (n) {
          t.localStore = new LocalStore(t.persistence, e, t.garbageCollector);
          var r = t.platform.newSerializer(t.databaseInfo.databaseId),
              o = new Datastore(t.asyncQueue, n, t.credentials, r);
          return t.remoteStore = new RemoteStore(t.localStore, o, t.asyncQueue, function (e) {
            t.syncEngine.applyOnlineStateChange(e), t.eventMgr.applyOnlineStateChange(e);
          }), t.syncEngine = new SyncEngine(t.localStore, t.remoteStore, e), t.remoteStore.syncEngine = t.syncEngine, t.eventMgr = new EventManager(t.syncEngine), t.localStore.start();
        }).then(function () {
          return t.remoteStore.start();
        });
      }, e.prototype.handleUserChange = function (e) {
        return this.asyncQueue.verifyOperationInProgress(), debug(LOG_TAG$10, "User Changed: " + e.uid), this.syncEngine.handleUserChange(e);
      }, e.prototype.disableNetwork = function () {
        var e = this;
        return this.asyncQueue.enqueue(function () {
          return e.remoteStore.disableNetwork();
        });
      }, e.prototype.shutdown = function (e) {
        var t = this;
        return this.asyncQueue.enqueue(function () {
          return t.credentials.removeUserChangeListener(), t.remoteStore.shutdown();
        }).then(function () {
          return t.persistence.shutdown(e && e.purgePersistenceWithDataLoss);
        });
      }, e.prototype.listen = function (e, t, n) {
        var r = this,
            o = new QueryListener(e, t, n);
        return this.asyncQueue.enqueue(function () {
          return r.eventMgr.listen(o);
        }), o;
      }, e.prototype.unlisten = function (e) {
        var t = this;
        this.asyncQueue.enqueue(function () {
          return t.eventMgr.unlisten(e);
        });
      }, e.prototype.getDocumentFromLocalCache = function (e) {
        var t = this;
        return this.asyncQueue.enqueue(function () {
          return t.localStore.readDocument(e);
        }).then(function (e) {
          if (e instanceof Document) return e;
          throw new FirestoreError(Code.UNAVAILABLE, "Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)");
        });
      }, e.prototype.getDocumentsFromLocalCache = function (e) {
        var t = this;
        return this.asyncQueue.enqueue(function () {
          return t.localStore.executeQuery(e);
        }).then(function (t) {
          var n = documentKeySet(),
              r = new View(e, n),
              o = r.computeDocChanges(t);
          return r.applyChanges(o).snapshot;
        });
      }, e.prototype.write = function (e) {
        var t = this,
            n = new Deferred$1();
        return this.asyncQueue.enqueue(function () {
          return t.syncEngine.write(e, n);
        }), n.promise;
      }, e.prototype.databaseId = function () {
        return this.databaseInfo.databaseId;
      }, e.prototype.transaction = function (e) {
        var t = this;
        return this.asyncQueue.enqueue(function () {
          return __awaiter(t, void 0, void 0, function () {
            return __generator(this, function (e) {
              return [2];
            });
          });
        }).then(function () {
          return t.syncEngine.runTransaction(e);
        });
      }, e;
    }(),
        AsyncObserver = function () {
      function e(e) {
        this.observer = e, this.muted = !1;
      }

      return e.prototype.next = function (e) {
        this.scheduleEvent(this.observer.next, e);
      }, e.prototype.error = function (e) {
        this.scheduleEvent(this.observer.error, e);
      }, e.prototype.mute = function () {
        this.muted = !0;
      }, e.prototype.scheduleEvent = function (e, t) {
        var n = this;
        this.muted || setTimeout(function () {
          n.muted || e(t);
        }, 0);
      }, e;
    }(),
        User = function () {
      function e(e) {
        this.uid = e;
      }

      return e.prototype.isAuthenticated = function () {
        return null != this.uid;
      }, e.prototype.toKey = function () {
        return this.isAuthenticated() ? "uid:" + this.uid : "anonymous-user";
      }, e.prototype.isEqual = function (e) {
        return e.uid === this.uid;
      }, e.UNAUTHENTICATED = new e(null), e.GOOGLE_CREDENTIALS = new e("google-credentials-uid"), e.FIRST_PARTY = new e("first-party-uid"), e;
    }(),
        OAuthToken = function () {
      return function (e, t) {
        this.user = t, this.type = "OAuth", this.authHeaders = {
          Authorization: "Bearer " + e
        };
      };
    }(),
        EmptyCredentialsProvider = function () {
      function e() {
        this.userListener = null;
      }

      return e.prototype.getToken = function (e) {
        return Promise.resolve(null);
      }, e.prototype.setUserChangeListener = function (e) {
        assert(!this.userListener, "Can only call setUserChangeListener() once."), this.userListener = e, e(User.UNAUTHENTICATED);
      }, e.prototype.removeUserChangeListener = function () {
        assert(null !== this.userListener, "removeUserChangeListener() when no listener registered"), this.userListener = null;
      }, e;
    }(),
        FirebaseCredentialsProvider = function () {
      function e(e) {
        var t = this;
        this.app = e, this.tokenListener = null, this.userCounter = 0, this.userListener = null, this.tokenListener = function () {
          var e = t.getUser();
          t.currentUser && e.isEqual(t.currentUser) || (t.currentUser = e, t.userCounter++, t.userListener && t.userListener(t.currentUser));
        }, this.userCounter = 0, this.app.INTERNAL.addAuthTokenListener(this.tokenListener);
      }

      return e.prototype.getToken = function (e) {
        var t = this;
        assert(null != this.tokenListener, "getToken cannot be called after listener removed.");
        var n = this.userCounter;
        return this.app.INTERNAL.getToken(e).then(function (e) {
          if (t.userCounter !== n) throw new FirestoreError(Code.ABORTED, "getToken aborted due to uid change.");
          return e ? (assert("string" == typeof e.accessToken, "Invalid tokenData returned from getToken():" + e), new OAuthToken(e.accessToken, t.currentUser)) : null;
        });
      }, e.prototype.setUserChangeListener = function (e) {
        assert(!this.userListener, "Can only call setUserChangeListener() once."), this.userListener = e, this.currentUser && e(this.currentUser);
      }, e.prototype.removeUserChangeListener = function () {
        assert(null != this.tokenListener, "removeUserChangeListener() called twice"), assert(null !== this.userListener, "removeUserChangeListener() called when no listener registered"), this.app.INTERNAL.removeAuthTokenListener(this.tokenListener), this.tokenListener = null, this.userListener = null;
      }, e.prototype.getUser = function () {
        "function" != typeof this.app.INTERNAL.getUid && fail("This version of the Firestore SDK requires at least version 3.7.0 of firebase.js.");
        var e = this.app.INTERNAL.getUid();
        return assert(null === e || "string" == typeof e, "Received invalid UID: " + e), new User(e);
      }, e;
    }(),
        FirstPartyToken = function () {
      function e(e, t) {
        this.gapi = e, this.sessionIndex = t, this.type = "FirstParty", this.user = User.FIRST_PARTY, assert(this.gapi && this.gapi.auth && this.gapi.auth.getAuthHeaderValueForFirstParty, "unexpected gapi interface");
      }

      return Object.defineProperty(e.prototype, "authHeaders", {
        get: function get() {
          return {
            Authorization: this.gapi.auth.getAuthHeaderValueForFirstParty([]),
            "X-Goog-AuthUser": this.sessionIndex
          };
        },
        enumerable: !0,
        configurable: !0
      }), e;
    }(),
        FirstPartyCredentialsProvider = function () {
      function e(e, t) {
        this.gapi = e, this.sessionIndex = t, assert(this.gapi && this.gapi.auth && this.gapi.auth.getAuthHeaderValueForFirstParty, "unexpected gapi interface");
      }

      return e.prototype.getToken = function (e) {
        return Promise.resolve(new FirstPartyToken(this.gapi, this.sessionIndex));
      }, e.prototype.setUserChangeListener = function (e) {
        e(User.FIRST_PARTY);
      }, e.prototype.removeUserChangeListener = function () {}, e;
    }();

    var FieldValueImpl = function () {
      function e(e) {
        this.methodName = e;
      }

      return e["delete"] = function () {
        return DeleteFieldValueImpl.instance;
      }, e.serverTimestamp = function () {
        return ServerTimestampFieldValueImpl.instance;
      }, e._arrayUnion = function () {
        for (var e = [], t = 0; t < arguments.length; t++) {
          e[t] = arguments[t];
        }

        return validateAtLeastNumberOfArgs("FieldValue.arrayUnion", arguments, 1), new ArrayUnionFieldValueImpl(e);
      }, e._arrayRemove = function () {
        for (var e = [], t = 0; t < arguments.length; t++) {
          e[t] = arguments[t];
        }

        return validateAtLeastNumberOfArgs("FieldValue.arrayRemove", arguments, 1), new ArrayRemoveFieldValueImpl(e);
      }, e.prototype.isEqual = function (e) {
        return this === e;
      }, e;
    }(),
        DeleteFieldValueImpl = function (e) {
      function t() {
        return e.call(this, "FieldValue.delete") || this;
      }

      return __extends(t, e), t.instance = new t(), t;
    }(FieldValueImpl),
        ServerTimestampFieldValueImpl = function (e) {
      function t() {
        return e.call(this, "FieldValue.serverTimestamp") || this;
      }

      return __extends(t, e), t.instance = new t(), t;
    }(FieldValueImpl),
        ArrayUnionFieldValueImpl = function (e) {
      function t(t) {
        var n = e.call(this, "FieldValue.arrayUnion") || this;
        return n._elements = t, n;
      }

      return __extends(t, e), t;
    }(FieldValueImpl),
        ArrayRemoveFieldValueImpl = function (e) {
      function t(t) {
        var n = e.call(this, "FieldValue.arrayRemove") || this;
        return n._elements = t, n;
      }

      return __extends(t, e), t;
    }(FieldValueImpl),
        PublicFieldValue = makeConstructorPrivate(FieldValueImpl, "Use FieldValue.<field>() instead."),
        RESERVED_FIELD_REGEX = /^__.*__$/,
        ParsedSetData = function () {
      function e(e, t, n) {
        this.data = e, this.fieldMask = t, this.fieldTransforms = n;
      }

      return e.prototype.toMutations = function (e, t) {
        var n = [];
        return null !== this.fieldMask ? n.push(new PatchMutation(e, this.data, this.fieldMask, t)) : n.push(new SetMutation(e, this.data, t)), this.fieldTransforms.length > 0 && n.push(new TransformMutation(e, this.fieldTransforms)), n;
      }, e;
    }(),
        ParsedUpdateData = function () {
      function e(e, t, n) {
        this.data = e, this.fieldMask = t, this.fieldTransforms = n;
      }

      return e.prototype.toMutations = function (e, t) {
        var n = [new PatchMutation(e, this.data, this.fieldMask, t)];
        return this.fieldTransforms.length > 0 && n.push(new TransformMutation(e, this.fieldTransforms)), n;
      }, e;
    }(),
        UserDataSource;

    !function (e) {
      e[e.Set = 0] = "Set", e[e.Update = 1] = "Update", e[e.MergeSet = 2] = "MergeSet", e[e.Argument = 3] = "Argument";
    }(UserDataSource || (UserDataSource = {}));

    var ParseContext = function () {
      function e(e, t, n, r, o, i) {
        this.dataSource = e, this.methodName = t, this.path = n, this.arrayElement = r, void 0 === o && this.validatePath(), this.arrayElement = void 0 !== r && r, this.fieldTransforms = o || [], this.fieldMask = i || [];
      }

      return e.prototype.childContextForField = function (t) {
        var n = null == this.path ? null : this.path.child(t),
            r = new e(this.dataSource, this.methodName, n, !1, this.fieldTransforms, this.fieldMask);
        return r.validatePathSegment(t), r;
      }, e.prototype.childContextForFieldPath = function (t) {
        var n = null == this.path ? null : this.path.child(t),
            r = new e(this.dataSource, this.methodName, n, !1, this.fieldTransforms, this.fieldMask);
        return r.validatePath(), r;
      }, e.prototype.childContextForArray = function (t) {
        return new e(this.dataSource, this.methodName, null, !0, this.fieldTransforms, this.fieldMask);
      }, e.prototype.createError = function (e) {
        var t = null === this.path || this.path.isEmpty() ? "" : " (found in field " + this.path.toString() + ")";
        return new FirestoreError(Code.INVALID_ARGUMENT, "Function " + this.methodName + "() called with invalid data. " + e + t);
      }, e.prototype.validatePath = function () {
        if (null !== this.path) for (var e = 0; e < this.path.length; e++) {
          this.validatePathSegment(this.path.get(e));
        }
      }, e.prototype.validatePathSegment = function (e) {
        if (isWrite(this.dataSource) && RESERVED_FIELD_REGEX.test(e)) throw this.createError("Document fields cannot begin and end with __");
      }, e;
    }(),
        DocumentKeyReference = function () {
      return function (e, t) {
        this.databaseId = e, this.key = t;
      };
    }(),
        UserDataConverter = function () {
      function e(e) {
        this.preConverter = e;
      }

      return e.prototype.parseSetData = function (e, t) {
        var n = new ParseContext(UserDataSource.Set, e, FieldPath.EMPTY_PATH);
        validatePlainObject("Data must be an object, but it was:", n, t);
        var r = this.parseData(t, n);
        return new ParsedSetData(r, null, n.fieldTransforms);
      }, e.prototype.parseMergeData = function (e, t, n) {
        var r = new ParseContext(UserDataSource.MergeSet, e, FieldPath.EMPTY_PATH);
        validatePlainObject("Data must be an object, but it was:", r, t);
        var o,
            i,
            a = this.parseData(t, r);

        if (n) {
          for (var s = [], u = 0, c = n; u < c.length; u++) {
            var h = c[u],
                l = void 0;
            if (h instanceof FieldPath$1 ? l = h : "string" == typeof h ? l = fieldPathFromDotSeparatedString(e, h) : fail("Expected stringOrFieldPath to be a string or a FieldPath"), !a.contains(l)) throw new FirestoreError(Code.INVALID_ARGUMENT, "Field '" + l + "' is specified in your field mask but missing from your input data.");
            s.push(l);
          }

          o = new FieldMask(s), i = r.fieldTransforms.filter(function (e) {
            return o.covers(e.field);
          });
        } else o = new FieldMask(r.fieldMask), i = r.fieldTransforms;

        return new ParsedSetData(a, o, i);
      }, e.prototype.parseUpdateData = function (e, t) {
        var n = this,
            r = new ParseContext(UserDataSource.Update, e, FieldPath.EMPTY_PATH);
        validatePlainObject("Data must be an object, but it was:", r, t);
        var o = [],
            i = ObjectValue.EMPTY;
        forEach(t, function (t, a) {
          var s = fieldPathFromDotSeparatedString(e, t),
              u = r.childContextForFieldPath(s);
          if ((a = n.runPreConverter(a, u)) instanceof DeleteFieldValueImpl) o.push(s);else {
            var c = n.parseData(a, u);
            null != c && (o.push(s), i = i.set(s, c));
          }
        });
        var a = new FieldMask(o);
        return new ParsedUpdateData(i, a, r.fieldTransforms);
      }, e.prototype.parseUpdateVarargs = function (e, t, n, r) {
        var o = new ParseContext(UserDataSource.Update, e, FieldPath.EMPTY_PATH),
            i = [fieldPathFromArgument(e, t)],
            a = [n];
        if (r.length % 2 != 0) throw new FirestoreError(Code.INVALID_ARGUMENT, "Function " + e + "() needs to be called with an even number of arguments that alternate between field names and values.");

        for (var s = 0; s < r.length; s += 2) {
          i.push(fieldPathFromArgument(e, r[s])), a.push(r[s + 1]);
        }

        var u = [],
            c = ObjectValue.EMPTY;

        for (s = 0; s < i.length; ++s) {
          var h = i[s],
              l = o.childContextForFieldPath(h),
              f = this.runPreConverter(a[s], l);
          if (f instanceof DeleteFieldValueImpl) u.push(h);else {
            var d = this.parseData(f, l);
            null != d && (u.push(h), c = c.set(h, d));
          }
        }

        var p = new FieldMask(u);
        return new ParsedUpdateData(c, p, o.fieldTransforms);
      }, e.prototype.parseQueryValue = function (e, t) {
        var n = new ParseContext(UserDataSource.Argument, e, FieldPath.EMPTY_PATH),
            r = this.parseData(t, n);
        return assert(null != r, "Parsed data should not be null."), assert(0 === n.fieldTransforms.length, "Field transforms should have been disallowed."), r;
      }, e.prototype.runPreConverter = function (e, t) {
        try {
          return this.preConverter(e);
        } catch (e) {
          var n = errorMessage(e);
          throw t.createError(n);
        }
      }, e.prototype.parseData = function (e, t) {
        if (looksLikeJsonObject(e = this.runPreConverter(e, t))) return validatePlainObject("Unsupported field value:", t, e), this.parseObject(e, t);
        if (e instanceof FieldValueImpl) return this.parseSentinelFieldValue(e, t), null;

        if (t.path && t.fieldMask.push(t.path), e instanceof Array) {
          if (t.arrayElement) throw t.createError("Nested arrays are not supported");
          return this.parseArray(e, t);
        }

        return this.parseScalarValue(e, t);
      }, e.prototype.parseObject = function (e, t) {
        var n = this,
            r = new SortedMap(primitiveComparator);
        return forEach(e, function (e, o) {
          var i = n.parseData(o, t.childContextForField(e));
          null != i && (r = r.insert(e, i));
        }), new ObjectValue(r);
      }, e.prototype.parseArray = function (e, t) {
        for (var n = [], r = 0, o = 0, i = e; o < i.length; o++) {
          var a = i[o],
              s = this.parseData(a, t.childContextForArray(r));
          null == s && (s = NullValue.INSTANCE), n.push(s), r++;
        }

        return new ArrayValue(n);
      }, e.prototype.parseSentinelFieldValue = function (e, t) {
        if (!isWrite(t.dataSource)) throw t.createError(e.methodName + "() can only be used with update() and set()");
        if (null === t.path) throw t.createError(e.methodName + "() is not currently supported inside arrays");

        if (e instanceof DeleteFieldValueImpl) {
          if (t.dataSource !== UserDataSource.MergeSet) throw t.dataSource === UserDataSource.Update ? (assert(t.path.length > 0, "FieldValue.delete() at the top level should have already been handled."), t.createError("FieldValue.delete() can only appear at the top level of your update data")) : t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");
          t.fieldMask.push(t.path);
        } else if (e instanceof ServerTimestampFieldValueImpl) t.fieldTransforms.push(new FieldTransform(t.path, ServerTimestampTransform.instance));else if (e instanceof ArrayUnionFieldValueImpl) {
          var n = this.parseArrayTransformElements(e.methodName, e._elements),
              r = new ArrayUnionTransformOperation(n);
          t.fieldTransforms.push(new FieldTransform(t.path, r));
        } else if (e instanceof ArrayRemoveFieldValueImpl) {
          n = this.parseArrayTransformElements(e.methodName, e._elements);
          var o = new ArrayRemoveTransformOperation(n);
          t.fieldTransforms.push(new FieldTransform(t.path, o));
        } else fail("Unknown FieldValue type: " + e);
      }, e.prototype.parseScalarValue = function (e, t) {
        if (null === e) return NullValue.INSTANCE;
        if ("number" == typeof e) return isSafeInteger(e) ? new IntegerValue(e) : new DoubleValue(e);
        if ("boolean" == typeof e) return BooleanValue.of(e);
        if ("string" == typeof e) return new StringValue(e);
        if (e instanceof Date) return new TimestampValue(Timestamp.fromDate(e));
        if (e instanceof Timestamp) return new TimestampValue(new Timestamp(e.seconds, 1e3 * Math.floor(e.nanoseconds / 1e3)));
        if (e instanceof GeoPoint) return new GeoPointValue(e);
        if (e instanceof Blob) return new BlobValue(e);
        if (e instanceof DocumentKeyReference) return new RefValue(e.databaseId, e.key);
        throw t.createError("Unsupported field value: " + valueDescription(e));
      }, e.prototype.parseArrayTransformElements = function (e, t) {
        var n = this;
        return t.map(function (t, r) {
          var o = new ParseContext(UserDataSource.Argument, e, FieldPath.EMPTY_PATH);
          return n.parseData(t, o.childContextForArray(r));
        });
      }, e;
    }();

    var DEFAULT_HOST = "firestore.googleapis.com",
        DEFAULT_SSL = !0,
        DEFAULT_TIMESTAMPS_IN_SNAPSHOTS = !1,
        FirestoreSettings = function () {
      function e(e) {
        if (void 0 === e.host) {
          if (void 0 !== e.ssl) throw new FirestoreError(Code.INVALID_ARGUMENT, "Can't provide ssl option if host option is not set");
          this.host = DEFAULT_HOST, this.ssl = DEFAULT_SSL;
        } else validateNamedType("settings", "string", "host", e.host), this.host = e.host, validateNamedOptionalType("settings", "boolean", "ssl", e.ssl), this.ssl = defaulted(e.ssl, DEFAULT_SSL);

        validateOptionNames("settings", e, ["host", "ssl", "credentials", "timestampsInSnapshots"]), validateNamedOptionalType("settings", "object", "credentials", e.credentials), this.credentials = e.credentials, validateNamedOptionalType("settings", "boolean", "timestampsInSnapshots", e.timestampsInSnapshots), this.timestampsInSnapshots = defaulted(e.timestampsInSnapshots, DEFAULT_TIMESTAMPS_IN_SNAPSHOTS);
      }

      return e.prototype.isEqual = function (e) {
        return this.host === e.host && this.ssl === e.ssl && this.timestampsInSnapshots === e.timestampsInSnapshots && this.credentials === e.credentials;
      }, e;
    }(),
        FirestoreConfig = function () {
      return function () {};
    }(),
        Firestore = function () {
      function e(t) {
        var n = this;
        this._queue = new AsyncQueue(), this.INTERNAL = {
          "delete": function _delete(e) {
            return __awaiter(n, void 0, void 0, function () {
              return __generator(this, function (t) {
                return this._firestoreClient ? [2, this._firestoreClient.shutdown(e)] : [2];
              });
            });
          }
        };
        var r = new FirestoreConfig();

        if ("object" == _typeof(t.options)) {
          var o = t;
          r.firebaseApp = o, r.databaseId = e.databaseIdFromApp(o), r.persistenceKey = r.firebaseApp.name, r.credentials = new FirebaseCredentialsProvider(o);
        } else {
          var i = t;
          if (!i.projectId) throw new FirestoreError(Code.INVALID_ARGUMENT, "Must provide projectId");
          r.databaseId = new DatabaseId(i.projectId, i.database), r.persistenceKey = "[DEFAULT]", r.credentials = new EmptyCredentialsProvider();
        }

        r.settings = new FirestoreSettings({}), this._config = r, this._databaseId = r.databaseId;
      }

      return e.prototype.settings = function (e) {
        if (validateExactNumberOfArgs("Firestore.settings", arguments, 1), validateArgType("Firestore.settings", "object", 1, e), contains(e, "persistence")) throw new FirestoreError(Code.INVALID_ARGUMENT, '"persistence" is now specified with a separate call to firestore.enablePersistence().');
        var t = new FirestoreSettings(e);
        if (this._firestoreClient && !this._config.settings.isEqual(t)) throw new FirestoreError(Code.FAILED_PRECONDITION, "Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");
        this._config.settings = t, void 0 !== t.credentials && (this._config.credentials = makeCredentialsProvider(t.credentials));
      }, e.prototype.enableNetwork = function () {
        return this.ensureClientConfigured(), this._firestoreClient.enableNetwork();
      }, e.prototype.disableNetwork = function () {
        return this.ensureClientConfigured(), this._firestoreClient.disableNetwork();
      }, e.prototype.enablePersistence = function () {
        if (this._firestoreClient) throw new FirestoreError(Code.FAILED_PRECONDITION, "Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");
        return this.configureClient(!0);
      }, e.prototype.ensureClientConfigured = function () {
        return this._firestoreClient || this.configureClient(!1), this._firestoreClient;
      }, e.prototype.configureClient = function (e) {
        var t = this;
        assert(!!this._config.settings.host, "FirestoreSettings.host cannot be falsey"), this._config.settings.timestampsInSnapshots || error("\nThe behavior for Date objects stored in Firestore is going to change\nAND YOUR APP MAY BREAK.\nTo hide this warning and ensure your app does not break, you need to add the\nfollowing code to your app before calling any other Cloud Firestore methods:\n\n  const firestore = firebase.firestore();\n  const settings = {/* your settings... */ timestampsInSnapshots: true};\n  firestore.settings(settings);\n\nWith this change, timestamps stored in Cloud Firestore will be read back as\nFirebase Timestamp objects instead of as system Date objects. So you will also\nneed to update code expecting a Date to instead expect a Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at');\n  const date = timestamp.toDate();\n\nPlease audit all existing usages of Date when you enable the new behavior. In a\nfuture release, the behavior will change to the new behavior, so if you do not\nfollow these steps, YOUR APP MAY BREAK."), assert(!this._firestoreClient, "configureClient() called multiple times");
        var n = new DatabaseInfo(this._config.databaseId, this._config.persistenceKey, this._config.settings.host, this._config.settings.ssl);
        return this._dataConverter = new UserDataConverter(function (e) {
          if (e instanceof DocumentReference) {
            var n = t._config.databaseId,
                r = e.firestore._config.databaseId;
            if (!r.isEqual(n)) throw new FirestoreError(Code.INVALID_ARGUMENT, "Document reference is for database " + r.projectId + "/" + r.database + " but should be for database " + n.projectId + "/" + n.database);
            return new DocumentKeyReference(t._config.databaseId, e._key);
          }

          return e;
        }), this._firestoreClient = new FirestoreClient(PlatformSupport.getPlatform(), n, this._config.credentials, this._queue), this._firestoreClient.start(e);
      }, e.databaseIdFromApp = function (e) {
        var t = e.options;

        if (!contains(t, "projectId")) {
          if (contains(t, "firestoreId")) throw new FirestoreError(Code.INVALID_ARGUMENT, '"firestoreId" is now specified as "projectId" in firebase.initializeApp.');
          throw new FirestoreError(Code.INVALID_ARGUMENT, '"projectId" not provided in firebase.initializeApp.');
        }

        if (contains(t, "firestoreOptions")) throw new FirestoreError(Code.INVALID_ARGUMENT, '"firestoreOptions" values are now specified with Firestore.settings()');
        var n = t.projectId;
        if (!n || "string" != typeof n) throw new FirestoreError(Code.INVALID_ARGUMENT, "projectId must be a string in FirebaseApp.options");
        return new DatabaseId(n);
      }, Object.defineProperty(e.prototype, "app", {
        get: function get() {
          if (!this._config.firebaseApp) throw new FirestoreError(Code.FAILED_PRECONDITION, "Firestore was not initialized using the Firebase SDK. 'app' is not available");
          return this._config.firebaseApp;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.collection = function (e) {
        if (validateExactNumberOfArgs("Firestore.collection", arguments, 1), validateArgType("Firestore.collection", "string", 1, e), !e) throw new FirestoreError(Code.INVALID_ARGUMENT, "Must provide a non-empty collection path to collection()");
        return this.ensureClientConfigured(), new CollectionReference(ResourcePath.fromString(e), this);
      }, e.prototype.doc = function (e) {
        if (validateExactNumberOfArgs("Firestore.doc", arguments, 1), validateArgType("Firestore.doc", "string", 1, e), !e) throw new FirestoreError(Code.INVALID_ARGUMENT, "Must provide a non-empty document path to doc()");
        return this.ensureClientConfigured(), DocumentReference.forPath(ResourcePath.fromString(e), this);
      }, e.prototype.runTransaction = function (e) {
        var t = this;
        return validateExactNumberOfArgs("Firestore.runTransaction", arguments, 1), validateArgType("Firestore.runTransaction", "function", 1, e), this.ensureClientConfigured().transaction(function (n) {
          return e(new Transaction$1(t, n));
        });
      }, e.prototype.batch = function () {
        return this.ensureClientConfigured(), new WriteBatch(this);
      }, Object.defineProperty(e, "logLevel", {
        get: function get() {
          switch (getLogLevel()) {
            case LogLevel$1.DEBUG:
              return "debug";

            case LogLevel$1.ERROR:
              return "error";

            case LogLevel$1.SILENT:
              return "silent";

            default:
              return fail("Unknown log level: " + getLogLevel());
          }
        },
        enumerable: !0,
        configurable: !0
      }), e.setLogLevel = function (e) {
        switch (validateExactNumberOfArgs("Firestore.setLogLevel", arguments, 1), validateArgType("Firestore.setLogLevel", "string", 1, e), e) {
          case "debug":
            setLogLevel$1(LogLevel$1.DEBUG);
            break;

          case "error":
            setLogLevel$1(LogLevel$1.ERROR);
            break;

          case "silent":
            setLogLevel$1(LogLevel$1.SILENT);
            break;

          default:
            throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid log level: " + e);
        }
      }, e.prototype._areTimestampsInSnapshotsEnabled = function () {
        return this._config.settings.timestampsInSnapshots;
      }, e;
    }(),
        Transaction$1 = function () {
      function e(e, t) {
        this._firestore = e, this._transaction = t;
      }

      return e.prototype.get = function (e) {
        var t = this;
        validateExactNumberOfArgs("Transaction.get", arguments, 1);
        var n = validateReference("Transaction.get", e, this._firestore);
        return this._transaction.lookup([n._key]).then(function (e) {
          if (!e || 1 !== e.length) return fail("Mismatch in docs returned from document lookup.");
          var r = e[0];
          return new DocumentSnapshot(t._firestore, n._key, r instanceof NoDocument ? null : r, !1);
        });
      }, e.prototype.set = function (e, t, n) {
        validateBetweenNumberOfArgs("Transaction.set", arguments, 2, 3);
        var r = validateReference("Transaction.set", e, this._firestore),
            o = (n = validateSetOptions("Transaction.set", n)).merge || n.mergeFields ? this._firestore._dataConverter.parseMergeData("Transaction.set", t, n.mergeFields) : this._firestore._dataConverter.parseSetData("Transaction.set", t);
        return this._transaction.set(r._key, o), this;
      }, e.prototype.update = function (e, t, n) {
        for (var r, o, i = [], a = 3; a < arguments.length; a++) {
          i[a - 3] = arguments[a];
        }

        return "string" == typeof t || t instanceof FieldPath$1 ? (validateAtLeastNumberOfArgs("Transaction.update", arguments, 3), r = validateReference("Transaction.update", e, this._firestore), o = this._firestore._dataConverter.parseUpdateVarargs("Transaction.update", t, n, i)) : (validateExactNumberOfArgs("Transaction.update", arguments, 2), r = validateReference("Transaction.update", e, this._firestore), o = this._firestore._dataConverter.parseUpdateData("Transaction.update", t)), this._transaction.update(r._key, o), this;
      }, e.prototype["delete"] = function (e) {
        validateExactNumberOfArgs("Transaction.delete", arguments, 1);
        var t = validateReference("Transaction.delete", e, this._firestore);
        return this._transaction["delete"](t._key), this;
      }, e;
    }(),
        WriteBatch = function () {
      function e(e) {
        this._firestore = e, this._mutations = [], this._committed = !1;
      }

      return e.prototype.set = function (e, t, n) {
        validateBetweenNumberOfArgs("WriteBatch.set", arguments, 2, 3), this.verifyNotCommitted();
        var r = validateReference("WriteBatch.set", e, this._firestore),
            o = (n = validateSetOptions("WriteBatch.set", n)).merge || n.mergeFields ? this._firestore._dataConverter.parseMergeData("WriteBatch.set", t, n.mergeFields) : this._firestore._dataConverter.parseSetData("WriteBatch.set", t);
        return this._mutations = this._mutations.concat(o.toMutations(r._key, Precondition.NONE)), this;
      }, e.prototype.update = function (e, t, n) {
        for (var r, o, i = [], a = 3; a < arguments.length; a++) {
          i[a - 3] = arguments[a];
        }

        return this.verifyNotCommitted(), "string" == typeof t || t instanceof FieldPath$1 ? (validateAtLeastNumberOfArgs("WriteBatch.update", arguments, 3), r = validateReference("WriteBatch.update", e, this._firestore), o = this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update", t, n, i)) : (validateExactNumberOfArgs("WriteBatch.update", arguments, 2), r = validateReference("WriteBatch.update", e, this._firestore), o = this._firestore._dataConverter.parseUpdateData("WriteBatch.update", t)), this._mutations = this._mutations.concat(o.toMutations(r._key, Precondition.exists(!0))), this;
      }, e.prototype["delete"] = function (e) {
        validateExactNumberOfArgs("WriteBatch.delete", arguments, 1), this.verifyNotCommitted();
        var t = validateReference("WriteBatch.delete", e, this._firestore);
        return this._mutations = this._mutations.concat(new DeleteMutation(t._key, Precondition.NONE)), this;
      }, e.prototype.commit = function () {
        return __awaiter(this, void 0, void 0, function () {
          return __generator(this, function (e) {
            return this.verifyNotCommitted(), this._committed = !0, this._mutations.length > 0 ? [2, this._firestore.ensureClientConfigured().write(this._mutations)] : [2];
          });
        });
      }, e.prototype.verifyNotCommitted = function () {
        if (this._committed) throw new FirestoreError(Code.FAILED_PRECONDITION, "A write batch can no longer be used after commit() has been called.");
      }, e;
    }(),
        DocumentReference = function () {
      function e(e, t) {
        this._key = e, this.firestore = t, this._firestoreClient = this.firestore.ensureClientConfigured();
      }

      return e.forPath = function (t, n) {
        if (t.length % 2 != 0) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid document reference. Document references must have an even number of segments, but " + t.canonicalString() + " has " + t.length);
        return new e(new DocumentKey(t), n);
      }, Object.defineProperty(e.prototype, "id", {
        get: function get() {
          return this._key.path.lastSegment();
        },
        enumerable: !0,
        configurable: !0
      }), Object.defineProperty(e.prototype, "parent", {
        get: function get() {
          return new CollectionReference(this._key.path.popLast(), this.firestore);
        },
        enumerable: !0,
        configurable: !0
      }), Object.defineProperty(e.prototype, "path", {
        get: function get() {
          return this._key.path.canonicalString();
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.collection = function (e) {
        if (validateExactNumberOfArgs("DocumentReference.collection", arguments, 1), validateArgType("DocumentReference.collection", "string", 1, e), !e) throw new FirestoreError(Code.INVALID_ARGUMENT, "Must provide a non-empty collection name to collection()");
        var t = ResourcePath.fromString(e);
        return new CollectionReference(this._key.path.child(t), this.firestore);
      }, e.prototype.isEqual = function (t) {
        if (!(t instanceof e)) throw invalidClassError("isEqual", "DocumentReference", 1, t);
        return this.firestore === t.firestore && this._key.isEqual(t._key);
      }, e.prototype.set = function (e, t) {
        validateBetweenNumberOfArgs("DocumentReference.set", arguments, 1, 2);
        var n = (t = validateSetOptions("DocumentReference.set", t)).merge || t.mergeFields ? this.firestore._dataConverter.parseMergeData("DocumentReference.set", e, t.mergeFields) : this.firestore._dataConverter.parseSetData("DocumentReference.set", e);
        return this._firestoreClient.write(n.toMutations(this._key, Precondition.NONE));
      }, e.prototype.update = function (e, t) {
        for (var n, r = [], o = 2; o < arguments.length; o++) {
          r[o - 2] = arguments[o];
        }

        return "string" == typeof e || e instanceof FieldPath$1 ? (validateAtLeastNumberOfArgs("DocumentReference.update", arguments, 2), n = this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update", e, t, r)) : (validateExactNumberOfArgs("DocumentReference.update", arguments, 1), n = this.firestore._dataConverter.parseUpdateData("DocumentReference.update", e)), this._firestoreClient.write(n.toMutations(this._key, Precondition.exists(!0)));
      }, e.prototype["delete"] = function () {
        return validateExactNumberOfArgs("DocumentReference.delete", arguments, 0), this._firestoreClient.write([new DeleteMutation(this._key, Precondition.NONE)]);
      }, e.prototype.onSnapshot = function () {
        for (var e = [], t = 0; t < arguments.length; t++) {
          e[t] = arguments[t];
        }

        validateBetweenNumberOfArgs("DocumentReference.onSnapshot", arguments, 1, 4);
        var n,
            r = {
          includeMetadataChanges: !1
        },
            o = 0;
        "object" != _typeof(e[o]) || isPartialObserver(e[o]) || (validateOptionNames("DocumentReference.onSnapshot", r = e[o], ["includeMetadataChanges"]), validateNamedOptionalType("DocumentReference.onSnapshot", "boolean", "includeMetadataChanges", r.includeMetadataChanges), o++);
        var i = {
          includeMetadataChanges: r.includeMetadataChanges
        };
        return isPartialObserver(e[o]) ? n = e[o] : (validateArgType("DocumentReference.onSnapshot", "function", o, e[o]), validateOptionalArgType("DocumentReference.onSnapshot", "function", o + 1, e[o + 1]), validateOptionalArgType("DocumentReference.onSnapshot", "function", o + 2, e[o + 2]), n = {
          next: e[o],
          error: e[o + 1],
          complete: e[o + 2]
        }), this.onSnapshotInternal(i, n);
      }, e.prototype.onSnapshotInternal = function (e, t) {
        var n = this,
            r = function r(e) {
          console.error("Uncaught Error in onSnapshot:", e);
        };

        t.error && (r = t.error.bind(t));

        var o = new AsyncObserver({
          next: function next(e) {
            if (t.next) {
              assert(e.docs.size <= 1, "Too many documents returned on a document query");
              var r = e.docs.get(n._key);
              t.next(new DocumentSnapshot(n.firestore, n._key, r, e.fromCache));
            }
          },
          error: r
        }),
            i = this._firestoreClient.listen(Query.atPath(this._key.path), o, e);

        return function () {
          o.mute(), n._firestoreClient.unlisten(i);
        };
      }, e.prototype.get = function (e) {
        var t = this;
        return validateOptionNames("DocumentReference.get", e, ["source"]), e && validateNamedOptionalPropertyEquals("DocumentReference.get", "options", "source", e.source, ["default", "server", "cache"]), new Promise(function (n, r) {
          e && "cache" === e.source ? t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then(function (e) {
            n(new DocumentSnapshot(t.firestore, t._key, e, !0));
          }, r) : t.getViaSnapshotListener(n, r, e);
        });
      }, e.prototype.getViaSnapshotListener = function (e, t, n) {
        var r = this.onSnapshotInternal({
          includeMetadataChanges: !0,
          waitForSyncWhenOnline: !0
        }, {
          next: function next(o) {
            r(), !o.exists && o.metadata.fromCache ? t(new FirestoreError(Code.UNAVAILABLE, "Failed to get document because the client is offline.")) : o.exists && o.metadata.fromCache && n && "server" === n.source ? t(new FirestoreError(Code.UNAVAILABLE, 'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')) : e(o);
          },
          error: t
        });
      }, e;
    }(),
        SnapshotMetadata = function () {
      function e(e, t) {
        this.hasPendingWrites = e, this.fromCache = t;
      }

      return e.prototype.isEqual = function (e) {
        return this.hasPendingWrites === e.hasPendingWrites && this.fromCache === e.fromCache;
      }, e;
    }(),
        DocumentSnapshot = function () {
      function e(e, t, n, r) {
        this._firestore = e, this._key = t, this._document = n, this._fromCache = r;
      }

      return e.prototype.data = function (e) {
        return validateBetweenNumberOfArgs("DocumentSnapshot.data", arguments, 0, 1), e = validateSnapshotOptions("DocumentSnapshot.data", e), this._document ? this.convertObject(this._document.data, FieldValueOptions.fromSnapshotOptions(e, this._firestore._areTimestampsInSnapshotsEnabled())) : void 0;
      }, e.prototype.get = function (e, t) {
        if (validateBetweenNumberOfArgs("DocumentSnapshot.get", arguments, 1, 2), t = validateSnapshotOptions("DocumentSnapshot.get", t), this._document) {
          var n = this._document.data.field(fieldPathFromArgument("DocumentSnapshot.get", e));

          if (void 0 !== n) return this.convertValue(n, FieldValueOptions.fromSnapshotOptions(t, this._firestore._areTimestampsInSnapshotsEnabled()));
        }
      }, Object.defineProperty(e.prototype, "id", {
        get: function get() {
          return this._key.path.lastSegment();
        },
        enumerable: !0,
        configurable: !0
      }), Object.defineProperty(e.prototype, "ref", {
        get: function get() {
          return new DocumentReference(this._key, this._firestore);
        },
        enumerable: !0,
        configurable: !0
      }), Object.defineProperty(e.prototype, "exists", {
        get: function get() {
          return null !== this._document;
        },
        enumerable: !0,
        configurable: !0
      }), Object.defineProperty(e.prototype, "metadata", {
        get: function get() {
          return new SnapshotMetadata(null !== this._document && this._document.hasLocalMutations, this._fromCache);
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.isEqual = function (t) {
        if (!(t instanceof e)) throw invalidClassError("isEqual", "DocumentSnapshot", 1, t);
        return this._firestore === t._firestore && this._fromCache === t._fromCache && this._key.isEqual(t._key) && (null === this._document ? null === t._document : this._document.isEqual(t._document));
      }, e.prototype.convertObject = function (e, t) {
        var n = this,
            r = {};
        return e.forEach(function (e, o) {
          r[e] = n.convertValue(o, t);
        }), r;
      }, e.prototype.convertValue = function (e, t) {
        if (e instanceof ObjectValue) return this.convertObject(e, t);
        if (e instanceof ArrayValue) return this.convertArray(e, t);

        if (e instanceof RefValue) {
          var n = e.value(t),
              r = this._firestore.ensureClientConfigured().databaseId();

          return e.databaseId.isEqual(r) || error("Document " + this._key.path + " contains a document reference within a different database (" + e.databaseId.projectId + "/" + e.databaseId.database + ") which is not supported. It will be treated as a reference in the current database (" + r.projectId + "/" + r.database + ") instead."), new DocumentReference(n, this._firestore);
        }

        return e.value(t);
      }, e.prototype.convertArray = function (e, t) {
        var n = this;
        return e.internalValue.map(function (e) {
          return n.convertValue(e, t);
        });
      }, e;
    }(),
        QueryDocumentSnapshot = function (e) {
      function t(t, n, r, o) {
        return e.call(this, t, n, r, o) || this;
      }

      return __extends(t, e), t.prototype.data = function (t) {
        var n = e.prototype.data.call(this, t);
        return assert("object" == _typeof(n), "Document in a QueryDocumentSnapshot should exist"), n;
      }, t;
    }(DocumentSnapshot),
        Query$1 = function () {
      function e(e, t) {
        this._query = e, this.firestore = t;
      }

      return e.prototype.where = function (t, n, r) {
        var o;
        validateExactNumberOfArgs("Query.where", arguments, 3), validateArgType("Query.where", "string", 2, n), validateDefined("Query.where", 3, r);
        var i = fieldPathFromArgument("Query.where", t),
            a = RelationOp.fromString(n);

        if (i.isKeyField()) {
          if (a === RelationOp.ARRAY_CONTAINS) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");

          if ("string" == typeof r) {
            if (-1 !== r.indexOf("/")) throw new FirestoreError(Code.INVALID_ARGUMENT, "Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");
            if ("" === r) throw new FirestoreError(Code.INVALID_ARGUMENT, "Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");

            var s = this._query.path.child(new ResourcePath([r]));

            assert(s.length % 2 == 0, "Path should be a document key"), o = new RefValue(this.firestore._databaseId, new DocumentKey(s));
          } else {
            if (!(r instanceof DocumentReference)) throw new FirestoreError(Code.INVALID_ARGUMENT, "Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: " + valueDescription(r) + ".");
            var u = r;
            o = new RefValue(this.firestore._databaseId, u._key);
          }
        } else o = this.firestore._dataConverter.parseQueryValue("Query.where", r);

        var c = fieldFilter(i, a, o);
        return this.validateNewFilter(c), new e(this._query.addFilter(c), this.firestore);
      }, e.prototype.orderBy = function (t, n) {
        var r;
        if (validateBetweenNumberOfArgs("Query.orderBy", arguments, 1, 2), validateOptionalArgType("Query.orderBy", "string", 2, n), void 0 === n || "asc" === n) r = Direction.ASCENDING;else {
          if ("desc" !== n) throw new FirestoreError(Code.INVALID_ARGUMENT, "Function Query.orderBy() has unknown direction '" + n + "', expected 'asc' or 'desc'.");
          r = Direction.DESCENDING;
        }
        if (null !== this._query.startAt) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");
        if (null !== this._query.endAt) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");
        var o = fieldPathFromArgument("Query.orderBy", t),
            i = new OrderBy(o, r);
        return this.validateNewOrderBy(i), new e(this._query.addOrderBy(i), this.firestore);
      }, e.prototype.limit = function (t) {
        if (validateExactNumberOfArgs("Query.limit", arguments, 1), validateArgType("Query.limit", "number", 1, t), t <= 0) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid Query. Query limit (" + t + ") is invalid. Limit must be positive.");
        return new e(this._query.withLimit(t), this.firestore);
      }, e.prototype.startAt = function (t) {
        for (var n = [], r = 1; r < arguments.length; r++) {
          n[r - 1] = arguments[r];
        }

        validateAtLeastNumberOfArgs("Query.startAt", arguments, 1);
        var o = this.boundFromDocOrFields("Query.startAt", t, n, !0);
        return new e(this._query.withStartAt(o), this.firestore);
      }, e.prototype.startAfter = function (t) {
        for (var n = [], r = 1; r < arguments.length; r++) {
          n[r - 1] = arguments[r];
        }

        validateAtLeastNumberOfArgs("Query.startAfter", arguments, 1);
        var o = this.boundFromDocOrFields("Query.startAfter", t, n, !1);
        return new e(this._query.withStartAt(o), this.firestore);
      }, e.prototype.endBefore = function (t) {
        for (var n = [], r = 1; r < arguments.length; r++) {
          n[r - 1] = arguments[r];
        }

        validateAtLeastNumberOfArgs("Query.endBefore", arguments, 1);
        var o = this.boundFromDocOrFields("Query.endBefore", t, n, !0);
        return new e(this._query.withEndAt(o), this.firestore);
      }, e.prototype.endAt = function (t) {
        for (var n = [], r = 1; r < arguments.length; r++) {
          n[r - 1] = arguments[r];
        }

        validateAtLeastNumberOfArgs("Query.endAt", arguments, 1);
        var o = this.boundFromDocOrFields("Query.endAt", t, n, !1);
        return new e(this._query.withEndAt(o), this.firestore);
      }, e.prototype.isEqual = function (t) {
        if (!(t instanceof e)) throw invalidClassError("isEqual", "Query", 1, t);
        return this.firestore === t.firestore && this._query.isEqual(t._query);
      }, e.prototype.boundFromDocOrFields = function (e, t, n, r) {
        if (validateDefined(e, 1, t), t instanceof DocumentSnapshot) {
          if (n.length > 0) throw new FirestoreError(Code.INVALID_ARGUMENT, "Too many arguments provided to " + e + "().");
          var o = t;
          if (!o.exists) throw new FirestoreError(Code.NOT_FOUND, "Can't use a DocumentSnapshot that doesn't exist for " + e + "().");
          return this.boundFromDocument(e, o._document, r);
        }

        var i = [t].concat(n);
        return this.boundFromFields(e, i, r);
      }, e.prototype.boundFromDocument = function (e, t, n) {
        for (var r = [], o = 0, i = this._query.orderBy; o < i.length; o++) {
          var a = i[o];
          if (a.field.isKeyField()) r.push(new RefValue(this.firestore._databaseId, t.key));else {
            var s = t.field(a.field);

            if (void 0 === s) {
              var u = a.field.canonicalString();
              throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid query. You are trying to start or end a query using a document for which the field '" + u + "' (used as the orderBy) does not exist.");
            }

            r.push(s);
          }
        }

        return new Bound(r, n);
      }, e.prototype.boundFromFields = function (e, t, n) {
        var r = this._query.explicitOrderBy;
        if (t.length > r.length) throw new FirestoreError(Code.INVALID_ARGUMENT, "Too many arguments provided to " + e + "(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");

        for (var o = [], i = 0; i < t.length; i++) {
          var a = t[i];

          if (r[i].field.isKeyField()) {
            if ("string" != typeof a) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid query. Expected a string for document ID in " + e + "(), but got a " + _typeof(a));
            if (-1 !== a.indexOf("/")) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid query. Document ID '" + a + "' contains a slash in " + e + "()");
            var s = new DocumentKey(this._query.path.child(a));
            o.push(new RefValue(this.firestore._databaseId, s));
          } else {
            var u = this.firestore._dataConverter.parseQueryValue(e, a);

            o.push(u);
          }
        }

        return new Bound(o, n);
      }, e.prototype.onSnapshot = function () {
        for (var e = [], t = 0; t < arguments.length; t++) {
          e[t] = arguments[t];
        }

        validateBetweenNumberOfArgs("Query.onSnapshot", arguments, 1, 4);
        var n,
            r = {},
            o = 0;
        return "object" != _typeof(e[o]) || isPartialObserver(e[o]) || (validateOptionNames("Query.onSnapshot", r = e[o], ["includeMetadataChanges"]), validateNamedOptionalType("Query.onSnapshot", "boolean", "includeMetadataChanges", r.includeMetadataChanges), o++), isPartialObserver(e[o]) ? n = e[o] : (validateArgType("Query.onSnapshot", "function", o, e[o]), validateOptionalArgType("Query.onSnapshot", "function", o + 1, e[o + 1]), validateOptionalArgType("Query.onSnapshot", "function", o + 2, e[o + 2]), n = {
          next: e[o],
          error: e[o + 1],
          complete: e[o + 2]
        }), this.onSnapshotInternal(r, n);
      }, e.prototype.onSnapshotInternal = function (e, t) {
        var n = this,
            r = function r(e) {
          console.error("Uncaught Error in onSnapshot:", e);
        };

        t.error && (r = t.error.bind(t));
        var o = new AsyncObserver({
          next: function next(e) {
            t.next && t.next(new QuerySnapshot(n.firestore, n._query, e));
          },
          error: r
        }),
            i = this.firestore.ensureClientConfigured(),
            a = i.listen(this._query, o, e);
        return function () {
          o.mute(), i.unlisten(a);
        };
      }, e.prototype.get = function (e) {
        var t = this;
        return validateBetweenNumberOfArgs("Query.get", arguments, 0, 1), new Promise(function (n, r) {
          e && "cache" === e.source ? t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then(function (e) {
            n(new QuerySnapshot(t.firestore, t._query, e));
          }, r) : t.getViaSnapshotListener(n, r, e);
        });
      }, e.prototype.getViaSnapshotListener = function (e, t, n) {
        var r = this.onSnapshotInternal({
          includeMetadataChanges: !0,
          waitForSyncWhenOnline: !0
        }, {
          next: function next(o) {
            r(), o.metadata.fromCache && n && "server" === n.source ? t(new FirestoreError(Code.UNAVAILABLE, 'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')) : e(o);
          },
          error: t
        });
      }, e.prototype.validateNewFilter = function (e) {
        if (e instanceof RelationFilter) if (e.isInequality()) {
          var t = this._query.getInequalityFilterField();

          if (null !== t && !t.isEqual(e.field)) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '" + t.toString() + "' and '" + e.field.toString() + "'");

          var n = this._query.getFirstOrderByField();

          null !== n && this.validateOrderByAndInequalityMatch(e.field, n);
        } else if (e.op === RelationOp.ARRAY_CONTAINS && this._query.hasArrayContainsFilter()) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid query. Queries only support a single array-contains filter.");
      }, e.prototype.validateNewOrderBy = function (e) {
        if (null === this._query.getFirstOrderByField()) {
          var t = this._query.getInequalityFilterField();

          null !== t && this.validateOrderByAndInequalityMatch(t, e.field);
        }
      }, e.prototype.validateOrderByAndInequalityMatch = function (e, t) {
        if (!t.isEqual(e)) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '" + e.toString() + "' and so you must also use '" + e.toString() + "' as your first Query.orderBy(), but your first Query.orderBy() is on field '" + t.toString() + "' instead.");
      }, e;
    }(),
        QuerySnapshot = function () {
      function e(e, t, n) {
        this._firestore = e, this._originalQuery = t, this._snapshot = n, this._cachedChanges = null, this._cachedChangesIncludeMetadataChanges = null, this.metadata = new SnapshotMetadata(n.hasPendingWrites, n.fromCache);
      }

      return Object.defineProperty(e.prototype, "docs", {
        get: function get() {
          var e = [];
          return this.forEach(function (t) {
            return e.push(t);
          }), e;
        },
        enumerable: !0,
        configurable: !0
      }), Object.defineProperty(e.prototype, "empty", {
        get: function get() {
          return this._snapshot.docs.isEmpty();
        },
        enumerable: !0,
        configurable: !0
      }), Object.defineProperty(e.prototype, "size", {
        get: function get() {
          return this._snapshot.docs.size;
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.forEach = function (e, t) {
        var n = this;
        validateBetweenNumberOfArgs("QuerySnapshot.forEach", arguments, 1, 2), validateArgType("QuerySnapshot.forEach", "function", 1, e), this._snapshot.docs.forEach(function (r) {
          e.call(t, n.convertToDocumentImpl(r));
        });
      }, Object.defineProperty(e.prototype, "query", {
        get: function get() {
          return new Query$1(this._originalQuery, this._firestore);
        },
        enumerable: !0,
        configurable: !0
      }), e.prototype.docChanges = function (e) {
        validateOptionNames("QuerySnapshot.docChanges", e, ["includeMetadataChanges"]), e && validateNamedOptionalType("QuerySnapshot.docChanges", "boolean", "includeMetadataChanges", e.includeMetadataChanges);
        var t = e && e.includeMetadataChanges;
        if (t && this._snapshot.excludesMetadataChanges) throw new FirestoreError(Code.INVALID_ARGUMENT, "To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");
        return this._cachedChanges && this._cachedChangesIncludeMetadataChanges === t || (this._cachedChanges = changesFromSnapshot(this._firestore, t, this._snapshot), this._cachedChangesIncludeMetadataChanges = t), this._cachedChanges;
      }, e.prototype.isEqual = function (t) {
        if (!(t instanceof e)) throw invalidClassError("isEqual", "QuerySnapshot", 1, t);
        return this._firestore === t._firestore && this._originalQuery.isEqual(t._originalQuery) && this._snapshot.isEqual(t._snapshot);
      }, e.prototype.convertToDocumentImpl = function (e) {
        return new QueryDocumentSnapshot(this._firestore, e.key, e, this.metadata.fromCache);
      }, e;
    }();

    var docChangesPropertiesToOverride = ["length", "forEach", "map"].concat("undefined" != typeof Symbol ? [Symbol.iterator] : []);
    docChangesPropertiesToOverride.forEach(function (e) {
      try {
        Object.defineProperty(QuerySnapshot.prototype.docChanges, e, {
          get: function get() {
            return throwDocChangesMethodError();
          }
        });
      } catch (e) {}
    });

    var CollectionReference = function (e) {
      function t(t, n) {
        var r = e.call(this, Query.atPath(t), n) || this;
        if (t.length % 2 != 1) throw new FirestoreError(Code.INVALID_ARGUMENT, "Invalid collection reference. Collection references must have an odd number of segments, but " + t.canonicalString() + " has " + t.length);
        return r;
      }

      return __extends(t, e), Object.defineProperty(t.prototype, "id", {
        get: function get() {
          return this._query.path.lastSegment();
        },
        enumerable: !0,
        configurable: !0
      }), Object.defineProperty(t.prototype, "parent", {
        get: function get() {
          var e = this._query.path.popLast();

          return e.isEmpty() ? null : new DocumentReference(new DocumentKey(e), this.firestore);
        },
        enumerable: !0,
        configurable: !0
      }), Object.defineProperty(t.prototype, "path", {
        get: function get() {
          return this._query.path.canonicalString();
        },
        enumerable: !0,
        configurable: !0
      }), t.prototype.doc = function (e) {
        if (validateBetweenNumberOfArgs("CollectionReference.doc", arguments, 0, 1), 0 === arguments.length && (e = AutoId.newId()), validateArgType("CollectionReference.doc", "string", 1, e), "" === e) throw new FirestoreError(Code.INVALID_ARGUMENT, "Document path must be a non-empty string");
        var t = ResourcePath.fromString(e);
        return DocumentReference.forPath(this._query.path.child(t), this.firestore);
      }, t.prototype.add = function (e) {
        validateExactNumberOfArgs("CollectionReference.add", arguments, 1), validateArgType("CollectionReference.add", "object", 1, e);
        var t = this.doc();
        return t.set(e).then(function () {
          return t;
        });
      }, t;
    }(Query$1);

    var PublicFirestore = makeConstructorPrivate(Firestore, "Use firebase.firestore() instead."),
        PublicTransaction = makeConstructorPrivate(Transaction$1, "Use firebase.firestore().runTransaction() instead."),
        PublicWriteBatch = makeConstructorPrivate(WriteBatch, "Use firebase.firestore().batch() instead."),
        PublicDocumentReference = makeConstructorPrivate(DocumentReference, "Use firebase.firestore().doc() instead."),
        PublicDocumentSnapshot = makeConstructorPrivate(DocumentSnapshot),
        PublicQueryDocumentSnapshot = makeConstructorPrivate(QueryDocumentSnapshot),
        PublicQuery = makeConstructorPrivate(Query$1),
        PublicQuerySnapshot = makeConstructorPrivate(QuerySnapshot),
        PublicCollectionReference = makeConstructorPrivate(CollectionReference, "Use firebase.firestore().collection() instead."),
        firestoreNamespace = {
      Firestore: PublicFirestore,
      GeoPoint: GeoPoint,
      Timestamp: Timestamp,
      Blob: PublicBlob,
      Transaction: PublicTransaction,
      WriteBatch: PublicWriteBatch,
      DocumentReference: PublicDocumentReference,
      DocumentSnapshot: PublicDocumentSnapshot,
      Query: PublicQuery,
      QueryDocumentSnapshot: PublicQueryDocumentSnapshot,
      QuerySnapshot: PublicQuerySnapshot,
      CollectionReference: PublicCollectionReference,
      FieldPath: FieldPath$1,
      FieldValue: PublicFieldValue,
      setLogLevel: Firestore.setLogLevel
    };
    registerFirestore(firebase);
  } catch (e) {
    throw console.error(e), new Error("Cannot instantiate firebase-firestore - be sure to load firebase-app.js first.");
  }

  var ops, dirs, LogLevel$$1;
}(this.firebase = this.firebase || {}, firebase);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../node_modules/process/browser.js */ "./node_modules/process/browser.js"), __webpack_require__(/*! ./../../../../node_modules/webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./Resources/assets/js/transaction/firebase-messaging.js":
/*!***************************************************************!*\
  !*** ./Resources/assets/js/transaction/firebase-messaging.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

!function (e, t) {
  "use strict";

  try {
    var r = function r(e, t) {
      function r() {
        this.constructor = e;
      }

      n(e, t), e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype, new r());
    };

    var o = function o(e, t, n, r) {
      return new (n || (n = Promise))(function (i, o) {
        function s(e) {
          try {
            c(r.next(e));
          } catch (e) {
            o(e);
          }
        }

        function a(e) {
          try {
            c(r["throw"](e));
          } catch (e) {
            o(e);
          }
        }

        function c(e) {
          e.done ? i(e.value) : new n(function (t) {
            t(e.value);
          }).then(s, a);
        }

        c((r = r.apply(e, t || [])).next());
      });
    };

    var s = function s(e, t) {
      var n,
          r,
          i,
          o,
          s = {
        label: 0,
        sent: function sent() {
          if (1 & i[0]) throw i[1];
          return i[1];
        },
        trys: [],
        ops: []
      };
      return o = {
        next: a(0),
        "throw": a(1),
        "return": a(2)
      }, "function" == typeof Symbol && (o[Symbol.iterator] = function () {
        return this;
      }), o;

      function a(o) {
        return function (a) {
          return function (o) {
            if (n) throw new TypeError("Generator is already executing.");

            for (; s;) {
              try {
                if (n = 1, r && (i = r[2 & o[0] ? "return" : o[0] ? "throw" : "next"]) && !(i = i.call(r, o[1])).done) return i;

                switch (r = 0, i && (o = [0, i.value]), o[0]) {
                  case 0:
                  case 1:
                    i = o;
                    break;

                  case 4:
                    return s.label++, {
                      value: o[1],
                      done: !1
                    };

                  case 5:
                    s.label++, r = o[1], o = [0];
                    continue;

                  case 7:
                    o = s.ops.pop(), s.trys.pop();
                    continue;

                  default:
                    if (!(i = (i = s.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) {
                      s = 0;
                      continue;
                    }

                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                      s.label = o[1];
                      break;
                    }

                    if (6 === o[0] && s.label < i[1]) {
                      s.label = i[1], i = o;
                      break;
                    }

                    if (i && s.label < i[2]) {
                      s.label = i[2], s.ops.push(o);
                      break;
                    }

                    i[2] && s.ops.pop(), s.trys.pop();
                    continue;
                }

                o = t.call(e, s);
              } catch (e) {
                o = [6, e], r = 0;
              } finally {
                n = i = 0;
              }
            }

            if (5 & o[0]) throw o[1];
            return {
              value: o[0] ? o[1] : void 0,
              done: !0
            };
          }([o, a]);
        };
      }
    };

    var f = function f(e, t) {
      var n = new d(e, t);
      return n.subscribe.bind(n);
    };

    var p = function p() {};

    var y = function y(e, t) {
      if (null == e || null == t) return !1;
      if (e === t) return !0;
      if (e.byteLength !== t.byteLength) return !1;

      for (var n = new DataView(e), r = new DataView(t), i = 0; i < e.byteLength; i++) {
        if (n.getUint8(i) !== r.getUint8(i)) return !1;
      }

      return !0;
    };

    var w = function w(e) {
      return function (e) {
        var t = new Uint8Array(e);
        return btoa(String.fromCharCode.apply(null, t));
      }(e).replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_");
    };

    var D = function D(e) {
      for (var t = (e + "=".repeat((4 - e.length % 4) % 4)).replace(/\-/g, "+").replace(/_/g, "/"), n = atob(t), r = new Uint8Array(n.length), i = 0; i < n.length; ++i) {
        r[i] = n.charCodeAt(i);
      }

      return r;
    };

    var O = function O() {
      var e = indexedDB.open(N);
      e.onerror = function (e) {}, e.onsuccess = function (t) {
        !function (e) {
          if (e.objectStoreNames.contains(m)) {
            var t = e.transaction(m).objectStore(m),
                n = new I(),
                r = t.openCursor();
            r.onerror = function (e) {
              console.warn("Unable to cleanup old IDB.", e);
            }, r.onsuccess = function () {
              var t = r.result;

              if (t) {
                var i = t.value;
                n.deleteToken(i.fcmSenderId, i.fcmToken, i.fcmPushSet), t["continue"]();
              } else e.close(), indexedDB.deleteDatabase(N);
            };
          }
        }(e.result);
      };
    };

    var P = function P(e) {
      if (e.fcmToken && ("string" != typeof e.fcmToken || 0 === e.fcmToken.length)) throw g.create(b.BAD_TOKEN);
      if (e.swScope && ("string" != typeof e.swScope || 0 === e.swScope.length)) throw g.create(b.BAD_SCOPE);
      if (e.vapidKey && (!(e.vapidKey instanceof Uint8Array) || 65 !== e.vapidKey.length)) throw g.create(b.BAD_VAPID_KEY);
      if (e.endpoint && ("string" != typeof e.endpoint || 0 === e.endpoint.length)) throw g.create(b.BAD_SUBSCRIPTION);
      if (e.auth && !(e.auth instanceof ArrayBuffer)) throw g.create(b.BAD_SUBSCRIPTION);
      if (e.p256dh && !(e.p256dh instanceof ArrayBuffer)) throw g.create(b.BAD_SUBSCRIPTION);
      if (e.fcmSenderId && ("string" != typeof e.fcmSenderId || 0 === e.fcmSenderId.length)) throw g.create(b.BAD_SENDER_ID);
      if (e.fcmPushSet && ("string" != typeof e.fcmPushSet || 0 === e.fcmPushSet.length)) throw g.create(b.BAD_PUSH_SET);
    };

    var L = function L() {
      return self.clients.matchAll({
        type: "window",
        includeUncontrolled: !0
      });
    };

    var K = function K(e, t) {
      return (n = {})[_.TYPE_OF_MSG] = e, n[_.DATA] = t, n;
      var n;
    };

    var F = function F() {
      return self && "ServiceWorkerGlobalScope" in self ? "PushManager" in self && "Notification" in self && ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification") && PushSubscription.prototype.hasOwnProperty("getKey") : "serviceWorker" in navigator && "PushManager" in window && "Notification" in window && "fetch" in window && ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification") && PushSubscription.prototype.hasOwnProperty("getKey");
    };

    t = t && t.hasOwnProperty("default") ? t["default"] : t;

    var n = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (e, t) {
      e.__proto__ = t;
    } || function (e, t) {
      for (var n in t) {
        t.hasOwnProperty(n) && (e[n] = t[n]);
      }
    };

    var i = Object.assign || function (e) {
      for (var t, n = 1, r = arguments.length; n < r; n++) {
        for (var i in t = arguments[n]) {
          Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
        }
      }

      return e;
    };

    var a = "FirebaseError",
        c = Error.captureStackTrace,
        u = function () {
      return function (e, t) {
        if (this.code = e, this.message = t, c) c(this, h.prototype.create);else try {
          throw Error.apply(this, arguments);
        } catch (e) {
          this.name = a, Object.defineProperty(this, "stack", {
            get: function get() {
              return e.stack;
            }
          });
        }
      };
    }();

    u.prototype = Object.create(Error.prototype), u.prototype.constructor = u, u.prototype.name = a;

    var h = function () {
      function e(e, t, n) {
        this.service = e, this.serviceName = t, this.errors = n, this.pattern = /\{\$([^}]+)}/g;
      }

      return e.prototype.create = function (e, t) {
        void 0 === t && (t = {});
        var n,
            r = this.errors[e],
            i = this.service + "/" + e;
        n = void 0 === r ? "Error" : r.replace(this.pattern, function (e, n) {
          var r = t[n];
          return void 0 !== r ? r.toString() : "<" + n + "?>";
        }), n = this.serviceName + ": " + n + " (" + i + ").";
        var o = new u(i, n);

        for (var s in t) {
          t.hasOwnProperty(s) && "_" !== s.slice(-1) && (o[s] = t[s]);
        }

        return o;
      }, e;
    }();

    (function (e) {
      function t() {
        var t = e.call(this) || this;
        t.chain_ = [], t.buf_ = [], t.W_ = [], t.pad_ = [], t.inbuf_ = 0, t.total_ = 0, t.blockSize = 64, t.pad_[0] = 128;

        for (var n = 1; n < t.blockSize; ++n) {
          t.pad_[n] = 0;
        }

        return t.reset(), t;
      }

      r(t, e), t.prototype.reset = function () {
        this.chain_[0] = 1732584193, this.chain_[1] = 4023233417, this.chain_[2] = 2562383102, this.chain_[3] = 271733878, this.chain_[4] = 3285377520, this.inbuf_ = 0, this.total_ = 0;
      }, t.prototype.compress_ = function (e, t) {
        t || (t = 0);
        var n = this.W_;
        if ("string" == typeof e) for (var r = 0; r < 16; r++) {
          n[r] = e.charCodeAt(t) << 24 | e.charCodeAt(t + 1) << 16 | e.charCodeAt(t + 2) << 8 | e.charCodeAt(t + 3), t += 4;
        } else for (r = 0; r < 16; r++) {
          n[r] = e[t] << 24 | e[t + 1] << 16 | e[t + 2] << 8 | e[t + 3], t += 4;
        }

        for (r = 16; r < 80; r++) {
          var i = n[r - 3] ^ n[r - 8] ^ n[r - 14] ^ n[r - 16];
          n[r] = 4294967295 & (i << 1 | i >>> 31);
        }

        var o,
            s,
            a = this.chain_[0],
            c = this.chain_[1],
            u = this.chain_[2],
            h = this.chain_[3],
            f = this.chain_[4];

        for (r = 0; r < 80; r++) {
          r < 40 ? r < 20 ? (o = h ^ c & (u ^ h), s = 1518500249) : (o = c ^ u ^ h, s = 1859775393) : r < 60 ? (o = c & u | h & (c | u), s = 2400959708) : (o = c ^ u ^ h, s = 3395469782);
          i = (a << 5 | a >>> 27) + o + f + s + n[r] & 4294967295;
          f = h, h = u, u = 4294967295 & (c << 30 | c >>> 2), c = a, a = i;
        }

        this.chain_[0] = this.chain_[0] + a & 4294967295, this.chain_[1] = this.chain_[1] + c & 4294967295, this.chain_[2] = this.chain_[2] + u & 4294967295, this.chain_[3] = this.chain_[3] + h & 4294967295, this.chain_[4] = this.chain_[4] + f & 4294967295;
      }, t.prototype.update = function (e, t) {
        if (null != e) {
          void 0 === t && (t = e.length);

          for (var n = t - this.blockSize, r = 0, i = this.buf_, o = this.inbuf_; r < t;) {
            if (0 == o) for (; r <= n;) {
              this.compress_(e, r), r += this.blockSize;
            }

            if ("string" == typeof e) {
              for (; r < t;) {
                if (i[o] = e.charCodeAt(r), ++r, ++o == this.blockSize) {
                  this.compress_(i), o = 0;
                  break;
                }
              }
            } else for (; r < t;) {
              if (i[o] = e[r], ++r, ++o == this.blockSize) {
                this.compress_(i), o = 0;
                break;
              }
            }
          }

          this.inbuf_ = o, this.total_ += t;
        }
      }, t.prototype.digest = function () {
        var e = [],
            t = 8 * this.total_;
        this.inbuf_ < 56 ? this.update(this.pad_, 56 - this.inbuf_) : this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));

        for (var n = this.blockSize - 1; n >= 56; n--) {
          this.buf_[n] = 255 & t, t /= 256;
        }

        this.compress_(this.buf_);
        var r = 0;

        for (n = 0; n < 5; n++) {
          for (var i = 24; i >= 0; i -= 8) {
            e[r] = this.chain_[n] >> i & 255, ++r;
          }
        }

        return e;
      };
    })(function () {
      return function () {
        this.blockSize = -1;
      };
    }());

    var d = function () {
      function e(e, t) {
        var n = this;
        this.observers = [], this.unsubscribes = [], this.observerCount = 0, this.task = Promise.resolve(), this.finalized = !1, this.onNoObservers = t, this.task.then(function () {
          e(n);
        })["catch"](function (e) {
          n.error(e);
        });
      }

      return e.prototype.next = function (e) {
        this.forEachObserver(function (t) {
          t.next(e);
        });
      }, e.prototype.error = function (e) {
        this.forEachObserver(function (t) {
          t.error(e);
        }), this.close(e);
      }, e.prototype.complete = function () {
        this.forEachObserver(function (e) {
          e.complete();
        }), this.close();
      }, e.prototype.subscribe = function (e, t, n) {
        var r,
            i = this;
        if (void 0 === e && void 0 === t && void 0 === n) throw new Error("Missing Observer.");
        void 0 === (r = function (e, t) {
          if ("object" != _typeof(e) || null === e) return !1;

          for (var n = 0, r = t; n < r.length; n++) {
            var i = r[n];
            if (i in e && "function" == typeof e[i]) return !0;
          }

          return !1;
        }(e, ["next", "error", "complete"]) ? e : {
          next: e,
          error: t,
          complete: n
        }).next && (r.next = p), void 0 === r.error && (r.error = p), void 0 === r.complete && (r.complete = p);
        var o = this.unsubscribeOne.bind(this, this.observers.length);
        return this.finalized && this.task.then(function () {
          try {
            i.finalError ? r.error(i.finalError) : r.complete();
          } catch (e) {}
        }), this.observers.push(r), o;
      }, e.prototype.unsubscribeOne = function (e) {
        void 0 !== this.observers && void 0 !== this.observers[e] && (delete this.observers[e], this.observerCount -= 1, 0 === this.observerCount && void 0 !== this.onNoObservers && this.onNoObservers(this));
      }, e.prototype.forEachObserver = function (e) {
        if (!this.finalized) for (var t = 0; t < this.observers.length; t++) {
          this.sendOne(t, e);
        }
      }, e.prototype.sendOne = function (e, t) {
        var n = this;
        this.task.then(function () {
          if (void 0 !== n.observers && void 0 !== n.observers[e]) try {
            t(n.observers[e]);
          } catch (e) {
            "undefined" != typeof console && console.error && console.error(e);
          }
        });
      }, e.prototype.close = function (e) {
        var t = this;
        this.finalized || (this.finalized = !0, void 0 !== e && (this.finalError = e), this.task.then(function () {
          t.observers = void 0, t.onNoObservers = void 0;
        }));
      }, e;
    }();

    var l,
        _,
        E,
        b = {
      AVAILABLE_IN_WINDOW: "only-available-in-window",
      AVAILABLE_IN_SW: "only-available-in-sw",
      SHOULD_BE_INHERITED: "should-be-overriden",
      BAD_SENDER_ID: "bad-sender-id",
      INCORRECT_GCM_SENDER_ID: "incorrect-gcm-sender-id",
      PERMISSION_DEFAULT: "permission-default",
      PERMISSION_BLOCKED: "permission-blocked",
      UNSUPPORTED_BROWSER: "unsupported-browser",
      NOTIFICATIONS_BLOCKED: "notifications-blocked",
      FAILED_DEFAULT_REGISTRATION: "failed-serviceworker-registration",
      SW_REGISTRATION_EXPECTED: "sw-registration-expected",
      GET_SUBSCRIPTION_FAILED: "get-subscription-failed",
      INVALID_SAVED_TOKEN: "invalid-saved-token",
      SW_REG_REDUNDANT: "sw-reg-redundant",
      TOKEN_SUBSCRIBE_FAILED: "token-subscribe-failed",
      TOKEN_SUBSCRIBE_NO_TOKEN: "token-subscribe-no-token",
      TOKEN_SUBSCRIBE_NO_PUSH_SET: "token-subscribe-no-push-set",
      TOKEN_UNSUBSCRIBE_FAILED: "token-unsubscribe-failed",
      TOKEN_UPDATE_FAILED: "token-update-failed",
      TOKEN_UPDATE_NO_TOKEN: "token-update-no-token",
      USE_SW_BEFORE_GET_TOKEN: "use-sw-before-get-token",
      INVALID_DELETE_TOKEN: "invalid-delete-token",
      DELETE_TOKEN_NOT_FOUND: "delete-token-not-found",
      DELETE_SCOPE_NOT_FOUND: "delete-scope-not-found",
      BG_HANDLER_FUNCTION_EXPECTED: "bg-handler-function-expected",
      NO_WINDOW_CLIENT_TO_MSG: "no-window-client-to-msg",
      UNABLE_TO_RESUBSCRIBE: "unable-to-resubscribe",
      NO_FCM_TOKEN_FOR_RESUBSCRIBE: "no-fcm-token-for-resubscribe",
      FAILED_TO_DELETE_TOKEN: "failed-to-delete-token",
      NO_SW_IN_REG: "no-sw-in-reg",
      BAD_SCOPE: "bad-scope",
      BAD_VAPID_KEY: "bad-vapid-key",
      BAD_SUBSCRIPTION: "bad-subscription",
      BAD_TOKEN: "bad-token",
      BAD_PUSH_SET: "bad-push-set",
      FAILED_DELETE_VAPID_KEY: "failed-delete-vapid-key",
      INVALID_PUBLIC_VAPID_KEY: "invalid-public-vapid-key",
      USE_PUBLIC_KEY_BEFORE_GET_TOKEN: "use-public-key-before-get-token",
      PUBLIC_KEY_DECRYPTION_FAILED: "public-vapid-key-decryption-failed"
    },
        v = ((l = {})[b.AVAILABLE_IN_WINDOW] = "This method is available in a Window context.", l[b.AVAILABLE_IN_SW] = "This method is available in a service worker context.", l[b.SHOULD_BE_INHERITED] = "This method should be overriden by extended classes.", l[b.BAD_SENDER_ID] = "Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().", l[b.PERMISSION_DEFAULT] = "The required permissions were not granted and dismissed instead.", l[b.PERMISSION_BLOCKED] = "The required permissions were not granted and blocked instead.", l[b.UNSUPPORTED_BROWSER] = "This browser doesn't support the API's required to use the firebase SDK.", l[b.NOTIFICATIONS_BLOCKED] = "Notifications have been blocked.", l[b.FAILED_DEFAULT_REGISTRATION] = "We are unable to register the default service worker. {$browserErrorMessage}", l[b.SW_REGISTRATION_EXPECTED] = "A service worker registration was the expected input.", l[b.GET_SUBSCRIPTION_FAILED] = "There was an error when trying to get any existing Push Subscriptions.", l[b.INVALID_SAVED_TOKEN] = "Unable to access details of the saved token.", l[b.SW_REG_REDUNDANT] = "The service worker being used for push was made redundant.", l[b.TOKEN_SUBSCRIBE_FAILED] = "A problem occured while subscribing the user to FCM: {$message}", l[b.TOKEN_SUBSCRIBE_NO_TOKEN] = "FCM returned no token when subscribing the user to push.", l[b.TOKEN_SUBSCRIBE_NO_PUSH_SET] = "FCM returned an invalid response when getting an FCM token.", l[b.TOKEN_UNSUBSCRIBE_FAILED] = "A problem occured while unsubscribing the user from FCM: {$message}", l[b.TOKEN_UPDATE_FAILED] = "A problem occured while updating the user from FCM: {$message}", l[b.TOKEN_UPDATE_NO_TOKEN] = "FCM returned no token when updating the user to push.", l[b.USE_SW_BEFORE_GET_TOKEN] = "The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.", l[b.INVALID_DELETE_TOKEN] = "You must pass a valid token into deleteToken(), i.e. the token from getToken().", l[b.DELETE_TOKEN_NOT_FOUND] = "The deletion attempt for token could not be performed as the token was not found.", l[b.DELETE_SCOPE_NOT_FOUND] = "The deletion attempt for service worker scope could not be performed as the scope was not found.", l[b.BG_HANDLER_FUNCTION_EXPECTED] = "The input to setBackgroundMessageHandler() must be a function.", l[b.NO_WINDOW_CLIENT_TO_MSG] = "An attempt was made to message a non-existant window client.", l[b.UNABLE_TO_RESUBSCRIBE] = "There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}", l[b.NO_FCM_TOKEN_FOR_RESUBSCRIBE] = "Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.", l[b.FAILED_TO_DELETE_TOKEN] = "Unable to delete the currently saved token.", l[b.NO_SW_IN_REG] = "Even though the service worker registration was successful, there was a problem accessing the service worker itself.", l[b.INCORRECT_GCM_SENDER_ID] = "Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.", l[b.BAD_SCOPE] = "The service worker scope must be a string with at least one character.", l[b.BAD_VAPID_KEY] = "The public VAPID key is not a Uint8Array with 65 bytes.", l[b.BAD_SUBSCRIPTION] = "The subscription must be a valid PushSubscription.", l[b.BAD_TOKEN] = "The FCM Token used for storage / lookup was not a valid token string.", l[b.BAD_PUSH_SET] = "The FCM push set used for storage / lookup was not not a valid push set string.", l[b.FAILED_DELETE_VAPID_KEY] = "The VAPID key could not be deleted.", l[b.INVALID_PUBLIC_VAPID_KEY] = "The public VAPID key must be a string.", l[b.PUBLIC_KEY_DECRYPTION_FAILED] = "The public VAPID key did not equal 65 bytes when decrypted.", l),
        g = new h("messaging", "Messaging", v),
        T = new Uint8Array([4, 51, 148, 247, 223, 161, 235, 177, 220, 3, 162, 94, 21, 113, 219, 72, 211, 46, 237, 237, 178, 52, 219, 183, 71, 58, 12, 143, 196, 204, 225, 111, 60, 140, 132, 223, 171, 182, 102, 62, 242, 12, 212, 139, 254, 227, 249, 118, 47, 20, 28, 99, 8, 106, 111, 45, 177, 26, 149, 176, 206, 55, 192, 156, 110]),
        S = "https://fcm.googleapis.com";

    !function (e) {
      e.TYPE_OF_MSG = "firebase-messaging-msg-type", e.DATA = "firebase-messaging-msg-data";
    }(_ || (_ = {})), function (e) {
      e.PUSH_MSG_RECEIVED = "push-msg-received", e.NOTIFICATION_CLICKED = "notification-clicked";
    }(E || (E = {}));

    var I = function () {
      function e() {}

      return e.prototype.getToken = function (e, t, n) {
        return o(this, void 0, void 0, function () {
          var r, i, o, a, c, u, h, f;
          return s(this, function (s) {
            switch (s.label) {
              case 0:
                r = w(t.getKey("p256dh")), i = w(t.getKey("auth")), o = "authorized_entity=" + e + "&endpoint=" + t.endpoint + "&encryption_key=" + r + "&encryption_auth=" + i, y(n.buffer, T.buffer) || (a = w(n), o += "&application_pub_key=" + a), (c = new Headers()).append("Content-Type", "application/x-www-form-urlencoded"), u = {
                  method: "POST",
                  headers: c,
                  body: o
                }, s.label = 1;

              case 1:
                return s.trys.push([1, 4,, 5]), [4, fetch(S + "/fcm/connect/subscribe", u)];

              case 2:
                return [4, s.sent().json()];

              case 3:
                return h = s.sent(), [3, 5];

              case 4:
                throw s.sent(), g.create(b.TOKEN_SUBSCRIBE_FAILED);

              case 5:
                if (h.error) throw f = h.error.message, g.create(b.TOKEN_SUBSCRIBE_FAILED, {
                  message: f
                });
                if (!h.token) throw g.create(b.TOKEN_SUBSCRIBE_NO_TOKEN);
                if (!h.pushSet) throw g.create(b.TOKEN_SUBSCRIBE_NO_PUSH_SET);
                return [2, {
                  token: h.token,
                  pushSet: h.pushSet
                }];
            }
          });
        });
      }, e.prototype.updateToken = function (e, t, n, r, i) {
        return o(this, void 0, void 0, function () {
          var o, a, c, u, h, f, d, p;
          return s(this, function (s) {
            switch (s.label) {
              case 0:
                o = w(r.getKey("p256dh")), a = w(r.getKey("auth")), c = "push_set=" + n + "&token=" + t + "&authorized_entity=" + e + "&endpoint=" + r.endpoint + "&encryption_key=" + o + "&encryption_auth=" + a, y(i.buffer, T.buffer) || (u = w(i), c += "&application_pub_key=" + u), (h = new Headers()).append("Content-Type", "application/x-www-form-urlencoded"), f = {
                  method: "POST",
                  headers: h,
                  body: c
                }, s.label = 1;

              case 1:
                return s.trys.push([1, 4,, 5]), [4, fetch(S + "/fcm/connect/subscribe", f)];

              case 2:
                return [4, s.sent().json()];

              case 3:
                return d = s.sent(), [3, 5];

              case 4:
                throw s.sent(), g.create(b.TOKEN_UPDATE_FAILED);

              case 5:
                if (d.error) throw p = d.error.message, g.create(b.TOKEN_UPDATE_FAILED, {
                  message: p
                });
                if (!d.token) throw g.create(b.TOKEN_UPDATE_NO_TOKEN);
                return [2, d.token];
            }
          });
        });
      }, e.prototype.deleteToken = function (e, t, n) {
        return o(this, void 0, void 0, function () {
          var r, i, o, a, c;
          return s(this, function (s) {
            switch (s.label) {
              case 0:
                r = "authorized_entity=" + e + "&token=" + t + "&pushSet=" + n, (i = new Headers()).append("Content-Type", "application/x-www-form-urlencoded"), o = {
                  method: "POST",
                  headers: i,
                  body: r
                }, s.label = 1;

              case 1:
                return s.trys.push([1, 4,, 5]), [4, fetch(S + "/fcm/connect/unsubscribe", o)];

              case 2:
                return [4, s.sent().json()];

              case 3:
                if ((a = s.sent()).error) throw c = a.error.message, g.create(b.TOKEN_UNSUBSCRIBE_FAILED, {
                  message: c
                });
                return [3, 5];

              case 4:
                throw s.sent(), g.create(b.TOKEN_UNSUBSCRIBE_FAILED);

              case 5:
                return [2];
            }
          });
        });
      }, e;
    }();

    var N = "undefined",
        m = "fcm_token_object_Store";

    var k = function () {
      function e() {
        this.dbPromise = null;
      }

      return e.prototype.get = function (e) {
        return this.createTransaction(function (t) {
          return t.get(e);
        });
      }, e.prototype.getIndex = function (e, t) {
        return this.createTransaction(function (n) {
          return n.index(e).get(t);
        });
      }, e.prototype.put = function (e) {
        return this.createTransaction(function (t) {
          return t.put(e);
        }, "readwrite");
      }, e.prototype["delete"] = function (e) {
        return this.createTransaction(function (t) {
          return t["delete"](e);
        }, "readwrite");
      }, e.prototype.closeDatabase = function () {
        return o(this, void 0, void 0, function () {
          return s(this, function (e) {
            switch (e.label) {
              case 0:
                return this.dbPromise ? [4, this.dbPromise] : [3, 2];

              case 1:
                e.sent().close(), this.dbPromise = null, e.label = 2;

              case 2:
                return [2];
            }
          });
        });
      }, e.prototype.createTransaction = function (e, t) {
        return void 0 === t && (t = "readonly"), o(this, void 0, void 0, function () {
          var n, r, i, o;
          return s(this, function (s) {
            switch (s.label) {
              case 0:
                return [4, this.getDb()];

              case 1:
                return n = s.sent(), r = n.transaction(this.objectStoreName, t), i = r.objectStore(this.objectStoreName), [4, function (e) {
                  return new Promise(function (t, n) {
                    e.onsuccess = function () {
                      t(e.result);
                    }, e.onerror = function () {
                      n(e.error);
                    };
                  });
                }(e(i))];

              case 2:
                return o = s.sent(), [2, new Promise(function (e, t) {
                  r.oncomplete = function () {
                    e(o);
                  }, r.onerror = function () {
                    t(r.error);
                  };
                })];
            }
          });
        });
      }, e.prototype.getDb = function () {
        var e = this;
        return this.dbPromise || (this.dbPromise = new Promise(function (t, n) {
          var r = indexedDB.open(e.dbName, e.dbVersion);
          r.onsuccess = function () {
            t(r.result);
          }, r.onerror = function () {
            e.dbPromise = null, n(r.error);
          }, r.onupgradeneeded = function (t) {
            return e.onDbUpgrade(r, t);
          };
        })), this.dbPromise;
      }, e;
    }();

    var A = function (e) {
      function t() {
        var t = null !== e && e.apply(this, arguments) || this;
        return t.dbName = "fcm_token_details_db", t.dbVersion = 3, t.objectStoreName = "fcm_token_object_Store", t;
      }

      return r(t, e), t.prototype.onDbUpgrade = function (e, t) {
        var n = e.result;

        switch (t.oldVersion) {
          case 0:
            (r = n.createObjectStore(this.objectStoreName, {
              keyPath: "swScope"
            })).createIndex("fcmSenderId", "fcmSenderId", {
              unique: !1
            }), r.createIndex("fcmToken", "fcmToken", {
              unique: !0
            });

          case 1:
            O();

          case 2:
            var r,
                o = (r = e.transaction.objectStore(this.objectStoreName)).openCursor();

            o.onsuccess = function () {
              var e = o.result;

              if (e) {
                var t = e.value,
                    n = i({}, t);
                t.createTime || (n.createTime = Date.now()), "string" == typeof t.vapidKey && (n.vapidKey = D(t.vapidKey)), "string" == typeof t.auth && (n.auth = D(t.auth).buffer), "string" == typeof t.auth && (n.p256dh = D(t.p256dh).buffer), e.update(n), e["continue"]();
              }
            };

        }
      }, t.prototype.getTokenDetailsFromToken = function (e) {
        return o(this, void 0, void 0, function () {
          return s(this, function (t) {
            if (!e) throw g.create(b.BAD_TOKEN);
            return P({
              fcmToken: e
            }), [2, this.getIndex("fcmToken", e)];
          });
        });
      }, t.prototype.getTokenDetailsFromSWScope = function (e) {
        return o(this, void 0, void 0, function () {
          return s(this, function (t) {
            if (!e) throw g.create(b.BAD_SCOPE);
            return P({
              swScope: e
            }), [2, this.get(e)];
          });
        });
      }, t.prototype.saveTokenDetails = function (e) {
        return o(this, void 0, void 0, function () {
          return s(this, function (t) {
            if (!e.swScope) throw g.create(b.BAD_SCOPE);
            if (!e.vapidKey) throw g.create(b.BAD_VAPID_KEY);
            if (!e.endpoint || !e.auth || !e.p256dh) throw g.create(b.BAD_SUBSCRIPTION);
            if (!e.fcmSenderId) throw g.create(b.BAD_SENDER_ID);
            if (!e.fcmToken) throw g.create(b.BAD_TOKEN);
            if (!e.fcmPushSet) throw g.create(b.BAD_PUSH_SET);
            return P(e), [2, this.put(e)];
          });
        });
      }, t.prototype.deleteToken = function (e) {
        return o(this, void 0, void 0, function () {
          var t;
          return s(this, function (n) {
            switch (n.label) {
              case 0:
                return "string" != typeof e || 0 === e.length ? [2, Promise.reject(g.create(b.INVALID_DELETE_TOKEN))] : [4, this.getTokenDetailsFromToken(e)];

              case 1:
                if (!(t = n.sent())) throw g.create(b.DELETE_TOKEN_NOT_FOUND);
                return [4, this["delete"](t.swScope)];

              case 2:
                return n.sent(), [2, t];
            }
          });
        });
      }, t;
    }(k);

    var C = function (e) {
      function t() {
        var t = null !== e && e.apply(this, arguments) || this;
        return t.dbName = "fcm_vapid_details_db", t.dbVersion = 1, t.objectStoreName = "fcm_vapid_object_Store", t;
      }

      return r(t, e), t.prototype.onDbUpgrade = function (e) {
        e.result.createObjectStore(this.objectStoreName, {
          keyPath: "swScope"
        });
      }, t.prototype.getVapidFromSWScope = function (e) {
        return o(this, void 0, void 0, function () {
          var t;
          return s(this, function (n) {
            switch (n.label) {
              case 0:
                if ("string" != typeof e || 0 === e.length) throw g.create(b.BAD_SCOPE);
                return [4, this.get(e)];

              case 1:
                return [2, (t = n.sent()) ? t.vapidKey : void 0];
            }
          });
        });
      }, t.prototype.saveVapidDetails = function (e, t) {
        return o(this, void 0, void 0, function () {
          var n;
          return s(this, function (r) {
            if ("string" != typeof e || 0 === e.length) throw g.create(b.BAD_SCOPE);
            if (null === t || 65 !== t.length) throw g.create(b.BAD_VAPID_KEY);
            return n = {
              swScope: e,
              vapidKey: t
            }, [2, this.put(n)];
          });
        });
      }, t.prototype.deleteVapidDetails = function (e) {
        return o(this, void 0, void 0, function () {
          var t;
          return s(this, function (n) {
            switch (n.label) {
              case 0:
                return [4, this.getVapidFromSWScope(e)];

              case 1:
                if (!(t = n.sent())) throw g.create(b.DELETE_SCOPE_NOT_FOUND);
                return [4, this["delete"](e)];

              case 2:
                return n.sent(), [2, t];
            }
          });
        });
      }, t;
    }(k),
        B = "messagingSenderId",
        R = function () {
      function e(e) {
        var t = this;
        if (!e.options[B] || "string" != typeof e.options[B]) throw g.create(b.BAD_SENDER_ID);
        this.messagingSenderId = e.options[B], this.tokenDetailsModel = new A(), this.vapidDetailsModel = new C(), this.iidModel = new I(), this.app = e, this.INTERNAL = {
          "delete": function _delete() {
            return t["delete"]();
          }
        };
      }

      return e.prototype.getToken = function () {
        return o(this, void 0, void 0, function () {
          var e, t, n, r, i;
          return s(this, function (o) {
            switch (o.label) {
              case 0:
                if ("denied" === (e = this.getNotificationPermission_())) throw g.create(b.NOTIFICATIONS_BLOCKED);
                return "granted" !== e ? [2, null] : [4, this.getSWRegistration_()];

              case 1:
                return t = o.sent(), [4, this.getPublicVapidKey_()];

              case 2:
                return n = o.sent(), [4, this.getPushSubscription(t, n)];

              case 3:
                return r = o.sent(), [4, this.tokenDetailsModel.getTokenDetailsFromSWScope(t.scope)];

              case 4:
                return (i = o.sent()) ? [2, this.manageExistingToken(t, r, n, i)] : [2, this.getNewToken(t, r, n)];
            }
          });
        });
      }, e.prototype.manageExistingToken = function (e, t, n, r) {
        return o(this, void 0, void 0, function () {
          return s(this, function (i) {
            switch (i.label) {
              case 0:
                return function (e, t, n) {
                  if (!n.vapidKey || !y(t.buffer, n.vapidKey.buffer)) return !1;
                  var r = e.endpoint === n.endpoint,
                      i = y(e.getKey("auth"), n.auth),
                      o = y(e.getKey("p256dh"), n.p256dh);
                  return r && i && o;
                }(t, n, r) ? Date.now() < r.createTime + 6048e5 ? [2, r.fcmToken] : [2, this.updateToken(e, t, n, r)] : [4, this.deleteTokenFromDB(r.fcmToken)];

              case 1:
                return i.sent(), [2, this.getNewToken(e, t, n)];
            }
          });
        });
      }, e.prototype.updateToken = function (e, t, n, r) {
        return o(this, void 0, void 0, function () {
          var i, o, a;
          return s(this, function (s) {
            switch (s.label) {
              case 0:
                return s.trys.push([0, 4,, 6]), [4, this.iidModel.updateToken(this.messagingSenderId, r.fcmToken, r.fcmPushSet, t, n)];

              case 1:
                return i = s.sent(), o = {
                  swScope: e.scope,
                  vapidKey: n,
                  fcmSenderId: this.messagingSenderId,
                  fcmToken: i,
                  fcmPushSet: r.fcmPushSet,
                  createTime: Date.now(),
                  endpoint: t.endpoint,
                  auth: t.getKey("auth"),
                  p256dh: t.getKey("p256dh")
                }, [4, this.tokenDetailsModel.saveTokenDetails(o)];

              case 2:
                return s.sent(), [4, this.vapidDetailsModel.saveVapidDetails(e.scope, n)];

              case 3:
                return s.sent(), [2, i];

              case 4:
                return a = s.sent(), [4, this.deleteToken(r.fcmToken)];

              case 5:
                throw s.sent(), a;

              case 6:
                return [2];
            }
          });
        });
      }, e.prototype.getNewToken = function (e, t, n) {
        return o(this, void 0, void 0, function () {
          var r, i;
          return s(this, function (o) {
            switch (o.label) {
              case 0:
                return [4, this.iidModel.getToken(this.messagingSenderId, t, n)];

              case 1:
                return r = o.sent(), i = {
                  swScope: e.scope,
                  vapidKey: n,
                  fcmSenderId: this.messagingSenderId,
                  fcmToken: r.token,
                  fcmPushSet: r.pushSet,
                  createTime: Date.now(),
                  endpoint: t.endpoint,
                  auth: t.getKey("auth"),
                  p256dh: t.getKey("p256dh")
                }, [4, this.tokenDetailsModel.saveTokenDetails(i)];

              case 2:
                return o.sent(), [4, this.vapidDetailsModel.saveVapidDetails(e.scope, n)];

              case 3:
                return o.sent(), [2, r.token];
            }
          });
        });
      }, e.prototype.deleteToken = function (e) {
        return o(this, void 0, void 0, function () {
          var t, n;
          return s(this, function (r) {
            switch (r.label) {
              case 0:
                return [4, this.deleteTokenFromDB(e)];

              case 1:
                return r.sent(), [4, this.getSWRegistration_()];

              case 2:
                return (t = r.sent()) ? [4, t.pushManager.getSubscription()] : [3, 4];

              case 3:
                if (n = r.sent()) return [2, n.unsubscribe()];
                r.label = 4;

              case 4:
                return [2, !0];
            }
          });
        });
      }, e.prototype.deleteTokenFromDB = function (e) {
        return o(this, void 0, void 0, function () {
          var t;
          return s(this, function (n) {
            switch (n.label) {
              case 0:
                return [4, this.tokenDetailsModel.deleteToken(e)];

              case 1:
                return t = n.sent(), [4, this.iidModel.deleteToken(t.fcmSenderId, t.fcmToken, t.fcmPushSet)];

              case 2:
                return n.sent(), [2];
            }
          });
        });
      }, e.prototype.getPushSubscription = function (e, t) {
        return e.pushManager.getSubscription().then(function (n) {
          return n || e.pushManager.subscribe({
            userVisibleOnly: !0,
            applicationServerKey: t
          });
        });
      }, e.prototype.requestPermission = function () {
        throw g.create(b.AVAILABLE_IN_WINDOW);
      }, e.prototype.useServiceWorker = function (e) {
        throw g.create(b.AVAILABLE_IN_WINDOW);
      }, e.prototype.usePublicVapidKey = function (e) {
        throw g.create(b.AVAILABLE_IN_WINDOW);
      }, e.prototype.onMessage = function (e, t, n) {
        throw g.create(b.AVAILABLE_IN_WINDOW);
      }, e.prototype.onTokenRefresh = function (e, t, n) {
        throw g.create(b.AVAILABLE_IN_WINDOW);
      }, e.prototype.setBackgroundMessageHandler = function (e) {
        throw g.create(b.AVAILABLE_IN_SW);
      }, e.prototype["delete"] = function () {
        return o(this, void 0, void 0, function () {
          return s(this, function (e) {
            switch (e.label) {
              case 0:
                return [4, Promise.all([this.tokenDetailsModel.closeDatabase(), this.vapidDetailsModel.closeDatabase()])];

              case 1:
                return e.sent(), [2];
            }
          });
        });
      }, e.prototype.getNotificationPermission_ = function () {
        return Notification.permission;
      }, e.prototype.getTokenDetailsModel = function () {
        return this.tokenDetailsModel;
      }, e.prototype.getVapidDetailsModel = function () {
        return this.vapidDetailsModel;
      }, e.prototype.getIidModel = function () {
        return this.iidModel;
      }, e;
    }();

    var U = function (e) {
      function t(t) {
        var n = e.call(this, t) || this;
        return n.bgMessageHandler = null, self.addEventListener("push", function (e) {
          n.onPush(e);
        }), self.addEventListener("pushsubscriptionchange", function (e) {
          n.onSubChange(e);
        }), self.addEventListener("notificationclick", function (e) {
          n.onNotificationClick(e);
        }), n;
      }

      return r(t, e), t.prototype.onPush = function (e) {
        e.waitUntil(this.onPush_(e));
      }, t.prototype.onSubChange = function (e) {
        e.waitUntil(this.onSubChange_(e));
      }, t.prototype.onNotificationClick = function (e) {
        e.waitUntil(this.onNotificationClick_(e));
      }, t.prototype.onPush_ = function (e) {
        return o(this, void 0, void 0, function () {
          var t, n, r, i, o, a;
          return s(this, function (s) {
            switch (s.label) {
              case 0:
                if (!e.data) return [2];

                try {
                  t = e.data.json();
                } catch (e) {
                  return [2];
                }

                return [4, this.hasVisibleClients_()];

              case 1:
                return s.sent() ? [2, this.sendMessageToWindowClients_(t)] : (n = this.getNotificationData_(t)) ? (r = n.title || "", [4, this.getSWRegistration_()]) : [3, 3];

              case 2:
                return i = s.sent(), o = n.actions, a = Notification.maxActions, o && a && o.length > a && console.warn("This browser only supports " + a + " actions.The remaining actions will not be displayed."), [2, i.showNotification(r, n)];

              case 3:
                return this.bgMessageHandler ? [4, this.bgMessageHandler(t)] : [3, 5];

              case 4:
                return s.sent(), [2];

              case 5:
                return [2];
            }
          });
        });
      }, t.prototype.onSubChange_ = function (e) {
        return o(this, void 0, void 0, function () {
          var e, t, n, r;
          return s(this, function (i) {
            switch (i.label) {
              case 0:
                return i.trys.push([0, 2,, 3]), [4, this.getSWRegistration_()];

              case 1:
                return e = i.sent(), [3, 3];

              case 2:
                throw t = i.sent(), g.create(b.UNABLE_TO_RESUBSCRIBE, {
                  message: t
                });

              case 3:
                return i.trys.push([3, 5,, 8]), [4, e.pushManager.getSubscription()];

              case 4:
                return i.sent(), [3, 8];

              case 5:
                return n = i.sent(), [4, this.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope)];

              case 6:
                if (!(r = i.sent())) throw n;
                return [4, this.deleteToken(r.fcmToken)];

              case 7:
                throw i.sent(), n;

              case 8:
                return [2];
            }
          });
        });
      }, t.prototype.onNotificationClick_ = function (e) {
        return o(this, void 0, void 0, function () {
          var t, n, r, i;
          return s(this, function (o) {
            switch (o.label) {
              case 0:
                return e.notification && e.notification.data && e.notification.data.FCM_MSG ? e.action ? [2] : (e.stopImmediatePropagation(), e.notification.close(), (t = e.notification.data.FCM_MSG).notification && (n = t.notification.click_action) ? [4, this.getWindowClient_(n)] : [2]) : [2];

              case 1:
                return (r = o.sent()) ? [3, 3] : [4, self.clients.openWindow(n)];

              case 2:
                return r = o.sent(), [3, 5];

              case 3:
                return [4, r.focus()];

              case 4:
                r = o.sent(), o.label = 5;

              case 5:
                return r ? (delete t.notification, i = K(E.NOTIFICATION_CLICKED, t), [2, this.attemptToMessageClient_(r, i)]) : [2];
            }
          });
        });
      }, t.prototype.getNotificationData_ = function (e) {
        if (e && "object" == _typeof(e.notification)) {
          var t,
              n = i({}, e.notification);
          return n.data = i({}, e.notification.data, ((t = {}).FCM_MSG = e, t)), n;
        }
      }, t.prototype.setBackgroundMessageHandler = function (e) {
        if (!e || "function" != typeof e) throw g.create(b.BG_HANDLER_FUNCTION_EXPECTED);
        this.bgMessageHandler = e;
      }, t.prototype.getWindowClient_ = function (e) {
        return o(this, void 0, void 0, function () {
          var t, n, r, i;
          return s(this, function (o) {
            switch (o.label) {
              case 0:
                return t = new URL(e, self.location.href).href, [4, L()];

              case 1:
                for (n = o.sent(), r = null, i = 0; i < n.length; i++) {
                  if (new URL(n[i].url, self.location.href).href === t) {
                    r = n[i];
                    break;
                  }
                }

                return [2, r];
            }
          });
        });
      }, t.prototype.attemptToMessageClient_ = function (e, t) {
        return o(this, void 0, void 0, function () {
          return s(this, function (n) {
            if (!e) throw g.create(b.NO_WINDOW_CLIENT_TO_MSG);
            return e.postMessage(t), [2];
          });
        });
      }, t.prototype.hasVisibleClients_ = function () {
        return o(this, void 0, void 0, function () {
          return s(this, function (e) {
            switch (e.label) {
              case 0:
                return [4, L()];

              case 1:
                return [2, e.sent().some(function (e) {
                  return "visible" === e.visibilityState;
                })];
            }
          });
        });
      }, t.prototype.sendMessageToWindowClients_ = function (e) {
        return o(this, void 0, void 0, function () {
          var t,
              n,
              r = this;
          return s(this, function (i) {
            switch (i.label) {
              case 0:
                return [4, L()];

              case 1:
                return t = i.sent(), n = K(E.PUSH_MSG_RECEIVED, e), [4, Promise.all(t.map(function (e) {
                  return r.attemptToMessageClient_(e, n);
                }))];

              case 2:
                return i.sent(), [2];
            }
          });
        });
      }, t.prototype.getSWRegistration_ = function () {
        return o(this, void 0, void 0, function () {
          return s(this, function (e) {
            return [2, self.registration];
          });
        });
      }, t.prototype.getPublicVapidKey_ = function () {
        return o(this, void 0, void 0, function () {
          var e, t;
          return s(this, function (n) {
            switch (n.label) {
              case 0:
                return [4, this.getSWRegistration_()];

              case 1:
                if (!(e = n.sent())) throw g.create(b.SW_REGISTRATION_EXPECTED);
                return [4, this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];

              case 2:
                return null == (t = n.sent()) ? [2, T] : [2, t];
            }
          });
        });
      }, t;
    }(R);

    var M = function (e) {
      function t(t) {
        var n = e.call(this, t) || this;
        return n.registrationToUse = null, n.publicVapidKeyToUse = null, n.manifestCheckPromise = null, n.messageObserver = null, n.tokenRefreshObserver = null, n.onMessageInternal = f(function (e) {
          n.messageObserver = e;
        }), n.onTokenRefreshInternal = f(function (e) {
          n.tokenRefreshObserver = e;
        }), n.setupSWMessageListener_(), n;
      }

      return r(t, e), t.prototype.getToken = function () {
        return o(this, void 0, void 0, function () {
          return s(this, function (t) {
            switch (t.label) {
              case 0:
                return this.manifestCheckPromise || (this.manifestCheckPromise = function () {
                  return o(this, void 0, void 0, function () {
                    var e, t;
                    return s(this, function (n) {
                      switch (n.label) {
                        case 0:
                          if (!(e = document.querySelector('link[rel="manifest"]'))) return [2];
                          n.label = 1;

                        case 1:
                          return n.trys.push([1, 4,, 5]), [4, fetch(e.href)];

                        case 2:
                          return [4, n.sent().json()];

                        case 3:
                          return t = n.sent(), [3, 5];

                        case 4:
                          return n.sent(), [2];

                        case 5:
                          if (!t || !t.gcm_sender_id) return [2];
                          if ("103953800507" !== t.gcm_sender_id) throw g.create(b.INCORRECT_GCM_SENDER_ID);
                          return [2];
                      }
                    });
                  });
                }()), [4, this.manifestCheckPromise];

              case 1:
                return t.sent(), [2, e.prototype.getToken.call(this)];
            }
          });
        });
      }, t.prototype.requestPermission = function () {
        return o(this, void 0, void 0, function () {
          var e;
          return s(this, function (t) {
            switch (t.label) {
              case 0:
                return "granted" === this.getNotificationPermission_() ? [2] : [4, Notification.requestPermission()];

              case 1:
                if ("granted" === (e = t.sent())) return [2];
                throw "denied" === e ? g.create(b.PERMISSION_BLOCKED) : g.create(b.PERMISSION_DEFAULT);
            }
          });
        });
      }, t.prototype.useServiceWorker = function (e) {
        if (!(e instanceof ServiceWorkerRegistration)) throw g.create(b.SW_REGISTRATION_EXPECTED);
        if (null != this.registrationToUse) throw g.create(b.USE_SW_BEFORE_GET_TOKEN);
        this.registrationToUse = e;
      }, t.prototype.usePublicVapidKey = function (e) {
        if ("string" != typeof e) throw g.create(b.INVALID_PUBLIC_VAPID_KEY);
        if (null != this.publicVapidKeyToUse) throw g.create(b.USE_PUBLIC_KEY_BEFORE_GET_TOKEN);
        var t = D(e);
        if (65 !== t.length) throw g.create(b.PUBLIC_KEY_DECRYPTION_FAILED);
        this.publicVapidKeyToUse = t;
      }, t.prototype.onMessage = function (e, t, n) {
        return "function" == typeof e ? this.onMessageInternal(e, t, n) : this.onMessageInternal(e);
      }, t.prototype.onTokenRefresh = function (e, t, n) {
        return "function" == typeof e ? this.onTokenRefreshInternal(e, t, n) : this.onTokenRefreshInternal(e);
      }, t.prototype.waitForRegistrationToActivate_ = function (e) {
        var t = e.installing || e.waiting || e.active;
        return new Promise(function (n, r) {
          if (t) {
            if ("activated" !== t.state) {
              if ("redundant" !== t.state) {
                var i = function i() {
                  if ("activated" === t.state) n(e);else {
                    if ("redundant" !== t.state) return;
                    r(g.create(b.SW_REG_REDUNDANT));
                  }
                  t.removeEventListener("statechange", i);
                };

                t.addEventListener("statechange", i);
              } else r(g.create(b.SW_REG_REDUNDANT));
            } else n(e);
          } else r(g.create(b.NO_SW_IN_REG));
        });
      }, t.prototype.getSWRegistration_ = function () {
        var e = this;
        return this.registrationToUse ? this.waitForRegistrationToActivate_(this.registrationToUse) : (this.registrationToUse = null, navigator.serviceWorker.register("/firebase-messaging-sw.js", {
          scope: "/firebase-cloud-messaging-push-scope"
        })["catch"](function (e) {
          throw g.create(b.FAILED_DEFAULT_REGISTRATION, {
            browserErrorMessage: e.message
          });
        }).then(function (t) {
          return e.waitForRegistrationToActivate_(t).then(function () {
            return e.registrationToUse = t, t.update(), t;
          });
        }));
      }, t.prototype.getPublicVapidKey_ = function () {
        return o(this, void 0, void 0, function () {
          return s(this, function (e) {
            return this.publicVapidKeyToUse ? [2, this.publicVapidKeyToUse] : [2, T];
          });
        });
      }, t.prototype.setupSWMessageListener_ = function () {
        var e = this;
        navigator.serviceWorker.addEventListener("message", function (t) {
          if (t.data && t.data[_.TYPE_OF_MSG]) {
            var n = t.data;

            switch (n[_.TYPE_OF_MSG]) {
              case E.PUSH_MSG_RECEIVED:
              case E.NOTIFICATION_CLICKED:
                var r = n[_.DATA];
                e.messageObserver && e.messageObserver.next(r);
            }
          }
        }, !1);
      }, t;
    }(R);

    W = {
      isSupported: F
    }, t.INTERNAL.registerService("messaging", function (e) {
      if (!F()) throw g.create(b.UNSUPPORTED_BROWSER);
      return self && "ServiceWorkerGlobalScope" in self ? new U(e) : new M(e);
    }, W);
  } catch (e) {
    throw console.error(e), new Error("Cannot instantiate firebase-messaging - be sure to load firebase-app.js first.");
  }

  var W;
}(this.firebase = this.firebase || {}, firebase);

/***/ }),

/***/ "./Resources/assets/js/transaction/index.js":
/*!**************************************************!*\
  !*** ./Resources/assets/js/transaction/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

$(function () {
  AccountingAccount.load('#companyId', '#accountId');
  ExpenseCategory.load('#companyId', '#expenseCategoryId');
  $('#exportPage').jsExcelExport({
    'param': {
      'format': 'excel'
    }
  });
  $('#exportAll').jsExcelExport({
    'param': {
      'format': 'csv'
    }
  });
  $('#accountId').select2();
  $('#expenseCategoryId').select2();
  $('#createdByName').on('change', function () {
    if (!$('#createdByName').val()) {
      $('#createdById').val('');
    }
  });
  $('#createdByName').autocomplete({
    source: function source(request, response) {
      $.post('/system/user/suggest', {
        'q': request.term,
        'companyId': $('#companyId').val()
      }, function (rs) {
        if (rs.code) {
          response(rs.data);
        }
      });
    },
    minLength: 2,
    select: function select(event, ui) {
      $('#createdById').val(ui.item.id);
    }
  });
  $('#approvedByName').on('change', function () {
    if (!$('#approvedByName').val()) {
      $('#approvedById').val('');
    }
  });
  $('#approvedByName').autocomplete({
    source: function source(request, response) {
      $.post('/system/user/suggest', {
        'q': request.term,
        'companyId': $('#approvedById').val()
      }, function (rs) {
        if (rs.code) {
          response(rs.data);
        }
      });
    },
    minLength: 2,
    select: function select(event, ui) {
      $('#approvedById').val(ui.item.id);
    }
  });
  $('.delete-item').on('click', function () {
    $('#deleteModal').modal('show');
    var transactionId = $(this).attr('data-id');
    $('#transactionId').empty().val(transactionId);
  });
  $('#deleteModal').on('click', '.deleteItem', function () {
    $.post('/accounting/transaction/delete', {
      id: $('#transactionId').val()
    }, function (rs) {
      if (rs.code == 0) {
        $('#deleteModal').modal('hide');
        $('#alertModal').modal('show');
        $('#alertModal .modal-body').empty().append("<div class='alert alert-warning alert-dismissable'>" + rs.messages + "</div>");
      } else {
        window.location.reload();
      }
    });
  });
});

/***/ }),

/***/ "./Resources/assets/js/transaction/notification.js":
/*!*********************************************************!*\
  !*** ./Resources/assets/js/transaction/notification.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/**
 * 
 */


function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

$(function () {
  window.nhanhNotification = new NhanhNotification();
});

function NhanhNotification() {
  var _this = this;

  if (!projectFirebaseConfig || !projectFirebaseConfig.code) {
    return null;
  } // Kiểm tra trình duyệt hỗ trợ push notification hay không


  var isSafari = navigator.vendor && navigator.vendor.indexOf('Apple') > -1 && navigator.userAgent && !navigator.userAgent.match('CriOS');

  if (isSafari) {
    console.log('Notification does not support Safari');
    return null;
  }

  firebase.initializeApp(projectFirebaseConfig.data.initConfig);
  this.messaging = firebase.messaging();
  this.firestore = firebase.firestore();
  this.firestore.settings({
    timestampsInSnapshots: true
  });
  this.messaging.usePublicVapidKey(projectFirebaseConfig.data.publicVapidKey);
  var that = this;

  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js').then(function (registration) {
      console.log('Registration successful, scope is:', registration.scope);
      that.messaging.useServiceWorker(registration);
    })["catch"](function (error) {
      console.log('Service worker registration failed, error:', error);
    });
  }

  this.state = {
    isDeviceTokenSentToServer: false,
    deviceToken: '',
    currentUserId: null,
    hasMessagePermission: false,
    firebaseAuthenToken: '',
    isNewAuthenToken: false,
    uid: '',
    totalUnseenMessage: 0,
    messages: [],
    process: 'none',
    isOpenList: false,
    newNotification: null,
    showNotification: false
  };
  this.dispatch('INIT_STATE');
  this.messaging.requestPermission().then(function () {
    _this.dispatch('SET_HAS_MESSAGE_PERMISSION', true);
  })["catch"](function (err) {
    _this.dispatch('SET_HAS_MESSAGE_PERMISSION', false);
  });
  this.messaging.onTokenRefresh(function () {
    that.reSubcibe();
  });
  this.messaging.onMessage(function (payload) {
    that.recieveNotification(payload);
  });
}

NhanhNotification.prototype.componentDidUpdate = function (prevState) {
  var _this2 = this;

  if (JSON.stringify(prevState.lastAction) == JSON.stringify(this.state.lastAction)) {
    return null;
  }

  switch (this.state.lastAction) {
    case 'SET_HAS_MESSAGE_PERMISSION':
      if (this.state.hasMessagePermission) {
        this.setCurrentUser();
      }

    case 'RE_SUBCRIBE':
    case 'SET_CURRENT_USER':
      this.getDeviceToken();
      break;

    case 'SET_DEVICE_TOKEN':
      this.sendDeviceTokenToServer();
      break;

    case 'SET_DEVICETOKEN_SENTTOSERVER':
    case 'FINISH_INIT_MESSAGE':
      if (!this.state.firebaseAuthenToken) {
        this.setAuthenToken();
      } else {
        this.checkAuthen();
      }

      break;

    case 'SET_AUTHEN_TOKEN':
      this.checkAuthen();
      break;

    case 'CHECK_AUTHEN_TOKEN':
      if (!this.state.isValidAuthenToken && !this.state.isNewAuthenToken) {
        this.setAuthenToken();
      }

      if (this.state.isValidAuthenToken) {
        this.initFireStoreListener();
      }

      break;

    case 'OPEN_LIST_MESSAGE':
      this.loadMessageList();
      break;

    case 'UPDATE_MESSAGE_LIST':
      this.mockUpdateTotalUnseen();
      break;

    case 'RECIVE_NOTIFICATION':
      this.dispatch('SHOW_NOTIFICATION');
      break;

    case 'SHOW_NOTIFICATION':
      setTimeout(function () {
        _this2.dispatch('HIDE_NOTIFICATION');
      }, 10000);
      break;

    default:
      break;
  }

  this.triggleRender(prevState);
};

NhanhNotification.prototype.triggleRender = function (prevState) {
  if (this.state.totalUnseenMessage != prevState.totalUnseenMessage) {
    this.viewRenderUnseen();
  }

  if (this.state.process != prevState.process || JSON.stringify(this.state.messages) != JSON.stringify(prevState.messages)) {
    this.renderListMessage();
  }

  if (this.state.showNotification != prevState.showNotification) {
    if (this.state.showNotification) {
      this.showNotification();
    } else {
      this.hideNotification();
    }
  }
};

NhanhNotification.prototype.reSubcibe = function () {
  window.localStorage.setItem(this.keyIsDeviceTokenSentToServer, '0');
  window.localStorage.setItem(this.keyFirebaseAuthenToken, '');
  window.localStorage.setItem(this.keyCurrentUser, '');
  window.localStorage.setItem(this.keyDeviceToken, '');
  this.dispatch('RE_SUBCRIBE');
};

NhanhNotification.prototype.setCurrentUser = function () {
  if (!this.state.currentUserId || this.state.currentUserId != currentNhanhUserId) {
    window.localStorage.setItem(this.keyCurrentUser, currentNhanhUserId);
    window.localStorage.setItem(this.keyIsDeviceTokenSentToServer, '0');
    window.localStorage.setItem(this.keyFirebaseAuthenToken, '');
    this.dispatch('SET_CURRENT_USER', {
      currentUserId: currentNhanhUserId,
      isDeviceTokenSentToServer: false,
      deviceToken: ''
    });
  } else {
    this.dispatch('SET_CURRENT_USER', {
      currentUserId: currentNhanhUserId,
      isDeviceTokenSentToServer: this.state.isDeviceTokenSentToServer,
      deviceToken: this.state.deviceToken
    });
  }
};

NhanhNotification.prototype.getDeviceToken = function () {
  var _this3 = this;

  var that = this;

  if (this.state.isDeviceTokenSentToServer) {
    this.dispatch('FINISH_INIT_MESSAGE');
    return null;
  }

  this.messaging.getToken().then(function (currentToken) {
    if (currentToken) {
      window.localStorage.setItem(_this3.keyDeviceToken, currentToken);
      that.dispatch('SET_DEVICE_TOKEN', currentToken);
    } else {
      console.log('No Instance Firebase messaging ID token available.');
    }
  });
};

NhanhNotification.prototype.sendDeviceTokenToServer = function () {
  var that = this;
  this.mockSendDeviceTokenToServer().then(function (isSent) {
    window.localStorage.setItem(that.keyIsDeviceTokenSentToServer, isSent ? '1' : '0');
    that.dispatch('SET_DEVICETOKEN_SENTTOSERVER', isSent);
  });
};

NhanhNotification.prototype.setAuthenToken = function () {
  var that = this;
  this.mockAuthenToken().then(function (token) {
    //window.localStorage.setItem(that.keyFirebaseAuthenToken, token);
    that.dispatch('SET_AUTHEN_TOKEN', token);
  });
};

NhanhNotification.prototype.checkAuthen = function () {
  var that = this;
  firebase.auth().signInWithCustomToken(this.state.firebaseAuthenToken).then(function (rs) {
    window.localStorage.setItem(that.keyFirebaseAuthenToken, that.state.firebaseAuthenToken);
    that.dispatch('CHECK_AUTHEN_TOKEN', {
      isValid: true,
      uid: firebase.auth().getUid()
    });
    return null;
  })["catch"](function (err) {
    console.log('opp!!', err);
    window.localStorage.setItem(that.keyFirebaseAuthenToken, '');
    that.dispatch('CHECK_AUTHEN_TOKEN', {
      isValid: false,
      uid: null
    });
  });
};

NhanhNotification.prototype.loadMessageList = function () {
  var _this4 = this;

  if (this.state.process == 'loading-message') {
    return null;
  }

  this.dispatch('START_PROCESS', 'loading-message');
  this.mock10NewestMessage().then(function (list) {
    _this4.dispatch('UPDATE_MESSAGE_LIST', list);
  });
};

NhanhNotification.prototype.recieveNotification = function (payload) {
  this.dispatch('RECIVE_NOTIFICATION', payload);
};

NhanhNotification.prototype.initFireStoreListener = function () {
  if (this.state.isValidAuthenToken) {
    var that = this; // when update unseen		

    firebase.firestore().collection('notification-tray').doc(this.state.uid).onSnapshot(function (doc) {
      if (doc.exists) {
        that.dispatch('UPDATE_TOTAL_UNSEEN_MESSAGE', doc.get('unseen') || 0);
        that.mock10NewestMessage();
      }
    });
    $('#nn-bell .dropdown-toggle').on('click', function () {
      that.loadMessageList();
    });
    $('#nn-dialog .nn-container-link').on('click', function () {
      if (that.state.newNotification.data.web_click_action) {
        var pathname = window.location.pathname;

        switch (pathname) {
          case '/work/task/add':
          case '/work/task/edit':
          case '/crm/contract/add':
          case '/crm/contract/edit':
          case '/company/announcement/add':
            var win = window.open(that.state.newNotification.data.web_click_action, '_blank');
            win.focus();
            break;

          default:
            location.href = that.state.newNotification.data.web_click_action;
            break;
        }
      } else {
        return false;
      }
    });
    $('#nn-dialog .nn-dislog-close').on('click', function () {
      $('#nn-dialog').removeClass('nn-dialog-show');
    });
    $('#nn-bell .dropdown-menu').on('click', '.notification-list-item', function () {
      location.href = $(this).data('url');
    });
  }
}; //[START MOCK == API ]


NhanhNotification.prototype.mockAuthenToken = function () {
  var that = this;
  return new Promise(function (resolve, reject) {
    $.post('/home/index/getnotificationtoken', {}, function (rs) {
      if (rs.code) {
        resolve(rs.data.customToken);
        return true;
      } else {
        console.log('Can not get Authen Token ', rs.message);
        reject('Can not get Authen Token');
        return false;
      }
    }).fail(function (error) {
      console.log('Can not get Authen Token ', error);
      reject('Can not get Authen Token');
      return false;
    });
  });
};

NhanhNotification.prototype.mockSendDeviceTokenToServer = function (token) {
  var that = this;
  return new Promise(function (resolve, reject) {
    $.post('/home/index/registnotification', {
      token: that.state.deviceToken
    }, function (rs) {
      if (rs.code) {
        resolve(true);
        return true;
      } else {
        resolve(false);
        return false;
      }
    }).fail(function (error) {
      resolve(false);
      return false;
    });
  });
};

NhanhNotification.prototype.mock10NewestMessage = function () {
  var that = this;
  return new Promise(function (resolve, reject) {
    firebase.firestore().collection('notification-tray').doc(that.state.uid).collection('messages').orderBy('createdDateTime', 'desc').limit(10).get().then(function (snap) {
      var result = snap.docs.map(function (doc) {
        var createdDate = moment(doc.get('createdDateTime').toDate());
        return {
          data: doc.get('formData'),
          createdDateTime: createdDate.fromNow()
        };
      });
      resolve(result);
    });
  });
};

NhanhNotification.prototype.mockUpdateTotalUnseen = function () {
  var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
  var that = this;
  return firebase.firestore().collection('notification-tray').doc(this.state.uid).update({
    unseen: parseInt(value)
  });
}; // [END MOCK]
// [START RENDER]


NhanhNotification.prototype.viewRenderUnseen = function () {
  if (this.state.totalUnseenMessage) {
    $('#nn-bell .count').text(this.state.totalUnseenMessage);
  } else {
    $('#nn-bell .count').text('');
  }
};

NhanhNotification.prototype.listMessageItemTemplate = "<li class=\"notification-list-item\">\t\t\t\t\t\t\t\t\t\t\t\t\n<div class=\"nli-container\">\n<div class=\"nli-icon\">\n\t<i class=\"fa fa-bell fa-lg\"></i>\n</div>\n<div class=\"nli-content\">\n\t<div class=\"nli-title\">\n\t\t\n\t</div>\n\t<div class=\"nli-body\">\n\t\t\n\t</div>\n\t<div class=\"nli-time fontsize-85 text-muted\">\n\t\t<i class=\"fa fa-clock-o\"></i> <span></span>\n\t</div>\n</div>\n</div>\t\t\t\t\t\t\t\t\t\t\t\t\n</li>";

NhanhNotification.prototype.renderListMessage = function () {
  if (this.state.process == 'loading-message') {
    $('#nn-bell .dropdown-menu').empty();
    $('#nn-bell .dropdown-menu').append('<li class="notification-header"><div style="text-align:center;"><i class="fa fa-cog fa-spin"></i></div></li>');
  } else {
    $('#nn-bell .dropdown-menu').empty();

    var _iterator = _createForOfIteratorHelper(this.state.messages),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var message = _step.value;
        var item = $(this.listMessageItemTemplate);
        item.data('url', message.data.web_click_action);
        item.find('.nli-title').text(message.data.title);
        item.find('.nli-body').text(message.data.body);
        item.find('.nli-time span').text(message.createdDateTime);
        $('#nn-bell .dropdown-menu').append(item);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }
};

NhanhNotification.prototype.showNotification = function () {
  if (this.state.newNotification.data.web_icon) {
    $('#nn-dialog .nn-icon').html('<img src="' + this.state.newNotification.data.web_icon + '"/>');
  }

  $('#nn-dialog .nn-content-title').text(this.state.newNotification.data.title);
  $('#nn-dialog .nn-content-body').text(this.state.newNotification.data.body);
  $('#nn-dialog').addClass('nn-dialog-show');
};

NhanhNotification.prototype.hideNotification = function () {
  $('#nn-dialog').removeClass('nn-dialog-show');
};

/***/ }),

/***/ "./Resources/assets/js/transaction/notification.reducer.js":
/*!*****************************************************************!*\
  !*** ./Resources/assets/js/transaction/notification.reducer.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * 
 */
NhanhNotification.prototype.dispatch = function (action) {
  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var prevState = JSON.parse(JSON.stringify(this.state));
  this.reduce(action, data);
  this.componentDidUpdate(prevState);
};

NhanhNotification.prototype.keyIsDeviceTokenSentToServer = 'firebaseMessagingTokenSentToServer';
NhanhNotification.prototype.keyCurrentUser = 'firebaseMessagingUserId';
NhanhNotification.prototype.keyFirebaseAuthenToken = 'firebaseAuthenToken';
NhanhNotification.prototype.keyDeviceToken = 'deviceToken';

NhanhNotification.prototype.reduce = function (action, data) {
  var isExcuse = true;

  switch (action) {
    case 'INIT_STATE':
      this.state.isDeviceTokenSentToServer = window.localStorage.getItem(this.keyIsDeviceTokenSentToServer) === '1';
      this.state.firebaseAuthenToken = window.localStorage.getItem(this.keyFirebaseAuthenToken);
      this.state.currentUserId = window.localStorage.getItem(this.keyCurrentUser);
      this.state.deviceToken = window.localStorage.getItem(this.keyDeviceToken);
      break;

    case 'SET_HAS_MESSAGE_PERMISSION':
      this.state.hasMessagePermission = data;
      break;

    case 'SET_CURRENT_USER':
      this.state.currentUserId = data.currentUserId;
      this.state.isDeviceTokenSentToServer = data.isDeviceTokenSentToServer;
      this.state.deviceToken = data.deviceToken;
      break;

    case 'SET_DEVICE_TOKEN':
      this.state.deviceToken = data;
      break;

    case 'SET_DEVICETOKEN_SENTTOSERVER':
      this.state.isDeviceTokenSentToServer = data;
      break;

    case 'FINISH_INIT_MESSAGE':
      break;

    case 'SET_AUTHEN_TOKEN':
      this.state.firebaseAuthenToken = data;
      this.state.isNewAuthenToken = true;
      break;

    case 'CHECK_AUTHEN_TOKEN':
      this.state.isValidAuthenToken = data.isValid;
      this.state.uid = data.uid;
      break;

    case 'UPDATE_TOTAL_UNSEEN_MESSAGE':
      this.state.totalUnseenMessage = data;
      break;

    case 'START_PROCESS':
      this.state.process = data;
      break;

    case 'UPDATE_MESSAGE_LIST':
      this.state.messages = data;
      this.state.process = 'none';
      break;

    case 'OPEN_LIST_MESSAGE':
      this.state.isOpenList = true;
      break;

    case 'CLOSE_LIST_MESSAGE':
      this.state.isOpenList = false;
      break;

    case 'RE_SUBCRIBE':
      this.state = Object.assign({}, this.state, {
        isDeviceTokenSentToServer: false,
        deviceToken: '',
        currentUserId: null,
        hasMessagePermission: false,
        firebaseAuthenToken: '',
        isNewAuthenToken: false,
        uid: '',
        totalUnseenMessage: 0,
        messages: [],
        process: 'none',
        isOpenList: false
      });
      break;

    case 'RECIVE_NOTIFICATION':
      this.state.newNotification = data;
      break;

    case 'SHOW_NOTIFICATION':
      this.state.showNotification = true;
      break;

    case 'HIDE_NOTIFICATION':
      this.state.showNotification = false;
      break;

    default:
      isExcuse = false;
      break;
  }

  if (isExcuse) {
    this.state.lastAction = action;
  }
};

/***/ }),

/***/ "./Resources/assets/js/transaction/plugin.js":
/*!***************************************************!*\
  !*** ./Resources/assets/js/transaction/plugin.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * @AutoLink plugin for CKEditor (2013.08.23)
 * @description auto-add <a> label to non-IE browsers
 * @author Hayden Wei
 * @version 1.0
 */
CKEDITOR.plugins.add('autolink', {
  init: function init(editor) {
    editor.on('instanceReady', function () {
      var cont = 0;

      if (CKEDITOR.env.ie) {
        return;
      }

      var fillChar = CKEDITOR.env.ie && CKEDITOR.env.version == '6' ? "\uFEFF" : "\u200B";

      var isFillChar = function isFillChar(node, isInStart) {
        return node.nodeType == 3 && !node.nodeValue.replace(new RegExp((isInStart ? '^' : '') + fillChar), '').length;
      };

      var isBody = function isBody(node) {
        return node && node.nodeType == 1 && node.tagName.toLowerCase() == 'body';
      };

      var html = function html(str) {
        return str ? str.replace(/&((g|l|quo)t|amp|#39);/g, function (m) {
          return {
            '&lt;': '<',
            '&amp;': '&',
            '&quot;': '"',
            '&gt;': '>',
            '&#39;': "'"
          }[m];
        }) : '';
      };

      var isArray = function isArray(obj) {
        return Object.prototype.toString.apply(obj) == '[object Array]';
      };

      var isBody = function isBody(node) {
        return node && node.nodeType == 1 && node.tagName.toLowerCase() == 'body';
      };

      var listToMap = function listToMap(list) {
        if (!list) return {};
        list = isArray(list) ? list : list.split(',');

        for (var i = 0, ci, obj = {}; ci = list[i++];) {
          obj[ci.toUpperCase()] = obj[ci] = 1;
        }

        return obj;
      };

      var findParent = function findParent(node, filterFn, includeSelf) {
        if (node && !isBody(node)) {
          node = includeSelf ? node : node.parentNode;

          while (node) {
            if (!filterFn || filterFn(node) || isBody(node)) {
              return filterFn && !filterFn(node) && isBody(node) ? null : node;
            }

            node = node.parentNode;
          }
        }

        return null;
      };

      var findParentByTagName = function findParentByTagName(node, tagNames, includeSelf, excludeFn) {
        tagNames = listToMap(isArray(tagNames) ? tagNames : [tagNames]);
        return findParent(node, function (node) {
          return tagNames[node.tagName] && !(excludeFn && excludeFn(node));
        }, includeSelf);
      };

      editor.document.on('reset', function () {
        cont = 0;
      });

      editor.autolink = function (e) {
        var sel = editor.getSelection().getNative(),
            range = sel.getRangeAt(0).cloneRange(),
            offset,
            charCode;
        var start = range.startContainer;

        while (start.nodeType == 1 && range.startOffset > 0) {
          start = range.startContainer.childNodes[range.startOffset - 1];

          if (!start) {
            break;
          }

          range.setStart(start, start.nodeType == 1 ? start.childNodes.length : start.nodeValue.length);
          range.collapse(true);
          start = range.startContainer;
        }

        do {
          if (range.startOffset == 0) {
            start = range.startContainer.previousSibling;

            while (start && start.nodeType == 1) {
              if (CKEDITOR.env.gecko && start.firstChild) start = start.firstChild;else start = start.lastChild;
            }

            if (!start || isFillChar(start)) {
              break;
            }

            offset = start.nodeValue.length;
          } else {
            start = range.startContainer;
            offset = range.startOffset;
          }

          range.setStart(start, offset - 1);
          charCode = range.toString().charCodeAt(0);
        } while (charCode != 160 && charCode != 32);

        if (range.toString().replace(new RegExp(fillChar, 'g'), '').match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)) {
          while (range.toString().length) {
            if (/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(range.toString())) {
              break;
            }

            try {
              range.setStart(range.startContainer, range.startOffset + 1);
            } catch (e) {
              var start = range.startContainer;

              while (!(next = start.nextSibling)) {
                if (isBody(start)) {
                  return;
                }

                start = start.parentNode;
              }

              range.setStart(next, 0);
            }
          }

          if (findParentByTagName(range.startContainer, 'a', true)) {
            return;
          }

          var a = document.createElement('a'),
              text = document.createTextNode(' '),
              href;
          editor.undoManger && editor.undoManger.save();
          a.appendChild(range.extractContents());
          a.href = a.innerHTML = a.innerHTML.replace(/<[^>]+>/g, '');
          href = a.getAttribute("href").replace(new RegExp(fillChar, 'g'), '');
          href = /^(?:https?:\/\/)/ig.test(href) ? href : "http://" + href;
          a.setAttribute('_src', html(href));
          a.href = html(href);
          range.insertNode(a);
          a.parentNode.insertBefore(text, a.nextSibling);
          range.setStart(text.nextSibling, 0);
          range.collapse(true);
          sel.removeAllRanges();
          sel.addRange(range);
          editor.undoManger && editor.undoManger.save();
        }
      };

      editor.document.on("keydown", function (e) {
        if (e.data.getKey() == 32) editor.autolink(e);
      });
      editor.document.on("keyup", function (e) {
        if (e.data.getKey() == 13) editor.autolink(e);
      });
    });
  }
});

/***/ }),

/***/ "./Resources/assets/js/transaction/previewOfficeMS.js":
/*!************************************************************!*\
  !*** ./Resources/assets/js/transaction/previewOfficeMS.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function buildPreviewModal() {
  $("#preview").empty();
  $("#preview").html("<div class='modal-dialog modal-lg' style='width: 100%; height:0px; margin:0px; padding-top:5px;'><div class='modal-content' style='width: 100%;'><div class='modal-header'><button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button><h4 class='modal-title'>Xem trước</h4></div><div class='modal-body'></div></div></div>");
}

$.fn.previewModal = function () {
  this.each(function () {
    var d = window.location.origin + $(this).attr("href");
    var f = $(this).attr("data-file");
    var e = d.substring(d.lastIndexOf(".") + 1);

    if (/^(xlsx|ppt|pps|doc|docx|txt|pptx|jpg|png|gif|pdf|jpeg)$/i.test(e)) {
      if (!$(this).children('.fa-eye').length > 0) {
        $(this).prepend('<i style="color:#E80909;margin-right: 5px;" data-toggle="tooltip" data-placement="top" data-original-title="Xem trước"  class="fa fa-eye"></i>');
      }
    } else {
      $(this).css('padding-left', '17px');
    }

    $(this).click(function () {
      if (/^(xlsx|ppt|pps|doc|docx|pptx)$/.test(e)) {
        $(this).after(function () {
          $("#preview").modal('show');
          $('#preview .modal-body').empty();
          $('#preview .modal-footer').empty();
          $('#preview .modal-body').append('<iframe src="https://view.officeapps.live.com/op/view.aspx?src=' + encodeURIComponent(d) + '" width=100%" height="550px" style="border: none;"></iframe>');
          $('#preview .modal-footer').append("<button type='button' class='btn btn-default' data-dismiss='modal'>Đóng</button>");
        });
      } else if (/^(jpg|png|jpeg|gif|pdf|txt)$/i.test(e)) {
        window.open(d);
      } else {
        window.open(f);
      }
    });
  });
};

/***/ }),

/***/ "./Resources/assets/js/transaction/styles.js":
/*!***************************************************!*\
  !*** ./Resources/assets/js/transaction/styles.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Copyright (c) 2003-2014, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or http://ckeditor.com/license
 */
// This file contains style definitions that can be used by CKEditor plugins.
//
// The most common use for it is the "stylescombo" plugin, which shows a combo
// in the editor toolbar, containing all styles. Other plugins instead, like
// the div plugin, use a subset of the styles on their feature.
//
// If you don't have plugins that depend on this file, you can simply ignore it.
// Otherwise it is strongly recommended to customize this file to match your
// website requirements and design properly.
CKEDITOR.stylesSet.add('default', [
/* Block Styles */
// These styles are already available in the "Format" combo ("format" plugin),
// so they are not needed here by default. You may enable them to avoid
// placing the "Format" combo in the toolbar, maintaining the same features.

/*
{ name: 'Paragraph',		element: 'p' },
{ name: 'Heading 1',		element: 'h1' },
{ name: 'Heading 2',		element: 'h2' },
{ name: 'Heading 3',		element: 'h3' },
{ name: 'Heading 4',		element: 'h4' },
{ name: 'Heading 5',		element: 'h5' },
{ name: 'Heading 6',		element: 'h6' },
{ name: 'Preformatted Text',element: 'pre' },
{ name: 'Address',			element: 'address' },
*/
{
  name: 'Italic Title',
  element: 'h2',
  styles: {
    'font-style': 'italic'
  }
}, {
  name: 'Subtitle',
  element: 'h3',
  styles: {
    'color': '#aaa',
    'font-style': 'italic'
  }
}, {
  name: 'Special Container',
  element: 'div',
  styles: {
    padding: '5px 10px',
    background: '#eee',
    border: '1px solid #ccc'
  }
},
/* Inline Styles */
// These are core styles available as toolbar buttons. You may opt enabling
// some of them in the Styles combo, removing them from the toolbar.
// (This requires the "stylescombo" plugin)

/*
{ name: 'Strong',			element: 'strong', overrides: 'b' },
{ name: 'Emphasis',			element: 'em'	, overrides: 'i' },
{ name: 'Underline',		element: 'u' },
{ name: 'Strikethrough',	element: 'strike' },
{ name: 'Subscript',		element: 'sub' },
{ name: 'Superscript',		element: 'sup' },
*/
{
  name: 'Marker',
  element: 'span',
  attributes: {
    'class': 'marker'
  }
}, {
  name: 'Big',
  element: 'big'
}, {
  name: 'Small',
  element: 'small'
}, {
  name: 'Typewriter',
  element: 'tt'
}, {
  name: 'Computer Code',
  element: 'code'
}, {
  name: 'Keyboard Phrase',
  element: 'kbd'
}, {
  name: 'Sample Text',
  element: 'samp'
}, {
  name: 'Variable',
  element: 'var'
}, {
  name: 'Deleted Text',
  element: 'del'
}, {
  name: 'Inserted Text',
  element: 'ins'
}, {
  name: 'Cited Work',
  element: 'cite'
}, {
  name: 'Inline Quotation',
  element: 'q'
}, {
  name: 'Language: RTL',
  element: 'span',
  attributes: {
    'dir': 'rtl'
  }
}, {
  name: 'Language: LTR',
  element: 'span',
  attributes: {
    'dir': 'ltr'
  }
},
/* Object Styles */
{
  name: 'Styled image (left)',
  element: 'img',
  attributes: {
    'class': 'left'
  }
}, {
  name: 'Styled image (right)',
  element: 'img',
  attributes: {
    'class': 'right'
  }
}, {
  name: 'Compact table',
  element: 'table',
  attributes: {
    cellpadding: '5',
    cellspacing: '0',
    border: '1',
    bordercolor: '#ccc'
  },
  styles: {
    'border-collapse': 'collapse'
  }
}, {
  name: 'Borderless Table',
  element: 'table',
  styles: {
    'border-style': 'hidden',
    'background-color': '#E6E6FA'
  }
}, {
  name: 'Square Bulleted List',
  element: 'ul',
  styles: {
    'list-style-type': 'square'
  }
}]);

/***/ }),

/***/ "./Resources/assets/js/transaction/vi.js":
/*!***********************************************!*\
  !*** ./Resources/assets/js/transaction/vi.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*
Copyright (c) 2003-2014, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
CKEDITOR.lang['vi'] = {
  "editor": "Bộ soạn thảo văn bản có định dạng",
  "editorPanel": "Bảng điều khiển Rich Text Editor",
  "common": {
    "editorHelp": "Nhấn ALT + 0 để được giúp đỡ",
    "browseServer": "Duyệt máy chủ",
    "url": "URL",
    "protocol": "Giao thức",
    "upload": "Tải lên",
    "uploadSubmit": "Tải lên máy chủ",
    "image": "Hình ảnh",
    "flash": "Flash",
    "form": "Biểu mẫu",
    "checkbox": "Nút kiểm",
    "radio": "Nút chọn",
    "textField": "Trường văn bản",
    "textarea": "Vùng văn bản",
    "hiddenField": "Trường ẩn",
    "button": "Nút",
    "select": "Ô chọn",
    "imageButton": "Nút hình ảnh",
    "notSet": "<không thiết lập>",
    "id": "Định danh",
    "name": "Tên",
    "langDir": "Hướng ngôn ngữ",
    "langDirLtr": "Trái sang phải (LTR)",
    "langDirRtl": "Phải sang trái (RTL)",
    "langCode": "Mã ngôn ngữ",
    "longDescr": "Mô tả URL",
    "cssClass": "Lớp Stylesheet",
    "advisoryTitle": "Nhan đề hướng dẫn",
    "cssStyle": "Kiểu ",
    "ok": "Đồng ý",
    "cancel": "Bỏ qua",
    "close": "Đóng",
    "preview": "Xem trước",
    "resize": "Kéo rê để thay đổi kích cỡ",
    "generalTab": "Tab chung",
    "advancedTab": "Tab mở rộng",
    "validateNumberFailed": "Giá trị này không phải là số.",
    "confirmNewPage": "Mọi thay đổi không được lưu lại, nội dung này sẽ bị mất. Bạn có chắc chắn muốn tải một trang mới?",
    "confirmCancel": "Một vài tùy chọn đã bị thay đổi. Bạn có chắc chắn muốn đóng hộp thoại?",
    "options": "Tùy chọn",
    "target": "Đích đến",
    "targetNew": "Cửa sổ mới (_blank)",
    "targetTop": "Cửa sổ trên cùng (_top)",
    "targetSelf": "Tại trang (_self)",
    "targetParent": "Cửa sổ cha (_parent)",
    "langDirLTR": "Trái sang phải (LTR)",
    "langDirRTL": "Phải sang trái (RTL)",
    "styles": "Kiểu",
    "cssClasses": "Lớp CSS",
    "width": "Chiều rộng",
    "height": "Chiều cao",
    "align": "Vị trí",
    "alignLeft": "Trái",
    "alignRight": "Phải",
    "alignCenter": "Giữa",
    "alignJustify": "Sắp chữ",
    "alignTop": "Trên",
    "alignMiddle": "Giữa",
    "alignBottom": "Dưới",
    "alignNone": "Không",
    "invalidValue": "Giá trị không hợp lệ.",
    "invalidHeight": "Chiều cao phải là số nguyên.",
    "invalidWidth": "Chiều rộng phải là số nguyên.",
    "invalidCssLength": "Giá trị quy định cho trường \"%1\" phải là một số dương có hoặc không có một đơn vị đo CSS hợp lệ (px, %, in, cm, mm, em, ex, pt, hoặc pc).",
    "invalidHtmlLength": "Giá trị quy định cho trường \"%1\" phải là một số dương có hoặc không có một đơn vị đo HTML hợp lệ (px hoặc %).",
    "invalidInlineStyle": "Giá trị quy định cho kiểu nội tuyến phải bao gồm một hoặc nhiều dữ liệu với định dạng \"tên:giá trị\", cách nhau bằng dấu chấm phẩy.",
    "cssLengthTooltip": "Nhập một giá trị theo pixel hoặc một số với một đơn vị CSS hợp lệ (px, %, in, cm, mm, em, ex, pt, hoặc pc).",
    "unavailable": "%1<span class=\"cke_accessibility\">, không có</span>"
  },
  "about": {
    "copy": "Bản quyền &copy; $1. Giữ toàn quyền.",
    "dlgTitle": "Thông tin về CKEditor",
    "help": "Kiểm tra $1 để được giúp đỡ.",
    "moreInfo": "Vui lòng ghé thăm trang web của chúng tôi để có thông tin về giấy phép:",
    "title": "Thông tin về CKEditor",
    "userGuide": "Hướng dẫn sử dụng CKEditor"
  },
  "basicstyles": {
    "bold": "Đậm",
    "italic": "Nghiêng",
    "strike": "Gạch xuyên ngang",
    "subscript": "Chỉ số dưới",
    "superscript": "Chỉ số trên",
    "underline": "Gạch chân"
  },
  "bidi": {
    "ltr": "Văn bản hướng từ trái sang phải",
    "rtl": "Văn bản hướng từ phải sang trái"
  },
  "blockquote": {
    "toolbar": "Khối trích dẫn"
  },
  "clipboard": {
    "copy": "Sao chép",
    "copyError": "Các thiết lập bảo mật của trình duyệt không cho phép trình biên tập tự động thực thi lệnh sao chép. Hãy sử dụng bàn phím cho lệnh này (Ctrl/Cmd+C).",
    "cut": "Cắt",
    "cutError": "Các thiết lập bảo mật của trình duyệt không cho phép trình biên tập tự động thực thi lệnh cắt. Hãy sử dụng bàn phím cho lệnh này (Ctrl/Cmd+X).",
    "paste": "Dán",
    "pasteArea": "Khu vực dán",
    "pasteMsg": "Hãy dán nội dung vào trong khung bên dưới, sử dụng tổ hợp phím (<STRONG>Ctrl/Cmd+V</STRONG>) và nhấn vào nút <STRONG>Đồng ý</STRONG>.",
    "securityMsg": "Do thiết lập bảo mật của trình duyệt nên trình biên tập không thể truy cập trực tiếp vào nội dung đã sao chép. Bạn cần phải dán lại nội dung vào cửa sổ này.",
    "title": "Dán"
  },
  "button": {
    "selectedLabel": "%1 (Đã chọn)"
  },
  "colorbutton": {
    "auto": "Tự động",
    "bgColorTitle": "Màu nền",
    "colors": {
      "000": "Đen",
      "800000": "Maroon",
      "8B4513": "Saddle Brown",
      "2F4F4F": "Dark Slate Gray",
      "008080": "Teal",
      "000080": "Navy",
      "4B0082": "Indigo",
      "696969": "Dark Gray",
      "B22222": "Fire Brick",
      "A52A2A": "Nâu",
      "DAA520": "Golden Rod",
      "006400": "Dark Green",
      "40E0D0": "Turquoise",
      "0000CD": "Medium Blue",
      "800080": "Purple",
      "808080": "Xám",
      "F00": "Đỏ",
      "FF8C00": "Dark Orange",
      "FFD700": "Vàng",
      "008000": "Xanh lá cây",
      "0FF": "Cyan",
      "00F": "Xanh da trời",
      "EE82EE": "Tím",
      "A9A9A9": "Xám tối",
      "FFA07A": "Light Salmon",
      "FFA500": "Màu cam",
      "FFFF00": "Vàng",
      "00FF00": "Lime",
      "AFEEEE": "Pale Turquoise",
      "ADD8E6": "Light Blue",
      "DDA0DD": "Plum",
      "D3D3D3": "Light Grey",
      "FFF0F5": "Lavender Blush",
      "FAEBD7": "Antique White",
      "FFFFE0": "Light Yellow",
      "F0FFF0": "Honeydew",
      "F0FFFF": "Azure",
      "F0F8FF": "Alice Blue",
      "E6E6FA": "Lavender",
      "FFF": "Trắng"
    },
    "more": "Màu khác...",
    "panelTitle": "Màu sắc",
    "textColorTitle": "Màu chữ"
  },
  "colordialog": {
    "clear": "Xóa bỏ",
    "highlight": "Màu chọn",
    "options": "Tùy chọn màu",
    "selected": "Màu đã chọn",
    "title": "Chọn màu"
  },
  "templates": {
    "button": "Mẫu dựng sẵn",
    "emptyListMsg": "(Không có mẫu dựng sẵn nào được định nghĩa)",
    "insertOption": "Thay thế nội dung hiện tại",
    "options": "Tùy chọn mẫu dựng sẵn",
    "selectPromptMsg": "Hãy chọn mẫu dựng sẵn để mở trong trình biên tập<br>(nội dung hiện tại sẽ bị mất):",
    "title": "Nội dung Mẫu dựng sẵn"
  },
  "contextmenu": {
    "options": "Tùy chọn menu bổ xung"
  },
  "div": {
    "IdInputLabel": "Định danh (id)",
    "advisoryTitleInputLabel": "Nhan đề hướng dẫn",
    "cssClassInputLabel": "Các lớp CSS",
    "edit": "Chỉnh sửa",
    "inlineStyleInputLabel": "Kiểu nội dòng",
    "langDirLTRLabel": "Trái sang phải (LTR)",
    "langDirLabel": "Hướng ngôn ngữ",
    "langDirRTLLabel": "Phải qua trái (RTL)",
    "languageCodeInputLabel": "Mã ngôn ngữ",
    "remove": "Xóa bỏ",
    "styleSelectLabel": "Kiểu (style)",
    "title": "Tạo khối các thành phần",
    "toolbar": "Tạo khối các thành phần"
  },
  "toolbar": {
    "toolbarCollapse": "Thu gọn thanh công cụ",
    "toolbarExpand": "Mở rộng thnah công cụ",
    "toolbarGroups": {
      "document": "Tài liệu",
      "clipboard": "Clipboard/Undo",
      "editing": "Chỉnh sửa",
      "forms": "Bảng biểu",
      "basicstyles": "Kiểu cơ bản",
      "paragraph": "Đoạn",
      "links": "Liên kết",
      "insert": "Chèn",
      "styles": "Kiểu",
      "colors": "Màu sắc",
      "tools": "Công cụ"
    },
    "toolbars": "Thanh công cụ"
  },
  "elementspath": {
    "eleLabel": "Nhãn thành phần",
    "eleTitle": "%1 thành phần"
  },
  "find": {
    "find": "Tìm kiếm",
    "findOptions": "Tìm tùy chọn",
    "findWhat": "Tìm chuỗi:",
    "matchCase": "Phân biệt chữ hoa/thường",
    "matchCyclic": "Giống một phần",
    "matchWord": "Giống toàn bộ từ",
    "notFoundMsg": "Không tìm thấy chuỗi cần tìm.",
    "replace": "Thay thế",
    "replaceAll": "Thay thế tất cả",
    "replaceSuccessMsg": "%1 vị trí đã được thay thế.",
    "replaceWith": "Thay bằng:",
    "title": "Tìm kiếm và thay thế"
  },
  "fakeobjects": {
    "anchor": "Điểm neo",
    "flash": "Flash",
    "hiddenfield": "Trường ẩn",
    "iframe": "IFrame",
    "unknown": "Đối tượng không rõ ràng"
  },
  "flash": {
    "access": "Truy cập mã",
    "accessAlways": "Luôn luôn",
    "accessNever": "Không bao giờ",
    "accessSameDomain": "Cùng tên miền",
    "alignAbsBottom": "Dưới tuyệt đối",
    "alignAbsMiddle": "Giữa tuyệt đối",
    "alignBaseline": "Đường cơ sở",
    "alignTextTop": "Phía trên chữ",
    "bgcolor": "Màu nền",
    "chkFull": "Cho phép toàn màn hình",
    "chkLoop": "Lặp",
    "chkMenu": "Cho phép bật menu của Flash",
    "chkPlay": "Tự động chạy",
    "flashvars": "Các biến số dành cho Flash",
    "hSpace": "Khoảng đệm ngang",
    "properties": "Thuộc tính Flash",
    "propertiesTab": "Thuộc tính",
    "quality": "Chất lượng",
    "qualityAutoHigh": "Cao tự động",
    "qualityAutoLow": "Thấp tự động",
    "qualityBest": "Tốt nhất",
    "qualityHigh": "Cao",
    "qualityLow": "Thấp",
    "qualityMedium": "Trung bình",
    "scale": "Tỷ lệ",
    "scaleAll": "Hiển thị tất cả",
    "scaleFit": "Vừa vặn",
    "scaleNoBorder": "Không đường viền",
    "title": "Thuộc tính Flash",
    "vSpace": "Khoảng đệm dọc",
    "validateHSpace": "Khoảng đệm ngang phải là số nguyên.",
    "validateSrc": "Hãy đưa vào đường dẫn liên kết",
    "validateVSpace": "Khoảng đệm dọc phải là số nguyên.",
    "windowMode": "Chế độ cửa sổ",
    "windowModeOpaque": "Mờ đục",
    "windowModeTransparent": "Trong suốt",
    "windowModeWindow": "Cửa sổ"
  },
  "font": {
    "fontSize": {
      "label": "Cỡ chữ",
      "voiceLabel": "Kích cỡ phông",
      "panelTitle": "Cỡ chữ"
    },
    "label": "Phông",
    "panelTitle": "Phông",
    "voiceLabel": "Phông"
  },
  "forms": {
    "button": {
      "title": "Thuộc tính của nút",
      "text": "Chuỗi hiển thị (giá trị)",
      "type": "Kiểu",
      "typeBtn": "Nút bấm",
      "typeSbm": "Nút gửi",
      "typeRst": "Nút nhập lại"
    },
    "checkboxAndRadio": {
      "checkboxTitle": "Thuộc tính nút kiểm",
      "radioTitle": "Thuộc tính nút chọn",
      "value": "Giá trị",
      "selected": "Được chọn"
    },
    "form": {
      "title": "Thuộc tính biểu mẫu",
      "menu": "Thuộc tính biểu mẫu",
      "action": "Hành động",
      "method": "Phương thức",
      "encoding": "Bảng mã"
    },
    "hidden": {
      "title": "Thuộc tính trường ẩn",
      "name": "Tên",
      "value": "Giá trị"
    },
    "select": {
      "title": "Thuộc tính ô chọn",
      "selectInfo": "Thông tin",
      "opAvail": "Các tùy chọn có thể sử dụng",
      "value": "Giá trị",
      "size": "Kích cỡ",
      "lines": "dòng",
      "chkMulti": "Cho phép chọn nhiều",
      "opText": "Văn bản",
      "opValue": "Giá trị",
      "btnAdd": "Thêm",
      "btnModify": "Thay đổi",
      "btnUp": "Lên",
      "btnDown": "Xuống",
      "btnSetValue": "Giá trị được chọn",
      "btnDelete": "Nút xoá"
    },
    "textarea": {
      "title": "Thuộc tính vùng văn bản",
      "cols": "Số cột",
      "rows": "Số hàng"
    },
    "textfield": {
      "title": "Thuộc tính trường văn bản",
      "name": "Tên",
      "value": "Giá trị",
      "charWidth": "Độ rộng của ký tự",
      "maxChars": "Số ký tự tối đa",
      "type": "Kiểu",
      "typeText": "Ký tự",
      "typePass": "Mật khẩu",
      "typeEmail": "Email",
      "typeSearch": "Tìm kiếm",
      "typeTel": "Số điện thoại",
      "typeUrl": "URL"
    }
  },
  "format": {
    "label": "Định dạng",
    "panelTitle": "Định dạng",
    "tag_address": "Address",
    "tag_div": "Bình thường (DIV)",
    "tag_h1": "Heading 1",
    "tag_h2": "Heading 2",
    "tag_h3": "Heading 3",
    "tag_h4": "Heading 4",
    "tag_h5": "Heading 5",
    "tag_h6": "Heading 6",
    "tag_p": "Bình thường (P)",
    "tag_pre": "Đã thiết lập"
  },
  "horizontalrule": {
    "toolbar": "Chèn đường phân cách ngang"
  },
  "iframe": {
    "border": "Hiển thị viền khung",
    "noUrl": "Vui lòng nhập địa chỉ iframe",
    "scrolling": "Kích hoạt thanh cuộn",
    "title": "Thuộc tính iframe",
    "toolbar": "Iframe"
  },
  "image": {
    "alertUrl": "Hãy đưa vào đường dẫn của ảnh",
    "alt": "Chú thích ảnh",
    "border": "Đường viền",
    "btnUpload": "Tải lên máy chủ",
    "button2Img": "Bạn có muốn chuyển nút bấm bằng ảnh được chọn thành ảnh?",
    "hSpace": "Khoảng đệm ngang",
    "img2Button": "Bạn có muốn chuyển đổi ảnh được chọn thành nút bấm bằng ảnh?",
    "infoTab": "Thông tin của ảnh",
    "linkTab": "Tab liên kết",
    "lockRatio": "Giữ nguyên tỷ lệ",
    "menu": "Thuộc tính của ảnh",
    "resetSize": "Kích thước gốc",
    "title": "Thuộc tính của ảnh",
    "titleButton": "Thuộc tính nút của ảnh",
    "upload": "Tải lên",
    "urlMissing": "Thiếu đường dẫn hình ảnh",
    "vSpace": "Khoảng đệm dọc",
    "validateBorder": "Chiều rộng của đường viền phải là một số nguyên dương",
    "validateHSpace": "Khoảng đệm ngang phải là một số nguyên dương",
    "validateVSpace": "Khoảng đệm dọc phải là một số nguyên dương"
  },
  "indent": {
    "indent": "Dịch vào trong",
    "outdent": "Dịch ra ngoài"
  },
  "smiley": {
    "options": "Tùy chọn hình  biểu lộ cảm xúc",
    "title": "Chèn hình biểu lộ cảm xúc (mặt cười)",
    "toolbar": "Hình biểu lộ cảm xúc (mặt cười)"
  },
  "justify": {
    "block": "Canh đều",
    "center": "Canh giữa",
    "left": "Canh trái",
    "right": "Canh phải"
  },
  "language": {
    "button": "Thiết lập ngôn ngữ",
    "remove": "Loại bỏ ngôn ngữ"
  },
  "link": {
    "acccessKey": "Phím hỗ trợ truy cập",
    "advanced": "Mở rộng",
    "advisoryContentType": "Nội dung hướng dẫn",
    "advisoryTitle": "Nhan đề hướng dẫn",
    "anchor": {
      "toolbar": "Chèn/Sửa điểm neo",
      "menu": "Thuộc tính điểm neo",
      "title": "Thuộc tính điểm neo",
      "name": "Tên của điểm neo",
      "errorName": "Hãy nhập vào tên của điểm neo",
      "remove": "Xóa neo"
    },
    "anchorId": "Theo định danh thành phần",
    "anchorName": "Theo tên điểm neo",
    "charset": "Bảng mã của tài nguyên được liên kết đến",
    "cssClasses": "Lớp Stylesheet",
    "emailAddress": "Thư điện tử",
    "emailBody": "Nội dung thông điệp",
    "emailSubject": "Tiêu đề thông điệp",
    "id": "Định danh",
    "info": "Thông tin liên kết",
    "langCode": "Mã ngôn ngữ",
    "langDir": "Hướng ngôn ngữ",
    "langDirLTR": "Trái sang phải (LTR)",
    "langDirRTL": "Phải sang trái (RTL)",
    "menu": "Sửa liên kết",
    "name": "Tên",
    "noAnchors": "(Không có điểm neo nào trong tài liệu)",
    "noEmail": "Hãy đưa vào địa chỉ thư điện tử",
    "noUrl": "Hãy đưa vào đường dẫn liên kết (URL)",
    "other": "<khác>",
    "popupDependent": "Phụ thuộc (Netscape)",
    "popupFeatures": "Đặc điểm của cửa sổ Popup",
    "popupFullScreen": "Toàn màn hình (IE)",
    "popupLeft": "Vị trí bên trái",
    "popupLocationBar": "Thanh vị trí",
    "popupMenuBar": "Thanh Menu",
    "popupResizable": "Có thể thay đổi kích cỡ",
    "popupScrollBars": "Thanh cuộn",
    "popupStatusBar": "Thanh trạng thái",
    "popupToolbar": "Thanh công cụ",
    "popupTop": "Vị trí phía trên",
    "rel": "Quan hệ",
    "selectAnchor": "Chọn một điểm neo",
    "styles": "Kiểu (style)",
    "tabIndex": "Chỉ số của Tab",
    "target": "Đích",
    "targetFrame": "<khung>",
    "targetFrameName": "Tên khung đích",
    "targetPopup": "<cửa sổ popup>",
    "targetPopupName": "Tên cửa sổ Popup",
    "title": "Liên kết",
    "toAnchor": "Neo trong trang này",
    "toEmail": "Thư điện tử",
    "toUrl": "URL",
    "toolbar": "Chèn/Sửa liên kết",
    "type": "Kiểu liên kết",
    "unlink": "Xoá liên kết",
    "upload": "Tải lên"
  },
  "list": {
    "bulletedlist": "Chèn/Xoá Danh sách không thứ tự",
    "numberedlist": "Chèn/Xoá Danh sách có thứ tự"
  },
  "liststyle": {
    "armenian": "Số theo kiểu Armenian",
    "bulletedTitle": "Thuộc tính danh sách không thứ tự",
    "circle": "Khuyên tròn",
    "decimal": "Kiểu số (1, 2, 3 ...)",
    "decimalLeadingZero": "Kiểu số (01, 02, 03...)",
    "disc": "Hình đĩa",
    "georgian": "Số theo kiểu Georgian (an, ban, gan...)",
    "lowerAlpha": "Kiểu abc thường (a, b, c, d, e...)",
    "lowerGreek": "Kiểu Hy Lạp (alpha, beta, gamma...)",
    "lowerRoman": "Số La Mã kiểu thường (i, ii, iii, iv, v...)",
    "none": "Không gì cả",
    "notset": "<không thiết lập>",
    "numberedTitle": "Thuộc tính danh sách có thứ tự",
    "square": "Hình vuông",
    "start": "Bắt đầu",
    "type": "Kiểu loại",
    "upperAlpha": "Kiểu ABC HOA (A, B, C, D, E...)",
    "upperRoman": "Số La Mã kiểu HOA (I, II, III, IV, V...)",
    "validateStartNumber": "Số bắt đầu danh sách phải là một số nguyên."
  },
  "magicline": {
    "title": "Chèn đoạn vào đây"
  },
  "maximize": {
    "maximize": "Phóng to tối đa",
    "minimize": "Thu nhỏ"
  },
  "newpage": {
    "toolbar": "Trang mới"
  },
  "pagebreak": {
    "alt": "Ngắt trang",
    "toolbar": "Chèn ngắt trang"
  },
  "pastetext": {
    "button": "Dán theo định dạng văn bản thuần",
    "title": "Dán theo định dạng văn bản thuần"
  },
  "pastefromword": {
    "confirmCleanup": "Văn bản bạn muốn dán có kèm định dạng của Word. Bạn có muốn loại bỏ định dạng Word trước khi dán?",
    "error": "Không thể để làm sạch các dữ liệu dán do một lỗi nội bộ",
    "title": "Dán với định dạng Word",
    "toolbar": "Dán với định dạng Word"
  },
  "preview": {
    "preview": "Xem trước"
  },
  "print": {
    "toolbar": "In"
  },
  "removeformat": {
    "toolbar": "Xoá định dạng"
  },
  "save": {
    "toolbar": "Lưu"
  },
  "selectall": {
    "toolbar": "Chọn tất cả"
  },
  "showblocks": {
    "toolbar": "Hiển thị các khối"
  },
  "sourcearea": {
    "toolbar": "Mã HTML"
  },
  "specialchar": {
    "options": "Tùy chọn các ký tự đặc biệt",
    "title": "Hãy chọn ký tự đặc biệt",
    "toolbar": "Chèn ký tự đặc biệt"
  },
  "scayt": {
    "btn_about": "Thông tin về SCAYT",
    "btn_dictionaries": "Từ điển",
    "btn_disable": "Tắt SCAYT",
    "btn_enable": "Bật SCAYT",
    "btn_langs": "Ngôn ngữ",
    "btn_options": "Tùy chọn",
    "text_title": ""
  },
  "stylescombo": {
    "label": "Kiểu",
    "panelTitle": "Phong cách định dạng",
    "panelTitle1": "Kiểu khối",
    "panelTitle2": "Kiểu trực tiếp",
    "panelTitle3": "Kiểu đối tượng"
  },
  "table": {
    "border": "Kích thước đường viền",
    "caption": "Đầu đề",
    "cell": {
      "menu": "Ô",
      "insertBefore": "Chèn ô Phía trước",
      "insertAfter": "Chèn ô Phía sau",
      "deleteCell": "Xoá ô",
      "merge": "Kết hợp ô",
      "mergeRight": "Kết hợp sang phải",
      "mergeDown": "Kết hợp xuống dưới",
      "splitHorizontal": "Phân tách ô theo chiều ngang",
      "splitVertical": "Phân tách ô theo chiều dọc",
      "title": "Thuộc tính của ô",
      "cellType": "Kiểu của ô",
      "rowSpan": "Kết hợp hàng",
      "colSpan": "Kết hợp cột",
      "wordWrap": "Chữ liền hàng",
      "hAlign": "Canh lề ngang",
      "vAlign": "Canh lề dọc",
      "alignBaseline": "Đường cơ sở",
      "bgColor": "Màu nền",
      "borderColor": "Màu viền",
      "data": "Dữ liệu",
      "header": "Đầu đề",
      "yes": "Có",
      "no": "Không",
      "invalidWidth": "Chiều rộng của ô phải là một số nguyên.",
      "invalidHeight": "Chiều cao của ô phải là một số nguyên.",
      "invalidRowSpan": "Số hàng kết hợp phải là một số nguyên.",
      "invalidColSpan": "Số cột kết hợp phải là một số nguyên.",
      "chooseColor": "Chọn màu"
    },
    "cellPad": "Khoảng đệm giữ ô và nội dung",
    "cellSpace": "Khoảng cách giữa các ô",
    "column": {
      "menu": "Cột",
      "insertBefore": "Chèn cột phía trước",
      "insertAfter": "Chèn cột phía sau",
      "deleteColumn": "Xoá cột"
    },
    "columns": "Số cột",
    "deleteTable": "Xóa bảng",
    "headers": "Đầu đề",
    "headersBoth": "Cả hai",
    "headersColumn": "Cột đầu tiên",
    "headersNone": "Không có",
    "headersRow": "Hàng đầu tiên",
    "invalidBorder": "Kích cỡ của đường biên phải là một số nguyên.",
    "invalidCellPadding": "Khoảng đệm giữa ô và nội dung phải là một số nguyên.",
    "invalidCellSpacing": "Khoảng cách giữa các ô phải là một số nguyên.",
    "invalidCols": "Số lượng cột phải là một số lớn hơn 0.",
    "invalidHeight": "Chiều cao của bảng phải là một số nguyên.",
    "invalidRows": "Số lượng hàng phải là một số lớn hơn 0.",
    "invalidWidth": "Chiều rộng của bảng phải là một số nguyên.",
    "menu": "Thuộc tính bảng",
    "row": {
      "menu": "Hàng",
      "insertBefore": "Chèn hàng phía trước",
      "insertAfter": "Chèn hàng phía sau",
      "deleteRow": "Xoá hàng"
    },
    "rows": "Số hàng",
    "summary": "Tóm lược",
    "title": "Thuộc tính bảng",
    "toolbar": "Bảng",
    "widthPc": "Phần trăm (%)",
    "widthPx": "Điểm ảnh (px)",
    "widthUnit": "Đơn vị"
  },
  "undo": {
    "redo": "Làm lại thao tác",
    "undo": "Khôi phục thao tác"
  },
  "wsc": {
    "btnIgnore": "Bỏ qua",
    "btnIgnoreAll": "Bỏ qua tất cả",
    "btnReplace": "Thay thế",
    "btnReplaceAll": "Thay thế tất cả",
    "btnUndo": "Phục hồi lại",
    "changeTo": "Chuyển thành",
    "errorLoading": "Lỗi khi đang nạp dịch vụ ứng dụng: %s.",
    "ieSpellDownload": "Chức năng kiểm tra chính tả chưa được cài đặt. Bạn có muốn tải về ngay bây giờ?",
    "manyChanges": "Hoàn tất kiểm tra chính tả: %1 từ đã được thay đổi",
    "noChanges": "Hoàn tất kiểm tra chính tả: Không có từ nào được thay đổi",
    "noMispell": "Hoàn tất kiểm tra chính tả: Không có lỗi chính tả",
    "noSuggestions": "- Không đưa ra gợi ý về từ -",
    "notAvailable": "Xin lỗi, dịch vụ này hiện tại không có.",
    "notInDic": "Không có trong từ điển",
    "oneChange": "Hoàn tất kiểm tra chính tả: Một từ đã được thay đổi",
    "progress": "Đang tiến hành kiểm tra chính tả...",
    "title": "Kiểm tra chính tả",
    "toolbar": "Kiểm tra chính tả"
  }
};

/***/ }),

/***/ "./Resources/assets/sass/account/style.scss":
/*!**************************************************!*\
  !*** ./Resources/assets/sass/account/style.scss ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./Resources/assets/sass/category/style.scss":
/*!***************************************************!*\
  !*** ./Resources/assets/sass/category/style.scss ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./Resources/assets/sass/report/style.scss":
/*!*************************************************!*\
  !*** ./Resources/assets/sass/report/style.scss ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./Resources/assets/sass/transaction/style.scss":
/*!******************************************************!*\
  !*** ./Resources/assets/sass/transaction/style.scss ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),

/***/ "./node_modules/setimmediate/setImmediate.js":
/*!***************************************************!*\
  !*** ./node_modules/setimmediate/setImmediate.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {
    "use strict";

    if (global.setImmediate) {
        return;
    }

    var nextHandle = 1; // Spec says greater than zero
    var tasksByHandle = {};
    var currentlyRunningATask = false;
    var doc = global.document;
    var registerImmediate;

    function setImmediate(callback) {
      // Callback can either be a function or a string
      if (typeof callback !== "function") {
        callback = new Function("" + callback);
      }
      // Copy function arguments
      var args = new Array(arguments.length - 1);
      for (var i = 0; i < args.length; i++) {
          args[i] = arguments[i + 1];
      }
      // Store and register the task
      var task = { callback: callback, args: args };
      tasksByHandle[nextHandle] = task;
      registerImmediate(nextHandle);
      return nextHandle++;
    }

    function clearImmediate(handle) {
        delete tasksByHandle[handle];
    }

    function run(task) {
        var callback = task.callback;
        var args = task.args;
        switch (args.length) {
        case 0:
            callback();
            break;
        case 1:
            callback(args[0]);
            break;
        case 2:
            callback(args[0], args[1]);
            break;
        case 3:
            callback(args[0], args[1], args[2]);
            break;
        default:
            callback.apply(undefined, args);
            break;
        }
    }

    function runIfPresent(handle) {
        // From the spec: "Wait until any invocations of this algorithm started before this one have completed."
        // So if we're currently running a task, we'll need to delay this invocation.
        if (currentlyRunningATask) {
            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a
            // "too much recursion" error.
            setTimeout(runIfPresent, 0, handle);
        } else {
            var task = tasksByHandle[handle];
            if (task) {
                currentlyRunningATask = true;
                try {
                    run(task);
                } finally {
                    clearImmediate(handle);
                    currentlyRunningATask = false;
                }
            }
        }
    }

    function installNextTickImplementation() {
        registerImmediate = function(handle) {
            process.nextTick(function () { runIfPresent(handle); });
        };
    }

    function canUsePostMessage() {
        // The test against `importScripts` prevents this implementation from being installed inside a web worker,
        // where `global.postMessage` means something completely different and can't be used for this purpose.
        if (global.postMessage && !global.importScripts) {
            var postMessageIsAsynchronous = true;
            var oldOnMessage = global.onmessage;
            global.onmessage = function() {
                postMessageIsAsynchronous = false;
            };
            global.postMessage("", "*");
            global.onmessage = oldOnMessage;
            return postMessageIsAsynchronous;
        }
    }

    function installPostMessageImplementation() {
        // Installs an event handler on `global` for the `message` event: see
        // * https://developer.mozilla.org/en/DOM/window.postMessage
        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages

        var messagePrefix = "setImmediate$" + Math.random() + "$";
        var onGlobalMessage = function(event) {
            if (event.source === global &&
                typeof event.data === "string" &&
                event.data.indexOf(messagePrefix) === 0) {
                runIfPresent(+event.data.slice(messagePrefix.length));
            }
        };

        if (global.addEventListener) {
            global.addEventListener("message", onGlobalMessage, false);
        } else {
            global.attachEvent("onmessage", onGlobalMessage);
        }

        registerImmediate = function(handle) {
            global.postMessage(messagePrefix + handle, "*");
        };
    }

    function installMessageChannelImplementation() {
        var channel = new MessageChannel();
        channel.port1.onmessage = function(event) {
            var handle = event.data;
            runIfPresent(handle);
        };

        registerImmediate = function(handle) {
            channel.port2.postMessage(handle);
        };
    }

    function installReadyStateChangeImplementation() {
        var html = doc.documentElement;
        registerImmediate = function(handle) {
            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted
            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.
            var script = doc.createElement("script");
            script.onreadystatechange = function () {
                runIfPresent(handle);
                script.onreadystatechange = null;
                html.removeChild(script);
                script = null;
            };
            html.appendChild(script);
        };
    }

    function installSetTimeoutImplementation() {
        registerImmediate = function(handle) {
            setTimeout(runIfPresent, 0, handle);
        };
    }

    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.
    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);
    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;

    // Don't get fooled by e.g. browserify environments.
    if ({}.toString.call(global.process) === "[object process]") {
        // For Node.js before 0.9
        installNextTickImplementation();

    } else if (canUsePostMessage()) {
        // For non-IE10 modern browsers
        installPostMessageImplementation();

    } else if (global.MessageChannel) {
        // For web workers, where supported
        installMessageChannelImplementation();

    } else if (doc && "onreadystatechange" in doc.createElement("script")) {
        // For IE 6–8
        installReadyStateChangeImplementation();

    } else {
        // For older browsers
        installSetTimeoutImplementation();
    }

    attachTo.setImmediate = setImmediate;
    attachTo.clearImmediate = clearImmediate;
}(typeof self === "undefined" ? typeof global === "undefined" ? this : global : self));

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/timers-browserify/main.js":
/*!************************************************!*\
  !*** ./node_modules/timers-browserify/main.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var scope = (typeof global !== "undefined" && global) ||
            (typeof self !== "undefined" && self) ||
            window;
var apply = Function.prototype.apply;

// DOM APIs, for completeness

exports.setTimeout = function() {
  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);
};
exports.setInterval = function() {
  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);
};
exports.clearTimeout =
exports.clearInterval = function(timeout) {
  if (timeout) {
    timeout.close();
  }
};

function Timeout(id, clearFn) {
  this._id = id;
  this._clearFn = clearFn;
}
Timeout.prototype.unref = Timeout.prototype.ref = function() {};
Timeout.prototype.close = function() {
  this._clearFn.call(scope, this._id);
};

// Does not start the time, just sets up the members needed.
exports.enroll = function(item, msecs) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = msecs;
};

exports.unenroll = function(item) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = -1;
};

exports._unrefActive = exports.active = function(item) {
  clearTimeout(item._idleTimeoutId);

  var msecs = item._idleTimeout;
  if (msecs >= 0) {
    item._idleTimeoutId = setTimeout(function onTimeout() {
      if (item._onTimeout)
        item._onTimeout();
    }, msecs);
  }
};

// setimmediate attaches itself to the global object
__webpack_require__(/*! setimmediate */ "./node_modules/setimmediate/setImmediate.js");
// On some exotic environments, it's not clear which object `setimmediate` was
// able to install onto.  Search each possibility in the same order as the
// `setimmediate` library.
exports.setImmediate = (typeof self !== "undefined" && self.setImmediate) ||
                       (typeof global !== "undefined" && global.setImmediate) ||
                       (this && this.setImmediate);
exports.clearImmediate = (typeof self !== "undefined" && self.clearImmediate) ||
                         (typeof global !== "undefined" && global.clearImmediate) ||
                         (this && this.clearImmediate);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ 0:
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** multi ./Resources/assets/js/transaction/app.js ./Resources/assets/sass/transaction/style.scss ./Resources/assets/sass/account/style.scss ./Resources/assets/sass/category/style.scss ./Resources/assets/sass/report/style.scss ***!
  \**************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! /home/quangha/Documents/Trainee-VNP/Project/Modules/Accounting/Resources/assets/js/transaction/app.js */"./Resources/assets/js/transaction/app.js");
__webpack_require__(/*! /home/quangha/Documents/Trainee-VNP/Project/Modules/Accounting/Resources/assets/sass/transaction/style.scss */"./Resources/assets/sass/transaction/style.scss");
__webpack_require__(/*! /home/quangha/Documents/Trainee-VNP/Project/Modules/Accounting/Resources/assets/sass/account/style.scss */"./Resources/assets/sass/account/style.scss");
__webpack_require__(/*! /home/quangha/Documents/Trainee-VNP/Project/Modules/Accounting/Resources/assets/sass/category/style.scss */"./Resources/assets/sass/category/style.scss");
module.exports = __webpack_require__(/*! /home/quangha/Documents/Trainee-VNP/Project/Modules/Accounting/Resources/assets/sass/report/style.scss */"./Resources/assets/sass/report/style.scss");


/***/ })

/******/ });