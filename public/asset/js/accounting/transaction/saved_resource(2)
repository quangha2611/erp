$(function(){AccountingAccount.load('#companyId','#accountId');ExpenseCategory.load('#companyId','#expenseCategoryId');$('#exportPage').jsExcelExport({'param':{'format':'excel'}});$('#exportAll').jsExcelExport({'param':{'format':'csv'}});$('#accountId').select2();$('#expenseCategoryId').select2();$('#createdByName').on('change',function(){if(!$('#createdByName').val()){$('#createdById').val('');}});$('#createdByName').autocomplete({source:function(request,response){$.post('/system/user/suggest',{'q':request.term,'companyId':$('#companyId').val()},function(rs){if(rs.code){response(rs.data);}});},minLength:2,select:function(event,ui){$('#createdById').val(ui.item.id);},});$('#approvedByName').on('change',function(){if(!$('#approvedByName').val()){$('#approvedById').val('');}});$('#approvedByName').autocomplete({source:function(request,response){$.post('/system/user/suggest',{'q':request.term,'companyId':$('#approvedById').val()},function(rs){if(rs.code){response(rs.data);}});},minLength:2,select:function(event,ui){$('#approvedById').val(ui.item.id);},});$('.delete-item').on('click',function(){$('#deleteModal').modal('show');var transactionId=$(this).attr('data-id');$('#transactionId').empty().val(transactionId);});$('#deleteModal').on('click','.deleteItem',function(){$.post('/accounting/transaction/delete',{id:$('#transactionId').val(),},function(rs){if(rs.code==0){$('#deleteModal').modal('hide');$('#alertModal').modal('show');$('#alertModal .modal-body').empty().append("<div class='alert alert-warning alert-dismissable'>"+rs.messages+"</div>");}else{window.location.reload();}});});});